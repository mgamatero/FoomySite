"use strict";define([],function(e){var t=e("zmText"),a=e("zmail.Core.Namespaces").create("zmail.topHelpMenu"),o=t.get("helpMenuUtil").topHelpMenu;return a.topHelpList=function(e){var t;return e&&e.isWhatsNewVisible?(t=zdom("span",null,o.Whats).outerHTML,t+=zdom("span",{className:"zmWNtext"},o.New).outerHTML):t=zdom("span",null,o.WhatsNew),[{txt:o.Help,data:{action:"Help",id:"ztb-helpLink"},name:"Help",dataId:"help"},{txt:o.Tour,data:{id:"ztb-tour",action:"Tour"},dataId:"Tour",name:"Tour"},{sep:!0},{dom:t,data:{id:"whatsNew",action:"whatsNew"},dataId:"whatsNew",name:"WhatsNew"},{txt:o.About,data:{id:"ztb-about",action:"About"},dataId:"About",name:"About"},{txt:o.Blogs,data:{id:"ztb-blogs",action:"Blogs"},dataId:"Blog",name:"Blog"},{sep:!0},{txt:o.Forums,data:{id:"ztb-forums",action:"Forums"},dataId:"Forums",name:"Forums"},{txt:o.Feedback,data:{id:"ztb-feedback",action:"Feedback"},dataId:"Feedback",name:"Feedback"}]},a}),define([],function(e){var t=e("zmail.Core.Namespaces").get("zmail.topHelpMenu");return t.init=function(e){zmail.topHelpMenu.core(e)},t}),define([],function(t){var o,a,u,p,l,c,e=t("zmail.Core.Namespaces"),n=t("_zm"),i=t("zmText").get("helpMenuUtil").topHelpMenu,m=t("zmail.Utils.DOM"),s=e.get("zmail.topHelpMenu");l=function(){var e=a[0].querySelectorAll("[data-id='whatsNew']");m.clearHTML(e),e.text(i.whatsNew)};return c=function(e){switch(a=m.selector("#zm_dropDown"),e.action){case"Help":n.windowOpen(zmail.urls.helpURL);break;case"Tour":t("zmUtil").loadMailTour("allApp");break;case"whatsNew":p&&p.isWhatsNewVisible&&p.callback(),n.windowOpen(zmail.urls.whatsNew);break;case"About":n.windowOpen(zmail.urls.zohoWebsiteLink);break;case"Blogs":n.windowOpen(zmail.urls.blogURL);break;case"Forums":n.windowOpen(zmail.urls.forumURL);break;case"Feedback":zmAppSuite.loadNewFeedback()}u.removeClass("sel"),m.unmount(a,!0),zmModules.getRHSModule().then(function(e){(0,e.rhs)().rhsBar.getApp("HelpMenu").unSelect()})},o=function(e){var t,a,o,l=zmail.topHelpMenu.topHelpList(p),n=Object.keys(e),i=n.length;for(a=0;a<i;a++)for(t=l.length,o=0;o<t;o++)n[a]===l[o].name&&(l.splice(o,1),t=l.length);var s=m.selector(".zmRhsNav");u=s.find("li");zmail.isRebranded&&(delete l[0],delete l[1]);var r=s.find(".msi-faq"),d={par:r,top:r[0].getBoundingClientRect().top+parseInt(r.css("padding-top")),list:l,clk:c,defaultclass:!1,direction:"right",showArrow:!0,onHide:function(){$.publish("zmTopBar/navbarIcon/close"),zmModules.getRHSModule().then(function(e){(0,e.rhs)().rhsBar.getApp("HelpMenu").unSelect()})}};zmDropDownMenu.show(d)},s.core=function(e){var t={Feedback:!1,Tour:!1},a=zmail.Utils.FeatureUtil;p=e,a.isHidden("FeedbackForm")||delete t.Feedback,(zmail.isRebranded?(t.Help=!1,t.WhatsNew=!1,t.About=!1,t.Blog=!1,t.Forums=!1,t.sep=!1):!0!==zmail.hideZohoApps)&&(delete t.Tour,zmail.Utils.FeatureUtil.isHidden("whatsNew")||delete t.whatsNew),$.subscribe("/whatsSeen/hide",l),o(t)},s});