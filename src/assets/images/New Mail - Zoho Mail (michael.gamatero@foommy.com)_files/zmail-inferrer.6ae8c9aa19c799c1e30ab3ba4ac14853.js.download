"use strict";!function(){var t=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(babelHelpers.classCallCheck(this,t),!(this instanceof t))return new t(e);Object.assign(this,this.defaults(),e)}return babelHelpers.createClass(t,[{key:"defaults",value:function(){return{name:"",valueStartsWith:function(){}}}}]),t}(),e=zmail.Search.Dependencies,i=e.ExternalDependency,n=(e.MailDependency,zmail.Maps),a=(n.DelimitedMap,n.Map,zmail),o=(a.Traverser,a.Paginator,{}),s=[],r={TYPES:o,TYPE_NAMES:s,register:function(e){return i.isArray(e)||(e=[e]),e.forEach(function(e){e instanceof t||(e=new t(e)),e.name in o||(o[e.name]=e,s.push(e.name))}),this},infer:function(r){return s.reduce(function(e,t){var n=o[t];if(n){var a=n.valueStartsWith(r);i.isEmpty(a)||(e[n.name]=i.isArray(a)?a[0]:a)}return e},{})}},u="WEEKS_DAYS",l="MONTHS",f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].map(function(e,t){return{name:e,display:"last "+e,value:t,type:u,__date:!0}});f=f.concat(["january","february","march","april","may","june","july","august","september","october","november","december"].map(function(e,t){return{name:e,display:"last "+e,value:t,type:l,__date:!0}}));var c,m,d,p=(m=function(){return new Date},d=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m();return e.setHours(0,0,0,0),e.setHours(23,59,59,0),e},(c={}).dayAgo=function(e,t){return e=void 0!==e?e:-1,(t=t||d()).setDate(t.getDate()+e),t},c.monthAgo=function(e,t){return e=void 0!==e?e:-1,(t=t||d()).setMonth(t.getMonth()+e),t},c.yearAgo=function(e,t){return e=void 0!==e?e:-1,(t=t||d()).setFullYear(t.getFullYear()+e),t},c.today=function(){return d()},c.lastDay=function(e){var t=m(),n=e.value-t.getDay();return c.dayAgo(n,t),0<=n&&c.dayAgo(-7,t),d(t)},c.lastMonth=function(e){var t=m(),n=e.value-t.getMonth();c.monthAgo(n,t),0<=n&&c.yearAgo(-1,t);var a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m().getFullYear();return new Date(t,e+1,0).getDate()}(t.getMonth())-t.getDate();return c.dayAgo(a,t),d(t)},c.toDate=function(e){return e instanceof Date?e:e.type===u?c.lastDay(e):e.type===l?c.lastMonth(e):void 0},c);(zmail.ValueTypeInferrer=r).register({name:"String",valueStartsWith:function(e){if(e&&i.isString(e))return e}}),r.register({name:"Number",valueStartsWith:function(e){if(e&&i.isNumber(e))return e}}),r.register({name:"EntityType",valueStartsWith:function(t){if(t)return i.underscoreJSWrapper(["all","emails","notes","tasks","events","messages","bookmarks"]).find(function(e){return 0===e.toLowerCase().indexOf(t)})}}),r.register({name:"AttachmentType",values:["doc","docx","sxw","odt","rtf","txt","js","java","css","jsp","jspf","json","c","cpp","xml","go","eml","sh","bat","log","pps","ppt","pptx","odp","sxi","xls","xlsx","sxc","ods","csv","tsv","mp3","mpa","wma","wav","ra","m3u","m4a","avi","flv","mp4","mpg","wmv","vob","swf","mov","3gp","rm","pdf","zip","rar","jpg","jpeg","gif","png","bmp","ics"],valueStartsWith:function(t){if(t)return t=t.toLowerCase(),i.underscoreJSWrapper(this.values).find(function(e){return 0===e.indexOf(t)})}}),r.register({name:"AttachmentDocType",values:["Images","Documents","Media","Compressed","Others"],valueStartsWith:function(t){if(t)return t=t.toLowerCase(),i.underscoreJSWrapper(this.values).find(function(e){return 0===e.indexOf(t)})}}),r.register({name:"AttachmentEntityFilter",values:["Mail","Notes","Task","Event","Message","Bookmarks"],valueStartsWith:function(t){if(t)return t=t.toLowerCase(),i.underscoreJSWrapper(this.values).find(function(e){return 0===e.indexOf(t)})}}),r.register([{name:"Date",toDate:function(e){return p.toDate(e)},valueStartsWith:function(t){if(t)return t=t.toLowerCase(),i.underscoreJSWrapper(f).find(function(e){return 0===e.name.toLowerCase().indexOf(t)})}}]),r.register([{name:"SavedSearch",valueStartsWith:function(t){if(t)return t=t.toLowerCase(),_(_.toArray(zmail.savedSearchList)).find(function(e){return e.FN&&0===e.FN.toLowerCase().indexOf(t)})}},{name:"StreamsLink",valueStartsWith:function(e){if(e&&zmUtil.isValidStreamsUrl(e))return e}},{name:"Link",valueStartsWith:function(e){if(e&&/((?=http|https)[\S]*:\/\/[\S]*.+)|([\S]*(?:\w{2}\.\w+\.\w+)[\S]*)/gi.test(e))return e}},{name:"Contact",valueStartsWith:function(e){if(e){var t=zmail.ContactBook.getMostUsedContacts(e);if(!_.isEmpty(t))return t;var n={promise:!1,str:e};return t=zmail.ContactBook.get(n),_.isEmpty(t)&&zmail.Utils.EmailValidator.validate(e).status&&(t=[{value:e,notPresentInContacts:!0,disableSelectionOfText:!0,validatedEmail:e}]),t}}},{name:"Group",valueStartsWith:function(e){if(e)return zmail.ContactBook.getGroups(e,{containsSearch:!0,includeAllGroups:!0})}},{name:"NoteColor",valueStartsWith:function(t){if(t)return _(zmUtil.noteColorArray).find(function(e){return e.dispname&&0===e.dispname.toLowerCase().indexOf(t)})}},{name:"HashTag",valueStartsWith:function(t){if(t)return"#"===(t=t.toLowerCase()).charAt(0)&&(t=t.substring(1,t.length)),_(zmStreamsApp.GroupApp.fetchHashTags()).find(function(e){return e.name&&0===e.name.toLowerCase().indexOf(t)})}},{name:"Folder",valueStartsWith:function(t){if(t)return t=t.toLowerCase(),_(zmfolAction.getMailFolderPaths()).find(function(e){return e.path&&-1!==e.path.toLowerCase().indexOf(t)})}},{name:"sharedFolder",valueStartsWith:function(t){if(t)return t=t.toLowerCase(),_(zmfolAction.getSharedFolPaths()).find(function(e){return e.path&&-1!==e.path.toLowerCase().indexOf(t)})}},{name:"Tag",valueStartsWith:function(t){if(t)return t=t.toLowerCase(),_(_.toArray(zmail.labInfo)).find(function(e){return e.label&&0===e.label.toLowerCase().indexOf(t)})}},{name:"MailView",supportedValues:[{name:"Unread",id:"zm_unread"},{name:"All messages",id:"zm_all"},{name:"Flagged",id:"zm_flag"}],valueStartsWith:function(t){if(t)return t=t.toLowerCase(),_(this.supportedValues).find(function(e){return e.name&&0===e.name.toLowerCase().indexOf(t)})}},{name:"MailSize",valueStartsWith:function(e){if("string"==typeof e&&(e=e.replace(/ /gi,""),new RegExp("^[0-9]+(k?|m?)b?$","i").test(e)))return e}}]),Object.assign(r.TYPES,{BaseValueType:t})}(),window.__rollupModule=void 0;