"use strict";!function(){var t={width:"40px"},e=zmText.get("newZmSchedule"),a=e.months,n=e.days,r=e.recurring,i=e.common,c=e.schedule,l=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"constuctRecurranceParent",value:function(){var e=zdom("div",{className:"zmHideD",ref:"recParent"});return _zm.getDOMReferenceMap(e)}},{key:"getDaysList",value:function(){return[n.sun,n.mon,n.tue,n.wed,n.thu,n.fri,n.sat]}},{key:"getWeekDaysList",value:function(){return[n.sunday,n.monday,n.tuesday,n.wednesday,n.thursday,n.friday,n.saturday]}},{key:"getEveryWeekEnds",value:function(){return[r.first,r.second,r.third,r.fourth,r.last]}},{key:"getRepeatType",value:function(){return[r.daily,r.weekly,r.monthly,r.yearly]}},{key:"getRepeatMode",value:function(){return[r.nodt,r.until,r.noof]}},{key:"getMonths",value:function(){return[a.jan,a.feb,a.mar,a.apl,a.may,a.jun,a.jul,a.aug,a.sep,a.oct,a.nov,a.dec]}},{key:"getRepeatLimitMapping",value:function(){return{0:2,1:1,2:3}}},{key:"getReverseRepeatLimitMapping",value:function(){return{2:0,1:1,3:2}}},{key:"constructSelectDOM",value:function(e,a){return zdom("option",{value:a},e)}},{key:"mountRepeatModeDOM",value:function(){var t=this,n=zdom("select",{onChange:t.repeatModeChangeBind()});t.repeatTypes=t.getRepeatType(),t.repeatModes=t.getRepeatMode(),t.RecurranceViewBase.repeatModeDOM=n,t.repeatTypes.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.RecurranceViewBase.repeatTypePar).appendDOM(n),n=zdom("select",{onChange:t.repeatLimitChangeBind()}),t.RecurranceViewBase.repeatTypeDOM=n,t.repeatModes.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.RecurranceViewBase.repeatLimitPar).appendDOM(n)}},{key:"mountMonthlyDetailRepeatDOM",value:function(){var t=this,n=zdom("select",{onChange:t.monthlyRepeatWeekEndBind()});t.DetailMonthView.weekEndDOM=n,t.EveryWeekEnds=t.getEveryWeekEnds(),t.FullWeedDays=t.getWeekDaysList(),t.EveryWeekEnds.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.DetailMonthView.dateStr).appendDOM(n),n=zdom("select",{onChange:t.monthlyRepeatWeedDaysBind()}),t.DetailMonthView.WeekDaysDOM=n,t.FullWeedDays.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.DetailMonthView.dayStr).appendDOM(n)}},{key:"mountYearlyDetailRepeatDOM",value:function(){var t=this,n=zdom("select",{onChange:t.yearlyRepeatMonthBind()});t.EveryMonths=t.getMonths(),t.EveryMonths.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.YearViewParent.monthStr).appendDOM(n),t.YearViewParent.MonthDOM=n,n=zdom("select",{onChange:t.yearlyWeekEndBind()}),t.EveryWeekEnds.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.DetailYearView.dateStr).appendDOM(n),t.DetailYearView.WeekEndDOM=n,n=zdom("select",{onChange:t.yearlyWeekDaysBind()}),t.FullWeedDays.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.DetailYearView.dayStr).appendDOM(n),t.DetailYearView.daysDOM=n,n=zdom("select",{onChange:t.yearlyMonthBind()}),t.EveryMonths.forEach(function(e,a){$.e(n).appendDOM(t.constructSelectDOM(e,a))}),$.e(t.DetailYearView.monthStr1).appendDOM(n),t.DetailYearView.MonthDOM=n}},{key:"constructRecurranceView",value:function(){var e=this;if(e.RecurringViewParent=e.constuctRecurranceParent(),e.RecurranceViewBase=e.constructRecurranceBaseView(),e.DailyRecParent=e.constructDailyView(),e.DailyWeekParent=e.constructEveryWeekendView(),e.DailyViewParent=e.constructWeeklyView(),e.MonthlyViewParent=e.constructMonthlyViewParent(),e.DetailMonthView=e.constructDetailMonthView(),e.YearViewParent=e.constructYearlyView(),e.DetailYearView=e.constructDetailYearView(),e.RecurranceBtnView=e.constructButtonComp(),e.RecurranceDateTime=e.constructDateTimeComponent(),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.DailyRecParent.dailyRecParent),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.DailyWeekParent.dailyWeekDay),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.DailyViewParent.weeklyRepeatDays),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.constructWeekDaysViewParent().weekDaysPar),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.MonthlyViewParent.monthViewPar),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.DetailMonthView.monthlyRepeatPar),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.YearViewParent.yearlyViewPar),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.DetailYearView.yearlyDetailViewPar),$.e(e.RecurringViewParent.recParent).appendDOM(e.RecurranceViewBase.recBaseParent),"task"===e.component?($.e(e.RecurringViewParent.recParent).removeClass("zmHideD"),$.e(e.RecurringViewParent.recParent).appendDOM(e.RecurranceBtnView.BtnContainer),e.bindSaveForRecurring(e.RecurranceBtnView.saveBtn),e.bindClearForRecurring(e.RecurranceBtnView.clearBtn)):($.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.constructSeperatorComponent()),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.RecurranceDateTime.recDateTimePar),$.e(e.RecurranceViewBase.recBaseParent).appendDOM(e.constructSeperatorComponent()),e.dialogReference.$els.$content[0].contains(e.RecurringViewParent.recParent)&&$.e(e.RecurringViewParent.recParent).remove(),$.e(e.dialogReference.$els.$content).appendDOM(e.RecurringViewParent.recParent)),e.mountRepeatModeDOM(),e.mountMonthlyDetailRepeatDOM(),e.mountYearlyDetailRepeatDOM(),e.bindRecurranceEvents(),e.reRenderRecurranceView(),e.renderViewBasedOnUserInput(),"task"===e.component)return $.e(e.RecurringViewParent.recParent)}},{key:"constructRecurranceBaseView",value:function(){var e=zdom("ul",{ref:"recBaseParent",className:"SC_schd zmMenuList"},zdom("div",null,zdom("li",null,zdom("b",null,r.title)),zdom("li",null,zdom("div",null,zdom("div",{className:"SC_dib"},zdom("div",{ref:"repeatTypePar",className:"SC_select repeatType"})),zdom("div",{className:"SC_dib"},zdom("div",{ref:"repeatLimitPar",className:"SC_select repeatType"})),zdom("div",{ref:"date",className:"SC_dib ZM_date zmHideD"},zdom("input",{style:t,maxLength:"2","data-type":"date",type:"text",className:"SC_input",ref:"dateInput",readOnly:!0})),zdom("div",{className:"SC_dib repeatCount zmHideD",ref:"times"},zdom("input",{type:"text",ref:"timeInput",style:t,onChange:this.repeatDaysCountChangeBind()}))))));return _zm.getDOMReferenceMap(e)}},{key:"constructDailyView",value:function(){var e=zdom("li",{ref:"dailyRecParent",className:"checkBox","data-set":"true",onClick:this.dailyRepeatFrequencyEnableBind()},zdom("div",{className:"SC_dib"},zdom("i",{ref:"dailyRec",className:"msi-option SC_thm"}),r.recurev),zdom("div",{className:"SC_dib"},zdom("input",{maxLength:"3",type:"text",className:"repeatFrequency SC_input",style:t,ref:"dailyRepeatFrequency",onChange:this.dailyRepeatFrequencyBind()})),"day(s) on");return _zm.getDOMReferenceMap(e)}},{key:"constructEveryWeekendView",value:function(){var e=zdom("li",{ref:"dailyWeekDay",className:"checkBox","data-set":"true",onClick:this.dailyRepeatOnlyOnWeekDaysBind()},zdom("i",{ref:"dailyRepeatOnlyOnWeekDays",className:"msi-option SC_thm"}),r.evweek);return _zm.getDOMReferenceMap(e)}},{key:"constructWeeklyView",value:function(){var e=zdom("li",{className:this.CLASS_CONSTANTS.hide,ref:"weeklyRepeatDays","data-set":"true"},zdom("div",{className:"SC_dib"},r.recurev),zdom("div",{className:"SC_dib"},zdom("input",{maxLength:"3",onChange:this.weeklyRecurBind(),style:t,ref:"weeklyRecur",type:"text",className:"weeklyRepeatDays"})),"week(s) on");return _zm.getDOMReferenceMap(e)}},{key:"constructIndividualDays",value:function(e,a){return zdom("div",{className:"SC_ft90","data-attr":a},zdom("i",{"data-attr":a,className:this.CLASS_CONSTANTS.uncheck}),e)}},{key:"constructWeekDaysViewParent",value:function(){var t=this;t.daysList=t.getDaysList();var e=zdom("li",{className:t.CLASS_CONSTANTS.hide,ref:"weekDaysPar"});return t.weekDaysParent=_zm.getDOMReferenceMap(e),t.daysList.forEach(function(e,a){$.e(t.weekDaysParent.weekDaysPar).appendDOM(t.constructIndividualDays(e,a))}),t.weekDaysParent}},{key:"constructMonthlyViewParent",value:function(){var e=["checkBox",this.CLASS_CONSTANTS.hide].join(" "),a=zdom("li",{onClick:this.monthlyRepeatDayParBind(),ref:"monthViewPar",className:e,"data-set":"true"},zdom("div",{className:"SC_dib"},zdom("i",{ref:"day",className:"msi-option SC_thm"}),i.day),zdom("input",{maxLength:"2",ref:"monthlyRepeatDay",style:t,onChange:this.monthRepeatDayBind(),type:"text",className:"monthlyRepeatDay"}),zdom("div",{className:"SC_dib"},r.ofevery),zdom("input",{maxLength:"2",ref:"monthlyRepeatFrequency",style:t,onChange:this.monthRepeatMonthBind(),type:"text",className:"monthlyRepeatFrequency"}),"month(s)");return _zm.getDOMReferenceMap(a)}},{key:"constructDetailMonthView",value:function(){var e=["checkBox",this.CLASS_CONSTANTS.hide].join(" "),a=zdom("li",{onClick:this.monthlyRepeatBind(),ref:"monthlyRepeatPar",className:e,"data-set":"true"},zdom("i",{ref:"detailView",className:"msi-unoption"}),i.on,zdom("div",{className:"SC_select",ref:"dateStr"}),zdom("div",{ref:"dayStr",className:"SC_select SC_dib"}),zdom("div",{className:"SC_dib"},r.ofevery),zdom("input",{maxLength:"2",ref:"monthRepeatFreq",onChange:this.monthlyRepeatMonthBind(),style:t,type:"text",className:"monthRepeatFreq"}),"month(s)");return _zm.getDOMReferenceMap(a)}},{key:"constructYearlyView",value:function(){var e=["checkBox",this.CLASS_CONSTANTS.hide].join(" "),a=zdom("li",{onClick:this.yearlyRepeatDayBind(),ref:"yearlyViewPar",className:e,"data-set":"true"},zdom("i",{ref:"every",className:"msi-option SC_thm"}),r.every,zdom("div",{className:"SC_select SC_dib",ref:"monthStr"}),zdom("div",{className:"SC_dib"},zdom("input",{maxLength:"2",ref:"yearlyRepeatDay",style:t,onChange:this.yearlyRepeatDaysBind(),type:"text",className:"yearlyRepeatDay"})));return _zm.getDOMReferenceMap(a)}},{key:"constructDetailYearView",value:function(){var e=["checkBox",this.CLASS_CONSTANTS.hide].join(" "),a=zdom("li",{onClick:this.yearlyRepeatDayOfMonthBind(),ref:"yearlyDetailViewPar",className:e,"data-set":"true"},zdom("i",{ref:"every",className:"msi-option SC_thm"}),r.every,zdom("div",{className:"SC_select",ref:"dateStr"}),zdom("div",{className:"SC_select SC_dib",ref:"dayStr"}),r.of,zdom("div",{className:"SC_select",ref:"monthStr1"}));return _zm.getDOMReferenceMap(a)}},{key:"constructButtonComp",value:function(){var e=zdom("div",{ref:"BtnContainer",className:"SC_PUbtm SC_rbuttons SC_p10"},zdom("span",{ref:"saveBtn",className:"SC_rok"},i.save),zdom("div",{className:"SC_frt SC_link SC_thm SC_rclr zmHideD",ref:"clearBtn"},i.clear));return _zm.getDOMReferenceMap(e,!0)}},{key:"constructSeperatorComponent",value:function(){return zdom("li",{className:"SC_lne"})}},{key:"constructDateTimeComponent",value:function(){var e=zdom("li",{className:"nohr",ref:"recDateTimePar"},zdom("div",{className:"SC_dib"},r.starfdt),zdom("div",{className:"ZM_rdate SC_dib"},zdom("input",{ref:"recDate",type:"text",className:"SC_input",readOnly:"true","data-type":"date"})),zdom("div",{className:"ZM_rtime SC_dib"},zdom("input",{type:"text",ref:"recTime",className:"SC_input",onChange:this.RecurranceDateChangeBind(),"data-type":"time"})),zdom("div",{ref:"timezonePicker",className:"SC_floatLabel flFLabel flBox  zmSelect zmIconLabel"},zdom("i",{className:"msi-timezone SC_thm"}),zdom("span",{ref:"timezone"},this.Recurrance.timezone.timezone),zdom("label",null,c.selectTimeZone)));return _zm.getDOMReferenceMap(e)}},{key:"reRenderRecurranceView",value:function(){var a=this,e=a.Recurrance,t=a.CLASS_CONSTANTS.hide,n=e.repeatLimit,r=e.repeatType;"0"===n.toString()?(a.addClassToNodes([a.RecurranceViewBase.date,a.RecurranceViewBase.times],t),$.e(a.RecurranceViewBase.repeatTypeDOM).val("0")):"1"===n.toString()?(a.removeClassFromNodes(a.RecurranceViewBase.date,t),a.addClassToNodes(a.RecurranceViewBase.times,t),$.e(a.RecurranceViewBase.repeatTypeDOM).val("1"),$.e(a.RecurranceViewBase.dateInput).val(e.repeatBetweenDays)):"2"===n.toString()&&(a.addClassToNodes(a.RecurranceViewBase.date,t),a.removeClassFromNodes(a.RecurranceViewBase.times,t),$.e(a.RecurranceViewBase.repeatTypeDOM).val("2"),$.e(a.RecurranceViewBase.timeInput).val(e.repeatDaysCount)),"0"===r.toString()?(a.removeClassFromNodes([a.DailyRecParent.dailyRecParent,a.DailyWeekParent.dailyWeekDay],t),a.addClassToNodes([a.DailyViewParent.weeklyRepeatDays,a.weekDaysParent.weekDaysPar,a.MonthlyViewParent.monthViewPar,a.DetailMonthView.monthlyRepeatPar,a.YearViewParent.yearlyViewPar,a.DetailYearView.yearlyDetailViewPar],t),$.e(a.RecurranceViewBase.repeatModeDOM).val("0")):"1"===r.toString()?(a.removeClassFromNodes([a.DailyViewParent.weeklyRepeatDays,a.weekDaysParent.weekDaysPar],t),a.addClassToNodes([a.DailyRecParent.dailyRecParent,a.DailyWeekParent.dailyWeekDay,a.MonthlyViewParent.monthViewPar,a.DetailMonthView.monthlyRepeatPar,a.YearViewParent.yearlyViewPar,a.DetailYearView.yearlyDetailViewPar],t),$.e(a.RecurranceViewBase.repeatModeDOM).val("1")):"2"===r.toString()?(a.removeClassFromNodes([a.MonthlyViewParent.monthViewPar,a.DetailMonthView.monthlyRepeatPar],t),a.addClassToNodes([a.DailyRecParent.dailyRecParent,a.DailyWeekParent.dailyWeekDay,a.DailyViewParent.weeklyRepeatDays,a.weekDaysParent.weekDaysPar,a.YearViewParent.yearlyViewPar,a.DetailYearView.yearlyDetailViewPar],t),$.e(a.RecurranceViewBase.repeatModeDOM).val("2")):"3"===r.toString()&&(a.addClassToNodes([a.DailyRecParent.dailyRecParent,a.DailyWeekParent.dailyWeekDay,a.DailyViewParent.weeklyRepeatDays,a.weekDaysParent.weekDaysPar,a.MonthlyViewParent.monthViewPar,a.DetailMonthView.monthlyRepeatPar],t),a.removeClassFromNodes([a.YearViewParent.yearlyViewPar,a.DetailYearView.yearlyDetailViewPar],t),$.e(a.RecurranceViewBase.repeatModeDOM).val("3")),$.e(a.RecurranceDateTime.recDate).val(a.Recurrance.repeatDate),$.e(a.RecurranceDateTime.recTime).val(a.Recurrance.repeatTime),$.e(a.RecurranceDateTime.timezone).text(zmail.timezoneList[a.Recurrance.timezone.attr]);var i=e.daily;a.addClassToNodes([a.DailyRecParent.dailyRec,a.DailyWeekParent.dailyRepeatOnlyOnWeekDays],a.CLASS_CONSTANTS.unoption),a.removeClassFromNodes([a.DailyRecParent.dailyRec,a.DailyWeekParent.dailyRepeatOnlyOnWeekDays],a.CLASS_CONSTANTS.option),$.e(a.DailyRecParent.dailyRepeatFrequency).val(i.dailyRepeatFrequency),i.repeatEveryWeek?(a.addClassToNodes([a.DailyWeekParent.dailyRepeatOnlyOnWeekDays],a.CLASS_CONSTANTS.option),a.removeClassFromNodes([a.DailyWeekParent.dailyRepeatOnlyOnWeekDays],a.CLASS_CONSTANTS.unoption)):(a.removeClassFromNodes([a.DailyRecParent.dailyRec],a.CLASS_CONSTANTS.unoption),a.addClassToNodes([a.DailyRecParent.dailyRec],a.CLASS_CONSTANTS.option),$.e(a.DailyRecParent.dailyRepeatFrequency).val(i.dailyRepeatFrequency));var c,l,s=e.weekly,o=a.recurranceValues.weekly.removed,u=a.recurranceValues.weekly.existing,d=a.CLASS_CONSTANTS.check,y=a.CLASS_CONSTANTS.uncheck;$.e(a.DailyViewParent.weeklyRecur).val(s.dailyRepeatFrequency),o.forEach(function(e){c=$.e(a.weekDaysParent.weekDaysPar).find("[data-attr='"+e+"']"),a.removeClassFromNodes([c[1]],d),a.addClassToNodes([c[1]],y)}),u.forEach(function(e){l=$.e(a.weekDaysParent.weekDaysPar).find("[data-attr='"+e+"']"),a.addClassToNodes([l[1]],d),a.removeClassFromNodes([l[1]],y)});var m=a.Recurrance.monthly;$.e(a.MonthlyViewParent.monthlyRepeatDay).val(m.monthlyRepeatDay.day),$.e(a.MonthlyViewParent.monthlyRepeatFrequency).val(m.monthlyRepeatDay.month),$.e(a.DetailMonthView.monthRepeatFreq).val(m.monthlyRepeat.month),$.e(a.DetailMonthView.weekEndDOM).val(m.monthlyRepeat.weekend),$.e(a.DetailMonthView.WeekDaysDOM).val(m.monthlyRepeat.day),m.monthlyRepeatDay.enable?(a.addClassToNodes([a.MonthlyViewParent.day],a.CLASS_CONSTANTS.option),a.removeClassFromNodes([a.MonthlyViewParent.day],a.CLASS_CONSTANTS.unoption),a.addClassToNodes([a.DetailMonthView.detailView],a.CLASS_CONSTANTS.unoption),a.removeClassFromNodes([a.DetailMonthView.detailView],a.CLASS_CONSTANTS.option),$.e(a.MonthlyViewParent.monthlyRepeatDay).val(m.monthlyRepeatDay.day),$.e(a.MonthlyViewParent.monthlyRepeatFrequency).val(m.monthlyRepeatDay.month)):(a.addClassToNodes([a.MonthlyViewParent.day],a.CLASS_CONSTANTS.unoption),a.removeClassFromNodes([a.MonthlyViewParent.day],a.CLASS_CONSTANTS.option),a.removeClassFromNodes([a.DetailMonthView.detailView],a.CLASS_CONSTANTS.unoption),a.addClassToNodes([a.DetailMonthView.detailView],a.CLASS_CONSTANTS.option),$.e(a.DetailMonthView.monthRepeatFreq).val(m.monthlyRepeat.month),$.e(a.DetailMonthView.weekEndDOM).val(m.monthlyRepeat.weekend),$.e(a.DetailMonthView.WeekDaysDOM).val(m.monthlyRepeat.day));var h=a.Recurrance.yearly;$.e(a.YearViewParent.yearlyRepeatDay).val(h.yearlyRepeatDay.day),$.e(a.YearViewParent.MonthDOM).val(h.yearlyRepeatDay.month),$.e(a.DetailYearView.WeekEndDOM).val(h.yearlyRepeatDayOfMonth.week),$.e(a.DetailYearView.daysDOM).val(h.yearlyRepeatDayOfMonth.day),$.e(a.DetailYearView.MonthDOM).val(h.yearlyRepeatDayOfMonth.month),h.yearlyRepeatDay.enable?(a.removeClassFromNodes([a.YearViewParent.every],a.CLASS_CONSTANTS.unoption),a.addClassToNodes([a.YearViewParent.every],a.CLASS_CONSTANTS.option),a.addClassToNodes([a.DetailYearView.every],a.CLASS_CONSTANTS.unoption),a.removeClassFromNodes([a.DetailYearView.every],a.CLASS_CONSTANTS.option),$.e(a.YearViewParent.yearlyRepeatDay).val(h.yearlyRepeatDay.day),$.e(a.YearViewParent.MonthDOM).val(h.yearlyRepeatDay.month)):(a.addClassToNodes([a.YearViewParent.every],a.CLASS_CONSTANTS.unoption),a.removeClassFromNodes([a.YearViewParent.every],a.CLASS_CONSTANTS.option),a.removeClassFromNodes([a.DetailYearView.every],a.CLASS_CONSTANTS.unoption),a.addClassToNodes([a.DetailYearView.every],a.CLASS_CONSTANTS.option),$.e(a.DetailYearView.WeekEndDOM).val(h.yearlyRepeatDayOfMonth.week),$.e(a.DetailYearView.daysDOM).val(h.yearlyRepeatDayOfMonth.day),$.e(a.DetailYearView.MonthDOM).val(h.yearlyRepeatDayOfMonth.month))}}]),e}(),s=zmText.get("newZmSchedule"),o=s.common,u=s.schedule,d=s.tab,y=function(e){function i(){var e,a;babelHelpers.classCallCheck(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(i)).call.apply(e,[this].concat(n))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"CLASS_CONSTANTS",{option:"msi-option SC_thm",unoption:"msi-unoption",check:"msi-check",uncheck:"msi-uncheck",hide:"zmHideD"}),a}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"defineDialogProps",value:function(){var t=this;return{defaultCloseIcon:!0,defaultNavigator:!1,ignoreMouseDown:!1,removePreviousDialog:!0,dialogDidMount:function(e,a){t.dialogReference=e,t.afterDialogMounted(e,a)},closeAction:function(){t.resetInitialValues(),t.active=!1},buttons:[{name:o.save,isSelected:!0,callback:function(){t.updateReferenceForComponents(!0)&&(t.updateInvokerDefinedNode(),t.updateInstanceReferences(),t.dialogReference.remove(),t.active=!1,t.callback instanceof Function&&t.callback("add"))}},{name:o.cancel,isCancel:!0,callback:function(){t.closeDialog()}},{name:o.clear,isCancel:!0,callback:function(){t.dialogReference.remove(),t.revokeInvokerDefinedNode(),t.clearReference(),t.active=!1,t.callback instanceof Function&&t.callback("clear")}}]}}},{key:"closeDialog",value:function(){this.dialogReference.remove(),this.resetInitialValues(),this.active=!1}},{key:"scheduleConstants",value:function(){return[{txt:u.onehr,attr:"1"},{txt:u.twohr,attr:"2"},{txt:u.fourhr,attr:"3"},{txt:u.Tmrmrn,attr:"4"},{txt:u.Tmraft,attr:"5"},{txt:u.customDateTime,attr:"6",callback:this.customDateTimeCallback.bind(this)}]}},{key:"constructSchedulePartParent",value:function(){var e=zdom("div",{ref:"scheduleParent",className:"zmSchForm zmForm"});return _zm.getDOMReferenceMap(e,!0)}},{key:"constructIndividualScheduleItems",value:function(e,a){var t=this.CLASS_CONSTANTS.unoption;return e.attr===a&&(t=this.CLASS_CONSTANTS.option),zdom("div",{className:"zmFormFld","data-attr":e.attr},zdom("i",{"data-attr":"icon",className:t}),zdom("label",null,zdom("span",null,e.txt)))}},{key:"constructSchedulePart",value:function(a){var t,n=this,e=n.scheduleConstants(),r=n.constructSchedulePartParent();n.scheduleParent=r.scheduleParent;var i={};e.forEach(function(e){e.hasOwnProperty("callback")&&e.callback instanceof Function&&(i={attr:e.attr,callback:e.callback},n.customCallbacks.schedule.push(i)),t=n.constructIndividualScheduleItems(e,a),$.e(r.scheduleParent).appendDOM(t)});var c=zdom("h4",null,u.scheduleTitle);return $(r.scheduleParent).prepend(c),r}},{key:"constructTabComponent",value:function(){var e=zdom("div",{ref:"tabContainer"},zdom("div",{className:"SC_flt"},zdom("ul",{ref:"tabParent",className:"SCS_tab"},zdom("li",{ref:"type1","data-attr":"type1",className:"stSel",tabid:"0"},d.schedule),zdom("li",{ref:"type2","data-attr":"type2"},d.recur))));return _zm.getDOMReferenceMap(e)}},{key:"initView",value:function(){this.dialogReference={},this.customCallbacks={},this.customCallbacks.schedule=[],this.constructDialog()}},{key:"constructDialog",value:function(){var e=this.defineDialogProps();this.dialogReference=Dialog.new(e)}},{key:"afterDialogMounted",value:function(e,a){var t=this;t.dialogResp=e,t.tab=t.constructTabComponent(),t.schedulePart=t.constructSchedulePart(t.Schedule.scheduleTime),t.dateTimezone=t.schdeuleDateTimeView(),t.dateTimezoneView=t.dateTimezone.dateTimezone,$.e(e.$els.$header).appendDOM(t.tab.tabContainer),$.e(e.$els.$content).appendDOM(t.scheduleParent),$.e(e.$els.$positionWrapper).addClass("SC_PopTop"),$.e(e.$els.$contentWrapper).css("width","500px"),$(t.dateTimezoneView).insertAfter(t.scheduleParent),$.e(e.$els.$buttonContainer).find("[data-id='2']").css("visibility","hidden"),$.e(e.$els.$buttonContainer).find("[data-id='2']").css("float","right"),t.bindScheduleEvents(t.scheduleParent),t.bindDateTimePickers(t.dateTimezone.datePicker,t.dateTimezone.timePicker,t.dateTimezone.timezonePicker),t.constructRecurranceView(),t.updateDialog(),t.updateTab(t.currentTab)}},{key:"addClass",value:function(e,a){$.e(e).addClass(a)}},{key:"removeClass",value:function(e,a){$.e(e).removeClass(a)}},{key:"customDateTimeCallback",value:function(){this.Schedule.enable&&this.removeClass(this.dateTimezoneView,this.CLASS_CONSTANTS.hide)}},{key:"updateDialog",value:function(){this.renderViewBasedOnUserInput()}},{key:"customCallbacksInvoker",value:function(a,e){"schedule"===e&&this.customCallbacks.schedule.forEach(function(e){e.attr===a&&e.callback()})}},{key:"reRenderSchedulePart",value:function(){var e=this,a=e.scheduleValues.previous,t=e.scheduleValues.current,n=$.e(e.scheduleParent).find("[data-attr='"+a+"']"),r=$.e(e.scheduleParent).find("[data-attr='"+t+"']");n=$.e(n).find("[data-attr='icon']"),r=$.e(r).find("[data-attr='icon']"),e.removeClass(n,e.CLASS_CONSTANTS.option),e.addClass(n,e.CLASS_CONSTANTS.unoption),e.removeClass(r,e.CLASS_CONSTANTS.unoption),e.addClass(r,e.CLASS_CONSTANTS.option),e.addClass(e.dateTimezoneView,e.CLASS_CONSTANTS.hide),e.assignValues(),e.customCallbacksInvoker(t,"schedule")}},{key:"updateTab",value:function(e){var a=this;"type1"===e?(a.addClass(a.RecurringViewParent.recParent,"zmHideD"),a.removeClass(a.scheduleParent,"zmHideD"),a.addClass(a.tab.type1,"stSel"),a.removeClass(a.tab.type2,"stSel"),a.Schedule.enable=!0,a.Recurrance.enable=!1,a.reRenderSchedulePart()):"type2"===e&&(a.addClass(a.scheduleParent,"zmHideD"),a.addClass(a.dateTimezone.dateTimezone,"zmHideD"),a.removeClass(a.RecurringViewParent.recParent,"zmHideD"),a.addClass(a.tab.type2,"stSel"),a.removeClass(a.tab.type1,"stSel"),a.Schedule.enable=!1,a.Recurrance.enable=!0,a.reRenderRecurranceView())}},{key:"assignValues",value:function(){var e=this.Schedule.customDateAndTime;$.e(this.dateTimezone.timezone).text(e.timeZone.timezone)}},{key:"schdeuleDateTimeView",value:function(){var e=["zmCustomDate",this.CLASS_CONSTANTS.hide].join(" "),a=zdom("div",{ref:"dateTimezone",className:e},zdom("div",{className:"SC_floatLabelRow fLCol2"},zdom("div",{ref:"datePicker",className:"SC_floatLabel flFLabel flBox zmIconLabel"},zdom("input",{type:"text",className:"SC_input",readOnly:!0,value:this.Schedule.customDateAndTime.date}),zdom("i",{className:"msi-calendar SC_thm"}),zdom("label",null,u.selectDate)),zdom("div",{ref:"timePicker",className:"SC_floatLabel flFLabel flBox zmIconLabel"},zdom("input",{type:"text",className:"SC_input",onChange:this.setScheduleTimeBind(),value:this.Schedule.customDateAndTime.time}),zdom("i",{className:"msi-clock SC_thm"}),zdom("label",null,u.selectTime))),zdom("div",{ref:"timezonePicker",className:"SC_floatLabel flFLabel flBox  zmSelect zmIconLabel"},zdom("i",{className:"msi-timezone SC_thm"}),zdom("span",{ref:"timezone"},this.Schedule.customDateAndTime.timeZone.timezone),zdom("label",null,u.selectTimeZone)));return _zm.getDOMReferenceMap(a,!0)}},{key:"revokeInvokerDefinedNode",value:function(){$.e(this.userDefinedConfigs.ele)[0]instanceof Element&&$.e(this.userDefinedConfigs.ele).removeClass("SC_thm")}},{key:"updateInvokerDefinedNode",value:function(){$.e(this.userDefinedConfigs.ele)[0]instanceof Element&&$.e(this.userDefinedConfigs.ele).addClass("SC_thm")}}]),i}(l),m=zmText.get("newZmSchedule").error,h=function(e){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(a).apply(this,arguments))}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"initalize",value:function(){}},{key:"bindDatePicker",value:function(e,a){if("undefined"!=typeof ZEVENTS){var t=zmail.userDateFormat.toUpperCase(),n=zmail.userDateVal;void 0!==e&&ZEVENTS(e).picker("date",{dform:t,wkst:0,mode:"popup",update:"yes",range:[n,""],minhgt:251}).on("dateclick",function(){a&&a({date:this.getDate().getDateBy(t),action:"date"})}).bind()}}},{key:"bindTimePicker",value:function(e,a){"undefined"!=typeof ZEVENTS&&void 0!==e&&ZEVENTS(e).picker("time",{tform:"HH:mm ss"}).on("change",function(){a&&a({time:this.value,action:"time"})}).bind()}},{key:"getTimezoneList",value:function(e){for(var a,t=0,n={},r=zmail.timezoneList,i=[],c={},l=["Asia/Calcutta","IST"],s=(a=Object.keys(r)).length,o=0;o<s;o++)(c={}).name=a[o],a[o]===e&&(t=o),-1===l.indexOf(a[o])&&(c.display_text=r[a[o]],c.id=a[o],i.push(c));return n.timezone=i,n.curLen=t,n}},{key:"getDateAndTime",value:function(e){var a=new Date;a.setMinutes(a.getMinutes()+e);var t=String(a.getHours()),n=String(a.getMinutes()),r=(1<t.length?t:"0"+a.getHours())+":"+(1<n.length?n:"0"+a.getMinutes());return{date:a.getDateBy(zmail.userDateFormat.toUpperCase()),time:r,timezone:{attr:zmail.userTimeZone,timezone:zmail.timezoneList[zmail.userTimeZone]}}}},{key:"bindTimezonePicker",value:function(n,r){var i=this;$.e(n).on("click",function(e){var a,t={parentDOM:$.e(n)[0],data:(a=i.Schedule.customDateAndTime.timeZone.timezone,i.getTimezoneList(a).timezone),displayAs:"dropdown",display:"display_text",search:"display_text",onSelect:r,initialSelectionID:i.Schedule.customDateAndTime.timeZone.timezone,parWidth:!1};zmUtil.createFLComp("timezone-list",t).show(),e.preventDefault(),e.stopPropagation()})}},{key:"addClassToNodes",value:function(e,a){e instanceof Array?e.forEach(function(e){$.e(e).addClass(a)}):(e instanceof jQuery||e instanceof Element)&&$.e(e).addClass(a)}},{key:"removeClassFromNodes",value:function(e,a){e instanceof Array?e.forEach(function(e){$.e(e).removeClass(a)}):(e instanceof jQuery||e instanceof Element)&&$.e(e).removeClass(a)}},{key:"validateDayOfMonth",value:function(e,a){switch(a=parseInt(a),e){case"0":case"2":case"4":case"6":case"7":case"9":case"11":if(1<=a&&a<=31)return!0;break;case"3":case"5":case"8":case"10":if(1<=a&&a<=30)return!0;break;case"1":if(1<=a&&a<=29)return!0}return!1}}]),a}(function(e){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(a).apply(this,arguments))}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"bindScheduleEvents",value:function(e){var a=this;a.scheduleValues={previous:null,current:a.Schedule.scheduleTime},a.bindClickEventListener(e,a.schdeuleEvents),a.bindTabEvents()}},{key:"bindRecurranceEvents",value:function(){var e=this;e.recurranceValues={previous:null,current:e.Recurrance.repeatType,weekly:{removed:[],existing:[]}},e.recurranceValues.weekly.existing=JSON.parse(JSON.stringify(e.Recurrance.weekly.repeatEvery)),e.bindDatePicker(e.RecurranceViewBase.date,e.recDatePickerCallback.bind(e)),e.bindClickEventListener(e.weekDaysParent.weekDaysPar,e.weekDaysChange),e.bindClickEventListener(e.MonthlyViewParent.monthViewPar,e.monthlyRepeatDay),e.bindClickEventListener(e.constructDetailMonthView.monthlyRepeatPar,e.monthlyRepeat),e.bindDatePicker(e.RecurranceDateTime.recDate,e.recDatePicker.bind(e)),e.bindTimePicker(e.RecurranceDateTime.recTime,e.recTimePicker.bind(e)),e.bindTimezonePicker(e.RecurranceDateTime.timezone,e.recTimezonePicker.bind(e))}},{key:"recTimezonePicker",value:function(e,a){this.Recurrance.timezone={attr:a.name,timezone:zmail.timezoneList[a.name]},this.reRenderRecurranceView(),zmUtil.hideMenu()}},{key:"repeatLimitChange",value:function(e){this.Recurrance.repeatLimit=$.e(e.target).val(),this.reRenderRecurranceView()}},{key:"repeatLimitChangeBind",value:function(){return this.repeatLimitChange.bind(this)}},{key:"repeatDaysCountChangeBind",value:function(){return this.repeatDaysCountChange.bind(this)}},{key:"repeatModeChange",value:function(e){var a=this;a.recurranceValues.previous=a.recurranceValues.current,a.recurranceValues.current=$.e(e.target).val(),a.Recurrance.repeatType=$.e(e.target).val(),a.reRenderRecurranceView()}},{key:"repeatModeChangeBind",value:function(){return this.repeatModeChange.bind(this)}},{key:"repeatDaysCountChange",value:function(e){var a=$.e(this.RecurranceViewBase.timeInput).val();this.Recurrance.repeatDaysCount=a}},{key:"dailyRepeatFrequency",value:function(e){var a=$.e(this.DailyRecParent.dailyRepeatFrequency).val();this.Recurrance.daily.dailyRepeatFrequency=a}},{key:"dailyRepeatFrequencyBind",value:function(){return this.dailyRepeatFrequency.bind(this)}},{key:"dailyRepeatFrequencyEnable",value:function(){this.Recurrance.daily.dailyRepeatFrequency=$.e(this.DailyRecParent.dailyRepeatFrequency).val(),this.Recurrance.daily.repeatEveryWeek=!1,this.reRenderRecurranceView()}},{key:"dailyRepeatFrequencyEnableBind",value:function(){return this.dailyRepeatFrequencyEnable.bind(this)}},{key:"dailyRepeatOnlyOnWeekDays",value:function(){this.Recurrance.daily.dailyRepeatFrequency=$.e(this.DailyRecParent.dailyRepeatFrequency).val(),this.Recurrance.daily.repeatEveryWeek=!0,this.reRenderRecurranceView()}},{key:"dailyRepeatOnlyOnWeekDaysBind",value:function(){return this.dailyRepeatOnlyOnWeekDays.bind(this)}},{key:"weekDaysChange",value:function(e){var a=this,t=parseInt($.e(e.target).attr("data-attr")),n=a.recurranceValues.weekly.existing.indexOf(t);0<=n?(a.recurranceValues.weekly.existing.splice(n,1),a.Recurrance.weekly.repeatEvery.splice(n,1),a.recurranceValues.weekly.removed.push(t)):(a.Recurrance.weekly.repeatEvery.push(t),a.recurranceValues.weekly.existing.push(t)),a.reRenderRecurranceView()}},{key:"weeklyRecur",value:function(e){var a=$.e(e.target).val();this.Recurrance.weekly.dailyRepeatFrequency=a}},{key:"weeklyRecurBind",value:function(){return this.weeklyRecur.bind(this)}},{key:"monthlyRepeatDayBind",value:function(){return this.monthlyRepeatDay.bind(this)}},{key:"monthlyRepeatDay",value:function(){this.Recurrance.monthly.monthlyRepeatDay.enable=!0,this.Recurrance.monthly.monthlyRepeat.enable=!1,this.reRenderRecurranceView()}},{key:"monthlyRepeatBind",value:function(){return this.monthlyRepeat.bind(this)}},{key:"monthlyRepeat",value:function(){this.Recurrance.monthly.monthlyRepeatDay.enable=!1,this.Recurrance.monthly.monthlyRepeat.enable=!0,this.reRenderRecurranceView()}},{key:"monthRepeatMonthBind",value:function(){return this.monthRepeatMonth.bind(this)}},{key:"monthRepeatMonth",value:function(e){var a=$.e(e.target).val();this.Recurrance.monthly.monthlyRepeatDay.month=a,this.monthlyRepeatDay()}},{key:"monthRepeatDayBind",value:function(){return this.monthRepeatDay.bind(this)}},{key:"monthlyRepeatMonthBind",value:function(){return this.monthlyRepeatMonth.bind(this)}},{key:"monthlyRepeatMonth",value:function(e){var a=$.e(e.target).val();this.Recurrance.monthly.monthlyRepeat.month=a,this.monthlyRepeat()}},{key:"monthRepeatDay",value:function(e){var a=$.e(e.target).val();this.Recurrance.monthly.monthlyRepeatDay.day=a,this.monthlyRepeatDay()}},{key:"monthlyRepeatDayPar",value:function(){this.monthlyRepeatDay()}},{key:"monthlyRepeatDayParBind",value:function(){return this.monthlyRepeatDayPar.bind(this)}},{key:"monthlyRepeatWeekEndBind",value:function(){return this.monthlyRepeatWeekEnd.bind(this)}},{key:"monthlyRepeatWeekEnd",value:function(e){this.Recurrance.monthly.monthlyRepeat.weekend=$.e(e.target).val()}},{key:"monthlyRepeatWeedDaysBind",value:function(){return this.monthlyRepeatWeedDays.bind(this)}},{key:"monthlyRepeatWeedDays",value:function(e){this.Recurrance.monthly.monthlyRepeat.day=$.e(e.target).val()}},{key:"yearlyRepeatMonthBind",value:function(){return this.yearlyRepeatMonth.bind(this)}},{key:"yearlyRepeatMonth",value:function(e){this.Recurrance.yearly.yearlyRepeatDay.month=$.e(e.target).val()}},{key:"yearlyRepeatDaysBind",value:function(){return this.yearlyRepeatDays.bind(this)}},{key:"yearlyRepeatDays",value:function(e){var a=$.e(e.target).val();this.Recurrance.yearly.yearlyRepeatDay.day=a,this.reRenderRecurranceView()}},{key:"yearlyWeekEndBind",value:function(){return this.yearlyWeekEnd.bind(this)}},{key:"yearlyWeekEnd",value:function(e){this.Recurrance.yearly.yearlyRepeatDayOfMonth.week=$.e(e.target).val()}},{key:"yearlyWeekDaysBind",value:function(){return this.yearlyWeekDays.bind(this)}},{key:"yearlyWeekDays",value:function(e){this.Recurrance.yearly.yearlyRepeatDayOfMonth.day=$.e(e.target).val()}},{key:"yearlyMonthBind",value:function(){return this.yearlyMonth.bind(this)}},{key:"yearlyMonth",value:function(e){this.Recurrance.yearly.yearlyRepeatDayOfMonth.month=$.e(e.target).val()}},{key:"yearlyRepeatDayBind",value:function(){return this.yearlyRepeatDay.bind(this)}},{key:"yearlyRepeatDay",value:function(){this.Recurrance.yearly.yearlyRepeatDay.enable=!0,this.Recurrance.yearly.yearlyRepeatDayOfMonth.enable=!1,this.reRenderRecurranceView()}},{key:"yearlyRepeatDayOfMonthBind",value:function(){return this.yearlyRepeatDayOfMonth.bind(this)}},{key:"yearlyRepeatDayOfMonth",value:function(){this.Recurrance.yearly.yearlyRepeatDay.enable=!1,this.Recurrance.yearly.yearlyRepeatDayOfMonth.enable=!0,this.reRenderRecurranceView()}},{key:"setScheduleTimeBind",value:function(){return this.setScheduleTime.bind(this)}},{key:"setScheduleTime",value:function(e){this.Schedule.customDateAndTime.time=$.e(e.target).val()}},{key:"RecurranceDateChangeBind",value:function(){return this.RecurranceDateChange.bind(this)}},{key:"RecurranceDateChange",value:function(e){this.Recurrance.repeatTime=$.e(e.target).val()}},{key:"bindDateTimePickers",value:function(e,a,t){var n=this;n.bindDatePicker(e,n.datePickerCallback.bind(n)),n.bindTimePicker(a,n.datePickerCallback.bind(n)),n.bindTimezonePicker(t,n.datePickerCallback.bind(n))}},{key:"recDatePickerCallback",value:function(e){this.Recurrance.repeatBetweenDays=e.date}},{key:"recDatePicker",value:function(e){this.Recurrance.repeatDate=e.date}},{key:"recTimePicker",value:function(e){this.Recurrance.repeatTime=e.time}},{key:"bindTabEvents",value:function(){this.bindClickEventListener(this.tab.tabParent,this.switchTab)}},{key:"datePickerCallback",value:function(e,a){"date"===e.action?this.Schedule.customDateAndTime.date=e.date:"time"===e.action?this.Schedule.customDateAndTime.time=e.time:a.hasOwnProperty("id")&&(this.Schedule.customDateAndTime.timeZone={attr:a.name,timezone:zmail.timezoneList[a.name]},zmUtil.hideMenu(),this.reRenderSchedulePart())}},{key:"schdeuleEvents",value:function(e){var a=$.e(e.target).closest("div").attr("data-attr");this.scheduleValues={previous:this.Schedule.scheduleTime,current:a},this.Schedule.scheduleTime=a,this.reRenderSchedulePart()}},{key:"switchTab",value:function(e){var a=e.target.getAttribute("data-attr");this.currentTab=a,this.updateTab(a),this.hideButton()}},{key:"saveRecurranceCallback",value:function(){var e=this;e.updateInvokerDefinedNode(),e.updateReferenceForComponents(!0),e.updateInstanceReferences(),zmUtil.hideMenu(),e.active=!1,e.callback instanceof Function&&e.callback(!0)}},{key:"bindSaveForRecurring",value:function(e){this.bindClickEventListener(e,this.saveRecurranceCallback)}},{key:"clearRecurranceCallback",value:function(){zmUtil.hideMenu(),this.clearReference(),this.callback instanceof Function&&this.callback("clear")}},{key:"bindClearForRecurring",value:function(e){this.bindClickEventListener(e,this.clearRecurranceCallback)}},{key:"bindClickEventListener",value:function(e,a){a instanceof Function&&$.e(e).on("click",a.bind(this))}},{key:"validateTime",value:function(e){var a=!1,t=e,n=0;if((t=t.split(":")).length<=3)for(;n<t.length;n++){if(isNaN(t[n])||3<t[n].length)return a=!1;if(0===n&&parseInt(t[n])<=24)a=!0;else{if(1!==n&&2!==n||!(parseInt(t[n])<=60))return a=!1;a=!0}}else a=!1;return a}},{key:"scheduleValidation",value:function(){return!this.Schedule.enable||this.validateTime(this.Schedule.customDateAndTime.time)}},{key:"RecurranceValidation",value:function(){var e=this;return!!e.Recurrance.enable&&(e.validateTime(e.Recurrance.repeatTime)?"3"===e.Recurrance.repeatType&&e.Recurrance.yearly.yearlyRepeatDay.enable&&!e.validateDayOfMonth(e.Recurrance.yearly.yearlyRepeatDay.month,e.Recurrance.yearly.yearlyRepeatDay.day)?(zmUtil.succErrMsg("e",m.invalid),!1):!("2"===e.Recurrance.repeatType&&e.Recurrance.monthly.monthlyRepeatDay.enable&&31<parseInt(e.Recurrance.monthly.monthlyRepeatDay.day))||(zmUtil.succErrMsg("e",m.invalid),!1):(zmUtil.succErrMsg("e",m.invalid),!1))}}]),a}(y)),p=zmail.Core.Namespaces.create("zmSchedule"),R=zmText.get("newZmSchedule").error,D={},v=function(e){function i(){var e,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;babelHelpers.classCallCheck(this,i),e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).call(this));var n=babelHelpers.assertThisInitialized(e),r=n.getDateAndTime(5);return n.currentTab="type1",2===a.type&&(n.currentTab="type2"),n.component="compose",n.previousSchedule={},n.Schedule={scheduleTime:"1",customDateAndTime:{date:r.date,time:r.time,timeZone:{attr:r.timezone.attr,timezone:r.timezone.timezone}},enable:!0},n.callback=a.callback,n.active=!0,n.previousRecurrance={},n.Recurrance={repeatType:"0",repeatLimit:"0",timezone:{attr:r.timezone.attr,timezone:r.timezone.timezone},repeatDate:r.date,repeatTime:r.time,repeatDaysCount:1,repeatBetweenDays:r.date,daily:{dailyRepeatFrequency:1,repeatEveryWeek:!1},weekly:{dailyRepeatFrequency:1,repeatEvery:[0]},monthly:{monthlyRepeatDay:{day:"1",month:"1",enable:!0},monthlyRepeat:{weekend:"0",day:"0",month:"1",enable:!1}},yearly:{yearlyRepeatDay:{month:"0",day:"1",enable:!0},yearlyRepeatDayOfMonth:{week:"0",day:"0",month:"0",enable:!1}},enable:!1},"type2"===n.currentTab&&(n.Recurrance.enable=!0,n.Schedule.enable=!1),a.id?(n.id=a.id,n.showView=!0,void 0===t||t||(n.showView=!1),n.constructorSchedule=JSON.parse(JSON.stringify(n.Schedule)),n.constructorRecurrance=Object.assign({},n.Recurrance),n.initialize(a),e):babelHelpers.possibleConstructorReturn(e,!1)}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"initialize",value:function(e){var a=this,t=a.Schedule.customDateAndTime;a.Schedule.scheduleTime=e.scheduleTime||a.Schedule.scheduleTime,t.date=e.date||t.date,t.time=e.time||t.time,t.timeZone=e.timeZone||t.timeZone,a.repeatLimitMapping=a.getRepeatLimitMapping(),a.repeatLimitMappingReverse=a.getReverseRepeatLimitMapping(),a.defineUserProvidedConfigs(e),"task"===a.component?(a.Recurrance.enable=!0,a.constructRecurranceView()):a.showView&&a.initView()}},{key:"serialize",value:function(e){var a,t=this,n=t.Recurrance;t.component=e.component||t.component;var r=n.weekly,i=n.monthly,c=n.yearly;if(e.hasOwnProperty("RPT")&&(e.RPT=(parseInt(e.RPT)-1).toString()),e.RL&&(e.RL=t.repeatLimitMappingReverse[e.RL]),e.hasOwnProperty("MRDM")&&(e.MRDM=parseInt(e.MRDM)-1,e.MRWD=parseInt(e.MRWD)-1),e.hasOwnProperty("YRD")?0<e.YRD&&(e.YRD=parseInt(e.YRD)-1):e.hasOwnProperty("YRWD")&&(e.YRDM=parseInt(e.YRDM)-1,e.YRWD=parseInt(e.YRWD)-1),e.type&&"1"===e.type.toString()){if(e.SCT)t.Schedule.scheduleTime=e.SCT;else if(e.hasOwnProperty("SCTI")){var l=(a=e.SCTI.split(" "))[1].split(":");t.Schedule={scheduleTime:"6",customDateAndTime:{date:a[0]||t.Schedule.customDateAndTime.date,time:l[0]+":"+l[1]||t.Schedule.customDateAndTime.time}},e.hasOwnProperty("SCTZ")?t.Schedule.customDateAndTime.timeZone={attr:e.SCTZ,timezone:zmail.timezoneList[e.SCTZ]}:t.Schedule.customDateAndTime.timeZone={attr:zmail.userTimeZone,timezone:zmail.timezoneList[zmail.userTimeZone]}}}else{if(n.repeatType=e.RPT||n.repeatType,n.repeatLimit=e.RL||n.repeatLimit,n.repeatDaysCount=e.RC||n.repeatDaysCount,n.repeatBetweenDays=e.RU||n.repeatBetweenDays,n.timezone=e.RPTTZ||n.timezone,e.hasOwnProperty("RPTTZ")?n.timezone={attr:e.RPTTZ,timezone:zmail.timezoneList[e.RPTTZ]}:n.timezone={attr:zmail.userTimeZone,timezone:zmail.timezoneList[zmail.userTimeZone]},e.hasOwnProperty("RD")){var s=e.RD.split(" "),o=s[1].split(":");n.repeatDate=s[0],n.repeatTime=o[0]+":"+o[1]}if(e.RPT&&"0"===e.RPT.toString())e.DRWD?n.daily.repeatEveryWeek=!0:n.daily.dailyRepeatFrequency=e.RPTI||r.dailyRepeatFrequency;else if(e.RPT&&"1"===e.RPT.toString()){if(n.weekly.dailyRepeatFrequency=e.RPTI||r.dailyRepeatFrequency,n.weekly.repeatEvery=e.WRD||e.repeatEvery,e.WRD){"string"==typeof e.WRD&&(e.WRD=$.parseJSON(e.WRD));var u=[];e.WRD.forEach(function(e){u.push(parseInt(e)-1)}),n.weekly.repeatEvery=u}}else e.RPT&&"2"===e.RPT.toString()?0<e.MRD?(n.monthly.monthlyRepeatDay.day=e.MRD||i.monthlyRepeatDay.day,n.monthly.monthlyRepeatDay.month=e.RPTI||i.monthlyRepeatDay.month,n.monthly.monthlyRepeatDay.enable=!0):(n.monthly.monthlyRepeat.weekend=e.MRDM||i.monthlyRepeat.weekend,n.monthly.monthlyRepeat.day=e.MRWD||i.monthlyRepeat.day,n.monthly.monthlyRepeat.month=e.RPTI||i.monthlyRepeat.month,n.monthly.monthlyRepeat.enable=!0,n.monthly.monthlyRepeatDay.enable=!1):e.RPT&&"3"===e.RPT.toString()&&(0<e.YRD?(n.yearly.yearlyRepeatDay.day=e.YRD||c.yearlyRepeatDay.day,n.yearly.yearlyRepeatDay.month=e.YRM||c.yearlyRepeatDay.month,n.yearly.yearlyRepeatDay.enable=!0):(n.yearly.yearlyRepeatDayOfMonth.month=e.YRM||c.yearlyRepeatDayOfMonth.month,n.yearly.yearlyRepeatDayOfMonth.day=e.YRWD||c.yearlyRepeatDayOfMonth.day,n.yearly.yearlyRepeatDayOfMonth.week=e.YRDM||c.yearlyRepeatDayOfMonth.week,n.yearly.yearlyRepeatDayOfMonth.enable=!0,n.yearly.yearlyRepeatDay.enable=!1))}t.Recurrance=n}},{key:"clearReference",value:function(){D[this.userDefinedConfigs.id]&&delete D[this.userDefinedConfigs.id]}},{key:"defineUserProvidedConfigs",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this;if(a.serialize(e),!D[e.id]){var t={Schedule:a.Schedule,Recurrance:a.Recurrance,currentTab:a.currentTab,component:a.component,instance:a};D[e.id]=t}a.userDefinedConfigs=e}},{key:"resetInitialValues",value:function(){var e=this;e.active=!1,D[e.userDefinedConfigs.id]&&(D[e.userDefinedConfigs.id].Recurrance=e.previousRecurrance,D[e.userDefinedConfigs.id].Schedule=e.previousSchedule)}},{key:"updateReferenceForComponents",value:function(e){var a=this,t=a.Schedule,n=a.Recurrance;D[a.userDefinedConfigs.id].composeReferences={};var r=D[a.userDefinedConfigs.id].composeReferences;if(r.currentTab=a.currentTab,(r={schedule:{SCT:t.scheduleTime}}).Sche={scheduleType:t.scheduleTime},!a.scheduleValidation())return zmUtil.succErrMsg("e",R.invalid),!1;if(a.Schedule.enable?"6"===a.Schedule.scheduleTime&&(r.schedule.SCTI=t.customDateAndTime.date+" "+t.customDateAndTime.time,r.schedule.SCTZ=t.customDateAndTime.timeZone,r.Sche.customTime=t.customDateAndTime.date+" "+t.customDateAndTime.time,r.Sche.customTimezone=t.customDateAndTime.timeZone.attr):(r.schedule.SCT="1",r.Sche.scheduleType="1",a.Schedule.scheduleTime="1"),a.Recurrance.enable){if(!a.RecurranceValidation())return!1;D[a.userDefinedConfigs.id].Recurrance.enable=!0,r.Recurrance={RPT:n.repeatType,RL:n.repeatLimit,RD:n.repeatDate+" "+n.repeatTime+":00",RPTTZ:n.timezone.attr};var i=r.Recurrance;if("1"===n.repeatLimit?i.RU=n.repeatBetweenDays:"2"===n.repeatLimit&&(i.RC=n.repeatDaysCount),"0"===n.repeatType?n.daily.repeatEveryWeek?i.DRWD=!0:i.RPTI=n.daily.dailyRepeatFrequency:"1"===n.repeatType?(i.WRD=n.weekly.repeatEvery,i.RPTI=n.weekly.dailyRepeatFrequency):"2"===n.repeatType?n.monthly.monthlyRepeatDay.enable?(i.MRD=n.monthly.monthlyRepeatDay.day,i.RPTI=n.monthly.monthlyRepeatDay.month):(i.MRDM=parseInt(n.monthly.monthlyRepeat.weekend)+1,i.MRWD=parseInt(n.monthly.monthlyRepeat.day)+1,i.RPTI=n.monthly.monthlyRepeat.month):"3"===n.repeatType&&(n.yearly.yearlyRepeatDay.enable?(i.YRD=parseInt(n.yearly.yearlyRepeatDay.day)+1,i.YRM=parseInt(n.yearly.yearlyRepeatDay.month)):(i.YRM=parseInt(n.yearly.yearlyRepeatDayOfMonth.month),i.YRDM=parseInt(n.yearly.yearlyRepeatDayOfMonth.week)+1,i.YRWD=parseInt(n.yearly.yearlyRepeatDayOfMonth.day)+1)),r.Recurrance=JSON.parse(JSON.stringify(r.Recurrance)),r.Recurrance.hasOwnProperty("WRD")){var c=[];r.Recurrance.WRD.forEach(function(e){c.push(parseInt(e)+1)}),r.Recurrance.WRD=c}}else r.Recurrance=a.constructorRecurrance,a.Recurrance=a.constructorRecurrance;return r.Recurrance.RPT=parseInt(r.Recurrance.RPT)+1,r.Recurrance.RL=a.repeatLimitMapping[r.Recurrance.RL],e&&(r.alreadyExisting=!0,a.Schedule.enable?r.enableTabs={schedule:!0,recurrance:!1}:r.enableTabs={schedule:!1,recurrance:!0}),D[a.userDefinedConfigs.id].composeReferences=r,!0}},{key:"updateInstanceReferences",value:function(){var e=this,a=e.Recurrance;"0"===a.repeatType?(a.weekly=e.constructorRecurrance.weekly,a.monthly=e.constructorRecurrance.monthly,a.yearly=e.constructorRecurrance.yearly):"1"===a.repeatType?(a.daily=e.constructorRecurrance.daily,a.monthly=e.constructorRecurrance.monthly,a.yearly=e.constructorRecurrance.yearly):"2"===a.repeatType?(a.daily=e.constructorRecurrance.daily,a.weekly=e.constructorRecurrance.weekly,a.yearly=e.constructorRecurrance.yearly):"3"===a.repeatType&&(a.daily=e.constructorRecurrance.daily,a.weekly=e.constructorRecurrance.weekly,a.monthly=e.constructorRecurrance.monthly);var t={Schedule:e.Schedule,Recurrance:e.Recurrance,currentTab:e.currentTab,component:e.component,instance:e,composeReferences:D[e.id].composeReferences};D[e.userDefinedConfigs.id]=t}},{key:"hideButton",value:function(){var e=this;e.dialogResp&&e.dialogResp.$els.$buttonContainer?$.e(e.dialogResp.$els.$buttonContainer).find("[data-id='2']").css("visibility","hidden"):e.RecurranceBtnView.clearBtn&&$.e(e.RecurranceBtnView.clearBtn).addClass("zmHideD")}},{key:"showButton",value:function(){var e=this;e.dialogResp&&e.dialogResp.$els.$buttonContainer?$.e(e.dialogResp.$els.$buttonContainer).find("[data-id='2']").css("visibility","visible"):e.RecurranceBtnView.clearBtn&&$.e(e.RecurranceBtnView.clearBtn).removeClass("zmHideD")}},{key:"enableClearAction",value:function(){var e=this,a=D[e.userDefinedConfigs.id];if(void 0!==a.composeReferences&&a.composeReferences.alreadyExisting||e.alreadyExisting){var t=a.composeReferences.enableTabs||{};e.hideButton(),("type1"===e.currentTab&&(t.schedule||e.Schedule.enable)||"type2"===e.currentTab&&(t.recurrance||e.Recurrance.enable))&&e.showButton()}}},{key:"renderViewBasedOnUserInput",value:function(){var e=this;if(D[e.userDefinedConfigs.id]){var a=$.extend({},D[e.userDefinedConfigs.id].instance.Schedule,D[e.userDefinedConfigs.id].instance.Recurrance);e.scheduleValues={previous:a.scheduleTime,current:a.scheduleTime},e.Schedule=D[e.userDefinedConfigs.id].instance.Schedule,e.Recurrance=D[e.userDefinedConfigs.id].instance.Recurrance,e.scheduleValues={previous:a.scheduleTime,current:e.Schedule.scheduleTime},D[e.userDefinedConfigs.id].instance.currentTab&&(e.currentTab=D[e.userDefinedConfigs.id].instance.currentTab),e.previousRecurrance=JSON.parse(JSON.stringify(e.Recurrance)),e.previousSchedule=JSON.parse(JSON.stringify(e.Schedule)),"compose"===e.component&&e.reRenderSchedulePart(),e.reRenderRecurranceView(),e.enableClearAction()}}}]),i}(h);p.initScRec=function(){var e,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;if(D[a.id]?("task"===a.component&&(D[a.id].instance.component=a.component,D[a.id].Recurrance.enable=!0),void 0===D[a.id].currentTab&&(1===a.type?(D[a.id].currentTab="type1",a.enable&&(D[a.id].instance.Schedule.enable=!0)):2===a.type&&(a.enable&&(D[a.id].instance.Recurrance.enable=!0),D[a.id].currentTab="type2")),a.hasOwnProperty("callback")&&(D[a.id].instance.callback=a.callback),"compose"===a.component?(D[a.id].instance.userDefinedConfigs&&a.ele&&(D[a.id].instance.userDefinedConfigs.ele=a.ele),D[a.id].instance.initView()):D[a.id].instance.constructRecurranceView(),D[a.id].instance.renderViewBasedOnUserInput(),e=D[a.id].instance):(e=new p.ScheduleBase(a,t),a.alreadyExisting&&(e.alreadyExisting=!0),1===a.type?(e.Schedule.enable=!0,e.currentTab="type1"):2===a.type&&(e.alreadyExisting=!0,e.currentTab="type2"),e.updateReferenceForComponents()),"task"===a.component)return $.e(e.weekDaysParent.weekDaysPar).css("whiteSpace","normal"),{ele:$.e(e.RecurringViewParent.recParent),instance:e}},p.processRecurringObject=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.id=e,a.type=2,a.enable=!0,a.alreadyExisting=!0,p.initScRec(a,!1)},p.processScheduleObject=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.id=e,a.type=1,a.enable=!0,a.alreadyExisting=!0,p.initScRec(a,!1)},p.getScheduleObject=function(e){if(D[e]&&D[e].instance.Schedule.enable)return D[e].composeReferences?D[e].composeReferences.Sche:D[e].Schedule},p.getRecurringObject=function(e){if(D[e]&&D[e].instance.Recurrance.enable)return D[e].composeReferences.Recurrance},p.ScheduleBase=v}(),window.__rollupModule=void 0;