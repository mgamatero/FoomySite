function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ZE(a){"use strict";if(this.state="loading",this.mode="richtext",this.afterload=[],a&&"plaintext"===a.mode&&(this.mode="plaintext"),this.initobj=a||{},a.editorContainer?this.outerdiv=a.editorContainer:this.outerdiv=document.getElementById(a.id),this.editordiv=void 0,this.toolbardiv=void 0,this.toolbarobject=void 0,this.popupid="ze_popups",this.popupdiv=void 0,a.hasOwnProperty("toolbarConstructionNotRequired")||(a.toolbarConstructionNotRequired=!1),"smartCompose"===a.editorType?this.createEditor():a.toolbarConstructionNotRequired?this.createEditor():(this.createCustomizedToolbar(),this.createEditor()),ZE_Init.needEditorStats&&(this.clickCount={}),ZE_Init.needplaintext&&!this.initobj.avoidPlainText){var b=!ZE_Init.needEditorFocus;"plaintext"===this.mode&&this.plainText(a.content,{avoidFocus:b,plainTextData:ZE_Init.plainTextDataDef})}ZE.sendInitRequest("",this)}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(a,b){"use strict";function c(a,b,c){this.root=this.currentNode=a,this.nodeType=b,this.filter=c}function d(a,b){for(var c=a.length;c--;)if(!b(a[c]))return!1;return!0}function e(a){return a.nodeType===M&&!!ta[a.nodeName]}function f(a){if(oa&&ya.has(a))return ya.get(a);var b,c=a.nodeType;return b=c===N?va:c!==M&&c!==P?ua:d(a.childNodes,g)?sa.test(a.nodeName)?va:wa:xa,oa&&ya.set(a,b),b}function g(a){return f(a)===va}function h(a){return f(a)===wa}function i(a){return f(a)===xa}function j(a,b){var d=new c(b,Q,h);return d.currentNode=a,d}function k(a,b){return a=j(a,b).previousNode(),a&&"META"===a.nodeName&&(a=j(a,b).previousNode()),a!==b?a:null}function l(a,b){return a=j(a,b).nextNode(),a!==b?a:null}function m(a,b){return!e(a)&&a.nodeType===b.nodeType&&a.nodeName===b.nodeName&&"A"!==a.nodeName&&a.className===b.className&&(!a.style&&!b.style||a.style.cssText===b.style.cssText)}function n(a,b,c){if(a.nodeName!==b)return!1;for(var d in c)if(a.getAttribute(d)!==c[d])return!1;return!0}function o(a,b,c,d){for(;a&&a!==b;){if(n(a,c,d))return a;a=a.parentNode}return null}function p(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1}function q(a,b){var c,d,e,f,g="";return a&&a!==b&&(g=q(a.parentNode,b),a.nodeType===M&&(g+=(g?">":"")+a.nodeName,(c=a.id)&&(g+="#"+c),(d=a.className.trim())&&(e=d.split(/\s\s*/),e.sort(),g+=".",g+=e.join(".")),(f=a.dir)&&(g+="[dir="+f+"]"),e&&(qa.call(e,W)>-1&&(g+="[backgroundColor="+a.style.backgroundColor.replace(/ /g,"")+"]"),qa.call(e,X)>-1&&(g+="[color="+a.style.color.replace(/ /g,"")+"]"),qa.call(e,Y)>-1&&(g+="[fontFamily="+a.style.fontFamily.replace(/ /g,"")+"]"),qa.call(e,Z)>-1&&(g+="[fontSize="+a.style.fontSize+"]")))),g}function r(a){return a.nodeType===M?a.childNodes.length:a.length||0}function s(a){var b=a.parentNode;return b&&b.removeChild(a),a}function t(a,b){var c=a.parentNode;c&&c.replaceChild(b,a)}function u(a){for(var b=a.ownerDocument.createDocumentFragment(),c=a.childNodes,d=c?c.length:0;d--;)b.appendChild(a.firstChild);return b}function v(a,c,d,e){var f,g,h,i=a.createElement(c);if(d instanceof Array&&(e=d,d=null),d)for(f in d)d[f]!==b&&i.setAttribute(f,d[f]);if(e)for(g=0,h=e.length;g<h;g+=1)i.appendChild(e[g]);return i}function w(a,b){var c,d,f=a.ownerDocument,h=a;if(a===b&&((d=a.firstChild)&&"BR"!==d.nodeName||(c=E(f).createDefaultBlock(),d?a.replaceChild(c,d):a.appendChild(c),a=c,c=null)),a.nodeType===N)return h;if(g(a)){for(d=a.firstChild;la&&d&&d.nodeType===N&&!d.data;)a.removeChild(d),d=a.firstChild;d||(la?(c=f.createTextNode($),E(f)._didAddZWS()):c=f.createTextNode(""))}else if(ka){for(;a.nodeType!==N&&!e(a);){if(!(d=a.firstChild)){c=f.createTextNode("");break}a=d}a.nodeType===N?/^ +$/.test(a.data)&&(a.data=""):e(a)&&a.parentNode.insertBefore(f.createTextNode(""),a)}else if(!a.querySelector("BR"))for(c=v(f,"BR");(d=a.lastElementChild)&&!g(d);)a=d;if(c)try{a.appendChild(c)}catch(i){E(f).didError({name:"Squire: fixCursor – "+i,message:"Parent: "+a.nodeName+"/"+a.innerHTML+" appendChild: "+c.nodeName})}return h}function x(a,b){var c,d,e,f,h=a.childNodes,j=a.ownerDocument,k=null,l=E(j)._config;for(c=0,d=h.length;c<d;c+=1)e=h[c],f="BR"===e.nodeName,!f&&g(e)?(k||(k=v(j,l.blockTag,l.blockAttributes)),k.appendChild(e),c-=1,d-=1):(f||k)&&(k||(k=v(j,l.blockTag,l.blockAttributes)),w(k,b),f?a.replaceChild(k,e):(a.insertBefore(k,e),c+=1,d+=1),k=null),i(e)&&x(e,b);return k&&a.appendChild(w(k,b)),a}function y(a,b,c,d){var e,f,g,h=a.nodeType;if(h===N&&a!==c)return y(a.parentNode,a.splitText(b),c,d);if(h===M){if("number"==typeof b&&(b=b<a.childNodes.length?a.childNodes[b]:null),a===c)return b;for(e=a.parentNode,f=a.cloneNode(!1),f.classList.contains("zeChecked")&&f.classList.remove("zeChecked");b;)g=b.nextSibling,f.appendChild(b),b=g;return"OL"===a.nodeName&&o(a,d,"BLOCKQUOTE")&&(f.start=(+a.start||1)+a.childNodes.length-1),w(a,d),w(f,d),(g=a.nextSibling)?e.insertBefore(f,g):e.appendChild(f),y(e,f,c,d)}return b}function z(a,b){for(var c,d,e,f=a.childNodes,h=f.length,i=[];h--;)if(c=f[h],d=h&&f[h-1],h&&g(c)&&m(c,d)&&!ta[c.nodeName])b.startContainer===c&&(b.startContainer=d,b.startOffset+=r(d)),b.endContainer===c&&(b.endContainer=d,b.endOffset+=r(d)),b.startContainer===a&&(b.startOffset>h?b.startOffset-=1:b.startOffset===h&&(b.startContainer=d,b.startOffset=r(d))),b.endContainer===a&&(b.endOffset>h?b.endOffset-=1:b.endOffset===h&&(b.endContainer=d,b.endOffset=r(d))),s(c),c.nodeType===N?d.appendData(c.data):i.push(u(c));else if(c.nodeType===M){for(e=i.length;e--;)c.appendChild(i.pop());z(c,b)}}function A(a,b){if(a.nodeType===N&&(a=a.parentNode),a.nodeType===M){var c={startContainer:b.startContainer,startOffset:b.startOffset,endContainer:b.endContainer,endOffset:b.endOffset};z(a,c),b.setStart(c.startContainer,c.startOffset),b.setEnd(c.endContainer,c.endOffset)}}function B(a,b,c){for(var d,e,f=b;1===f.parentNode.childNodes.length;)f=f.parentNode;"TD"!=f.nodeName&&(s(f),e=a.childNodes.length,d=a.lastChild,d&&"BR"===d.nodeName&&(a.removeChild(d),e-=1),a.appendChild(u(b)),c.setStart(a,e),c.collapse(!0),A(a,c),ga&&(d=a.lastChild)&&"BR"===d.nodeName&&a.removeChild(d))}function C(a,b){var c,d,e=a.previousSibling,f=a.firstChild,g=a.ownerDocument,h="LI"===a.nodeName;if(!h||f&&/^[OU]L$/.test(f.nodeName))if(e&&m(e,a)){if(!i(e)){if(!h)return;d=v(g,"DIV"),d.appendChild(u(e)),e.appendChild(d)}s(a),c=!i(a),e.appendChild(u(a)),c&&x(e,b),f&&C(f,b)}else h&&(e=v(g,"DIV"),a.insertBefore(e,f),w(e,b))}function D(a){this.isShiftDown=a.shiftKey}function E(a){for(var b,c=ib.length;c--;)if(b=ib[c],b._doc===a)return b;return null}function F(a,b,c){var d,e;if(a||(a={}),b)for(d in b)!c&&d in a||(e=b[d],a[d]=e&&e.constructor===Object?F(a[d],e,c):e);return a}function G(a,b){a.nodeType===O&&(a=a.body);var c,d=a.ownerDocument,e=d.defaultView;this._win=e,this._doc=d,this._root=a,this._events={},b&&b.getEditorInstance&&(this._editorRef=b.getEditorInstance),this._isFocused=!1,this._lastSelection=null,ma&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in d?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,na?(c=new MutationObserver(this._docWasChanged.bind(this)),c.observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=c):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",H),this.addEventListener("mousedown",I),this.addEventListener("touchstart",I),this.addEventListener("focus",J),this._awaitingPaste=!1,this.addEventListener(fa?"beforecut":"cut",eb),this.addEventListener("copy",fb),this.addEventListener("keydown",D),this.addEventListener("keyup",D),this.addEventListener(fa?"beforepaste":"paste",gb),this.addEventListener("drop",hb),this.addEventListener(ga?"keypress":"keydown",Pa),this._keyHandlers=Object.create(Ra),this.setConfig(b&&b.config),fa&&(e.Text.prototype.splitText=function(a){var b=this.ownerDocument.createTextNode(this.data.slice(a)),c=this.nextSibling,d=this.parentNode,e=this.length-a;return c?d.insertBefore(b,c):d.appendChild(b),e&&this.deleteData(a,e),b}),a.setAttribute("contenteditable","true");try{d.execCommand("enableObjectResizing",!1,"false"),d.execCommand("enableInlineTableEditing",!1,"false")}catch(f){}ib.push(this)}function H(){this._restoreSelection=!0}function I(){this._restoreSelection=!1}function J(){this._restoreSelection&&this.setSelection(this._lastSelection)}function K(a,b,c){var d,e;for(d=b.firstChild;d;d=e){if(e=d.nextSibling,g(d)){if(d.nodeType===N||"BR"===d.nodeName||"IMG"===d.nodeName){c.appendChild(d);continue}}else if(h(d)){c.appendChild(a.createDefaultBlock([K(a,d,a._doc.createDocumentFragment())]));continue}K(a,d,c)}return c}var L=2,M=1,N=3,O=9,P=11,Q=1,R=4,S=0,T=1,U=2,V=3,W="highlight",X="colour",Y="font",Z="size",$="​",_=a.defaultView,aa=navigator.userAgent,ba=/iP(?:ad|hone|od)/.test(aa),ca=/Mac OS X/.test(aa),da=/Android/.test(aa),ea=/Gecko\//.test(aa),fa=/Trident\/[456]\./.test(aa),ga=!!_.opera,ha=/Edge\//.test(aa),ia=!ha&&/WebKit\//.test(aa),ja=/Trident\/[4567]\./.test(aa),ka=fa||ga,la=fa||ia,ma=fa,na="undefined"!=typeof MutationObserver,oa="undefined"!=typeof WeakMap,pa=/[^ \t\r\n]/,qa=Array.prototype.indexOf;Object.create||(Object.create=function(a){var b=function(){};return b.prototype=a,new b});var ra={1:1,2:2,3:4,8:128,9:256,11:1024};c.prototype.nextNode=function(){for(var a,b=this.currentNode,c=this.root,d=this.nodeType,e=this.filter;;){for(a=b.firstChild;!a&&b&&b!==c;)(a=b.nextSibling)||(b=b.parentNode);if(!a)return null;if(ra[a.nodeType]&d&&e(a))return this.currentNode=a,a;b=a}},c.prototype.previousNode=function(){for(var a,b=this.currentNode,c=this.root,d=this.nodeType,e=this.filter;;){if(b===c)return null;if(a=b.previousSibling)for(;b=a.lastChild;)a=b;else a=b.parentNode;if(!a)return null;if(ra[a.nodeType]&d&&e(a))return this.currentNode=a,a;b=a}},c.prototype.previousPONode=function(){for(var a,b=this.currentNode,c=this.root,d=this.nodeType,e=this.filter;;){for(a=b.lastChild;!a&&b&&b!==c;)(a=b.previousSibling)||(b=b.parentNode);if(!a)return null;if(ra[a.nodeType]&d&&e(a))return this.currentNode=a,a;b=a}};var sa=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|HR|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,ta={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1},ua=0,va=1,wa=2,xa=3,ya=oa?new WeakMap:null,za=function(a,b){for(var c=a.childNodes;b&&a.nodeType===M;)a=c[b-1],c=a.childNodes,b=c.length;return a},Aa=function(a,b){if(a.nodeType===M){var c=a.childNodes;if(b<c.length)a=c[b];else{for(;a&&!a.nextSibling;)a=a.parentNode;a&&(a=a.nextSibling)}}return a},Ba=function(a,b){var c,d,e,f,g=a.startContainer,h=a.startOffset,i=a.endContainer,j=a.endOffset;g.nodeType===N?(c=g.parentNode,d=c.childNodes,h===g.length?(h=qa.call(d,g)+1,a.collapsed&&(i=c,j=h)):(h&&(f=g.splitText(h),i===g?(j-=h,i=f):i===c&&(j+=1),g=f),h=qa.call(d,g)),g=c):d=g.childNodes,e=d.length,h===e?g.appendChild(b):g.insertBefore(b,d[h]),g===i&&(j+=d.length-e),a.setStart(g,h),a.setEnd(i,j)},Ca=function(a,b,c){var d=a.startContainer,e=a.startOffset,f=a.endContainer,g=a.endOffset;b||(b=a.commonAncestorContainer),b.nodeType===N&&(b=b.parentNode);for(var h,i,j,k=y(f,g,b,c),l=y(d,e,b,c),m=b.ownerDocument.createDocumentFragment();l!==k;)h=l.nextSibling,m.appendChild(l),l=h;return d=b,e=k?qa.call(b.childNodes,k):b.childNodes.length,j=b.childNodes[e],i=j&&j.previousSibling,i&&i.nodeType===N&&j.nodeType===N&&(d=i,e=i.length,i.appendData(j.data),s(j)),a.setStart(d,e),a.collapse(!0),w(b,c),m},Da=function(a,b){Ha(a);var c=a.startContainer,d=a.endContainer,e=(g(c)||h(c))&&(g(d)||h(d)),f=Ca(a,null,b);Ga(a),c=Ia(a,b),e&&(d=Ja(a,b),c&&d&&c!==d&&B(c,d,a)),c&&w(c,b);var i=b.firstChild;return i&&"BR"!==i.nodeName?a.collapse(!1):(w(b,b),a.selectNodeContents(b.firstChild)),f},Ea=function(a,b,c){for(var d=!0,e=b.childNodes,f=e.length;f--;)if(!g(e[f])){d=!1;break}if(a.collapsed||Da(a,c),Ga(a),d)Ba(a,b),a.startContainer!==a.endContainer&&A(a.endContainer,a),A(a.startContainer,a),a.collapse(!1);else{for(var j,m,n,p,q,r=a.startContainer,s=y(r,a.startOffset,o(r.parentNode,c,"BLOCKQUOTE")||o(r.parentNode,c,"TD")||c,c),t=s.previousSibling,u=t,v=u.childNodes.length,x=s,z=0,B=s.parentNode;(j=u.lastChild)&&j.nodeType===M;){if("BR"===j.nodeName){v-=1;break}u=j,v=u.childNodes.length}for(;(j=x.firstChild)&&j.nodeType===M&&"BR"!==j.nodeName;)x=j;for(q=u.childNodes[v]||null;(j=b.firstChild)&&g(j);)u.insertBefore(j,q);for(;(j=b.lastChild)&&g(j);)x.insertBefore(j,x.firstChild),z+=1;for(m=b;m=l(m,c);)w(m,c);if(B.insertBefore(b,s),p=t.nextSibling,(m=k(p,c))&&!/\S/.test(m.textContent))do{B=m.parentNode,B.removeChild(m),m=B}while(m&&!m.lastChild&&m!==c);if(t.parentNode||(t=p.previousSibling),u.parentNode||(u=t||p.parentNode,v=t?t.childNodes.length:0),i(p)&&C(p,c),n=s.previousSibling,(m=h(s)?s:l(s,c))&&!/\S/.test(m.textContent))do{B=m.parentNode,B.removeChild(m),m=B}while(m&&!m.lastChild&&m!==c);s.parentNode||(s=n.nextSibling),z||(x=n,z=n.childNodes.length),s&&i(s)&&C(s,c),a.setStart(u,v),a.setEnd(x,z),Ga(a)}},Fa=function(a,b,c){var d=b.ownerDocument.createRange();if(d.selectNode(b),c){var e=a.compareBoundaryPoints(V,d)>-1,f=a.compareBoundaryPoints(T,d)<1;return!e&&!f}var g=a.compareBoundaryPoints(S,d)<1,h=a.compareBoundaryPoints(U,d)>-1;return g&&h},Ga=function(a){for(var b,c=a.startContainer,d=a.startOffset,f=a.endContainer,g=a.endOffset,h=!0;c.nodeType!==N&&(b=c.childNodes[d])&&!e(b);)c=b,d=0;if(g)for(;f.nodeType!==N;){if(!(b=f.childNodes[g-1])||e(b)){if(h&&b&&"BR"===b.nodeName){g-=1,h=!1;continue}break}f=b,g=r(f)}else for(;f.nodeType!==N&&(b=f.firstChild)&&!e(b);)f=b;a.collapsed?(a.setStart(f,g),a.setEnd(c,d)):(a.setStart(c,d),a.setEnd(f,g))},Ha=function(a,b){var c,d=a.startContainer,e=a.startOffset,f=a.endContainer,g=a.endOffset,h=!0;for(b||(b=a.commonAncestorContainer);d!==b&&!e;)c=d.parentNode,e=qa.call(c.childNodes,d),d=c;for(;;){if(h&&f.nodeType!==N&&f.childNodes[g]&&"BR"===f.childNodes[g].nodeName&&(g+=1,h=!1),f===b||g!==r(f))break;c=f.parentNode,g=qa.call(c.childNodes,f)+1,f=c}a.setStart(d,e),a.setEnd(f,g)},Ia=function(a,b){var c,d=a.startContainer;return g(d)?c=k(d,b):d!==b&&h(d)?c=d:(c=za(d,a.startOffset),c=l(c,b)),c&&Fa(a,c,!0)?c:null},Ja=function(a,b){var c,d,e=a.endContainer;if(g(e))c=k(e,b);else if(e!==b&&h(e))c=e;else{if(!(c=Aa(e,a.endOffset))||!p(b,c))for(c=b;d=c.lastChild;)c=d;c=k(c,b)}return c&&Fa(a,c,!0)?c:null},Ka=new c(null,R|Q,function(a){return a.nodeType===N?pa.test(a.data):"IMG"===a.nodeName||"INPUT"===a.nodeName}),La=function(a,b){var c,d=a.startContainer,e=a.startOffset;if(Ka.root=null,d.nodeType===N){if(e)return!1;c=d}else if(c=Aa(d,e),c&&!p(b,c)&&(c=null),!c&&(c=za(d,e),c.nodeType===N&&c.length))return!1;return Ka.currentNode=c,Ka.root=Ia(a,b),!Ka.previousNode()},Ma=function(a,b){var c,d=a.endContainer,e=a.endOffset;if(Ka.root=null,d.nodeType===N){if((c=d.data.length)&&e<c)return!1;Ka.currentNode=d}else Ka.currentNode=za(d,e);return Ka.root=Ja(a,b),!Ka.nextNode()},Na=function(a,b){var c,d=Ia(a,b),e=Ja(a,b);d&&e&&(c=d.parentNode,a.setStart(c,qa.call(c.childNodes,d)),c=e.parentNode,a.setEnd(c,qa.call(c.childNodes,e)+1))},Oa={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},Pa=function(a){var b=a.keyCode,c=Oa[b],d="",e=this.getSelection();a.defaultPrevented||(c||(c=String.fromCharCode(b).toLowerCase(),/^[A-Za-z0-9]$/.test(c)||(c="")),ga&&46===a.which&&(c="."),111<b&&b<124&&(c="f"+(b-111)),"backspace"!==c&&"delete"!==c&&(a.altKey&&(d+="alt-"),a.ctrlKey&&(d+="ctrl-"),a.metaKey&&(d+="meta-")),a.shiftKey&&(d+="shift-"),c=d+c,this._keyHandlers[c]?this._keyHandlers[c](this,a,e):1!==c.length||e.collapsed||(this.saveUndoState(e),Da(e,this._root),this._ensureBottomLine(),this.setSelection(e),this._updatePath(e,!0)))},Qa=function(a,b){try{b||(b=a.getSelection());var c,d=b.startContainer;for(d.nodeType===N&&(d=d.parentNode),c=d;g(c)&&(!c.textContent||c.textContent===$)&&0==c.getElementsByTagName("img").length;)d=c,c=d.parentNode;d!==c&&(b.setStart(c,qa.call(c.childNodes,d)),b.collapse(!0),c.removeChild(d),h(c)||(c=k(c,a._root)),w(c,a._root),Ga(b)),d===a._root&&(d=d.firstChild)&&"BR"===d.nodeName&&s(d),a._ensureBottomLine(),a.setSelection(b),a._updatePath(b,!0)}catch(e){a.didError(e)}},Ra={enter:function(a,b,c){var d,e,f,g,h=a._root;b.preventDefault();var i=a._editorRef().initobj;if("function"==typeof i.isEnterKeyHandler){if(!0===i.isEnterKeyHandler())return!0}if((g=document.getElementById("ze_autofill"))&&g.getElementsByClassName("sel").length)return!0;if(a._recordUndoState(c),Eb(c.startContainer,h,a),a._removeZWS(),a._getRangeAndRemoveBookmark(c),c.collapsed||Da(c,h),!(d=Ia(c,h))||/^T[HD]$/.test(d.nodeName))return Ba(c,a.createElement("BR")),c.collapse(!1),a.setSelection(c),void a._updatePath(c,!0);if((e=o(d,h,"LI"))&&(d=e),!(d.textContent||d.getElementsByTagName("img").length>0)){if(o(d,h,"UL")||o(d,h,"OL"))return a.modifyBlocks(Cb,c);if(o(d,h,"BLOCKQUOTE"))return a.modifyBlocks(ub,c)}for(f=rb(a,d,c.startContainer,c.startOffset),nb(d),_a(d),w(d,h);f.nodeType===M;){var j,k=f.firstChild;if("A"===f.nodeName&&(!f.textContent||f.textContent===$)&&0==f.getElementsByTagName("img").length){k=a._doc.createTextNode(""),t(f,k),f=k;break}for(;k&&k.nodeType===N&&!k.data&&(j=k.nextSibling)&&"BR"!==j.nodeName;)s(k),k=j;if(!k||"BR"===k.nodeName||k.nodeType===N&&!ga)break;f=k}c=a._createRange(f,0),a.setSelection(c),a._updatePath(c,!0),f.nodeType===N&&(f=f.parentNode),f.getBoundingClientRect().top+16>a._doc.documentElement.clientHeight&&(f.scrollIntoViewIfNeeded?f.scrollIntoViewIfNeeded(!1):f.scrollIntoView(!1)),"LI"===f.nodeName&&"UL"===f.parentNode.nodeName&&f.parentNode.hasAttribute("codeList")&&(f.style="border-left: 2px solid #ccc;padding: 2px;margin: 1px 0;background-color: #f5f5f5;")},backspace:function(a,b,c){var d=a._root;if(a._removeZWS(),a.saveUndoState(c),c.collapsed)if(La(c,d)){b.preventDefault();var e,f=Ia(c,d);if(!f)return;x(f.parentNode,d),e=k(f,d);var g=e&&o(e,d,"TABLE",{contenteditable:"false"});if(g&&(e=g),e){if(!e.isContentEditable)return void s(e);for(B(e,f,c),f=e.parentNode;f!==d&&!f.nextSibling;)f=f.parentNode;f!==d&&"TD"!=f.nodeName&&"TR"!=f.nodeName&&(f=f.nextSibling)&&C(f,d),a.setSelection(c)}else if(f){if(o(f,d,"UL")||o(f,d,"OL"))return a.modifyBlocks(Cb,c);if(o(f,d,"BLOCKQUOTE"))return a.modifyBlocks(tb,c);a.setSelection(c),a._updatePath(c,!0)}}else a.setSelection(c),setTimeout(function(){Qa(a)},0);else b.preventDefault(),Da(c,d),Qa(a,c)},delete:function(a,b,c){var d,e,f,g,h,i,j=a._root;if(a._removeZWS(),a.saveUndoState(c),c.collapsed)if(Ma(c,j)){if(b.preventDefault(),!(d=Ia(c,j)))return;if(x(d.parentNode,j),e=l(d,j)){if(!e.isContentEditable)return void s(e);for(B(d,e,c),e=d.parentNode;e!==j&&!e.nextSibling;)e=e.parentNode;e!==j&&(e=e.nextSibling)&&C(e,j),a.setSelection(c),a._updatePath(c,!0)}}else{if(f=c.cloneRange(),Ha(c,a._root),g=c.endContainer,h=c.endOffset,g.nodeType===M&&(i=g.childNodes[h])&&"IMG"===i.nodeName)return b.preventDefault(),s(i),Ga(c),void Qa(a,c);a.setSelection(f),setTimeout(function(){Qa(a)},0)}else b.preventDefault(),Da(c,j),Qa(a,c)},tab:function(a,b,c){var d,e,f=a._root;if(a._removeZWS(),c.collapsed&&La(c,f))for(d=Ia(c,f);e=d.parentNode;){if("UL"===e.nodeName||"OL"===e.nodeName){b.preventDefault(),a.modifyBlocks(Bb,c);break}d=e}window.ZE&&ZE.tabHandler&&ZE.tabHandler(b,a._win,a._doc)},"shift-tab":function(a,b,c){var d,e=a._root;a._removeZWS(),c.collapsed&&La(c,e)&&(d=c.startContainer,(o(d,e,"UL")||o(d,e,"OL"))&&(b.preventDefault(),a.modifyBlocks(Cb,c))),window.ZE&&ZE.tabHandler&&ZE.shiftTabHandler(b,a._win,a._doc)},space:function(a,b,c){var d,e;a._recordUndoState(c),Eb(c.startContainer,a._root,a),a._getRangeAndRemoveBookmark(c),d=c.endContainer,e=d.parentNode,c.collapsed&&"A"===e.nodeName&&!d.nextSibling&&c.endOffset===r(d)?c.setStartAfter(e):c.collapsed||(Da(c,a._root),a._ensureBottomLine(),a.setSelection(c),a._updatePath(c,!0)),a.setSelection(c)},left:function(a){a._removeZWS()},right:function(a){a._removeZWS()}};ca&&ea&&(Ra["meta-left"]=function(a,b){b.preventDefault();var c=mb(a);c&&c.modify&&c.modify("move","backward","lineboundary")},Ra["meta-right"]=function(a,b){b.preventDefault();var c=mb(a);c&&c.modify&&c.modify("move","forward","lineboundary")}),ca||(Ra.pageup=function(a){a.moveCursorToStart()},Ra.pagedown=function(a){a.moveCursorToEnd()});var Sa={1:10,2:13,3:16,4:18,5:24,6:32,7:48},Ta={backgroundColor:{regexp:pa,replace:function(a,b){return v(a,"SPAN",{class:W,style:"background-color:"+b})}},color:{regexp:pa,replace:function(a,b){return v(a,"SPAN",{class:X,style:"color:"+b})}},fontWeight:{regexp:/^bold|^700/i,replace:function(a){return v(a,"B")}},fontStyle:{regexp:/^italic/i,replace:function(a){return v(a,"I")}},fontFamily:{regexp:pa,replace:function(a,b){return v(a,"SPAN",{class:Y,style:"font-family:"+b})}},fontSize:{regexp:pa,replace:function(a,b){return v(a,"SPAN",{class:Z,style:"font-size:"+b})}},textDecoration:{regexp:/^underline/i,replace:function(a){return v(a,"U")}}},Ua=function(a){return function(b,c){var d=v(b.ownerDocument,a);return c.replaceChild(d,b),d.appendChild(u(b)),d}},Va=function(a,b,c){var d,e,f,g,h,i,j=a.style,k=a.ownerDocument;if("function"==typeof c.editorRef&&c.editorRef().initobj.hasOwnProperty("removeStyleProps"))for(var l=c._editorRef().initobj.removeStyleProps,m=l.length,n=(j.length,0);n<m;n++)j[l[n]]="";if("function"==typeof c.editorRef&&!c.editorRef().initobj.hasOwnProperty("maintainStructure"))for(d in Ta)e=Ta[d],(f=j[d])&&e.regexp.test(f)&&(i=e.replace(k,f),h||(h=i),g&&g.appendChild(i),g=i,a.style[d]="");return h&&(g.appendChild(u(a)),"SPAN"===a.nodeName?b.replaceChild(h,a):a.appendChild(h)),g||a},Wa={P:Va,SPAN:Va,STRONG:Ua("B"),EM:Ua("I"),INS:Ua("U"),STRIKE:Ua("S"),IMG:function(a){if(a.getAttribute("style")){if(a.style.width){var b=a.style.width;b=b.replace("px",""),a.setAttribute("width",b)}if(a.style.height){var c=a.style.height;c=c.replace("px",""),a.setAttribute("height",c)}}return a},FONT:function(a,b){var c,d,e,f,g,h=a.face||a.style.fontFamily,i=a.size,j=a.color||a.style.color,k=a.ownerDocument;if(h&&(c=v(k,"SPAN",{class:"font",style:"font-family:"+h}),g=c,f=c),i&&(d=v(k,"SPAN",{class:"size",style:"font-size:"+Sa[i]+"px"}),g||(g=d),f&&f.appendChild(d),f=d),j)if(/^#?([\dA-F]{3}){1,2}$/i.test(j))"#"!==j.charAt(0)&&(j="#"+j),e=v(k,"SPAN",{class:"colour",style:"color:"+j}),g||(g=e),f&&f.appendChild(e),f=e;else if(j.indexOf("rgb")>-1){j=j.replace(/rgb\(|\)/g,"").split(",");for(var l=j.length,m=0;m<l;m++)j[m]=parseInt(j[m],10).toString(16),j[m]=1==j[m].length?"0"+j[m]:j[m];j="#"+j.join(""),e=v(k,"SPAN",{class:"colour",style:"color:"+j}),g||(g=e),f&&f.appendChild(e),f=e}return g||(g=f=v(k,"SPAN")),b.replaceChild(g,a),f.appendChild(u(a)),f},TT:function(a,b){var c=v(a.ownerDocument,"SPAN",{class:"font",style:'font-family:menlo,consolas,"courier new",monospace'});return b.replaceChild(c,a),c.appendChild(u(a)),c}},Xa=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|A|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|STYLE|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL)$/,Ya=/^(?:HEAD$)/,Za=new c(null,R|Q,function(){return!0}),$a=function a(b,c,d){var e,f,h,i,j,k,l,m,n,o,p,q,r,s,t=b.childNodes;for(d=d||{},s=function(){var a=this;a.setAttribute("orig_width",a.width),a.setAttribute("orig_height",a.height),void 0!==ZE&&ZE.setImageSizeOptions(a,"bestfit",r.editordiv.offsetWidth),a.removeAttribute("data-zeLoad")},e=b;g(e);)e=e.parentNode;Za.root=e;var v;if(d._editorRef?v=d._editorRef():d.editorRef&&(v=d.editorRef()),v&&v.initobj.hasOwnProperty("styRewriter")){v.initobj.styRewriter.forEach(function(a){Wa[a]=Wa.A})}for(f=0,h=t.length;f<h;f+=1)if(i=t[f],j=i.nodeName,k=i.nodeType,l=Wa[j],k===M){if(m=i.childNodes.length,l)i=l(i,b,d);else{if(Ya.test(j)){b.removeChild(i),f-=1,h-=1;continue}if(!Xa.test(j)&&!g(i)){if(v&&v.initobj.customTags&&v.initobj.customTags.test(j))continue;f-=1,h+=m-1,b.replaceChild(u(i),i);continue}}if(d&&d._config){var w=d._config.tagAttributes.a;if("A"===j){var x=Object.keys(w);x.forEach(function(a){i.setAttribute(a,w[a])})}}if("IMG"===j&&d.handleWaitingImages)if(i.className.indexOf("ze_img_upload")>-1){var y=i.getAttribute("id");if(r=d.editorRef(),y&&r._unusedImagesList[y])i.setAttribute("data-zeload",!0),i.onload=s,i.src=r._unusedImagesList[y],i.removeAttribute("id"),i.removeAttribute("class"),delete r._unusedImagesList[y];else if(y&&!r._pendingImagesList[y]){b.removeChild(i),f-=1,h-=1;continue}}else i.hasAttribute("data-zeload")&&(r=d.editorRef(),i.onload=s);else"IMG"===j&&(i.onload=function(){"function"==typeof d.editorRef&&"function"==typeof d.editorRef().initobj.isKeyupActionTriggered&&d.editorRef().initobj.isKeyupActionTriggered()});m&&a(i,c||"PRE"===j,d)}else{if(k===N){if(p=i.data,n=!pa.test(p.charAt(0)),o=!pa.test(p.charAt(p.length-1)),c||!n&&!o)continue;if(n){for(Za.currentNode=i;(q=Za.previousPONode())&&!("IMG"===(j=q.nodeName)||"#text"===j&&pa.test(q.data));)if(!g(q)){q=null;break}p=p.replace(/^[ \t\r\n]+/g,q?" ":"")}if(o){for(Za.currentNode=i;(q=Za.nextNode())&&!("IMG"===j||"#text"===j&&pa.test(q.data));)if(!g(q)){q=null;break}p=p.replace(/[ \t\r\n]+$/g,q?" ":"")}if(p){i.data=p;continue}}b.removeChild(i),f-=1,h-=1}return b},_a=function a(b){for(var c,d=b.childNodes,f=d.length;f--;)c=d[f],c.nodeType!==M||e(c)?c.nodeType!==N||c.data||b.removeChild(c):(a(c),g(c)&&!c.firstChild&&b.removeChild(c))},ab=function(a){return a.nodeType===M?"BR"===a.nodeName:pa.test(a.data)},bb=function(a){for(var b,d=a.parentNode;g(d);)d=d.parentNode;return b=new c(d,Q|R,ab),b.currentNode=a,!!b.nextNode()},cb=function(a,b){var c,d,e,f=a.querySelectorAll("BR"),h=[],i=f.length;for(c=0;c<i;c+=1)h[c]=bb(f[c]);for(;i--;)d=f[i],(e=d.parentNode)&&(h[i]?g(e)||x(e,b):s(d))},db=function(a,b){var c=b.ownerDocument.body;b.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),c.appendChild(b),a.setData("text/html",b.innerHTML),a.setData("text/plain",b.innerText||b.textContent),c.removeChild(b)},eb=function(a){var b,c,d,e,f,g,h,i=a.clipboardData,j=this.getSelection(),k=this._root,l=this,m=!0;if("function"==typeof this._editorRef&&this._editorRef().initobj.hasOwnProperty("allowPaste")&&!this._editorRef().initobj.allowPaste)return m=!1,!1;if(j.collapsed)return void a.preventDefault();if(this.saveUndoState(j),ha||ba||!i)setTimeout(function(){try{l._ensureBottomLine()}catch(a){l.didError(a)}},0);else{for(b=Ia(j,k),c=Ja(j,k),d=b===c&&b||k,e=Da(j,k),f=j.commonAncestorContainer,f.nodeType===N&&(f=f.parentNode);f&&f!==d;)g=f.cloneNode(!1),g.appendChild(e),e=g,f=f.parentNode;h=this.createElement("div"),h.appendChild(e),m&&db(i,h,k,this._config),a.preventDefault()}this.setSelection(j)},fb=function(a){if(!ea){var b,c,d,e,f,g,h=a.clipboardData,i=this.getSelection(),j=this.createElement("div"),k=this._root;if(!ha&&!ba&&h){for(i=i.cloneRange(),b=Ia(i,k),c=Ja(i,k),d=b===c?b:k,Ga(i),Ha(i,d),e=i.cloneContents(),f=i.commonAncestorContainer,f.nodeType===N&&(f=f.parentNode);f&&f!==d;)g=f.cloneNode(!1),g.appendChild(e),e=g,f=f.parentNode;j.appendChild(e),db(h,j),a.preventDefault()}}},gb=function(a){var b,c,d,e,f,g=a.clipboardData,h=g&&g.items,i=this.isShiftDown,j=!1,k=!1,l=null,m=this,n=!0;if("function"==typeof this._editorRef&&this._editorRef().initobj.hasOwnProperty("allowPaste")&&!this._editorRef().initobj.allowPaste&&(n=!1),!ha&&h&&!ea){a.preventDefault(),b=h.length;for(var o=!0,p=0;b--;)"text/plain"===h[b].type?p++:"text/html"===h[b].type&&p++;for(2===p&&(o=!1),b=h.length;b--;){if(c=h[b],d=c.type,!i&&"text/html"===d)if(h[b+1]&&/^image\/.*/.test(h[b+1].type)&&o)k=!0;else if(n)return void c.getAsString(function(a){m.insertHTML(a,!0)});"text/plain"===d&&(l=c),!i&&/^image\/.*/.test(d)&&(k=!0)}return void(k?(this.fireEvent("dragover",{dataTransfer:g,preventDefault:function(){j=!0}}),j&&this.fireEvent("drop",{dataTransfer:g,editorCustomPaste:!0})):l&&n&&c.getAsString(function(a){m.insertPlainText(a,!0)}))}if(e=g&&g.types,!ha&&e&&(qa.call(e,"text/html")>-1||!ea&&qa.call(e,"text/plain")>-1&&qa.call(e,"text/rtf")<0))return a.preventDefault(),void(!i&&(f=g.getData("text/html"))?this.insertHTML(f,!0):((f=g.getData("text/plain"))||(f=g.getData("text/uri-list")))&&this.insertPlainText(f,!0));if(ea){b=h.length;for(var o=!0,p=0;b--;)"text/plain"===h[b].type?p++:"text/html"===h[b].type&&p++;for(2===p&&(o=!1),b=h.length;b--;)c=h[b],d=c.type,i||"text/html"!==d||h[b+1]&&/^image\/.*/.test(h[b+1].type)&&o&&(k=!0),"text/plain"===d&&(l=c),!i&&/^image\/.*/.test(d)&&(k=!0);k&&(a.preventDefault(),this.fireEvent("dragover",{dataTransfer:g,preventDefault:function(){j=!0}}),j&&this.fireEvent("drop",{dataTransfer:g,editorCustomPaste:!0}))}this._awaitingPaste=!0;var q=this._doc.body,r=this.getSelection(),t=r.startContainer,u=r.startOffset,v=r.endContainer,w=r.endOffset,x=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});q.appendChild(x),r.selectNodeContents(x),this.setSelection(r),setTimeout(function(){try{m._awaitingPaste=!1;for(var a,b,c="",d=x;x=d;)d=x.nextSibling,s(x),a=x.firstChild,a&&a===x.lastChild&&"DIV"===a.nodeName&&(x=a),c+=x.innerHTML;b=m._createRange(t,u,v,w),m.setSelection(b),c&&m.insertHTML(c,!0)}catch(e){m.didError(e)}},0)},hb=function(a){for(var b=a.dataTransfer.types,c=b.length,d=!1,e=!1;c--;)switch(b[c]){case"text/plain":d=!0;break;case"text/html":e=!0;break;default:return}(e||d)&&this.saveUndoState()},ib=[],jb=G.prototype,kb=function(a,b,c){var d=c._doc,e=a?DOMPurify.sanitize(a,{WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0,ADD_TAGS:c._editorRef().initobj.allowTagsInsertHTML||[],ADD_ATTR:c._editorRef().initobj.allowAttrsInsertHTML||[]}):null;return e?d.importNode(e,!0):d.createDocumentFragment()};jb.testPresenceinSelection=function(a,b,c,d){var e=this.getPath(),f=d.test(e)|this.hasFormat(c);return!(a!=b||!f)},jb.scrollRangeIntoView=function(a,b){this._win=b._editorRef().iframe.contentWindow,this._doc=document;var c,d,e=this._win,f=a.getBoundingClientRect().top,g=e.innerHeight;f||(c=this._doc.createElement("SPAN"),a=a.cloneRange(),Ba(a,c),f=c.getBoundingClientRect().top,d=c.parentNode,d.removeChild(c),d.normalize()),f>g&&e.scrollBy(0,f-g+20)},jb.getNearest=function(a,b,c,d){for(;a&&a!==b;){if(n(a,c,d))return a;a=a.parentNode}return null},jb.setConfig=function(a){return a=F({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:{target:"_blank"}},leafNodeNames:ta,undo:{documentSizeThreshold:-1,undoLimit:-1},isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?kb:null},a,!0),a.blockTag=a.blockTag.toUpperCase(),this._config=a,this},jb.createElement=function(a,b,c){return v(this._doc,a,b,c)},jb.createDefaultBlock=function(a){var b=this._config
;return w(this.createElement(b.blockTag,b.blockAttributes,a),this._root)},jb.didError=function(a){console.log(a)},jb.getDocument=function(){return this._doc},jb.getRoot=function(){return this._root},jb.modifyDocument=function(a){this._ignoreAllChanges=!0,this._mutation&&this._mutation.disconnect(),a(),this._ignoreAllChanges=!1,this._mutation&&(this._mutation.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var lb={pathChange:1,select:1,input:1,undoStateChange:1};jb.fireEvent=function(a,b){var c,d,e,f=this._events[a];if(/^(?:focus|blur)/.test(a))if(c=p(this._root,this._doc.activeElement),"focus"===a){if(!c||this._isFocused)return this;this._isFocused=!0}else{if(c||!this._isFocused)return this;this._isFocused=!1}if(f)for(b||(b={}),b.type!==a&&(b.type=a),f=f.slice(),d=f.length;d--;){e=f[d];try{e.handleEvent?e.handleEvent(b):e.call(this,b)}catch(g){g.details="Squire: fireEvent error. Event type: "+a,this.didError(g)}}return this},jb.destroy=function(){var a,b=ib.length,c=this._events;for(a in c)this.removeEventListener(a);for(this._mutation&&this._mutation.disconnect();b--;)ib[b]===this&&ib.splice(b,1);this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},jb.handleEvent=function(a){this.fireEvent(a.type,a)},jb.addEventListener=function(a,b){var c=this._events[a],d=this._root;return b?(c||(c=this._events[a]=[],lb[a]||("selectionchange"===a&&(d=this._doc),d.addEventListener(a,this,!0))),c.push(b),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+a}),this)},jb.removeEventListener=function(a,b){var c,d=this._events[a],e=this._root;if(d){if(b)for(c=d.length;c--;)d[c]===b&&d.splice(c,1);else d.length=0;d.length||(delete this._events[a],lb[a]||("selectionchange"===a&&(e=this._doc),e.removeEventListener(a,this,!0)))}return this},jb._createRange=function(a,b,c,d){if(a instanceof this._win.Range)return a.cloneRange();var e=this._doc.createRange();return e.setStart(a,b),c?e.setEnd(c,d):e.setEnd(a,b),e},jb.getCursorPosition=function(a){if(!a&&!(a=this.getSelection())||!a.getBoundingClientRect)return null;var b,c,d=a.getBoundingClientRect();return d&&!d.top&&(this._ignoreChange=!0,b=this._doc.createElement("SPAN"),b.textContent=$,Ba(a,b),d=b.getBoundingClientRect(),c=b.parentNode,c.removeChild(b),A(c,a)),d},jb._moveCursorTo=function(a){var b=this._root,c=this._createRange(b,a?0:b.childNodes.length);return Ga(c),this.setSelection(c),this},jb.moveCursorToStart=function(){return this._moveCursorTo(!0)},jb.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var mb=function(a){return a._win.getSelection()||null};jb.setSelection=function(a){if(a)if(this._lastSelection=a,this._isFocused)if(da&&!this._restoreSelection)H.call(this),this.blur(),this.focus();else{ba&&this._win.focus();var b=mb(this);b&&(b.removeAllRanges(),b.addRange(a))}else H.call(this);return this},jb.getSelection=function(){var a,b,c,d=mb(this),f=this._root;return d&&d.rangeCount&&(a=d.getRangeAt(0).cloneRange(),b=a.startContainer,c=a.endContainer,b&&e(b)&&a.setStartBefore(b),c&&e(c)&&a.setEndBefore(c)),a&&p(f,a.commonAncestorContainer)?this._lastSelection=a:a=this._lastSelection,a||(a=this._createRange(f.firstChild,0)),a},jb.getSelectedText=function(){var a,b=this.getSelection(),d=new c(b.commonAncestorContainer,R|Q,function(a){return Fa(b,a,!0)}),e=b.startContainer,f=b.endContainer,h=d.currentNode=e,i="",j=!1;for(d.filter(h)||(h=d.nextNode());h;)h.nodeType===N?(a=h.data)&&/\S/.test(a)&&(h===f&&(a=a.slice(0,b.endOffset)),h===e&&(a=a.slice(b.startOffset)),i+=a,j=!0):("BR"===h.nodeName||j&&!g(h))&&(i+="\n",j=!1),h=d.nextNode();return i},jb.getPath=function(){return this._path};var nb=function(a,b){for(var d,e,f,h=new c(a,R,function(){return!0},!1);e=h.nextNode();)for(;(f=e.data.indexOf($))>-1&&(!b||e.parentNode!==b);){if(1===e.length){do{d=e.parentNode,d.removeChild(e),e=d,h.currentNode=d}while(g(e)&&!r(e));break}e.deleteData(f,1)}};jb._didAddZWS=function(){this._hasZWS=!0},jb._removeZWS=function(){this._hasZWS&&(nb(this._root),this._hasZWS=!1)},jb._updatePath=function(a,b){var c,d=a.startContainer,e=a.endContainer;(b||d!==this._lastAnchorNode||e!==this._lastFocusNode)&&(this._lastAnchorNode=d,this._lastFocusNode=e,c=d&&e?d===e?q(e,this._root):"(selection)":"",this._path!==c&&(this._path=c,this.fireEvent("pathChange",{path:c}))),a.collapsed||this.fireEvent("select")},jb._updatePathOnEvent=function(){var a=this;a._willUpdatePath||(a._willUpdatePath=!0,setTimeout(function(){a._willUpdatePath=!1,a._updatePath(a.getSelection())},0))},jb.focus=function(){return this._root.focus(),ja&&this.fireEvent("focus"),this},jb.blur=function(){return this._root.blur(),ja&&this.fireEvent("blur"),this};var ob="squire-selection-start",pb="squire-selection-end";jb._saveRangeToBookmark=function(a){var b,c=this.createElement("INPUT",{id:ob,type:"hidden"}),d=this.createElement("INPUT",{id:pb,type:"hidden"});Ba(a,c),a.collapse(!1),Ba(a,d),c.compareDocumentPosition(d)&L&&(c.id=pb,d.id=ob,b=c,c=d,d=b),a.setStartAfter(c),a.setEndBefore(d)},jb._getRangeAndRemoveBookmark=function(a){var b=this._root,c=b.querySelector("#"+ob),d=b.querySelector("#"+pb);if(c&&d){var e=c.parentNode,f=d.parentNode,g=qa.call(e.childNodes,c),h=qa.call(f.childNodes,d);e===f&&(h-=1),s(c),s(d),a||(a=this._doc.createRange()),a.setStart(e,g),a.setEnd(f,h),A(e,a),e!==f&&A(f,a),a.collapsed&&(e=a.startContainer,e.nodeType===N&&(f=e.childNodes[a.startOffset],f&&f.nodeType===N||(f=e.childNodes[a.startOffset-1]),f&&f.nodeType===N&&(a.setStart(f,0),a.collapse(!0))))}return a||null},jb._keyUpDetectChange=function(a){var b=a.keyCode;a.ctrlKey||a.metaKey||a.altKey||!(b<16||b>20)||!(b<33||b>45)||this._docWasChanged()},jb._docWasChanged=function(){if(oa&&(ya=new WeakMap),!this._ignoreAllChanges){if(na&&this._ignoreChange)return void(this._ignoreChange=!1);this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")}},jb._recordUndoState=function(a){var b,c=this._undoIndex+=1,d=this._undoStack,e=this._config.undo,f=e.documentSizeThreshold,g=e.undoLimit;c<this._undoStackLength&&(d.length=this._undoStackLength=c),a&&this._saveRangeToBookmark(a),b=this._getHTML(),f>-1&&2*b.length>f&&g>-1&&c>g&&(d.splice(0,c-g),c=this._undoIndex=g,this._undoStackLength=g),d[c]=b,this._undoStackLength+=1,this._isInUndoState=!0},jb.saveUndoState=function(a){return a===b&&(a=this.getSelection()),this._isInUndoState||(this._recordUndoState(a),this._getRangeAndRemoveBookmark(a)),this},jb.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection()),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var a=this._getRangeAndRemoveBookmark();a&&this.setSelection(a),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},jb.redo=function(){var a=this._undoIndex,b=this._undoStackLength;if(a+1<b&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var c=this._getRangeAndRemoveBookmark();c&&this.setSelection(c),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:a+2<b}),this.fireEvent("input")}return this},jb.hasFormat=function(a,b,d){if(a=a.toUpperCase(),b||(b={}),!d&&!(d=this.getSelection()))return!1;!d.collapsed&&d.startContainer.nodeType===N&&d.startOffset===d.startContainer.length&&d.startContainer.nextSibling&&d.setStartBefore(d.startContainer.nextSibling),!d.collapsed&&d.endContainer.nodeType===N&&0===d.endOffset&&d.endContainer.previousSibling&&d.setEndAfter(d.endContainer.previousSibling);var e,f,g=this._root,h=d.commonAncestorContainer;if(o(h,g,a,b))return!0;if(h.nodeType===N)return!1;e=new c(h,R,function(a){return Fa(d,a,!0)},!1);for(var i=!1;f=e.nextNode();){if(!o(f,g,a,b))return!1;i=!0}return i},jb.getFontInfo=function(a){var c,d,e,f={color:b,backgroundColor:b,family:b,size:b},g=0;if(!a&&!(a=this.getSelection()))return f;if(c=a.commonAncestorContainer,a.collapsed||c.nodeType===N)for(c.nodeType===N&&(c=c.parentNode);g<4&&c;)(d=c.style)&&(!f.color&&(e=d.color)&&(f.color=e,g+=1),!f.backgroundColor&&(e=d.backgroundColor)&&(f.backgroundColor=e,g+=1),!f.family&&(e=d.fontFamily)&&(f.family=e,g+=1),!f.size&&(e=d.fontSize)&&(f.size=e,g+=1)),c=c.parentNode;return f},jb._addFormat=function(a,b,d){var e,f,h,i,j,k,l,m,n=this._root;if(d.collapsed){for(e=w(this.createElement(a,b),n),Ba(d,e),d.setStart(e.firstChild,e.firstChild.length),d.collapse(!0),m=e;g(m);)m=m.parentNode;nb(m,e)}else{if(f=new c(d.commonAncestorContainer,R|Q,function(a){return(a.nodeType===N||"BR"===a.nodeName||"IMG"===a.nodeName)&&Fa(d,a,!0)},!1),h=d.startContainer,j=d.startOffset,i=d.endContainer,k=d.endOffset,f.currentNode=h,f.filter(h)||(h=f.nextNode(),j=0),!h)return d;do{l=f.currentNode,!o(l,n,a,b)&&(l===i&&l.length>k&&l.splitText(k),l===h&&j&&(l=l.splitText(j),i===h&&(i=l,k-=j),h=l,j=0),e=this.createElement(a,b),t(l,e),e.appendChild(l))}while(f.nextNode());i.nodeType!==N&&(l.nodeType===N?(i=l,k=l.length):(i=l.parentNode,k=1)),d=this._createRange(h,j,i,k)}return d},jb._removeFormat=function(a,b,c,d){this._saveRangeToBookmark(c);var e,f=this._doc;c.collapsed&&(la?(e=f.createTextNode($),this._didAddZWS()):e=f.createTextNode(""),Ba(c,e));for(var h=c.commonAncestorContainer;g(h);)h=h.parentNode;var i=c.startContainer,j=c.startOffset,k=c.endContainer,l=c.endOffset,m=[],o=function a(b,d){if(!Fa(c,b,!1)){var e,f,g=b.nodeType===N;if(!Fa(c,b,!0))return void("INPUT"===b.nodeName||g&&!b.data||m.push([d,b]));if(g)b===k&&l!==b.length&&m.push([d,b.splitText(l)]),b===i&&j&&(b.splitText(j),m.push([d,b]));else for(e=b.firstChild;e;e=f)f=e.nextSibling,a(e,d)}},p=Array.prototype.filter.call(h.getElementsByTagName(a),function(d){return Fa(c,d,!0)&&n(d,a,b)});return d||p.forEach(function(a){o(a,a)}),m.forEach(function(a){var b=a[0].cloneNode(!1),c=a[1];t(c,b),b.appendChild(c)}),p.forEach(function(a){t(a,u(a))}),this._getRangeAndRemoveBookmark(c),e&&c.collapse(!1),A(h,c),c},jb.changeFormat=function(a,b,c,d){return c||(c=this.getSelection())?(this.saveUndoState(c),b&&(c=this._removeFormat(b.tag.toUpperCase(),b.attributes||{},c,d)),a&&(c=this._addFormat(a.tag.toUpperCase(),a.attributes||{},c)),this.setSelection(c),this._updatePath(c,!0),na||this._docWasChanged(),this):this};var qb={DT:"DD",DD:"DT",LI:"LI"},rb=function(a,b,c,d){var e=qb[b.nodeName],f=null,g=y(c,d,b.parentNode,a._root),h=a._config;return e||(e=h.blockTag,f=h.blockAttributes),n(g,e,f)||(b=v(g.ownerDocument,e,f),g.dir&&(b.dir=g.dir),t(g,b),b.appendChild(u(g)),g=b),g};jb.forEachBlock=function(a,b,c){if(!c&&!(c=this.getSelection()))return this;b&&this.saveUndoState(c);var d=this._root,e=Ia(c,d),f=Ja(c,d);if(e&&f)do{if(a(e)||e===f)break}while(e=l(e,d));return b&&(this.setSelection(c),this._updatePath(c,!0),na||this._docWasChanged()),this},jb.modifyBlocks=function(a,b,c){if(!b&&!(b=this.getSelection()))return this;this._isInUndoState?this._saveRangeToBookmark(b):this._recordUndoState(b);var d,e=this._root;return Na(b,e),Ha(b,e),d=Ca(b,e,e),Ba(b,a.call(this,d,c)),b.endOffset<b.endContainer.childNodes.length&&C(b.endContainer.childNodes[b.endOffset],e),C(b.startContainer.childNodes[b.startOffset],e),this._getRangeAndRemoveBookmark(b),this.setSelection(b),this._updatePath(b,!0),na||this._docWasChanged(),this};var sb=function(a){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[a])},tb=function(a){var b=this._root,c=a.querySelectorAll("blockquote");return Array.prototype.filter.call(c,function(a){return!o(a.parentNode,b,"BLOCKQUOTE")}).forEach(function(a){t(a,u(a))}),a},ub=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:ob,type:"hidden"}),this.createElement("INPUT",{id:pb,type:"hidden"})])},vb=function(a,b,c,d,e){void 0!==e&&e.ul&&(a._config.tagAttributes.ul={class:e.cls,style:e.style,codeList:e.codeList});var f,g,h,i,k=j(b,a._root),l=a._config.tagAttributes,m=l[c.toLowerCase()],n=l.li;for(n=d;f=k.nextNode();)"LI"===f.parentNode.nodeName&&(f=f.parentNode,k.currentNode=f.lastChild),"LI"!==f.nodeName?(i=a.createElement("LI",n),f.dir&&(i.dir=f.dir),(h=f.previousSibling)&&h.nodeName===c?(h.appendChild(i),s(f)):(l.ul&&l.ul.hasOwnProperty("style")&&(m.style=l.ul.style,m.codeList=l.ul.codeList),t(f,a.createElement(c,m,[i]))),"STYLE"===f.nodeName?i.appendChild(f):i.appendChild(u(f)),k.currentNode=i):(f=f.parentNode,(g=f.nodeName)!==c&&/^[OU]L$/.test(g)&&t(f,a.createElement(c,m,[u(f)])));void 0!==e&&e.ul&&(a._config.tagAttributes.ul=null)},wb=function(a){return vb(this,a,"UL"),a},xb=function(a){return vb(this,a,"OL"),a},yb=function(a,b){return vb(this,a,"UL",{style:"border-left: 2px solid #ccc;padding: 2px;margin: 1px 0;background-color: #f5f5f5;"},{style:"list-style-position: outside;list-style-type: decimal;padding: 0 30px",ul:!0,codeList:!0}),a},zb=function(a,b){return vb(this,a,"UL",b,{cls:"zeCheckBox",ul:!0}),this._editorRef().initobj.checkBoxList=[],this._editorRef().initobj.checkBoxList.push(a.firstElementChild),a},Ab=function(a){var b,c,d,e,f,g=a.querySelectorAll("UL, OL"),i=a.querySelectorAll("LI"),j=this._root;for(b=0,c=g.length;b<c;b+=1)d=g[b],e=u(d),x(e,j),t(d,e);for(b=0,c=i.length;b<c;b+=1)f=i[b],h(f)?t(f,this.createDefaultBlock([u(f)])):(x(f,j),t(f,u(f)));return a},Bb=function(a){var b,c,d,e,f,g,h=a.querySelectorAll("LI"),j=this._config.tagAttributes;for(b=0,c=h.length;b<c;b+=1)d=h[b],i(d.firstChild)||(e=d.parentNode.nodeName,f=d.previousSibling,f&&(f=f.lastChild)&&f.nodeName===e||(g=j[e.toLowerCase()],f=this.createElement(e,g),t(d,f)),f.appendChild(d));return a},Cb=function(a){var b=this._root,c=a.querySelectorAll("LI");return Array.prototype.filter.call(c,function(a){return!i(a.firstChild)}).forEach(function(c){var d,e=c.parentNode,f=e.parentNode,g=c.firstChild,h=g;if(c.previousSibling&&(e=y(e,c,f,b)),/^[OU]L$/.test(f.nodeName))f.insertBefore(c,e),e.firstChild||f.removeChild(e);else for(;h&&(d=h.nextSibling,!i(h));)f.insertBefore(h,e),h=d;for("LI"===f.nodeName&&g.previousSibling&&y(f,g,f.parentNode,b);c!==a&&!c.childNodes.length;)e=c.parentNode,e.removeChild(c),c=e},this),x(a,b),a};jb._ensureBottomLine=function(){var a=this._root,b=a.lastElementChild;b&&b.nodeName===this._config.blockTag&&h(b)||(b&&"BR"==b.nodeName&&a.removeChild(b),a.appendChild(this.createDefaultBlock()))},jb.setKeyHandler=function(a,b){return this._keyHandlers[a]=b,this},jb._getHTML=function(){return this._root.innerHTML},jb._setHTML=function(a){var b=this._root,c=b;c.innerHTML=a;do{w(c,b)}while(c=l(c,b));this._ignoreChange=!0},jb.getHTML=function(a){var b,c,d,e,f,g,h=[];if(a&&(g=this.getSelection())&&this._saveRangeToBookmark(g),ka)for(b=this._root,c=b;c=l(c,b);)c.textContent||c.querySelector("BR")||(d=this.createElement("BR"),c.appendChild(d),h.push(d));if(e=this._getHTML().replace(/\u200B/g,""),ka)for(f=h.length;f--;)s(h[f]);return g&&this._getRangeAndRemoveBookmark(g),e},jb.setHTML=function(a,b){var c,d,e,f=this._config,g=f.isSetHTMLSanitized?f.sanitizeToDOMFragment:null,h=this._root;b=b||{};var i;if("function"==typeof g)e=g(a,!1,this);else{d=this.createElement("DIV"),d.innerHTML=a;var j,k=d.getElementsByTagName("img");for(j=0;j<k.length;j++){var m=k[j].src,n=m.lastIndexOf("."),o=m.length;if("svg"===m.slice(n+1,o).toLowerCase()){var p=d.getElementsByTagName("img")[j];p.parentNode.removeChild(p)}}e=this._doc.createDocumentFragment(),e.appendChild(u(d))}$a(e,!1,{editorRef:this._editorRef,handleWaitingImages:b.oldState});for(var q=e;q=l(q,h);)w(q,h);for(this._ignoreChange=!0;c=h.lastChild;)h.removeChild(c);h.appendChild(e),w(h,h),b.oldState&&(i=this._editorRef(),i.updateStateHTML(i.stack.stackPosition,h.innerHTML)),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var r=this._getRangeAndRemoveBookmark()||this._createRange(h.firstChild,0);return this.saveUndoState(r),this._lastSelection=r,H.call(this),this._updatePath(r,!0),this},jb.insertElement=function(a,b){if(b||(b=this.getSelection()),b.collapse(!0),g(a))Ba(b,a),b.setStartAfter(a);else{for(var c,d,e=this._root,f=Ia(b,e)||e;f!==e&&!f.nextSibling;)f=f.parentNode;f!==e&&(c=f.parentNode,d=y(c,f.nextSibling,e,e)),d?e.insertBefore(a,d):(e.appendChild(a),d=this.createDefaultBlock(),e.appendChild(d)),b.setStart(d,0),b.setEnd(d,0),Ga(b)}return this.focus(),this.setSelection(b),this._updatePath(b),na||this._docWasChanged(),this},jb.insertImage=function(a,b){var c=this.createElement("IMG",F({src:a},b,!0));return this.insertElement(c),c};var Db=/\b((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.])(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))|([\w\-.%+]+@(?:[\w\-]+\.)+[A-Z]{2,}\b)/i,Eb=function(a,b,d){for(var e,f,g,h,i,j,k,l=a.ownerDocument,m=new c(a,R,function(a){return!o(a,b,"A")},!1),n=d._config.tagAttributes.a;e=m.nextNode();)for(f=e.data,g=e.parentNode;h=Db.exec(f);)i=h.index,j=i+h[0].length,i&&(k=l.createTextNode(f.slice(0,i)),g.insertBefore(k,e)),k=d.createElement("A",F({target:"_blank",href:h[1]?/^(?:ht|f)tps?:/.test(h[1])?h[1]:"http://"+h[1]:"mailto:"+h[2]},n,!1)),k.textContent=f.slice(i,j),g.insertBefore(k,e),e.data=f=f.slice(j)},Fb=function(a,b){a=a.replace("border=0","border=1");var c=a.lastIndexOf("\x3c!--EndFragment--\x3e");a=a.slice(0,c);var d,e,f,g,h,i=/<style([.\s\S])*>([.\s\S])*<\/style>/i.exec(a)[0],j=a.slice(a.search("<body")),k=/\.x([a-z][0-9]+)[\n]?(\s)*{([""#a-zA-Z0-9\n\s.:,;-]*)/g,l=i?i.match(k):[],m=l?l.length:0,n=[],o=[],p=b.createDocumentFragment(),q=b.createElement("div");if(q.innerHTML=j,p.appendChild(q),m){for(var r=0;r<m;r++)d=l[r].search("{"),n[r]=l[r].slice(0,d).trim(),o[r]=l[r].slice(d+1,l[r].length);e=n.length;var s=/([""\.a-zA-Z0-9-\n\s#:,])*/g;for(f=0;f<e;f++){var t,u,v,w,x={},y=q.firstElementChild.querySelectorAll(n[f]),z=y.length,A=o[f].match(s),B=A.length;for(h=0;h<B;h++)A[h]=A[h].trim(),A[h].length>0&&(t=A[h].slice(0,A[h].search(":")),x[t]=A[h].slice(A[h].search(":")+1,A[h].length));for(u=Object.keys(x),v=u.length,g=0;g<z;g++)for(w=0;w<v;w++)y[g].style[u[w]]=x[u[w]]}}return q.innerHTML};jb.insertHTML=function(a,b,c){var d=this._config,e=this._editorRef();if(c=c||{},"function"==typeof e.initobj.parseUrls){var f=e.parseURL(a);e.initobj.parseUrls(f)}var g,h,i,j,k,m,n,o,p=d.isInsertedHTMLSanitized&&!c.avoidSanitize?d.sanitizeToDOMFragment:null,q=this.getSelection(),r=this._doc;if("function"==typeof p)j=p(a,b,this);else{b&&(o=a.search(/<meta .* content=Excel\.Sheet>/g),o>0?a=Fb(a,r):(g=a.indexOf("\x3c!--StartFragment--\x3e"),h=a.lastIndexOf("\x3c!--EndFragment--\x3e"),g>-1&&h>-1&&(a=a.slice(g+20,h)))),i=this.createElement("DIV"),a=DOMPurify.sanitize(a,{ADD_TAGS:e.initobj.allowTagsInsertHTML||[],ADD_ATTR:e.initobj.allowAttrsInsertHTML||[],reference:e}),i.innerHTML=a;var s,t=i.getElementsByTagName("img"),v=0,x={};for(s=0;s<t.length;s++){var y=t[s].src,z=y.lastIndexOf("."),A=y.length;if("svg"===y.slice(z+1,A).toLowerCase()){var B=i.getElementsByTagName("img")[s];B.parentNode.removeChild(B)}else"data:"===y.substr(0,5)&&(t[s].setAttribute("data-load",v),x[v]=y,"function"==typeof e.initobj.convertBase64ToImg&&(t[s].src=ZE_Init.imgPath+"/images/process.gif"),v++)}j=r.createDocumentFragment(),j.appendChild(u(i)),"function"==typeof e.initobj.convertBase64ToImg&&e.initobj.convertBase64ToImg(x,e.processBase64Images.bind(e),e.processBase64FailureImages.bind(e))}if(b&&this._editorRef().initobj.handlePasteImages&&"IMG"===j.firstChild.nodeName){if("data:"===j.firstChild.src.substr(0,5))return this._editorRef()._uploadInlineImages({dataURI:j.firstChild.src}),void this.focus();if("webkit-fake"===j.firstChild.src.substr(0,11))return void this.focus()}this.saveUndoState(q);try{for(k=this._root,m=j,n={fragment:j,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},Eb(j,j,this),$a(j,"",this),cb(j,null),_a(j),j.normalize();m=l(m,j);)w(m,null);b&&this.fireEvent("willPaste",n),n.defaultPrevented||(Ea(q,n.fragment,k),na||this._docWasChanged(),q.collapse(!1),this._ensureBottomLine()),this.setSelection(q),this._updatePath(q,!0),b&&this.focus()}catch(C){this.didError(C)}return this};var Gb=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};jb.insertPlainText=function(a,b){var c,d,e,f,g=a.split("\n"),h=this._config,i=h.blockTag,j=h.blockAttributes,k="</"+i+">",l="<"+i;for(c in j)l+=" "+c+'="'+Gb(j[c])+'"';for(l+=">",d=0,e=g.length;d<e;d+=1)f=g[d],f=Gb(f).replace(/ (?= )/g,"&nbsp;"),d&&d+1<e&&(f=l+(f||"<BR>")+k),g[d]=f;return this.insertHTML(g.join(""),b)};var Hb=function(a,b,c){return function(){return this[a](b,c),this.focus()}};jb.addStyles=function(a){if(a){var b=this._doc.documentElement.firstChild,c=this.createElement("STYLE",{type:"text/css"});c.appendChild(this._doc.createTextNode(a)),b.appendChild(c)}return this},jb.bold=Hb("changeFormat",{tag:"B"}),jb.italic=Hb("changeFormat",{tag:"I"}),jb.underline=Hb("changeFormat",{tag:"U"}),jb.strikethrough=Hb("changeFormat",{tag:"S"}),jb.subscript=Hb("changeFormat",{tag:"SUB"},{tag:"SUP"}),jb.superscript=Hb("changeFormat",{tag:"SUP"},{tag:"SUB"}),jb.removeBold=Hb("changeFormat",null,{tag:"B"}),jb.removeItalic=Hb("changeFormat",null,{tag:"I"}),jb.removeUnderline=Hb("changeFormat",null,{tag:"U"}),jb.removeStrikethrough=Hb("changeFormat",null,{tag:"S"}),jb.removeSubscript=Hb("changeFormat",null,{tag:"SUB"}),jb.removeSuperscript=Hb("changeFormat",null,{tag:"SUP"}),jb.makeLink=function(a,b){var c=this.getSelection();if(c.collapsed){var d=a.indexOf(":")+1;if(d)for(;"/"===a[d];)d+=1;Ba(c,this._doc.createTextNode(a.slice(d)))}return b=F(F({href:a},b,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:b},{tag:"A"},c),this.focus()},jb.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},jb.setFontFace=function(a){return this.changeFormat(a?{tag:"SPAN",attributes:{class:"font",style:"font-family: "+a+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:"font"}}),this.focus()},jb.setFontSize=function(a){return this.changeFormat(a?{tag:"SPAN",attributes:{class:"size",style:"font-size: "+("number"==typeof a?a+"px":a)}}:null,{tag:"SPAN",attributes:{class:"size"}}),this.focus()},jb.setTextColour=function(a){return this.changeFormat(a?{tag:"SPAN",attributes:{class:"colour",style:"color:"+a}}:null,{tag:"SPAN",attributes:{class:"colour"}}),this.focus()},jb.setHighlightColour=function(a){return this.changeFormat(a?{tag:"SPAN",attributes:{class:"highlight",style:"background-color:"+a}}:a,{tag:"SPAN",attributes:{class:"highlight"}}),this.focus()},jb.setTextAlignment=function(a){return this.forEachBlock(function(b){b.className=(b.className.split(/\s+/).filter(function(a){return!/align/.test(a)}).join(" ")+" align-"+a).trim(),b.style.textAlign=a},!0),this.focus()},jb.setTextDirection=function(a){return this.forEachBlock(function(b){b.dir=a},!0),this.focus()},jb.setLineHeight=function(a){return this.forEachBlock(function(b){b.style.lineHeight=a},!0),this.focus()},jb.removeAllFormatting=function(a){if(!a&&!(a=this.getSelection())||a.collapsed)return this;var b=this._root;if("BODY"===b.nodeName){var c=b.parentElement.getElementsByTagName("head"),d=b.getElementsByTagName("style");d[0]&&c[0].appendChild(d[0])}for(var e=a.commonAncestorContainer;e&&!h(e);)e=e.parentNode;if(e||(Na(a,b),e=b),e.nodeType===N)return this;this.saveUndoState(a),Ha(a,e);for(var f,g,i=e.ownerDocument,j=a.startContainer,k=a.startOffset,l=a.endContainer,m=a.endOffset,n=i.createDocumentFragment(),o=i.createDocumentFragment(),p=y(l,m,e,b),q=y(j,k,e,b);q!==p;)f=q.nextSibling,n.appendChild(q),q=f;return K(this,n,o),o.normalize(),q=o.firstChild,f=o.lastChild,g=e.childNodes,q?(e.insertBefore(o,p),k=qa.call(g,q),m=qa.call(g,f)+1):(k=qa.call(g,p),m=k),a.setStart(e,k),a.setEnd(e,m),A(e,a),Ga(a),this.setSelection(a),this._updatePath(a,!0),this.focus()},jb.increaseQuoteLevel=Hb("modifyBlocks",sb),jb.decreaseQuoteLevel=Hb("modifyBlocks",tb),jb.makeUnorderedList=Hb("modifyBlocks",wb),jb.makeOrderedList=Hb("modifyBlocks",xb),jb.makeCodeList=Hb("modifyBlocks",yb,"",{style:""}),jb.makeCheckBoxList=Hb("modifyBlocks",zb,"",{class:""}),jb.removeList=Hb("modifyBlocks",Ab),jb.increaseListLevel=Hb("modifyBlocks",Bb),jb.decreaseListLevel=Hb("modifyBlocks",Cb),top!==_&&"true"===a.documentElement.getAttribute("data-squireinit")&&(_.editor=new G(a),_.onEditorLoad&&(_.onEditorLoad(_.editor),_.onEditorLoad=null)),_.Squire=G}(document),function(a){"use strict";var b="undefined"==typeof window?null:window;b.DOMPurify=a(b)}(function a(b){"use strict";var c=function(b){return a(b)};if(c.version="0.7.4",!b||!b.document||9!==b.document.nodeType)return c.isSupported=!1,c;var d=b.document,e=d,f=b.DocumentFragment,g=b.HTMLTemplateElement,h=b.NodeFilter,i=b.NamedNodeMap||b.MozNamedAttrMap,j=b.Text,k=b.Comment,l=b.DOMParser;"function"==typeof g&&(d=d.createElement("template").content.ownerDocument);var m=d.implementation,n=d.createNodeIterator,o=d.getElementsByTagName,p=d.createDocumentFragment,q=e.importNode,r={};c.isSupported=void 0!==m.createHTMLDocument&&9!==d.documentMode;var s=function(a,b){for(var c=b.length;c--;)a[b[c]]=!0;return a},t=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},u=null,v=s({},["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","#text"]),w=null,x=s({},["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","name","charset","type","usemap","valign","value","width","xmlns","target","viewport","content","accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mode","min","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","surfacescale","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","y","y1","y2","z","zoomandpan","accent","accentunder","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","display","displaystyle","fence","frame","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),y=null,z=null,A=!0,B=!1,C=!1,D=/\{\{[\s\S]*|[\s\S]*\}\}/gm,E=/<%[\s\S]*|[\s\S]*%>/gm,F=!1,G=!1,H=!1,I=!1,J=!0,K=!0,L=s({},["audio","head","math","script","svg","video"]),M=s({},["audio","video","img","source"]),N=s({},["alt","class","for","id","label","name","style","pattern","placeholder","summary","title","value","xmlns"]),O=null,P=d.createElement("form"),Q=function(a){"object"!==_typeof(a)&&(a={}),u="ALLOWED_TAGS"in a?s({},a.ALLOWED_TAGS):v,w="ALLOWED_ATTR"in a?s({},a.ALLOWED_ATTR):x,y="FORBID_TAGS"in a?s({},a.FORBID_TAGS):{},z="FORBID_ATTR"in a?s({},a.FORBID_ATTR):{},A=!1!==a.ALLOW_DATA_ATTR,B=a.SAFE_FOR_JQUERY||!1,C=a.SAFE_FOR_TEMPLATES||!1,F=a.WHOLE_DOCUMENT||!1,G=a.RETURN_DOM||!1,H=a.RETURN_DOM_FRAGMENT||!1,I=a.RETURN_DOM_IMPORT||!1,J=!1!==a.SANITIZE_DOM,K=!1!==a.KEEP_CONTENT,C&&(A=!1),H&&(G=!0),a.ADD_TAGS&&(u===v&&(u=t(u)),s(u,a.ADD_TAGS)),a.ADD_ATTR&&(w===x&&(w=t(w)),s(w,a.ADD_ATTR)),K&&(u["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(a),O=a},R=function(a){try{a.parentNode.removeChild(a)}catch(b){a.outerHTML=""}},S=function(a){var b,c;try{if(b=(new l).parseFromString(a,"text/html"),b.getElementsByTagName("style")[0]){var d=b.getElementsByTagName("style")[0].innerText;d=d.replace(/>/g,"&gt"),d=d.replace(/</g,"&lt"),b.getElementsByTagName("style")[0].innerHTML=d,b.getElementsByTagName("body")[0].appendChild(b.getElementsByTagName("style")[0])}if("function"==typeof b.getElementsByTagName){var e=b.getElementsByTagName("head")[0],f=e.children.length,g=b.getElementsByTagName("body")[0],h=0;if("object"===("undefined"==typeof cfg?"undefined":_typeof(cfg))&&cfg.hasOwnProperty("reference")&&(editor=cfg.reference),
editor&&editor.initobj.customTags)for(;h<f;h++)e.children[h]&&"META"===e.children[h].nodeName&&g.appendChild(e.children[h])}var i,j=b.body.getElementsByTagName("img");for(i=0;i<j.length;i++){var k=j[i].src,n=k.lastIndexOf("."),p=k.length;if("svg"===k.slice(n+1,p).toLowerCase()){var q=b.body.getElementsByTagName("img")[i];q.parentNode.removeChild(q)}}}catch(r){}return b||(b=m.createHTMLDocument(""),c=b.body,c.parentNode.removeChild(c.parentNode.firstElementChild),c.outerHTML=a),"function"==typeof b.getElementsByTagName?b.getElementsByTagName(F?"html":"body")[0]:o.call(b,F?"html":"body")[0]},T=function(a){return n.call(a.ownerDocument||a,a,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,function(){return h.FILTER_ACCEPT},!1)},U=function(a){return!(a instanceof j||a instanceof k)&&!("string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof i&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute)},V=function(a){var b,c;if(_("beforeSanitizeElements",a,null),U(a))return R(a),!0;if(b=a.nodeName.toLowerCase(),_("uponSanitizeElement",a,{tagName:b}),!u[b]||y[b]){if(K&&!L[b]&&"function"==typeof a.insertAdjacentHTML)try{a.insertAdjacentHTML("AfterEnd",a.innerHTML)}catch(d){}return R(a),!0}return!B||a.firstElementChild||a.content&&a.content.firstElementChild||(a.innerHTML=a.textContent.replace(/</g,"&lt;")),C&&3===a.nodeType&&(c=a.textContent,c=c.replace(D," "),c=c.replace(E," "),a.textContent=c),_("afterSanitizeElements",a,null),!1},W=/^data-[\w.\u00B7-\uFFFF-]/,X=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Y=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Z=function(a){var c,e,f,g,h,i,j,k;if(_("beforeSanitizeAttributes",a,null),i=a.attributes){for(j={attrName:"",attrValue:"",keepAttr:!0},k=i.length;k--;)if(c=i[k],e=c.name,f=c.value,g=e.toLowerCase(),j.attrName=g,j.attrValue=f,j.keepAttr=!0,_("uponSanitizeAttribute",a,j),f=j.attrValue,"name"===g&&"IMG"===a.nodeName&&i.id?(h=i.id,i=Array.prototype.slice.apply(i),a.removeAttribute("id"),a.removeAttribute(e),i.indexOf(h)>k&&a.setAttribute("id",h.value)):("id"===e&&a.setAttribute(e,""),a.removeAttribute(e)),j.keepAttr&&(!J||"id"!==g&&"name"!==g||!(f in b||f in d||f in P))&&(C&&(f=f.replace(D," "),f=f.replace(E," ")),w[g]&&!z[g]&&(N[g]||X.test(f.replace(Y,""))||"src"===g&&0===f.indexOf("data:")&&M[a.nodeName.toLowerCase()])||A&&W.test(g)))try{a.setAttribute(e,f)}catch(l){}_("afterSanitizeAttributes",a,null)}},$=function a(b){var c,d=T(b);for(_("beforeSanitizeShadowDOM",b,null);c=d.nextNode();)_("uponSanitizeShadowNode",c,null),V(c)||(c.content instanceof f&&a(c.content),Z(c));_("afterSanitizeShadowDOM",b,null)},_=function(a,b,d){r[a]&&r[a].forEach(function(a){a.call(c,b,d,O)})};return c.sanitize=function(a,d){var g,h,i,j,k;if(a||(a=""),"string"!=typeof a){if("function"!=typeof a.toString)throw new TypeError("toString is not a function");a=a.toString()}if(!c.isSupported)return"object"===_typeof(b.toStaticHTML)||"function"==typeof b.toStaticHTML?b.toStaticHTML(a):a;if(Q(d),!G&&!F&&-1===a.indexOf("<"))return a;if(!(g=S(a)))return G?null:"";for(j=T(g);h=j.nextNode();)3===h.nodeType&&h===i||V(h)||(h.content instanceof f&&$(h.content),Z(h),i=h);if(G){if(H)for(k=p.call(g.ownerDocument);g.firstChild;)k.appendChild(g.firstChild);else k=g;return I&&(k=q.call(e,k,!0)),k}return F?g.outerHTML:g.innerHTML},c.addHook=function(a,b){"function"==typeof b&&(r[a]=r[a]||[],r[a].push(b))},c.removeHook=function(a){r[a]&&r[a].pop()},c.removeHooks=function(a){r[a]&&(r[a]=[])},c.removeAllHooks=function(){r=[]},c});var includesPolyfill=function(a,b){function c(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)}if(null===this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return!1;for(var f=0|b,g=Math.max(f>=0?f:e-Math.abs(f),0);g<e;){if(c(d[g],a))return!0;g++}return!1},closestpolyfill=function(){var a=this;do{if(a.matches(s))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType);return null};Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:includesPolyfill,writable:!0,configurable:!0}),Element.prototype.closest||Object.defineProperty(Element.prototype,"closest",{value:closestpolyfill,writable:!0,configurable:!0}),ZE.create=function(a){"use strict";if(ZE_Init.loading){var b=function(){ZE_Init.loadURL(ZE_Init.jsPath+"/js/zep1.min.js","js")};setTimeout(b,0),delete ZE_Init.loading}return new ZE(a)},ZE.prototype.afterEditorLoad=function(a){"use strict";var b=this;b.state?b.afterload.push(a):a()},ZE.prototype.parseURL=function(a,b){var c=[];b=b||{};var d,e=b.httpOnly||!1,f=/((?=http|https)[\S]*:\/\/[\S]+)|([\S]*(?:\w{2}\.\w+\.\w+)[\S]*)/gi,g=/((?=http|https)[\S]*:\/\/[^\s"]+)/gi,h=null,i=!1;for(d=f,e&&(d=g),d.lastIndex=0;!i;)if(null===(h=d.exec(a)))i=!0;else{h.index===d.lastIndex&&d.lastIndex++;var j=h[0]||"";-1!==j.indexOf("@")&&-1===j.indexOf("/")||c.push({url:j,startIndex:h.index,endIndex:h.index+j.length})}return c},ZE.prototype.setContent=function(a,b){"use strict";var c,d=this,e=d.mode,f={};if(void 0!==a)if(d.state)c=function(a){return function(){d.setContent(a)}}(a),d.afterload.push(c);else if(e&&"plaintext"===e)d._textarea.value=a;else{d.initobj.handlePasteImages&&(f.oldState=b),d.squireInstance.setHTML(a,f),d.win.focus(),b||d.saveCurrentState();try{d.updateToolbar()}catch(g){}}},ZE.setProcessedContent=function(a){"use strict";var b=this,c=b.mode;a=c&&"plaintext"===c?a.replace(/\n/gi,"<br/>"):a.replace(/<br.*?>/gi,"\n")},ZE.prototype.constructSpellcheckerNode=function(){var a=this,b=ZE.i18n,c=document.getElementsByClassName("ze_spell")[0];c&&c.parentElement.removeChild(c);var d;c=document.createElement("div"),c.className="zeSpellCheckBox";var e=document.createElement("span");e.setAttribute("data-attr","check"),e.innerHTML=b("Checking..."),e.className="zeSpellCheckSts";var f=document.createElement("i");f.className="zei-spellCheck",f.setAttribute("data-attr","recheck");var g=document.createElement("i");g.className="zei-close",g.setAttribute("data-attr","close"),c.appendChild(e),c.appendChild(f),c.appendChild(g);var h=a.toolbardiv.getElementsByClassName("zeSpellCheckBox")[0];h&&h.parentElement.removeChild(h),a.toolbardiv.appendChild(c),d=document.createElement("span"),d.setAttribute("data-attr","spellAnim"),d.className="zeSpellCheckLoadAni";var i=a.toolbarobject.spellcheck,j=i.querySelectorAll("[data-attr='spellAnim'")[0];return j&&j.parentElement.removeChild(j),a.toolbardiv.getElementsByClassName("zei-more")[0]||i.insertBefore(d,i.firstChild),f.onmousedown=function(g){g.preventDefault(),g.stopPropagation(),"en"===a.defaultSpellcheckLanguage.split("-")[0]?a.ZiaInstance.checkStyle(a.defaultSpellcheckLanguage):a.ZiaInstance.checkSpell(a.defaultSpellcheckLanguage),f.classList.remove("active"),c.insertBefore(d,c.childNodes[1]),e.style.display="",e.innerHTML=b("Checking..."),a.ZiaInstance.on("complete",function(a){e.innerHTML=b("No error"),"success"===a.status&&0===a.count.spell?e.style.display="":e.innerHTML=b("Checked"),f.classList.add("active"),document.body.contains(d)&&d.parentElement.removeChild(d)})},g.onmousedown=g.onclick=function(b){a.ZiaInstance.stopProofing(),a.iframe.contentDocument.body.setAttribute("spellcheck",!0),c.parentElement.removeChild(c),b.preventDefault(),b.stopPropagation()},c},ZE.i18n=function(a){"use strict";var b=ZE_Init.language;return b&&"en"!==b?ZE.i18nObj[a]||a:a},ZE.prototype.focusAtStart=function(a){"use strict";var b=this,c=b.win,d=b.doc,e=c.getSelection()||d.selection;if(e){var f=b._createRange(e);d.body.firstChild?(f.setStart(d.body.firstChild,0),f.setEnd(d.body.firstChild,0),e.removeAllRanges(),e.addRange(f)):e.collapse(d.body,0)}a?c.focus():setTimeout(function(){c.focus()},300)},ZE.prototype.getRawContent=function(){"use strict";var a=this;return a.scspan&&"none"!==a.scspan.style.display&&(a.removeSpellcheckspans(),a.scspan.style.display="none"),a.getContent()},ZE.prototype.getContent=function(a){"use strict";var b,c,d,e,f,g=this,h=g.mode;if(e=function(a){var b=a.getElementsByTagName("img");if(b.length>0)for(var c=b.length,d=0;d<c;d++)if(b[d].style.hasOwnProperty("float")&&("left"===b[d].style.float||"right"===b[d].style.float)){if(!a.lastChild.style.hasOwnProperty("clear")||"both"!==a.lastChild.style.clear){var e=document.createElement("div");return e.style.clear="both",a.appendChild(e),!0}return!0}},h&&"plaintext"===h){if((b=g._textarea)&&(c=b.value,g.scspan&&"none"!==g.scspan.style.display&&(c=g.getSpellcheckRemovedContent("plaintext"),c&&0!==c.trim().length?c=ZE.getText(c):(c=b.value,c=c.replace(/\r+/gi,""),c=c.replace(/\n/gi,"<br />"),c=ZE.getText(c))),c))return ZE_Init.setContentProcessed&&(c=c.replace(/\r+/gi,""),c=c.replace(/\n/gi,"<br />")),c}else{if("comment"===g.initobj.type){var i=g.iframe.innerHTML;return a&&!0===a.plaintext&&(i=g.iframe.innerText.replace(/\u200B+/gi,"")),i}if(d=g.doc){g.scspan&&"none"!==g.scspan.style.display?f=g.getSpellcheckRemovedContent("richtext"):a&&a.plaintext?f=d.body.innerText.replace(/\u200B+/gi,""):(e(d.body),f=d.body.innerHTML);var j,k=new DOMParser;if(a&&a.plaintext)j=f;else if(j=k.parseFromString(d.body.innerHTML,"text/html"),j=j.getElementsByTagName("body")[0]){var l=j.querySelectorAll("#ze_imgBlock")[0];if(l){l.parentElement.removeChild(l);var m=j.querySelectorAll("#enclose")[0],n=j.querySelectorAll("#_resizecolDivs")[0];if(n&&n.parentElement.removeChild(n),m){var o,p=4,q="smallDiv";m.parentElement.removeChild(m);for(var r=1;r<=p;r++){o="#"+q+r;var s=j.querySelectorAll(o)[0];s&&s.parentElement.removeChild(s)}}f=j.getElementsByTagName("body")[0].innerHTML}}else f=";";return f}}return""};var isEmptyContentPresentInEditor=function(a){var b=ZE.getText(a.getContent({plainText:!0})).trim().length;return 0===b||1===b};ZE.prototype.confirmPlainText=function(a){"use strict";var b,c,d,e=this,f=ZE.i18n;return void 0!==e.initobj.showModeChgMsg&&e.initobj.showModeChgMsg?(confirm(e.initobj.modeChangeMessage)&&e.plainText(a),ZE_Init.modeChange&&ZE_Init.modeChange(e.mode,e.initobj.id),!1):isEmptyContentPresentInEditor(e)?(e.plainText(a),ZE_Init.modeChange&&ZE_Init.modeChange(e.mode,e.initobj.id),!1):void("ja"===ZE_Init.language?(c=f("When you switch to plain text mode, you will loose the formatting and images."),d=f("Continue ?"),b=c+d,confirm(b)&&(e.plainText(a),ZE_Init.modeChange&&ZE_Init.modeChange(e.mode,e.initobj.id))):(b="When you switch to plain text mode, you will lose the formatting and images. Continue ?",confirm(f(b))&&(e.plainText(a),ZE_Init.modeChange&&ZE_Init.modeChange(e.mode,e.initobj.id))))},ZE.prototype.plainText=function(a,b){"use strict";var c=this;if("smartCompose"!==c.initobj.editorType){var d=c.toolbardiv.getElementsByTagName("ul"),e=(c.toolbardiv.getElementsByTagName("font"),c._textarea);d.length;b=b||{},c.mode="plaintext",c.regenerateToolbar(),e||(e=document.createElement("textarea"),c.initobj.isIframeParRequired?(e.className="zmTxtArea",e.style.minHeight="20px",e.style.overflowY="hidden"):e.className="ze_area",c._textarea=e,c.initobj.isIframeParRequired?(c.innerTextAreaCon=document.createElement("div"),c.initobj.textareaWrapperCls&&(c.innerTextAreaCon.className=c.initobj.textareaWrapperCls),c.innerTextAreaCon.appendChild(e),c.innerIframeCon.parentNode.insertBefore(c.innerTextAreaCon,c.innerIframeCon.nextSibling)):c.editordiv.appendChild(e),e.onbeforedeactivate=function(){var a=document.selection;a&&(c.textrange=a.createRange())},ZE._addEvent(e,"keydown",function(a){"function"==typeof c.initobj.keyupTriggered&&c.initobj.keyupTriggered(a,c)}),ZE._addEvent(e,"keyup",function(a){var b=this.value;"function"==typeof c.initobj.keyupTriggered&&c.initobj.keyupTriggered(a,c),c.initobj.contentChanged&&"function"==typeof c.initobj.contentChanged&&b!==c._textareaValue&&(c._textareaValue=b,c.initobj.contentChanged())}),ZE_Init.avoidDropDragHandle||ZE._addEvent(e,"dragover",function(a){var b,d=a.dataTransfer,e=ZE.i18n;if((null!==d.types||d.files&&d.files.length>0)&&(d.files&&d.files.length>0||(d.types.indexOf?d.types.indexOf("Files")>-1:d.types.contains("application/x-moz-file"))||"Files"===d.types[0])){var f,g;if(f=document.getElementById("mask_editor"),b=d.effectAllowed,d.dropEffect="move"===b||"linkMove"===b?"move":"copy",!f){f=document.createElement("div"),f.contentEditable="false",f.id="mask_editor",document.body.appendChild(f),ZE._addEvent(f,"dragover",function(a){clearTimeout(c.dragTimer);var b=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy",c._stopEvent(a)}),ZE._addEvent(f,"dragleave",function(a){c.dragTimer=setTimeout(function(){var a=document.getElementById("mask_editor");a&&a.parentElement.removeChild(a)},250),c._stopEvent(a)}),ZE._addEvent(f,"drop",function(a){c._stopEvent(a),f&&f.parentElement.removeChild(f);var b=a.dataTransfer.files;b&&0!==b.length&&ZE_Init.fileUpload(c,b,a)});var h=c._textarea.getBoundingClientRect();f.style.left=h.left+"px",f.style.width=h.right+"px",f.style.height=h.height+"px",f.style.width=h.width+"px",f.style.top=h.top+"px",f.style.position="absolute",g=document.createElement("div"),g.className="ze_drag",g.contentEditable="false";var i=document.createElement("span");g.appendChild(i),i.innerHTML=e("Drop Files to Attach"),f.appendChild(g)}c._stopEvent(a)}})),a&&(e.value=b.plainTextData?a:ZE.getText(a)),c._textareaValue=e.value,c.initobj.isIframeParRequired?(c.innerIframeCon.style.display="none",c.innerTextAreaCon.style.display=""):(e.style.height=c.iframe.style.height,e.style.display="",c.iframe.style.display="none");try{b.avoidFocus||(e.focus(),e.setSelectionRange&&e.setSelectionRange(0,0))}catch(f){}}else c._microdiv.style.display="",c.mode="plaintext"},ZE.prototype.richText=function(a){"use strict";var b=this;if("smartCompose"!==b.initobj.editorType){var c=b.toolbardiv.getElementsByTagName("ul"),d=b._textarea;c.length,b.toolbardiv.getElementsByTagName("font");b.mode="richtext",b.initobj.isIframeParRequired?(b.innerTextAreaCon.style.display="none",b.innerIframeCon.style.display=""):(d.style.display="none",b.iframe.style.display=""),a?b.squireInstance.setHTML(ZE.getFormattedContent(a)):b.squireInstance.setHTML(""),ZE_Init.modeChange&&ZE_Init.modeChange(b.mode,b.initobj.id),b.stack&&b.stack.commands.length>0&&(b.stack.clearStack(),b.saveCurrentState({cursorPosition:{start:0,end:0}})),setTimeout(function(){b.focusAtStart(!0),b.squireInstance.focus(),b.regenerateToolbar(),b.updateToolbar()},0)}else b._microdiv.style.display="none",b.mode="richtext"},ZE.getFormattedContent=function(a){"use strict";return a.replace(/ /gi," ").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\n/gi,"<br>")},ZE._setAttribute=function(a,b,c){"use strict";a.setAttribute(b,c)},ZE._appendChildren=function(a,b){"use strict";for(var c=b.length,d=0;d<c;d++)a.appendChild(b[d])},ZE._setStyle=function(a,b,c){"use strict";if("object"===_typeof(b))for(var d=Object.keys(b),e=d.length,f=0;f<e;f++)a.style[d[f]]=b[d[f]];else"string"==typeof b&&(a.style[b]=c)},ZE.setCss=function(a,b,c){"use strict";a.style[b]=c},ZE.getText=function(a){"use strict";if(a){var b=function(a){var b,c,d=[],e=[],f=[];if(b=document.createElement("div"),b.innerHTML="",a=a.replace(/\n+/gi,""),a=a.replace(/\r+/gi,""),a=a.replace(/<!--.*?-->/gi,""),a=a.replace(/<head>.*?<\/head>/gi,""),d=a.match(/<a .*? data-hugatt="hugatt".*?<\/a>/g),d||(d=a.match(/<a .*? data-hugatt="hugatt".*?<\/a>/g)),d){for(c=0;c<d.length;c++)b.innerHTML+=d[c],e.push(new RegExp(d[c]));for(f=b.getElementsByTagName("a"),c=0;c<d.length;c++){var g=f[c].innerHTML+"\n"+f[c].getAttribute("href");a=a.replace(e[c],g)}}return a=a.replace(/<div .*? data-hugatt="hugatt".*?><\/div>/g,""),a=a.replace(/<style>.*<\/style>/gi,"\n"),a=a.replace(/<br.*?>/gi,"\n"),a=a.replace(/<hr.*?>/gi,"\n"),a=a.replace(/<\/p>/gi,"\n"),a=a.replace(/<\/h[1-6]>/gi,"\n"),a=a.replace(/<\/tr>/gi,"\n"),a=a.replace(/<\/li>/gi,"\n"),a=a.replace(/<\/td>/gi," "),a=a.replace(/<\/th>/gi,""),a=a.replace(/<.*?>/gi,""),a=a.replace(/&nbsp;/gi," "),a=a.replace(/&lt;/gi,"<"),a=a.replace(/&gt;/gi,">"),a=a.replace(/&quot;/gi,'"'),a=a.replace(/&amp;/gi,"&")},c=document.createElement("div");c.innerHTML=a,a=c.innerHTML;if(-1!==a.search(/<blockquote/gi)){var d=a.search(/<blockquote/gi),e=a.toLowerCase().lastIndexOf("</blockquote>"),f=a.substring(d,e+13);return a=a.replace(f,"##===###===##"),f=b(f),f=f.replace(/\n/gi,"\n > "),f=" > "+f,a=b(a),-1!==a.search(/##===###===##/gi)&&(a=a.replace("##===###===##",f)),a}return b(a)}return""},ZE.prototype.setMode=function(a){"use strict";var b=this,c=b.mode;"plaintext"===a?c!==a&&b.confirmPlainText(""):"richtext"!==c&&b.richText("")},ZE.getContextValue=function(){"use strict";return ZE_Init.contextVal?"/"+ZE_Init.contextVal:""},ZE.sendInitRequest=function(a,b){"use strict";var c=document.getElementById("ze_img_request");ZE.getContextValue();c||(c=document.createElement("iframe"),c.name="ze_img_request",c.id="ze_img_request",c.style.width="0px",c.style.height="0px",c.style.border="0px",b.initobj.setImgRequestIframePosition&&(c.style.position="absolute"),document.body.appendChild(c))},ZE.getCSRFParamName=function(){"use strict";return ZE_Init.csrfParamVal||"zereqid"},ZE.getCSRFCookie=function(a){"use strict";if(ZE_Init.csrfCookieVal&&ZE_Init.csrfParamVal)return ZE_Init.csrfCookieVal;var b=ZE_Init.csrfCookieName||"ZE_CSRF_TOKEN";b=new RegExp("^"+b+"=");for(var c=a.doc.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(b.test(e))return e.replace(b,"")}return null},ZE.addClass=function(a,b){"use strict";-1===a.className.indexOf(b)&&(a.className?a.className+=" "+b:a.className=b)},ZE.removeClass=function(a,b){"use strict";a.className=a.className.replace(b,""),a.className=ZE.trim(a.className)},ZE._addEvent=function(a,b,c){"use strict";a&&(document.addEventListener?a.addEventListener(b,c,!0):a.attachEvent("on"+b,c))},ZE._removeEvent=function(a,b,c){"use strict";a&&(document.removeEventListener?a.removeEventListener(b,c,!0):a.detachEvent("on"+b,c))},ZE.hasClass=function(a,b){"use strict";return a.className.indexOf(b)>-1},ZE.showOverlay=function(){"use strict";var a;document.getElementById("ze_orly")||(a=document.createElement("div"),a.id="ze_overlay",a.className="ze_orly",document.body.appendChild(a),a.addEventListener("mousedown",function(a){a.preventDefault(),a.stopPropagation()},!1))},ZE.hideOverlay=function(){"use strict";var a=document.getElementById("ze_overlay");a.parentNode.removeChild(a)},ZE.trim=function(a){"use strict";return a=a.replace(/^\s*(.*)/,"$1"),a=a.replace(/(.*?)\s*$/,"$1")},ZE.prototype.getFormattingValues=function(a){"use strict";var b,c=this;c.win.getSelection?b=c.win.getSelection():c.doc.selection&&"Control"!==c.doc.selection.type&&(b=c.doc.selection);for(var d,e=b.anchorNode;null!==e;){if(e.className&&e.className===a){switch(a){case"size":d=e.style.fontSize;break;case"highlight":d=e.style.backgroundColor}break}e=e.parentNode}return d},ZE.prototype.extend=function(a,b){"use strict";var c,d;for(c in b)void 0!==(d=b[c])&&(a[c]=d);return a},ZE.prototype.saveCursorPosition=function(a){"use strict";var b,c=this,d=c.win,e=c.doc;if(d.getSelection&&e.createRange){var f=c.win.getSelection();if(f&&f.rangeCount>0){var g=c.win.getSelection().getRangeAt(0),h=g.cloneRange();return h.selectNodeContents(a),h.setEnd(g.startContainer,g.startOffset),b=h.toString().length,{start:b,end:b+g.toString().length}}return{start:0,end:0}}if(e.selection){var i=e.selection.createRange(),j=e.body.createTextRange();return j.moveToElementText(a),j.setEndPoint("EndToStart",i),b=j.text.length,{start:b,end:b+i.text.length}}},ZE.prototype.restoreCursorPosition=function(a,b){"use strict";var c=this,d=c.win,e=c.doc,f=!1;if(d.getSelection&&e.createRange){var g=0,h=c.doc.createRange();h.setStart(a,0),h.collapse(!0),0===b.start&&0===b.end&&(f=!0);var i,j=[a],k=!1,l=!1;if(!f)for(;!l&&(i=j.pop());)if(3===i.nodeType){var m=g+i.length;!k&&b.start>=g&&b.start<=m&&(h.setStart(i,b.start-g),k=!0),k&&b.end>=g&&b.end<=m&&(h.setEnd(i,b.end-g),l=!0),g=m}else for(var n=i.childNodes.length;n--;)j.push(i.childNodes[n]);var o=c.win.getSelection();o.removeAllRanges(),o.addRange(h)}else if(e.selection){var p=e.body.createTextRange();p.moveToElementText(a),p.collapse(!0),p.moveEnd("character",b.end),p.moveStart("character",b.start),p.select()}},ZE.prototype.saveCurrentState=function(a){"use strict";var b,c=this,d=c.doc;a=a||{},b=a.cursorPosition,c.stack&&(b?c.stack.execute(new c.EditorState(d.body,c.getContent(),b)):c.stack.execute(new c.EditorState(d.body,c.getContent(),c.saveCursorPosition(d.body))),c.initobj.contentChanged&&"function"==typeof c.initobj.contentChanged&&!a.suppressContentChange&&c.initobj.contentChanged())},ZE.prototype.getPosFromCursor=function(a,b){"use strict";var c=this,d=c.squireInstance.getPath(),e=[],f=b||0;d.length>0&&(e=d.split(">"));var g,h=-1;for(g=e.length-1;g>=0;g--)if(e[g]===a){if(0===f){h=g;break}f-=1}return h},ZE.prototype.fontsizeConversion=function(a,b){"use strict";var c={8:"10",10:"13",12:"16",14:"18",18:"24",24:"32",36:"48"},d=Math.round(.75*b),e={1:"8",2:"10",3:"12",4:"14",5:"18",6:"24",7:"36"},f={1:"10",2:"13",3:"16",4:"18",5:"24",6:"32",7:"48"};return"pttopx"===a?c[b]:"pxtopt"===a?d:"fontvaltopt"===a?e[b]:"fontvaltopx"===a?f[b]:void 0},ZE.tabHandler=function(a,b,c){"use strict";var d=this,e=b.getSelection(),f=e.anchorNode;if(ZE_Init.tabKeyHandling&&(a.preventDefault(),!c.queryCommandState("insertOrderedList")&&!c.queryCommandState("insertUnOrderedList"))){for(b.getSelection().collapseToStart();null!==f;){if("TD"===f.nodeName){var g=document.createRange(),h=f.nextSibling;h=h?h.firstChild:f.parentElement.nextElementSibling?f.parentElement.nextElementSibling.firstChild:d.createNewTableRow(e),g.setStart(h.firstChild,0),g.collapse(!0),e.removeAllRanges(),e.addRange(g);var i=h.firstChild;return null===i&&(i=h.parentElement),3===i.nodeType&&(i=i.parentElement),"BR"===i.nodeName&&(i=i.parentElement),void(/Gecko\//.test(navigator.userAgent)&&""===i.innerText.trim()&&(i.innerHTML=" "))}f=f.parentElement}c.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")}},ZE.shiftTabHandler=function(a,b,c){var d=this,e=b.getSelection(),f=e.anchorNode;if(ZE_Init.tabKeyHandling)for(b.getSelection().collapseToStart();null!==f;){if("TD"===f.nodeName){var g=document.createRange(),h=f.previousSibling;h=h?h.firstChild:f.parentElement.previousElementSibling?f.parentElement.previousElementSibling.lastChild:d.createNewTableRow(e);var i=h.firstChild;return null===i&&(i=h.parentElement),3===i.nodeType&&(i=i.parentElement),"BR"===i.nodeName&&(i=i.parentElement),g.setStart(h.firstChild,0),g.setEnd(h.firstChild,0),g.collapse(!0),e.removeAllRanges(),e.addRange(g),/Gecko\//.test(navigator.userAgent)&&""===i.innerText.trim()&&(i.innerHTML=" "),void a.preventDefault()}f=f.parentElement}},ZE.fsDisp={1:"8",2:"10",3:"12",4:"14",5:"18",6:"24",7:"36"},ZE.ffDisp={arial:"Arial","comic sans ms":"Comic Sans MS",verdana:"Verdana",georgia:"Georgia",tahoma:"Tahoma",calibri:"Calibri","courier new":"Courier New",serif:"Serif","sans-serif":"Serif","arial narrow":"Narrow","arial black":"Wide","times new roman":"Times New Roman",garamond:"Garamond",batang:"Serif","trebuchet ms":"Trebuchet",times:"Times New Roman"},ZE.getHookMethod=function(a,b){"use strict";if("function"==typeof b)return function(c,d,e){e.originator&&e.originator===a&&b(c,d)}},ZE.addHook=function(a,b){"use strict";"function"==typeof b&&DOMPurify.addHook(a,b)},ZE.removeHook=function(a,b){"use strict";"function"==typeof b&&DOMPurify.removeHook(a,b)},ZE.createDraftToolbar=function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o={},p=document,q=ZE.i18n,r=0,b=a;for(c=p.createElement("div"),c.className="ze_SCmb",d=b.length,r=0;r<d;r++){for(e=p.createElement("ul"),h=b[r],i=0,j=h.length;i<j;i++){if(k=h[i],l=k[0],m=k[2],f=p.createElement("li"),e.appendChild(f),"otheroptions"===l&&(e.className="ze_frt",e.style.display=""),n=p.createElement("b"),"attach"===l&&(n.className="ze_Sel ze_bg"),"fontsize"===l){var s=p.createElement("span");n.style.minWidth="36px",n.appendChild(s),s.className="ze_pdl"}var t,u=p.createElement("span");u.className=m,"fontsize"===l&&(u.style.cssFloat="right"),n.appendChild(u),"attach"!==l&&"alignoptions"!==l&&"listoptions"!==l&&"spellcheck"!==l||(t=document.createElement("span"),t.className="zei-arrow",n.appendChild(t)),f.appendChild(n),n.title=q(k[1]),o[l]=n,0!==i&&(g=document.createElement("div"),n.appendChild(g))}c.appendChild(e)}return c},function(){"use strict";var a;a=this.zeUndo={},a.Stack=function(){this.commands=[],this.stackPosition=-1,this.lastSavedState="",this.execute=function(a){this.lastSavedState!==a.newValue&&(a.newValue=this.clearSmartSuggestion(a.newValue),this.lastSavedState=a.newValue,this.clearRedo(),this.stackPosition+1>100&&(this.commands.splice(0,1),this.stackPosition-=1),this.commands.push(a),this.stackPosition++)},this.clearSmartSuggestion=function(a){for(var b=new DOMParser,a=b.parseFromString(a,"text/html"),c=a.querySelectorAll("#suggestionNode"),d=c.length,e=0;e<d;e++)try{c[e].parentElement.removeChild(c[e])}catch(f){}return a.getElementsByTagName("body")[0].innerHTML},this.clearStack=function(){this.stackPosition=-1,this.commands.splice(0,this.commands.length),this.lastSavedState=""},this.undo=function(){this.stackPosition>0&&(this.stackPosition--,this.commands[this.stackPosition].undo(),this.commands[this.stackPosition].setFocus(),this.lastSavedState=this.commands[this.stackPosition].newValue)},this.canUndo=function(){return this.stackPosition>0},this.redo=function(){this.stackPosition++,this.commands[this.stackPosition].redo(),this.lastSavedState=this.commands[this.stackPosition].newValue,this.commands[this.stackPosition].setFocus()},this.canRedo=function(){return this.stackPosition<this.commands.length-1},this.clearRedo=function(){this.commands=this.commands.slice(0,this.stackPosition+1)}}}.call(this),ZE.prototype.createCustomizedToolbar=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=this,p=!0,q=!1,r=0,s=0,t="zei-more",u="otheroptions",v=ZE.i18n,w={"zei-textleft":v("Align left"),"zei-textright":v("Align right"),"zei-textcenter":v("Align center"),"zei-textjustify":v("Align justify"),"zei-order":v("Numbered list"),"zei-unorder":v("Bullet list"),"zei-spellCheck":v("Spell check"),spellcheck:v("Change language"),spellcheckPlain:v("Change language"),"zei-indent":v("Increase Indent"),"zei-outdent":v("Decrease Indent"),"zei-rtl":v("RTL"),"zei-ltr":v("LTR"),"zei-lineHeight":v("Line height"),"zei-superScript":v("Superscript"),"zei-subScript":v("Subscript"),"zei-formatpaint":v("Format Painter"),"zei-removeformat":v("Remove Formatting")},x=function(){var a=o.alterTool;a&&(a.style.display="none",a.style.removeProperty("width"),a.style.removeProperty("height"),e.parentNode.style.backgroundColor="",ZE._removeEvent(document,"mousedown",y),ZE._removeEvent(o.doc,"mousedown",y))},y=function(a){if("ze_spell"===a.target.parentElement.className)return!1;var b,c=o.alterTool;if(a)for(b=a.target;null!==b&&(b!==c&&b!==e);b=b.parentNode);b||x()};a=document.createElement("div");var z=["alignoptions","listoptions","spellcheck","lineHeight","fontfamily","indentoptions","directionoptions","scriptoptions","formatingoptions","fontsize","spellcheckPlain"],A=["fontfamily","fontsize"],B=["spellcheckPlain","spellcheck"],C="lineHeight";o.removeAlterToolbar=function(){o.alterTool&&"none"!==o.alterTool.style.display&&x()};var D=function(){if(o.toolbarOrder=[[["spellcheckPlain","spellcheck","zei-spellCheck"]],[["otheroptions","switchToRichText","zei-arrow ze-big"]]],o.initobj.customAttachArr){o.initobj.customAttachArr().forEach(function(a){var b=[a];o.toolbarOrder.unshift(b)})}return o.toolbarOrder},E=function(a){a.preventDefault(),a.returnValue=!1,a.cancelBubble=!0},F=80,G=28;g=function(){o.nodesAsObj={},o.customCallbackObj={},o.plainNodeasObj={};var a=document.createElement("div"),b=document.createElement("div");b.className="ze_SCmb",a.className="ze",o.editordiv=a,o.toolbardiv=b,a.appendChild(b),o.outerdiv.appendChild(a),o.toolbarobject={};var c=document.createElement("div");a.appendChild(c)};var H=function(a){o._stopEvent(a);var b=o._getSelection();try{o._createRange(b)}catch(c){o.range?(o.range.select(),delete o.range):o.win.focus()}return"function"==typeof ZE_Init.toolbarClickTriggered&&ZE_Init.toolbarClickTriggered(),!1},I=function(a){var b=a.target.closest("b"),c=o.alterTool.style,d=b.offsetWidth,e=b.offsetLeft,f=b.offsetParent.offsetLeft+e+d-o.alterTool.offsetWidth;f<0&&(f=0,c.height="auto",c.width=e+d+"px"),c.left=f+"px"},J=function(a){switch(a){case"zei-order":_command="insertorderedlist";break;case"zei-unorder":_command="insertunorderedlist";break;case"zei-textleft":_command="j-left";break;case"zei-textright":_command="j-right";break;case"zei-textfull":_command="j-full";break;case"zei-textcenter":_command="j-center";break;case"zei-superScript":_command="superscript";break;case"zei-subScript":_command="subscript";break;default:_command=void 0}return _command},K=function(a){H(a);var b,c;return"EM"===a.target.nodeName?(d(a),!1):("SPAN"===a.target.nodeName?(b=a.target.className,c=a.target.closest("li").getAttribute("data-action")):a.target.closest("span")&&(b=a.target.closest("span").className),b===t?(h(a),!1):Object.keys(o.customCallbackObj).includes(c)?(o.customCallbackObj[c](o.initobj.id),o.squireInstance.focus(),!1):(b=J(b),void 0===b&&(b=a.target.closest("li").getAttribute("data-action")),o.execCommand(a,b),void o.squireInstance.focus()))},L=function(){ZE._removeEvent(a,"click",K),ZE._addEvent(a,"click",K)},M=function(){var a,b,c=document.createElement("ul"),d=document.createElement("li"),e=document.createElement("b"),f=document.createElement("span");f.className="zei-bold",c.appendChild(d),d.appendChild(e),e.appendChild(f);var g=document.createElement("span");g.className="zei-arrow",o.toolbardiv.appendChild(c),o.toolbardiv.appendChild(g),a=c.offsetWidth,b=g.offsetWidth,c.parentElement.removeChild(c),g.parentElement.removeChild(g),o.iconWidth=a,o.arrowWidth=b},N=function(a){var b=0,c=0,d=[],e=[],g=0,h=[],n={},p=0,q=o.initobj.toolbar;if(M(),r=o.initobj.toolbarOrder?o.initobj.toolbarOrder:o.initobj.toolbar?ZE_Init.toolbarOrderGenerate(q):ZE_Init.toolbarOrder,o.initobj.notes&&(r=ZE_Init.generalNotesToolbar),"smartCompose"===o.initobj.editorType)return!1;var r;"plaintext"===a&&(r=D());var s,t=r.length,x=!0;for(o.isOtherOptionsAvl=!1;b<t;b++){for(c=0,d=r[b],i=document.createElement("ul"),h=[],individualGroupWidth=0;c<d.length;c++){if(!x)return!1;if(n={},e=d[c],j=document.createElement("li"),m=document.createElement("b"),k=document.createElement("span"),"custom"===e[0]){var y=e[4]||e[0];o.toolbarobject[y]=m}else o.toolbarobject[e[0]]=m;s=e[0],s===u&&(o.isOtherOptionsAvl=!0),"custom"===e[0]&&(s="custom"+p,o.customCallbackObj[s]=e[3],p++),j.setAttribute("data-action",s),"fontfamily"===e[0]?g=F:"fontsize"===e[0]?(g=G,k=document.createElement("em"),m.style.minWidth="36px",k.id="fontsizeEditable",f(k)):g=o.iconWidth,j.appendChild(m),m.appendChild(k),k.className=e[2],i.appendChild(j),z.includes(e[0])&&(l=document.createElement("span"),m.appendChild(l),l.className="zei-arrow",g+=o.arrowWidth),z.includes(e[0])?o.initobj.customTooltip?(k.setAttribute("data-tooltip",w[e[2]]),l.setAttribute("data-tooltip",v(e[1]))):(k.setAttribute("title",w[e[2]]),l.setAttribute("title",v(e[1]))):o.initobj.customTooltip?m.setAttribute("data-tooltip",e[1]):m.setAttribute("title",e[1]),A.includes(e[0])&&(k.removeAttribute("data-tooltip"),k.removeAttribute("title")),C===e[0]&&(o.initobj.customTooltip?k.setAttribute("data-tooltip",e[1]):k.setAttribute("title",e[1])),B.includes(e[0])&&(o.initobj.customTooltip?l.setAttribute("data-tooltip",w[e[0]]):l.setAttribute("title",w[e[0]])),individualGroupWidth+=g,e[0]===u&&"plaintext"===o.mode&&(k.innerText=v("Switch to Rich text"),k.style.padding="0px 10px",k.className=""),n[c]={el:j,width:g,groupIndex:b,positionInsideGroup:c},h.push(n)}"richtext"===a?o.nodesAsObj[b]=h:o.plainNodeasObj[b]=h}};h=function(c){if(q=!0,p=!0,r=s,e=c.target,
ZE._removeEvent(document,"mousedown",y),ZE._removeEvent(o.doc,"mousedown",y),ZE._addEvent(document,"mousedown",y),ZE._addEvent(o.doc,"mousedown",y),o.alterTool&&document.body.contains(o.alterTool))return""===o.alterTool.style.getPropertyValue("display")?o.alterTool.style.display="none":(o.alterTool.style.removeProperty("display"),I(c)),!1;a=document.createElement("div"),a.id="alter_toolbar",a.className=["ze_SCmb","ze_alttool"].join(" "),o.alterTool=a,b(),o.iframe.parentNode.insertBefore(a,o.iframe),I(c),L(),c.preventDefault(),c.stopPropagation(),ZE._addEvent(document,"mousedown",y),ZE._addEvent(o.doc,"mousedown",y)};var O=function(a){var b=a;ZE._removeEvent(b,"click",h),ZE._addEvent(b,"click",h)},P=function(){var a=document.createElement("ul"),b=document.createElement("li"),c=document.createElement("b"),d=document.createElement("span");return d.className="zei-more",a.appendChild(b),b.appendChild(c),c.appendChild(d),O(a),a};b=function(){var b=o.toolbardiv.offsetWidth-50,c=Object.keys(o.nodesAsObj),d=100;o.initobj.customThresholdValue&&(d=o.initobj.customThresholdValue),o.isOtherOptionsAvl&&(b-=o.iconWidth),b-=d;var e,f=0,g=0,h=o.nodesAsObj;"plaintext"===o.mode&&(h=o.plainNodeasObj,c=Object.keys(o.plainNodeasObj));for(var i=function(){h[r].forEach(function(a,b){"otheroptions"===a[b].el.getAttribute("data-action")?o.toolbardiv.contains(a[b].el)||e.appendChild(a[b].el):e.appendChild(a[b].el),a[b].el.getAttribute("data-action")===u?(e.style.position="absolute",k=!0,e.style.right="0px"):k=!1,g+=a[b].width})},j=c.length,k=!1;r<j;r++){if(g=0,!p)return!1;if(e=document.createElement("ul"),n=document.createElement("font"),0===r&&L(),0!==r&&a.appendChild(n),i(),q&&!k)a.appendChild(e);else if(b>g+f&&!k||o.initobj.avoidMoreOption)a.appendChild(e),f+=g;else if(!q){s=r;var l=Object.keys(o.nodesAsObj).length;"plaintext"===o.mode&&(l=Object.keys(o.plainNodeasObj).length),r!==l-1&&(p=!1),(o.isOtherOptionsAvl&&"richtext"===o.mode||k)&&(e.innerHTML="",e.appendChild(h[j-1][0][0].el),e.style.position="absolute",e.style.right="0px",a.appendChild(e))}}},c=function(a){var b={enter:13,zero:48,backspace:8,leftarrow:37,rightarrow:39,uparrow:38,downarrow:40,period:190,delete:46,five:53},c=this,d=c.innerText,e=a.keyCode;if(!/^([0-9.]|Backspace|ArrowUp|ArrowDown|ArrowRight|ArrowLeft|Enter|Delete)/.test(a.key))return E(a),!1;var f=document.getSelection();if(f.anchorOffset!==f.focusOffset)return!1;if(2===d.indexOf(".")&&e!==b.five&&e!==b.leftarrow&&e!==b.rightarrow&&e!==b.backspace&&e!==b.enter&&e!==b.delete&&d.length<=4)return E(a),!1;if(2===d.length&&e!==b.period&&e!==b.leftarrow&&e!==b.rightarrow&&e!==b.backspace&&e!==b.enter&&e!==b.delete)return E(a),!1;if(e===b.enter&&d.length<=4){if(parseFloat(d)<8)return c.innerText=parseInt(ZE_Init.defaultFontSize),c.blur(),!1;var g=4/3*parseFloat(d);o.squireInstance.setFontSize(g+"px");var h=document.getElementById("ze_dropdown");return c.contentEditable=!1,h&&(c.parentElement.className="",h.parentElement.removeChild(h)),o.saveCurrentState(),a.preventDefault(),a.stopPropagation(),0===d.length&&(c.innerText=parseInt(ZE_Init.defaultFontSize)),!1}if(e===b.downarrow){var i=document.getElementById("ze_dropdown");if(i){var j=i.getElementsByClassName("sel")[0],k=j.nextSibling;k&&(j.className="",k.className="sel",k.scrollIntoView(!0),c.innerText=j.nextSibling.innerText)}}if(e===b.uparrow){var i=document.getElementById("ze_dropdown");if(i){var j=i.getElementsByClassName("sel")[0],l=j.previousSibling;l&&"LI"===l.nodeName&&(j.className="",l.className="sel",l.scrollIntoView(!0),c.innerText=l.innerText)}}else{if(a.keyCode===b.zero&&0===d.length)return E(a),!1;if(d.length>=4&&a.keyCode!==b.leftarrow&&a.keyCode!==b.rightarrow&&a.keyCode!==b.backspace&&e!==b.delete)return E(a),!1;if(!(e>=48&&e<=57)&&a.keyCode!==b.leftarrow&&a.keyCode!==b.rightarrow&&a.keyCode!==b.backspace&&e!==b.delete){if(e===b.period&&2===d.length)return!1;a.preventDefault()}}};var d=function(a){var b=a.target;b.contentEditable=!0,b.focus(),a.stopPropagation(),a.cancelBubble=!0};f=function(a){ZE._addEvent(a,"keydown",c)};var Q=function(){o.toolbardiv.innerHTML="",p||(n=document.createElement("font"),a.appendChild(n),a.appendChild(P())),o.alterTool&&document.body.contains(o.alterTool)&&o.alterTool.parentElement.removeChild(o.alterTool),o.toolbardiv.appendChild(a)};o.toolbardiv||g(),"richtext"===o.mode&&0===Object.keys(o.nodesAsObj).length&&N("richtext"),"plaintext"===o.mode&&0===Object.keys(o.plainNodeasObj).length&&N("plaintext"),r=0,b(),Q()},ZE.prototype.regenerateToolbar=function(a){"use strict";this.createCustomizedToolbar()},ZE.prototype.updateToolbar=function(){"use strict";var a,b,c,d,e=this,f=e.toolbarobject,g=ZE.i18n;"comment"===e.initobj.type?(a=document,e.doc=document):a=e.doc,"function"==typeof ZE_Init.updateToolbar&&ZE_Init.updateToolbar(e);g("Align left"),g("Align right"),g("Align center"),g("Align justify"),g("Numbered list"),g("Bullet list");for(b in f)switch(b){case"bold":case"italic":case"underline":case"strikethrough":case"superscript":case"subscript":case"insertorderedlist":case"insertunorderedlist":a.queryCommandState(b)?f[b].className.search("ze_esel")<0&&ZE.addClass(f[b],"ze_esel"):ZE.removeClass(f[b],"ze_esel");break;case"alignoptions":var h=f[b].firstChild;a.queryCommandState("justifyright")?h.setAttribute("class","zei-textright"):a.queryCommandState("justifycenter")?h.setAttribute("class","zei-textcenter"):a.queryCommandState("justifyfull")?h.setAttribute("class","zei-textjustify"):h.setAttribute("class","zei-textleft");break;case"listoptions":break;case"forecolor":var i=a.queryCommandValue("forecolor")||"black";d=i,f[b].firstChild.style.borderBottomColor="number"==typeof d?"rgb("+(255&d)+","+(d>>8&255)+","+(d>>16&255)+")":i;break;case"backcolor":try{c=a.queryCommandValue("backcolor")||a.queryCommandValue("hilitecolor"),/transparent/i.test(c)?c=e.getFormattingValues("highlight")||"white":"rgba(0, 0, 0, 0)"===c&&(c="white"),""===c&&(c="white"),d=c,"number"==typeof d?(parseInt(String(d)),f[b].firstChild.style.borderBottomColor="rgb("+(255&d)+","+(d>>8&255)+","+(d>>16&255)+")"):f[b].firstChild.style.borderBottomColor=c}catch(v){}break;case"fontfamily":try{var j;if("comment"===e.initobj.type){if(void 0===(j=e.squireInstance.getFontInfo().family||ZE_Init.defaultFontFamily)){var k=e._getSelection().anchorNode;k&&3===k.nodeType&&(k=k.parentNode),k&&1===k.nodeType&&""===(j=k.style.fontFamily)&&(j=ZE_Init.defaultFontFamily)}}else j=a.queryCommandValue("fontname")||ZE_Init.defaultFontFamily;var l;j=j.split(",")[0],j=j.replace(/['"]/gi,""),l=void 0===ZE.ffDisp[j.toLowerCase()]?j:ZE.ffDisp[j.toLowerCase()],f[b].firstChild.innerHTML=l,f[b].firstChild.style.fontFamily=l+",helvetica, sans-serif"}catch(v){}break;case"fontsize":try{var m=e.squireInstance.getFontInfo().size||null;if(m&&m.includes("pt"))return f[b].firstChild.innerHTML=m.replace("pt",""),!1;if(m&&!isNaN(parseInt(m))){var n=parseFloat(.75*parseFloat(m)).toFixed(1),o=n;n=n.indexOf(".5"),-1!==n&&"smartCompose"!==e.initobj.editorType||(o=Math.round(o)),f[b].firstChild.innerHTML=o}else{var p=e.getFormattingValues("size");if(p&&p.includes("pt"))return f[b].firstChild.innerHTML=p.replace("pt",""),!1;if(p&&!isNaN(parseInt(p)))f[b].firstChild.innerHTML=e.fontsizeConversion("pxtopt",parseFloat(p));else if(0===m)f[b].firstChild.innerHTML=ZE.fsDisp[2];else{var q=e.win.getSelection();q&&q.anchorNode&&3===q.anchorNode.nodeType&&(q=q.anchorNode.parentElement);var r=e.getFormattingValues("size");null===q&&void 0===r&&(r=window.getComputedStyle(q).fontsize),r&&!isNaN(parseInt(p))?f[b].firstChild.innerHTML=e.fontsizeConversion("pxtopt",parseFloat(r)):f[b].firstChild.innerHTML=parseFloat(ZE_Init.defaultFontSize)}}}catch(v){f[b].firstChild.innerHTML=parseFloat(ZE_Init.defaultFontSize)}break;case"heading":try{var s=e.doc.queryCommandValue("formatBlock"),t={h1:"Heading1",h2:"Heading2",h3:"Heading3",h4:"Heading4",h5:"Heading5",h6:"Heading6",normal:"(1.2) Normal"},u=t[s];f[b].firstChild.innerHTML=u||t.normal}catch(v){}}},ZE.removeImgResizeDivs=function(a){var b=a.doc.body.querySelectorAll("[data-resize]");if(b.length>1){var c,d,e,f=b.length;for(e=0;e<f;e++)b[e].parentElement.removeChild(b[e]);c=a.doc.body.getElementsByClassName("enc")[0],c&&c.parentElement.removeChild(c),d=a.doc.getElementById("ze_imgBlock"),d&&d.parentElement.removeChild(d)}},ZE.prototype.unbindEvents=function(){var a=this;"comment"===a.initobj.type&&(_doc=a.iframe),ZE._removeEvent(_doc,"click",a.docMouseDown)};var bindEventForCheckBox=function(a){this.saveCurrentState();var b=a.target.closest("li"),c=this.doc.getSelection();3===c.anchorNode.nodeType&&0===c.anchorOffset&&b&&b.classList&&"zeCheckBox"===b.parentNode.className&&("zeChecked"===b.classList[0]?b.className="":b.className="zeChecked")};ZE.prototype.processBase64Images=function(a,b){var c,d=this,e=d.doc.getElementsByTagName("img");for(c=0;c<e.length;c++)e[c].getAttribute("data-load")===b&&(e[c].src=a,e[c].removeAttribute("data-load"))},ZE.prototype.processBase64FailureImages=function(a,b){var c,d=this,e=d.doc.getElementsByTagName("img");for(c=0;c<e.length;c++)e[c].getAttribute("data-load")===b&&(e[c].src=a[b],e[c].removeAttribute("data-load"))},ZE.prototype.createEditor=function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=document,v=0,w=0,x=0,y=0,z=t.initobj,A=u.getElementById(z.id),B=z.editorheight;if(t.initobj.contactsArray=[],("smartCompose"===t.initobj.editorType||t.initobj.toolbarConstructionNotRequired)&&(s=u.createElement("div"),s.className="ze",t.editordiv=s),ZE.is_chrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,"comment"===z.type){a=u.createElement("div"),a.setAttribute("data-gramm",!1);var C=document.createElement("div"),D=document.createElement("br");C.appendChild(D),a.appendChild(C)}else a=u.createElement("iframe");t.iframe=a,a.className="ze_area";var E=!0;if(t.initobj.hasOwnProperty("iframeHeightRequired")&&(E=t.initobj.iframeHeightRequired),B?a.style.height=B+"px":E&&(a.style.height=A.getBoundingClientRect().height-t.toolbardiv.getBoundingClientRect().height+"px"),n=function(){var a,b=u.getElementsByClassName("ze_tbEd"),c=u.getElementsByClassName("IconDiv")[0],d=u.getElementById("ze_dropdown");a=function(){t.insertIconRef.className="ui-insert",t.insertIconRef.style.visibility="",t.paraIconRef.className="ui-paragraph",t.initobj.microParaToolbar?t.paraIconRef.style.visibility="":t.paraIconRef.style.visibility="hidden"},l=u.getElementById("stickIcon"),l?"zei-unpin"===l.className||d||(b[0].parentElement.removeChild(b[0]),c.parentElement.removeChild(c)):(a(),b[0]&&!d&&b[0].parentElement.removeChild(b[0])),b[1]&&(a(),b[1].parentElement.removeChild(b[1]))},m=function(){var b=document.createElement("style");b.type="text/css",b.appendChild(document.createTextNode(".MsoNormal {margin: 0;}")),a.contentWindow.document.getElementsByTagName("head")[0].appendChild(b)},c=function(){var c,f,g,h,i,j,k,l,s=a.contentWindow,A=z.content,B=!1;"comment"!==z.type?(b=s.document||a.contentDocument,t.win=s,t.doc=b,c=b.body,a.onload=null,l=function(a){var d=b.getElementsByTagName("head")[0],e=b.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=ZE_Init.cssPath+"/css/"+a,d||(c.parentNode.insertBefore(b.createElement("head"),c),d=b.getElsetementsByTagName("head")[0]),d&&d.appendChild(e)},ZE_Init.needResizeImage&&l("editor.min.css"),l("editor1.min.css"),m(),t.doc.body.contentEditable=!0,t.doc.body.setAttribute("data-gramm","false")):(s=a,b=u,t.win=window,t.doc=a,t.doc.body=a,t.iframe.contentWindow=window),t.ZiaIntegration(),ZE._addEvent(t.doc,"mousedown",function(a){var b=a.target;b.parentElement;"smartCompose"===t.initobj.editorType&&u.getElementsByClassName("ze_tbEd").length>=1&&n();var c=document.getElementById("ze_spellcheck_options");c&&(c.parentElement.removeChild(c),ZE.removeClass(t.toolbarobject.spellcheck,"ze_dn ze_Sel"));var d=document.getElementById("img_edit_link_options");d&&d.parentElement.removeChild(d),"function"!=typeof b.hasAttribute||b.hasAttribute("data-resize")||ZE.removeImgResizeDivs(t);var e,f=a.target;try{e=t.doc.getElementById("ze_imgBlock")}catch(g){e=document.getElementById("ze_imgBlock")||null}for(;null!==f;){if("IMG"===f.nodeName&&f.hasAttribute("orig_width"))return t._stopEvent(a),!1;if(f===e)return a.preventDefault(),!1;f=f.parentNode}});var C=function(a){for(var b=a.target;null!==b;){if("TABLE"===b.nodeName){t.resizeColumn(b);break}b=b.parentNode}},D=function(a,b){var c,d;return function(e){var f=Number(new Date);c&&f<c+b?(clearTimeout(d),d=setTimeout(function(){c=f,a(e)},b)):(c=f,a(e))}},E=b;"comment"===t.initobj.type&&(E=t.iframe),ZE._addEvent(E,"mousemove",D(C,100)),ZE._addEvent(t.doc,"mouseup",function(a){if("smartCompose"===t.initobj.editorType&&setTimeout(function(){if(b.getSelection().isCollapsed)"comment"!==t.initobj.type&&t.initobj.microParaToolbar&&t.initobj.microInsertToolbar&&(t.PlaceIcon(),B=!1);else{B=!0;var a=b.getSelection().getRangeAt(0).getBoundingClientRect();t.initobj.generalToolbar&&(t.createToolbar("general",a),t.updateToolbar())}},100),void 0!==t.initobj.mouseUpActionTriggered&&"function"==typeof t.initobj.keyUpActionTriggered&&t.initobj.keyUpActionTriggered(a),"function"==typeof ZE_Init.mouseUpActionTriggered&&ZE_Init.mouseUpActionTriggered(t,a),t.updateToolbar(),t.initobj.formatPainter&&Object.keys(t.initobj.formatPainter).length>0){var c=(t.doc.getSelection().anchorNode,t.initobj.formatPainter);c.fontName&&t.squireInstance.setFontFace(c.fontName),c.fontsize&&t.squireInstance.setFontSize(t.fontsizeConversion("fontvaltopx",c.fontsize)+"px"),c.forecolor&&t.squireInstance.setTextColour(c.forecolor),c.backcolor&&t.squireInstance.setHighlightColour(c.backcolor),c.bold?t.squireInstance.bold():t.squireInstance.removeBold(),c.italic?t.squireInstance.italic():t.squireInstance.removeItalic(),c.underline?t.squireInstance.underline():t.squireInstance.removeUnderline(),t.doc.queryCommandState("strikethrough")&&t.doc.execCommand("strikethrough",!1,void 0),c.strike&&t.doc.execCommand("strikethrough",!1,void 0),c.numbering?t.insertListOperation("OL"):c.bullets&&t.insertListOperation("UL"),c.txtAli&&t.squireInstance.setTextAlignment(c.txtAli),t.doc.body.className="ze_body",t.initobj.formatPainter={}}for(var d=a.target;null!==d;){if("A"===d.nodeName){if(d.hasAttribute("data-hugatt"))return!1;t._stopEvent(a);var e=d.getAttribute("data-post");if(e){if("true"!==e||"comment"===t.initobj.type)return!1;t.showAnchorTag(d,a)}else"function"==typeof t.initobj.anchorTagClkCallback?t.initobj.anchorTagClkCallback(d,a):"false"!==d.getAttribute("data-show")&&t.showAnchorTag(d,a);return!1}if("IMG"===d.nodeName){if("A"===d.parentNode.nodeName)t._stopEvent(a),"false"!==d.getAttribute("data-show")&&t.showAnchorTag(d.parentNode,a);else{if(!b.getElementById("ze_imgBlock")&&(t._stopEvent(a),d.hasAttribute("orig_width")||(d.setAttribute("orig_width",d.naturalWidth),d.setAttribute("orig_height",d.naturalHeight)),"smiley"!==d.getAttribute("data-attr"))){if("comment"===t.initobj.type){var f=t.editordiv.firstChild.scrollTop;t.editordiv.firstChild.scrollTop=f+d.offsetHeight}t.resizeElement(d,a)}}return!1}d=d.parentNode}bindEventForCheckBox.call(t,a)});var F=function(a){if(void 0===a.doc&&(a.doc=a),"function"==typeof a.doc.getElementById){var b=document.getElementById("ze_spellcheckmenu_div");b&&b.parentNode.removeChild(b);var c=document.getElementById("ze_imgBlock");c&&c.parentElement.removeChild(c);var d;d=a.doc.getElementById("_resizecolDivs"),d&&d.parentElement.removeChild(d);var e=a.doc.getElementById("ze_imgBlock");e&&e.parentElement.removeChild(e)}};t.docMouseDown=function(a){if("smartCompose"===t.initobj.editorType){for(var b=a.target;null!==b;){if(b.hasAttribute("class")&&"ze_tbEd"===b.className)return!1;b=b.parentElement}null!==b||!0!==t.initobj.microParaToolbar&&!0!==t.initobj.microInsertToolbar&&!0!==t.initobj.generalToolbar||n()}var c=document.getElementById("img_edit_link_options");c&&c.parentElement.removeChild(c);var d=document.getElementById("ze_spellcheck_options");d&&(d.parentElement.removeChild(d),ZE.removeClass(t.toolbarobject.spellcheck,"ze_dn ze_Sel")),F(t);var e=t.doc.body.getElementsByClassName("smallDiv");if(e.length>1){var f,g,h=e.length;for(g=0;g<h;g++)e[0].parentElement.removeChild(e[0]);f=t.doc.body.getElementsByClassName("enc")[0],f&&f.parentElement.removeChild(f)}};var G=document;"comment"===t.initobj.type&&(G=t.iframe),G.addEventListener("mousedown",t.docMouseDown,!1),d=function(a){var c,d=a.dataTransfer,e=ZE.i18n;if(t.win.focus(),(null!==d.types||d.files&&d.files.length>0)&&!a.fromPaste&&(d.files&&d.files.length>0||(d.types.indexOf?-1!==d.types.indexOf("Files"):d.types.contains("application/x-moz-file"))||"Files"===d.types[0])){clearTimeout(t.dragTimer);try{c=d.effectAllowed,d.dropEffect="move"===c||"linkMove"===c?"move":"copy"}catch(m){d.dropEffect="move"}var f;f=t.saveSelection();var g,h,i,j,k;if(!(i=b.getElementById("mask_editor"))){i=b.createElement("div"),i.contentEditable="false",i.id="mask_editor",b.body.appendChild(i),k=i.style,g=t.iframe.getBoundingClientRect(),h=t.win.scrollY?t.win.scrollY:t.win.pageYOffset,k.height=g.height+"px",k.width=g.width+"px",k.left="0px",h=t.win.scrollY?t.win.scrollY:t.win.pageYOffset,k.top=0+h+"px",k.position="absolute",j=b.createElement("div"),j.className="ze_drag",j.contentEditable="false";var l=b.createElement("span");j.appendChild(l),l.innerHTML=e("Drop Files to Attach"),i.appendChild(j),j.style.height=.7*t.iframe.offsetHeight+"px",f&&t.restoreSelection(f),t.win.focus()}}t._stopEvent(a)},e=function(a){t.dragTimer=setTimeout(function(){var a=b.getElementById("mask_editor");a&&a.parentElement.removeChild(a)},250),t._stopEvent(a)};var H=function(a,b){var c;for(c=0;c<a.inlineImagesToBe.length;c++)if(a.inlineImagesToBe[c]===b){a.inlineImagesToBe.splice(c,1);break}},I=function(a,b){var c;for(c=0;c<a.waitForResponse.length;c++)if(a.waitForResponse[c]===b){a.waitForResponse.splice(c,1);break}},J=function(a,b){var c,d,e,f=b,g=new XMLHttpRequest,h=new FormData,i=ZE.getCSRFCookie(b);h.append(ZE.getCSRFParamName(),i),a&&h.append("img_file",a,"test.png"),e=ZE_Init.imgAction,ZE_Init.imgParameters&&(e+=ZE_Init.imgParameters),ZE_Init.context&&(c=ZE_Init.imgParameters?e+"&context="+ZE_Init.context:e+"?context="+ZE_Init.context,d="&context="+ZE_Init.context),ZE.captchaParam&&(c=ZE_Init.imgParameters||ZE_Init.context?e+"&"+ZE.captchaParam+d:e+"?"+ZE.captchaParam+d,delete ZE.captchaParam),c+="&uploadMode=drop";var j,k,l=f.doc.createElement("img");try{f.win.focus(),l.src=ZE_Init.imgPath+"/images/process.gif",j=f._getSelection(),k=f._createRange(j),k.insertNode(l),k.selectNode(l),k.collapse(!1),j.removeAllRanges(),j.addRange(k),H(f,a),f.waitForResponse.push(a)}catch(m){return null}return g.onreadystatechange=function(){var c,d=a,e=l;if(4===g.readyState)if(I(f,d),200===g.status){var h=$.parseJSON(g.responseText);h.fileName?(0===f.inlineImagesToBe.length&&delete ZE_Init.captchaProcessing,c=function(a){return function(c){a.onload=function(){a.setAttribute("orig_width",this.width),a.setAttribute("orig_height",this.height),a.setAttribute("size_option","original"),ZE.setImageSizeOptions(this,"bestfit",editorInstance.editordiv.offsetWidth),a.removeAttribute("data-zeload")},a.setAttribute("data-zeload",!0),a.src=c,b.saveCurrentState()}},ZE_Init.inlineImage(c(e),h)):(f.inlineImagesToBe.push(d),e.parentNode.removeChild(e),"HIP_REQUIRED"===h.errorMsg&&(ZE_Init.latesthip=h.hipUrl,ZE.captchaProcessing=function(){K(f)},ZE_Init.captchaInline=!0))}else 500===g.status&&e.parentNode.removeChild(e)},g.open("POST",c,!0),g.send(h),g},K=function(a){var b,c,d;for(a.win.focus(),ZE_Init.captchaInline=!1,a.waitForResponse||(a.waitForResponse=[]),c=a.inlineImagesToBe.slice(0),d=c.length,b=0;b<d;b++)if(!J(c[b],a)){a.inlineImagesToBe.splice(0);break}setTimeout(function(){ZE_Init.captchaInline&&ZE.show_CaptchaImage(ZE_Init.latesthip,a)},1e3)},L=function(a){for(var b=a.dataTransfer.items,c=b.length,d=0;d<c;d++)if("file"===b[d].kind&&"image/png"===b[d].type){var e=b[d].getAsFile();e.name||(e.name="Inline_image"+(new Date).getTime()+Math.floor(1e3*Math.random()+1)),t._uploadInlineImages({file:e})}},M=function(a){t._stopEvent(a);var c=b.getElementById("mask_editor");if(c&&c.parentElement.removeChild(c),t.win.focus(),a.editorCustomPaste)return void(t.initobj.handlePasteImages&&L(a));var d=a.dataTransfer.files;if(d&&0!==d.length){var e,f=ZE.i18n,g="inline",h="";for(e=0;e<d.length;e++)if(!d[e].type||d[e].type.indexOf("image")<0){g="attachments";break}if("inline"===g&&ZE_Init.dropInlineImage){for(t.inlineImagesToBe||(t.inlineImagesToBe=[]),e=0;e<d.length;e++)d[e].size>0&&d[e].size/1048576<3?t.inlineImagesToBe.push(d[e]):h+=d[e].name+",";""!==h&&alert(f("Files "+h+" cant be uploaded as they violate size restriction")),K(t)}else ZE_Init.fileUpload(t,d,a)}};t.initobj.disableDND||(ZE._addEvent(b,"drop",M),ZE._addEvent(b,"dragover",d),ZE._addEvent(b,"dragleave",e)),t._unusedImagesList={},t._pendingImagesList={};var N;(function(){t.stack=new zeUndo.Stack,N=t.stack,t.EditorState={},t.EditorState=function(a,b,c){this.textarea=a,this.newValue=b,this._currentselection=c;var d;this.undo=function(){"function"==typeof t.initobj.getDraftImageReplacedContent&&(d=t.initobj.getDraftImageReplacedContent({cmpId:t.initobj.id,content:this.newValue})),void 0!==d&&(this.newValue=d),t.setContent(this.newValue,!0),setTimeout(function(){t.squireInstance.focus(),t.focusAtStart(!0)},0)},this.redo=function(){"function"==typeof t.initobj.getDraftImageReplacedContent&&(d=t.initobj.getDraftImageReplacedContent({cmpId:t.initobj.id,content:this.newValue})),void 0!==d&&(this.newValue=d),t.setContent(this.newValue,!0),setTimeout(function(){t.squireInstance.focus(),t.focusAtStart(!0)},0)},this.setFocus=function(){var a=this._currentselection;t.restoreCursorPosition(t.doc.body,a),t.win.focus()}};var a,c=t.getContent();t.initobj.handleAutoFill&&t.NewMentionHandler(),ZE._addEvent(t.doc,"dblclick",function(a){if("smartCompose"===t.initobj.editorType){if(3===b.getSelection().anchorNode.nodeType){var c=b.getSelection().getRangeAt(0).getBoundingClientRect();t.initobj.generalToolbar&&t.createToolbar("general",c)}B=!0}},!1);var d=function(){if(t.undo||t.redo)return void(c=t.getContent());clearTimeout(a),a=setTimeout(function(){var a=t.getContent();a!==c&&(t.saveCurrentState(),c=a)},250)};ZE._addEvent(b,"keyup",function(a){var c={v:86,c:67,ctrl:91};"function"==typeof t.initobj.keyupTriggered&&t.initobj.keyupTriggered(a,t);var e=a.keyCode;33!==e&&34!==e||a.stopPropagation();var f;if(t.doc&&"function"==typeof t.doc.getElementById&&(f=t.doc.getElementById("_resizecolDivs")),f&&f.parentElement.removeChild(f),"smartCompose"===t.initobj.editorType){if((p||q)&&(r===c.v||r===c.c))return d(),!1;var g=!0===o&&(37===e||38===e||39===e||40===e),h=p&&65===e||q&&91===e,i=q&&o&&39===e;if(g||h||i){if(B=!0,3===b.getSelection().anchorNode.nodeType){var j=b.getSelection().getRangeAt(0).getBoundingClientRect();t.initobj.generalToolbar&&t.createToolbar("general",j)}}else!B||8!==e&&46!==e||"function"==typeof t.initobj.selectedText&&t.initobj.selectedText(t.doc.getSelection());13!==a.keyCode&&8!==a.keyCode&&38!==a.keyCode&&40!==a.keyCode||"comment"!==t.initobj.type&&t.initobj.microParaToolbar&&t.initobj.microInsertToolbar&&t.PlaceIcon()}d()})})(),ZE._addEvent(t.doc,"keyup",function(){t.updateToolbar()});var O=function(a,b){var c,d,e,f=t.doc.queryCommandValue("fontname"),g=ZE_Init._getFontFamily(),h=g.length;if(f)for(c=f.split(",")[0].toLowerCase(),d=0;d<h;d++){var i=ZE_Init._getFontFamily()[d],j=i.ff.split(",")[0].toLowerCase().replace(/\'/g,'"');j===c?e=d:j===c.split(",")[0].replace(/\"/g,"")&&(e=d)}return void 0!==e&&e>=0&&g.length>e?"next"===b?g[e+1]:"previous"===b?g[e-1]:void 0:g[0]};ZE._addEvent(t.doc,"keydown",function(a){if(t.hasOwnProperty("ziaSpellcheckTriggered")&&t.ziaSpellcheckTriggered&&"comment"!==t.initobj.type&&t.ZiaFilesLoaded&&t.ZiaInstance&&(t.ZiaInstance.stopProofing(),t.ziaSpellcheckTriggered=!1),t.initobj.hasOwnProperty("allowPaste")&&!t.initobj.allowPaste)return!1;"F7"===a.key&&("richtext"===t.mode&&t.ZiaFilesLoaded?t.triggerZiaSpellcheck():t.spellcheck(a));var c=a.keyCode;if("function"==typeof t.initobj.isKeyupActionTriggered&&t.initobj.isKeyupActionTriggered(a),"smartCompose"===t.initobj.editorType){var d,e,f,g;u.getElementsByClassName("ze_tbEd").length>=1&&n(),o=a.shiftKey,p=a.ctrlKey,q=a.metaKey,r=a.keyCode,g=function(a){t.doc.getSelection().anchorNode.nodeValue="",t.insertListOperation("OL")},!B||8!==c&&46!==c||("function"==typeof t.initobj.selectedText&&t.initobj.selectedText(t.doc.getSelection()),B=!1),f=function(a,c){"first"===a?(d=c-1,e=c):"second"===a&&(d=c,e=c+1);var f=b.getSelection().anchorNode.nodeValue;if(0===d||" "===f.slice(d-1,d)){var g,h,i=f.slice(d,e).toUpperCase(),j=f.substring(0,d)+i+f.substring(e,f.length),k=b.getSelection().anchorOffset;b.getSelection().anchorNode.textContent="",b.getSelection().anchorNode.textContent=j,g=b.createRange(),h=b.getSelection(),g.setStart(h.anchorNode,k),g.setEnd(h.anchorNode,k),h=b.getSelection(),h.removeAllRanges(),h.addRange(g)}},null!==b.getSelection().anchorNode.nodeValue&&1===b.getSelection().anchorNode.nodeValue.length&&37!==a.keyCode&&38!==a.keyCode&&39!==a.keyCode&&40!==a.keyCode&&13!==a.keyCode&&8!==a.keyCode&&(y=1),3!==v||32!==a.keyCode&&13!==a.keyCode||(f("second",x),v=0),2===v&&(x=b.getSelection().anchorNode.nodeValue.length,v=3),3!==v&&(v=32===a.keyCode&&1===v?2:0),190===a.keyCode&&(v=1),1!==y||32!==a.keyCode&&13!==a.keyCode||("1."===t.doc.getSelection().anchorNode.nodeValue?g(y):(f("first",y),y=0))}var h,i,j,c=a.keyCode,k=a.shiftKey,l=a.metaKey,m=a.altKey,s=a.ctrlKey,z=t.stack;if(13===c&&3===w&&(i=t.doc.getSelection(),3===i.anchorNode.nodeType&&"---"===i.anchorNode.textContent&&(j=t.doc.createRange(),i.anchorNode.textContent="",t.insertHTML("<hr>")),w=0),189===c?w++:w=0,8===c){var A,C=t.doc.getSelection().anchorNode,D=[];if(3===C.nodeType&&(C=C.parentNode,"ze_mention"===C.className||"zms_mention"===C.className)){C.getAttribute("name");C.innerText.trim();if(D=C.innerText.trim().split(" "),(A=D.length)>1)return D.splice(A-1,1),C.innerText="",D.forEach(function(a){C.innerText+=a+" "}),j=document.createRange(),i=b.getSelection(),j.selectNodeContents(b.getSelection().anchorNode),j.collapse(!1),i.removeAllRanges(),i.addRange(j),t.doc.getSelection().anchorNode.parentElement.focus(),!1;var E=C.getAttribute("name"),F=0,G=t.initobj.contactsArray.length,H=0;if(E&&C.getAttribute("data-zid")&&"function"==typeof t.initobj.removeMention){var I=C.getAttribute("data-zid"),J=C.getAttribute("name"),K={zuid:I,emailid:J};return t.initobj.removeMention(K),C.parentElement.removeChild(C),!1}for(;H<G;)E===t.initobj.contactsArray[H]?(F++,1===F?(t.initobj.contactsArray.splice(H,1),G=t.initobj.contactsArray.length,H=0):H++):H++;if(1===F){var L;t.initobj.getAutofillContacts?(L=t.initobj.getAutofillContacts(E).result[0],t.initobj.removeEditorAutoFill&&t.initobj.removeEditorAutoFill(L)):t.initobj.getNewAutofillContacts&&(L=t.initobj.getNewAutofillContacts(E),L.done(function(a){t.initobj.removeEditorAutoFill&&t.initobj.removeEditorAutoFill(a)}))}C.parentElement.removeChild(C)}}if(t.undo=t.redo=!1,!s&&!l||m||k){if((s||l)&&k){switch(h=String.fromCharCode(c).toLowerCase()){case"M":case"m":var M=t.getPosFromCursor("OL"),N=t.getPosFromCursor("UL");-1==M&&-1==N?t.squireInstance.decreaseQuoteLevel():N>M?t.getPosFromCursor("UL",1)>0||t.getPosFromCursor("OL")>0?t.squireInstance.decreaseListLevel():t.squireInstance.removeList():M>N&&(t.getPosFromCursor("OL",1)>0||t.getPosFromCursor("UL")>0?t.squireInstance.decreaseListLevel():t.squireInstance.removeList()),a.preventDefault(),event.stopImmediatePropagation();break;case"L":case"l":t.execCommand(a,"j-left"),a.preventDefault();break;case"e":t.execCommand(a,"j-center"),a.preventDefault();break;case"r":t.execCommand(a,"j-right"),a.preventDefault();break;case"j":t.execCommand(a,"j-full"),a.preventDefault();break;case"x":t.execCommand(a,"strikethrough"),a.preventDefault();break;case"i":t.execCommand(a,"ltr"),a.preventDefault();break;case"a":t.execCommand(a,"rtl"),a.preventDefault();break;case"f":var P=b.queryCommandValue("fontname")||ZE_Init.defaultFontFamily,Q=O(P.split(",")[0],"previous");void 0!==Q&&(t.toolbarobject.fontfamily.firstChild.innerText=Q.htm,t.squireInstance.setFontFace(Q.ff),t.win.focus(),t.saveCurrentState()),a.preventDefault();break;case"d":var P=b.queryCommandValue("fontname")||ZE_Init.defaultFontFamily,Q=O(P.split(",")[0],"next");void 0!==Q&&(t.toolbarobject.fontfamily.firstChild.innerText=Q.htm,t.squireInstance.setFontFace(Q.ff),t.win.focus(),t.saveCurrentState()),a.preventDefault()}switch(h="",187===c?h="=":190===c?h=".":188===c&&(h=","),h){case"=":var R=t.doc.queryCommandState("superscript");R?t.squireInstance.removeSuperscript():t.squireInstance.superscript(),t.saveCurrentState(),a.preventDefault(),a.stopImmediatePropagation();break;case".":var S=parseFloat(t.toolbarobject.fontsize.firstChild.innerText);if(S<99){var T=4/3*parseFloat(S+1);t.toolbarobject.fontsize.firstChild.innerText=S+1,t.squireInstance.setFontSize(T+"px"),t.saveCurrentState()}break;case",":var S=parseFloat(t.toolbarobject.fontsize.firstChild.innerText);if(S>8){var T=4/3*parseFloat(S-1);t.toolbarobject.fontsize.firstChild.innerText=S-1,t.squireInstance.setFontSize(T+"px"),t.saveCurrentState()}}}}else{switch(h=String.fromCharCode(c).toLowerCase()){case"b":t.execCommand(a,"bold");break;case"u":t.execCommand(a,"underline"),a.preventDefault();break;case"i":t.execCommand(a,"italic");break;case"l":t.execCommand(a,"j-left");break;case"e":t.execCommand(a,"j-center");break;case"r":t.execCommand(a,"j-right");break;case"j":t.execCommand(a,"j-full");break;case"k":t.execCommand(a,"link");break;case"z":t._stopEvent(a),z.canUndo()&&z.undo(),t.undo=!0;break;case"M":case"m":t.getPosFromCursor("UL")>0||t.getPosFromCursor("OL")>0?t.squireInstance.increaseListLevel():t.squireInstance.increaseQuoteLevel(),t.toolbarobject.indentoptions.firstChild.className="zei-indent",a.preventDefault(),a.stopImmediatePropagation();break;case"=":R=t.doc.queryCommandState("subscript"),R?t.squireInstance.removeSubscript():t.squireInstance.subscript(),t.saveCurrentState(),a.preventDefault(),a.stopImmediatePropagation();break;case"y":t._stopEvent(a),z.canRedo()&&z.redo(),t.redo=!0}switch(h="",221===c?h="]":219===c?h="[":191===c?h="/":187===c?h="=":190===c?h=">":188===c?h="<":222===c?h="'":186===c?h=";":187===c&&(h="="),h){case"=":R=t.doc.queryCommandState("subscript"),R?t.squireInstance.removeSubscript():t.squireInstance.subscript(),t.saveCurrentState(),a.preventDefault();break;case";":var P=b.queryCommandValue("fontname")||ZE_Init.defaultFontFamily,Q=O(P.split(",")[0],"previous");void 0!==Q&&(t.toolbarobject.fontfamily.firstChild.innerText=Q.htm,t.squireInstance.setFontFace(Q.ff),t.win.focus(),t.saveCurrentState()),a.preventDefault(),event.stopImmediatePropagation();break;case">":t.execCommand(a,"insertunorderedlist"),a.preventDefault();break;case"'":t.squireInstance.focus(),t.insertQuote(),a.preventDefault();break;case"/":t.execCommand(a,"insertorderedlist"),a.preventDefault()}}}),h=function(a,b,c,d){var e,f,g={8:10,10:13,12:16,14:18,18:24,24:32,36:48};if("comment"!==z.type){if(f=-1!==b.indexOf("px")?b:g[parseInt(b)]+"px",void 0===g[parseFloat(b)]){f=parseFloat(parseFloat(b)*1.33)+"px"}e=t.doc.createElement("style"),e.type="text/css",void 0!==t.initobj.isIframeParRequired&&t.initobj.isIframeParRequired?e.innerHTML=".ze_body{font-family:"+a+";color:"+c+";font-size:"+f+";height:auto;overflow-y:hidden;padding:15px;box-sizing:border-box;}":e.innerHTML=".ze_body{font-family:"+a+";color:"+c+";font-size:"+f+";height:100%;padding:15px;box-sizing:border-box;}",e.innerHTML+=" .formatPainter{cursor:url("+ZE_Init.imgPath+"/images/format_painter.png),auto";var h=t.doc.getElementsByTagName("head")[0];h&&(h.appendChild(e),t.doc.body.className="ze_body",d&&"rtl"===d&&(t.doc.body.dir=d))}},i=z.defaultfontfamily||ZE_Init.defaultFontFamily||"",k=z.defaultfontsize||ZE_Init.defaultFontSize||"",
j=z.setdefaultfontcolor?z.setdefaultfontcolor:ZE_Init.defaultFontColor||"#000000";var P="ltr";t.initobj.hasOwnProperty("textDirection")&&(P=t.initobj.textDirection),h(i,k,j,P),delete t.state;var Q=function(a){var b=document.createElement("span");if(a.doc.body.appendChild(b),/^((?!chrome).)*safari/i.test(navigator.userAgent)){var c=parseInt(a.iframe.style.height);a.iframe.style.height=c-1+"px",setTimeout(function(){a.iframe.style.height=c+"px"},0)}setTimeout(function(){b.parentNode.removeChild(b)},100)};if(ZE_Init.is_safari&&window.onblur&&ZE._addEvent(t.doc.body,"focus",function(){Q(t)}),ZE._addEvent(t.doc.body,"focus",function(){"function"==typeof ZE_Init.setFocus&&ZE_Init.setFocus(t.initobj.id)}),ZE._addEvent(t.doc.body,"blur",function(){"function"==typeof ZE_Init.setBlur&&ZE_Init.setBlur(t.initobj.id)}),ZE._addEvent(t.win,"scroll",function(){ZE.removeImgResizeDivs(t);var a=document.getElementById("ze_linkBlock");a&&document.body.removeChild(a)}),ZE._addEvent(t.doc.body,"contextmenu",function(a){var b=a.target;if(a.shiftKey)return!0;for(;null!==b;){if("TABLE"===b.nodeName&&"true"!==ZE.getAttribute(b,"data-avoidContext"))return t._stopEvent(a),t.showContextMenu(a,"table",b),!1;b=b.offsetParent}}),"comment"===z.type?t.squireInstance=new Squire(a,{getEditorInstance:function(){return t}}):t.squireInstance=new Squire(t.doc,{getEditorInstance:function(){return t}}),t.initobj.disableDND||(t.squireInstance.addEventListener("dragover",function(a){t._stopEvent(a)}),t.squireInstance.addEventListener("drop",M)),"plaintext"!==z.mode&&(A||(A=""),t.squireInstance.setHTML(A)),t.afterload)for(f=t.afterload,g=f.length;g--;)f.shift()();if(delete t.afterload,"richtext"===t.mode&&((ZE_Init.needEditorFocus||t.initobj.needEditorFocus)&&(s.focus(),t.squireInstance.focus()),"comment"!==t.initobj.type&&t.updateToolbar()),t.saveCurrentState({cursorPosition:{start:0,end:0},suppressContentChange:!0}),!ZE_Init.needEditorFocus&&!t.initobj.needEditorFocus&&"richtext"===t.mode&&"function"==typeof s.getSelection){(s.getSelection()||t.doc.selection).removeAllRanges()}},"comment"===z.type)t.outerdiv.appendChild(t.editordiv),a.contentEditable=!0,b=a,t.editordiv.appendChild(a),c();else{if(a.onload=c,a.srcdoc="<!DOCTYPE html>",void 0!==t.initobj.isIframeParRequired&&t.initobj.isIframeParRequired){var F=document.createElement("div"),G=document.createElement("div");F.setAttribute("data-attr","iframePar"),t.innerIframeCon=G,t.initobj.iframeWrapperCls&&(t.innerIframeCon.className=t.initobj.iframeWrapperCls),t.iframePar=F,t.initobj.parIframeWrapperCls&&(t.iframePar.className=t.initobj.parIframeWrapperCls),G.appendChild(a),F.appendChild(G),t.editordiv.appendChild(F)}else t.editordiv.appendChild(a);t.outerdiv.appendChild(t.editordiv)}"smartCompose"===t.initobj.editorType&&(t._microdiv=u.createElement("div"),t._microdiv.className="ui-microtoolbar",f=u.createElement("div"),g=u.createElement("div"),f.id="PaIcon",t.paraIconRef=f,f.className="ui-paragraph",i=u.createElement("span"),j=u.createElement("span"),k=u.createElement("span"),i.className="paraClose",i.appendChild(k),j.className="tooltip",j.innerHTML="Paragraph",ZE._appendChildren(f,[i,j]),g.id="InsertIcon",t.insertIconRef=g,g.className="ui-insert",i=u.createElement("span"),j=u.createElement("span"),i.className="insertClose",j.className="tooltip",j.innerHTML="insert",ZE._appendChildren(g,[i,j]),t.initobj.microParaToolbar?ZE._appendChildren(t._microdiv,[g,f]):ZE._appendChildren(t._microdiv,[g]),h=t._microdiv.style,h.left=t.editordiv.offsetLeft-50+"px",h.top=t.editordiv.offsetTop+15+"px",h.position="absolute","comment"!==t.initobj.type&&t.editordiv.appendChild(t._microdiv),t.initobj.microParaToolbar||(t.paraIconRef.style.visibility="hidden"),t.initobj.microInsertToolbar||(t.insertIconRef.style.visibility="hidden"));var H,I,J;I=function(a){a.stopPropagation(),H(t.paraIconRef,a)},J=function(a){a.stopPropagation(),H(t.insertIconRef,a)},H=function(a,b){b.stopPropagation();var c=a,d=u.getElementsByClassName("ze_tbEd"),e=u.getElementById("PaIcon"),f=u.getElementById("InsertIcon");l=u.getElementById("stickIcon"),d[1]&&d[1].parentElement.removeChild(d[1]),"ui-paragraph\tsel"===c.className?d.length>=1&&(l&&"zei-unpin"===l.className||d[0].parentElement.removeChild(d[0]),c.className="",c.className="ui-paragraph",f.style.visibility="",c.previousSibling.style.visibility=""):"ui-insert\tsel"===c.className?d.length>=1&&(l&&"zei-unpin"===l.className||d[0].parentElement.removeChild(d[0]),c.className="",c.className="ui-insert",e.style.visibility="",t.initobj.microParaToolbar?c.nextElementSibling.style.visibility="":c.nextElementSibling.style.visibility="hidden"):"ui-insert"===c.className?(e.style.visibility="hidden",c.childNodes[1].style.visibility="hidden",t.createToolbar("insert",b)):"ui-paragraph"===c.className&&(f.style.visibility="hidden",c.childNodes[1].style.visibility="hidden",t.createToolbar("paragraph",b))},ZE._addEvent(f,"mousedown",I),ZE._addEvent(g,"mousedown",J)},ZE.prototype.PlaceIcon=function(){var a,b,c,d=this,e=d.doc,f=e.getSelection().anchorNode;f&&(3===f.nodeType?(b=0,c=e.createRange(),c.setStart(f,b),c.setEnd(f,b+1),a=c.getBoundingClientRect()):a=f.getBoundingClientRect(),d._microdiv.style.left=d.editordiv.offsetLeft-50+"px",d._microdiv.style.top=a.top+d.editordiv.offsetTop+"px")},ZE.createNewTableRow=function(a){"use strict";for(var b=function(a,b){for(var c=0,d=a;null!==d;){if(d.nodeName===b)return"TD"===b?c=d.cellIndex:"TR"===b&&(c=d),c;d=d.parentElement}},c=function(a){var b=document,c=b.createDocumentFragment(),d=b.createElement("tr");c.appendChild(d);for(var e=0;e<a;e++){var f=b.createElement("td"),g=b.createElement("div");g.appendChild(b.createElement("br")),f.appendChild(g),d.appendChild(f)}return c},d=a.anchorNode,e=d;null!==d;){if("TABLE"===d.nodeName){var f=b(e,"TD"),g=b(e,"TR");if(d.rows.length-1===g.rowIndex&&d.rows[0].cells.length-1===f){var h=c(d.rows[0].cells.length);return g.parentNode.insertBefore(h,g.nextSibling),g.nextSibling.firstChild}return!1}d=d.parentElement}},ZE.prototype._stopEvent=function(a){"use strict";try{a.preventDefault(),a.stopPropagation()}catch(b){a.cancelBubble=!0,a.returnValue=!0}},ZE.getAttribute=function(a,b){"use strict";if(a.hasAttribute(b))return a.getAttribute(b)},ZE.prototype.updateStateHTML=function(a,b){"use strict";this.stack.commands[a].newValue=b},ZE.setImageSizeOptions=function(a,b,c){"use strict";var d,e=400,f={},g=a.width||a.naturalWidth,h=a.height|a.naturalHeight,i=parseInt(.75*c);i>e&&(i=e),"small"===b?(d=2.5,g>i&&(d=g/150),f.width=g/d,f.height=h/d,f.sizeOption="small"):"bestfit"===b?(d=1,g>i&&(d=g/i),f.width=g/d,f.height=h/d,f.sizeOption="bestfit"):(f.width=g,f.height=h,f.sizeOption="original"),a.width=f.width,a.height=f.height,a.setAttribute("size_option",f.sizeOption)},ZE.prototype.checkForPendingImages=function(){"use strict";var a,b=this,c=Object.keys(b._pendingImagesList),d=!1;return c.length&&(a=b.doc.body.getElementsByClassName("ze_img_upload"),a.length&&(d=!0)),d},ZE.prototype.clearPendingImages=function(){"use strict";var a,b,c=this,d=c.doc.body.getElementsByClassName("ze_img_upload"),e=d.length;for(c._pendingImagesList={},a=0;a<e;a++)b=d[a],"IMG"===b.nodeName&&b.parentNode.removeChild(b)},ZE.prototype.removeConfigProperties=function(a){var b=this;a&&a.forEach(function(a){"microParaToolbar"===a&&(b.paraIconRef.style.visibility="hidden"),b.initobj[a]=void 0})},ZE.prototype.createCheckBox=function(){var a=this,b=a.squireInstance.makeCheckBoxList();b._editorRef().initobj.checkBoxList[0];delete b._editorRef().initobj.checkBoxList,a.saveCurrentState(),a.updateToolbar()},ZE.prototype.hideSmartToolbars=function(){var a=this,b=document.getElementsByClassName("ze_tbEd")[0];if(b){b.parentElement.removeChild(b);var c=a.insertIconRef,d=a.paraIconRef;d.style.visibility="",c.style.visibility="",c.className="ui-insert",d.className="ui-paragraph"}},ZE.prototype.updateConfigProperties=function(a){var b=this;if(a&&"object"===_typeof(a))for(var c=Object.keys(a),d=c.length,e=0;e<d;e++)"microParaToolbar"===c[e]&&(b.paraIconRef.style.visibility=""),b.initobj[c[e]]=a[c[e]]},ZE.prototype.pasteContent=function(a){"use strict";var b=JSON.stringify(localStorage).length,c=16*b/8192/1e3,d=a.length,e=new Date,f=e.getFullYear(),g=e.getMonth()+1,h=e.getDate(),i=e.getHours(),j=e.getMinutes(),k=e.getSeconds(),l=16*d/8192/1e3;g<10&&(g="0"+g),e=f+"-"+g+"-"+h+"\t"+i+":"+j+":"+k,l+c<=10?localStorage.setItem(e,JSON.stringify(a)):(localStorage.clear(),localStorage.setItem(e,JSON.stringify(a)))},ZE.prototype._uploadInlineImages=function(a){"use strict";var b=this,c=b.doc.createElement("img"),d=b.editordiv.offsetWidth,e=function(){return function(a,c){c="ze_"+c+"_refresh";var e=b.doc.getElementById(c);if(delete b._pendingImagesList[c],!e)return void(b._unusedImagesList[c]=a);e.onload=function(){e.setAttribute("orig_width",this.width),e.setAttribute("orig_height",this.height),ZE.setImageSizeOptions(e,"bestfit",d),e.removeAttribute("data-zeload")},e.setAttribute("data-zeload",!0),e.src=a,e.removeAttribute("id"),e.removeAttribute("class"),b.saveCurrentState()}},f=function(){return function(a){c.src=ZE_Init.imgPath+"/images/process.gif",c.id="ze_"+a+"_refresh",b._pendingImagesList[c.id]=!0,c.className="ze_img_upload",b.squireInstance.focus();var d=b._getSelection(),e=b._createRange(d);e.insertNode(c),e.selectNode(c),e.collapse(!1),d.removeAllRanges(),d.addRange(e)}},g=function(){return function(a){a="ze_"+a+"_refresh";var c=b.doc.getElementById(a);delete b._pendingImagesList[a],c&&c.parentNode.removeChild(c)}};"function"==typeof b.initobj.processPastedFile&&b.initobj.processPastedFile(a,b,f(),e(),g(),"file")};var CONSATNTS={KEYDOWN:"keydown",KEYUP:"keyup",MOUSEDOWN:"mousedown",CLICK:"click"},KEYCONSTANTS={ENTER:13,UP:38,DOWN:40,ESCAPE:27,TAB:9,RIGHTARROW:39,LEFTARROW:37,BACKSPACE:8},typedWord,keyMatchFound=!0,KEYVALUECONSTANTS=[38,40,13,27,9,39,37];ZE.prototype.NewMentionHandler=function(){var a,b,c,d,e,f,g,h,i,b,j,k,l,m=this,n=function(){return ZE_Init.getTriggerHandlerKeys()},o=function(a){a.style.maxHeight="200px",a.style.maxWidth="1000px"};getClosest=function(a,b){for(;a&&a!==document;a=a.parentNode)if(a.nodeName===b)return a;return null};var p=function(a){a.preventDefault(),a.stopPropagation();var b=getClosest(a.target,"LI");h.querySelectorAll(".sel")[0].classList.remove("sel"),b.classList.add("sel"),O(j,i)},q=function(){J(),D()},r=function(){ZE._addEvent(m.doc,CONSATNTS.CLICK,q),ZE._addEvent(document,CONSATNTS.CLICK,q),ZE._addEvent(h,CONSATNTS.MOUSEDOWN,p)},s=function(){ZE._removeEvent(m.doc,CONSATNTS.CLICK,q),ZE._removeEvent(document,CONSATNTS.CLICK,q)},t=function(a,b){var c=a.offsetTop,d=a.parentElement.style.maxHeight,e=a.parentElement;switch(b){case"UP":c>parseInt(d)&&(e.scrollTop=Math.abs(e.scrollTop-a.offsetHeight));break;case"DOWN":c>parseInt(d)&&(e.scrollTop=e.scrollTop+a.offsetHeight)}},u=function(a,c,d){h=w(),b=document.createElement("ul");var e;b.className="ze_tbdr",a.forEach(function(a,c){e=z(a),0===c&&e.classList.add("sel"),b.appendChild(e)}),h.appendChild(b),v(h),o(h),o(b),"function"==typeof l?l(h,c,d):A(h,c,d),r()},v=function(a){m.initobj.hasOwnProperty("mentionsContainer")?m.initobj.mentionsContainer.appendChild(a):document.body.appendChild(a)},w=function(){return a=document.createElement("div"),a.className="ze_dd ze_autoFill shw",a.id="ze_autofill",a},x=function(){return!!document.body.contains(h)},y=function(){var a=m.doc.body.querySelectorAll("#suggestionNode")[0];return!!m.doc.body.contains(a)},z=function(a){return c=document.createElement("li"),d=document.createElement("img"),f=document.createElement("b"),g=document.createElement("span"),e=document.createElement("div"),c.className="custom",d.className="profile",e.className="name",f.className="email",f.appendChild(document.createTextNode(a.fn)),g.appendChild(document.createTextNode(a.eid)),d.src=a.photo,e.appendChild(f),e.appendChild(g),c.appendChild(d),c.appendChild(e),c.dataset.mention=JSON.stringify(a),c.dataset.attr="mention",c},A=function(a,b,c){var d=a.style;if(m.initobj.hasOwnProperty("getPosition")&&"function"==typeof m.initobj.getPosition)for(var e=m.initobj.getPosition(),f=Object.keys(e),g=0;g<f.length;g++){var h=f[g];return d[h]=e[h],!1}var i,j,k,l=m.iframe.getBoundingClientRect();if(m.doc.createRange&&3===b.nodeType)try{var n=m.doc.createRange();n.setStart(b,c),n.setEnd(b,c+1),n.getBoundingClientRect&&(i=n.getBoundingClientRect())}catch(v){}i||(i=b.parentNode.getBoundingClientRect()),j=l.top+i.top+i.height,k=l.left+i.left+i.width;var o=Math.abs(j),p=Math.abs(document.body.offsetHeight-(o+i.height)),q=Math.abs(k),r=Math.abs(document.body.offsetWidth-(q+i.width)),s=a.offsetWidth,t=a.offsetHeight,u=210;t>u&&(t=u),p>=t?d.top=j+"px":o>t&&(d.top=j-(i.height+t)+"px"),r>=s?d.left=k+"px":q>s&&(d.left=k-s+"px")},B=function(a,b){var c="";if(a&&b){var d=b.indexOf(a);if(d>-1){var e=b.substr(d,a.length);e='<span style="color:blue;">'+e+"</span>",c=b.substr(0,d)+e+b.substr(d+a.length)}else c=b;return c}return b},C=function(a,b){var c=document.createElement("li"),d=document.createElement("span");return c.className="custom",c.style.whiteSpace="normal",c.dataset.value=a.value,c.dataset.attr="value",d.innerHTML=DOMPurify.sanitize(B(b,a.key)),c.appendChild(d),c},D=function(){var a=m.doc.body.querySelectorAll("#suggestionNode")[0];return!!m.doc.body.contains(a)&&(a.parentElement.removeChild(a),!0)},E=function(a){var b=m.doc.body.querySelectorAll("#suggestionNode")[0];return!!m.doc.body.contains(b)&&(b.textContent=a,!0)},F=function(a,b,c,d){_selection=m.win.getSelection(),_range=_selection.getRangeAt(0);var e=!1;c=(new DOMParser).parseFromString(c,"text/html").getElementsByTagName("body")[0].innerText,c=c.replace(/&nbsp;/g,""),P(c,d)&&(e=!0),e||""===d?(c=c.substr(d.length,c.length),m.initobj.allowAttrsInsertHTML=["contentEditable"],E(c)||(m.insertHTML("<span id='suggestionNode' contentEditable='false' style='color:#bababa;'>"+c+"</span>"),U(c),_selection.removeAllRanges(),_selection.addRange(_range))):D()},G=function(a,c,d,e){h=w(),b=document.createElement("ul");var f,g;b.className="ze_tbdr",a.forEach(function(a,c){f=C(a,e),0===c&&(g=a.value,f.classList.add("sel")),b.appendChild(f)}),h.appendChild(b),v(h),o(b),A(h,c,d),m.initobj.addSmartSuggestion&&F(c,d,g,typedWord),keyMatchFound.hasOwnProperty("keyNotMatched")&&h.classList.remove("shw"),r()},H=function(){document.body.contains(h)&&h.parentElement.removeChild(h)},I=function(a,b,c){ZE_Init.mentionHandler(a,m).then(function(d){H(),k=d.customCallback,dropdownType=d.type;if(0===d.result.length||d.result.result&&0===d.result.result.length)return D(),!1;switch(d.type.toLowerCase()){case"contacts":l=d.customPositionCallback,u(d.result.result,b,c);break;case"hotkeys":keyMatchFound=d.keyFound,G(d.result,b,c,a.word)}})},J=function(){document.body.contains(h)&&h.parentElement.removeChild(h),s()},K=function(a){return!(!m.initobj.hasOwnProperty("hotkeysCustomCallback")||"function"!=typeof m.initobj.hotkeysCustomCallback)&&(m.initobj.hotkeysCustomCallback(a,m),J(),!0)},L=function(a){return!(!m.initobj.hasOwnProperty("mentionCallback")||"function"!=typeof m.initobj.mentionCallback)&&(m.initobj.mentionCallback(a,m),J(),!0)},M=function(){var a=b.querySelectorAll(".sel")[0],c=a.getAttribute("data-attr"),d=a.getAttribute("data-"+c),e={};if("function"==typeof k&&k(JSON.parse(d)),"mention"===c){var f=JSON.parse(d);return f.hasOwnProperty("custom")&&(e=JSON.stringify(e)),!L(f)&&'<a rel="noreferer" class="ze_mention" custom='+e+"name = "+f.eid+"  href='mailto:"+f.eid+"'>"+f.fn+"</a>&nbsp;"}return"value"===c&&!K(d)&&"<span>"+d+"&nbsp</span>"},N=function(){m.initobj.hasOwnProperty("allowAttrsInsertHTML")&&m.initobj.allowAttrsInsertHTML.constuctor===Array?m.initobj.allowAttrsInsertHTML.push("custom"):m.initobj.allowAttrsInsertHTML=["custom"]},O=function(b,c,d){if(D(),document.body.contains(h)){a.querySelectorAll(".sel")[0];_selection=m.win.getSelection(),_range=_selection.getRangeAt(0),_range.setStart(c,b),_selection.removeAllRanges(),_selection.addRange(_range);var e=M(c,d);N(),e&&m.insertHTML(e),J()}},P=function(a,b){a=(new DOMParser).parseFromString(a,"text/html").getElementsByTagName("body")[0].innerText,a=a.substr(a,b.length).split(""),b=b.split("");for(var c=!1,d=a.length,e=0;e<d;e++){if(a[e].trim()!==b[e].trim())return c=!1,!1;c=!0}return c},Q=function(a){if(document.body.contains(h)){var c,d=b.querySelectorAll(".sel")[0];switch(a){case"DOWN":if(d&&d.nextElementSibling){if(c=d.nextElementSibling,c.classList.add("sel"),d.classList.remove("sel"),m.initobj.addSmartSuggestion){var e=c.getAttribute("data-value");P(typedWord,e)?(e=e.substr(typedWord.length,e.length),y()?E(e):(e=c.getAttribute("data-value"),F(i,j,e,typedWord))):(D(),e=c.getAttribute("data-value"),F(i,j,e,typedWord))}t(c,"DOWN")}break;case"UP":if(d&&d.previousElementSibling){if(c=d.previousElementSibling,c.classList.add("sel"),d.classList.remove("sel"),m.initobj.addSmartSuggestion){var e=c.getAttribute("data-value");P(typedWord,e)?(e=e.substr(typedWord.length,e.length),y()?E(e):(e=c.getAttribute("data-value"),F(i,j,e,typedWord))):(D(),e=c.getAttribute("data-value"),F(i,j,e,typedWord))}t(c,"UP")}}}},R=function(a,b,c){switch(a.keyCode){case KEYCONSTANTS.ENTER:O(b,c,"data-mention"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();break;case KEYCONSTANTS.TAB:y()?(D(),O(b,c,"data-mention"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()):x()&&(J(),m.doc.execCommand("insertHTML",!1,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"));break;case KEYCONSTANTS.DOWN:Q("DOWN"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();break;case KEYCONSTANTS.UP:Q("UP"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();break;case KEYCONSTANTS.ESCAPE:case KEYCONSTANTS.LEFTARROW:J(),D();break;case KEYCONSTANTS.RIGHTARROW:D()?(O(b,c,"data-mention"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()):J()}},S=function(a){var b,c,d=m.win.getSelection(),e=d.getRangeAt(0),f=e.cloneRange();i=d.anchorNode,f.setStart(i,0),c=f.cloneContents(),b=c.textContent;var g=n(),h=g.length,k=0,l={};for(j=-1;k<h;k++)b.lastIndexOf(g[k])>-1&&(j=b.lastIndexOf(g[k]));var o=!1;if(o=0===j||j>-1&&(" "===b.charAt(j-1)||160===b.charCodeAt(j-1)),o||D(),k=0,KEYVALUECONSTANTS.includes(a.keyCode))R(a,j,i);else for(;k<h;k++)if(b.includes(g[k])){if(o){var p=/(?:(?=\s*)([\S]+[^\n]*)$)/i,q=p.exec(b),r=q?q[1]:"",s=r.lastIndexOf(g[k]);s>-1&&(typedWord=r.substr(s+1),l={key:g[k],word:r.substr(s+1)},Object.keys(l).length>0&&I(l,i,j))}}else J(),0===b.length&&D()},T=function(a){var b=m.doc.body.querySelectorAll("#suggestionNode")[0];if(m.doc.body.contains(b)){var c=b.innerText;if(c[0]===a.key)c=c.replace(a.key,""),c=c.replace(/&nbsp;/g,""),b.textContent=c;else if(a.keyCode===KEYCONSTANTS.BACKSPACE&&y()&&x()){var d=m.doc.getSelection(),e=d.anchorNode.textContent[d.anchorOffset-1];c=e+c,b.textContent=c}}},U=function(a){var b=m.doc.body.querySelectorAll("#suggestionNode")[0];m.doc.body.contains(b)&&(b.textContent="",b.textContent=a)},V=function(a){if(a.keyCode!==KEYCONSTANTS.UP&&a.keyCode!==KEYCONSTANTS.DOWN&&a.keyCode!==KEYCONSTANTS.ENTER||!document.body.contains(h)||(a.preventDefault(),a.stopPropagation()),a.keyCode===KEYCONSTANTS.TAB&&x())a.preventDefault(),a.stopPropagation();else if(a.keyCode===KEYCONSTANTS.RIGHTARROW){var b=m.doc.body.querySelectorAll("#suggestionNode")[0];m.doc.body.contains(b)&&(a.preventDefault(),a.stopPropagation())}a.keyCode===KEYCONSTANTS.LEFTARROW?D():m.initobj.addSmartSuggestion&&T(a)};!function(){ZE._addEvent(m.doc,CONSATNTS.KEYUP,S),ZE._addEvent(m.doc,CONSATNTS.KEYDOWN,V)}()},ZE.prototype.ZiaIntegration=function(){var a=this,b=function(){return new Promise(function(b,c){var d=document.createElement("script"),e="v1_8",f="//"+ZE_Init.jsStatic+"/bluepencil/"+e+"/js/zbluepencil_min_all.js";d.src=f,document.head.appendChild(d),d.onload=function(){window.ZBluePencil.onload(function(){a.ZiaFilesLoaded=!0,ZE_Init.ZiaFilesLoaded=!0;var c=window.ZBluePencil;if(a.bluePencilInstance=c,void 0===c)return a.ZiaFilesLoaded=!1,ZE_Init.ZiaFilesLoaded=!1,!1;"comment"===a.initobj.type?(a.ZiaInstance=c.initialize(ZE_Init.serviceName,a.iframe,{ignoreWordsStartingWith:a.initobj.ignoreWordsStartingWith||[]}),a.initiateZiaSpellcheck()):a.ZiaInstance=c.initialize(ZE_Init.serviceName,a.doc.body,{ignoreWordsStartingWith:a.initobj.ignoreWordsStartingWith||[]}),b()})}})};!function(){if(ZE_Init.allowZiaInteg&&ZE_Init.serviceName)if(ZE_Init.ZiaFilesLoaded){var c=window.ZBluePencil;a.bluePencilInstance=c,a.ZiaFilesLoaded=!0,"comment"===a.initobj.type?(a.ZiaInstance=c.initialize(ZE_Init.serviceName,a.iframe),a.initiateZiaSpellcheck()):a.ZiaInstance=c.initialize(ZE_Init.serviceName,a.doc.body)}else b()}()},ZE.prototype.decideSpellcheckAction=function(a){var b=this;a&&b.ZiaInstance&&"comment"===b.initobj.type?b.initiateZiaSpellcheck(a):b.initiateZiaSpellcheck(!1)},ZE.prototype.constructSpellcheckerNode=function(){var a=this,b=ZE.i18n,c=document.getElementsByClassName("ze_spell")[0];c&&c.parentElement.removeChild(c);var d;c=document.createElement("div"),c.className="zeSpellCheckBox";var e=document.createElement("span");e.setAttribute("data-attr","check"),e.innerHTML=b("Checking..."),e.className="zeSpellCheckSts";var f=document.createElement("i");f.className="zei-spellCheck",f.setAttribute("data-attr","recheck");var g=document.createElement("i");g.className="zei-close",g.setAttribute("data-attr","close"),c.appendChild(e),c.appendChild(f),c.appendChild(g);var h=a.toolbardiv.getElementsByClassName("zeSpellCheckBox")[0];h&&h.parentElement.removeChild(h),a.toolbardiv.appendChild(c),d=document.createElement("span"),d.setAttribute("data-attr","spellAnim"),d.className="zeSpellCheckLoadAni";var i=a.toolbarobject.spellcheck,j=i.querySelectorAll("[data-attr='spellAnim']")[0];return j&&j.parentElement.removeChild(j),a.toolbardiv.getElementsByClassName("zei-more")[0]||i.insertBefore(d,i.firstChild),f.onmousedown=function(g){g.preventDefault(),g.stopPropagation(),"en"===a.defaultSpellcheckLanguage.split("-")[0]?a.ZiaInstance.checkStyle(a.defaultSpellcheckLanguage):a.ZiaInstance.checkSpell(a.defaultSpellcheckLanguage),c.insertBefore(d,c.childNodes[1]),f.classList.remove("active"),e.style.display="",e.innerHTML=b("Checking..."),a.ZiaInstance.on("complete",function(){e.innerHTML=b("Checked"),f.classList.add("active"),document.body.contains(d)&&d.parentElement.removeChild(d)})},g.onmousedown=g.onclick=function(b){a.ZiaInstance.stopProofing(),c.parentElement.removeChild(c),a.iframe.contentDocument.body.setAttribute("spellcheck",!0),b.preventDefault(),b.stopPropagation()},c},ZE.prototype.triggerZiaSpellcheck=function(){var a=this;a.ziaSpellcheckTriggered=!0;var b=a.toolbarobject.spellcheck;b.firstChild.setAttribute("data-tooltip",ZE.i18n("Checking")),b.firstChild.classList.remove("active"),a.initiateZiaSpellcheck();var c=a.constructSpellcheckerNode(),d=document.getElementById("alter_toolbar");d&&(d.style.display="none"),a.ZiaInstance.on("complete",function(b){f=a.toolbarobject.spellcheck;var d=c.querySelectorAll("[data-attr='recheck']")[0],e=c.querySelectorAll("[data-attr='check']")[0];e.innerHTML=ZE.i18n("No error"),"success"===b.status&&0===b.count.spell?e.style.display="":e.innerHTML=ZE.i18n("Checked"),d.classList.add("active");var f=a.toolbarobject.spellcheck,g=f.querySelectorAll("[data-attr='spellAnim']")[0];a.toolbardiv.contains(g)&&g.parentElement.removeChild(g),f.firstChild.setAttribute("data-tooltip",ZE.i18n("Check again")),f.firstChild.classList.add("active")})},ZE.prototype.initiateZiaSpellcheck=function(){var a=this;"undefined"==typeof state&&(state=!0),state?(void 0!==a.defaultSpellcheckLanguage&&"locale"!==a.defaultSpellcheckLanguage||(a.defaultSpellcheckLanguage=ZE.getLanguage(navigator.language.toLowerCase())),"en"===a.defaultSpellcheckLanguage.split("-")[0]?a.ZiaInstance.checkStyle(a.defaultSpellcheckLanguage):a.ZiaInstance.checkSpell(a.defaultSpellcheckLanguage)):a.ZiaInstance.stopProofing()},ZE.prototype.getZiaSpellcheckLangList=function(){return[["locale","Auto"],["af","Afrikaans"],["am","Amharic"],["ar","العربية"],["hy-AM","Հայերեն"],["az-AZ","Azeri"],["bg","Български"],["bn","Bengali"],["cn","Català"],["cs","Český"],["da","Danske"],["nl","Nederlands"],["en-AU","English(AU)"],["en-CA","English(CA)"],["en-NZ","English(NZ)"],["en-GB","English(UK)"],["en-US","English(US)"],["en-ZA","English(ZA)"],["eo_l3","Esperanto"],["et","Eesti"],["fo","Faroese"],["fa","Farsi"],["fj","Fijian"],["fr","Français"],["fy","Frisian"],["gl-ES","Galego"],["de-AT","Deutsch(AT)"],["de-CH","Deutsch(CH)"],["de-DE","Deutsch(DE)"],["el","Ελληνικά"],["he","עברית"],["hi","हिन्दी"],["hu","Magyar"],["id","Indonesia"],["ia","Interlingua"],["ga","Gaeilge"],["is","Íslenska"],["it","Italiano"],["ko","Korean"],["la","Latin"],["lv-LV","Latvijas"],["lt-LT","Lietuvos"],["mi","Maori"],["ms","Melayu"],["mr","Marathi"],["mn","Mongolian(MN)"],["ne","Nepali"],["nb","Norsk bokmål"],["nn-NO","Norsk Nynorsk"],["ns-ZA","Northern Sotho"],["oc-FR","Occitan"],["or","Oriya"],["pl","Polski"],["pt-PT","Português(PT)"],["pt-BR","Português(BR)"],["qu","Quechua"],["rw_RW","Rheato-Romanic"],["ro","Română"],["ru-RU","Русский"],["gd-GB","Scots gaelic"],["sr","Српски"],["sk","Slovenský"],["sl","Slovenski"],["es-CL","Español(CL)"],["es-CO","Español(CO)"],["es-EC","Español(EC)"],["es-ES","Español(ES)"],["es-MX","Español(MX)"],["es-NI","Español(NI)"],["es-PE","Español(PE)"],["es-PR","Español(PR)"],["es-UY","Español(UY)"],["sv-SE","Svenska"],["sw-KE","Swahili"],["ta","தமிழ்"],["tn-ZA","Tswana"],["ts","Tsonga"],["uz_UZ","Uzbek"],["ve-ZA","Venda"],["vi","Vietnamese"],["xh","Xhosa"],["zu","Zulu"]]},ZE.getLanguage=function(a){return{"af-za":"af",af:"af",am:"am",ar:"ar","ar-eg":"ar","ar-sa":"ar","ar-iq":"ar","ar-jo":"ar","ar-ae":"ar","ar-bh":"ar","ar-ly":"ar","ar-kw":"ar","ar-qa":"ar","ar-sy":"ar",az:"az-AZ",bg:"bg","bg-bg":"bg","bn-bn":"bn",bn:"bn","bn-in":"bn",ca:"cn","ca-es":"cn","en-au":"en-AU","en-a":"en-AU","en-ca":"en-CA","en-c":"en-CA","english(canada)":"en-CA","en-gb":"en-GB","en-g":"en-GB","en-in":"en-GB","en-ie":"en-GB","en-nz":"en-NZ","en-us":"en-US","en-u":"en-US",en:"en-US","en-my":"en-US","en-sg":"en-US","en-zw":"en-US","en-securid":"en-US","en-ph":"en-US","en-tt":"en-US","en-za":"en-ZA",eo:"eo_l3","de-at":"de-AT","de-ch":"de-CH","de-de":"de-DE",de:"de-DE","de-lu":"de-DE","es-es":"es-ES",es:"es-ES","es-ar":"es-ES","es-ve":"es-ES","es-us":"es-ES","es-419":"es-ES","es-cr":"es-ES","es-pa":"es-ES","es-do":"es-ES","es-hn":"es-ES","es-gt":"es-ES","es-sv":"es-ES","es-bo":"es-ES","es-es-tradnl":"es-ES","es-mx":"es-MX","es-co":"es-CO","es-ni":"es-NI","es-pe":"es-PE","es-pr":"es-PR","es-cl":"es-CL","es-ec":"es-EC","es-uy":"es-UY",et:"et","et-ee":"et",fa:"fa","fa-ir":"fa",fj:"fj",fo:"fo","fo-fo":"fo",fy:"fy",cs:"cs","cs-cz":"cs",da:"da","da-dk":"da",el:"el","el-gr":"el",ga:"ga","ga-ie":"ga","gd-gb":"gd-GB",gl:"gl-ES","gl-es":"gl-ES","gu-in":"gu","fr-fr":"fr",fr:"fr","fr-ca":"fr","fr-c":"fr","fr-ch":"fr","fr-be":"fr","fr-mc":"fr",iw:"he","iw-il":"he",he:"he","he-il":"he",hi:"hi","hi-in":"hi",hr:"hr","hr-hr":"hr",ko:"ko","ko-kr":"ko",lv:"lv-LV","lv-lv":"lv-LV",lt:"lt-LT","lt-lt":"lt-LT",pt:"pt-PT","pt-pt":"pt-PT","pt-br":"pt-BR","pt-b":"pt-BR",pl:"pl","pl-PL":"pl","pl-pl":"pl",qu:"qu","quz-bo":"qu",zu:"zu","zu-za":"zu",hu:"hu","hu-hu":"hu",hy:"hy-AM","hy-am":"hy-AM",ia:"ia",id:"id","id-ID":"id",in:"id","in-id":"id",it:"it","it-it":"it","it-ch":"it",is:"is-IS","is-IS":"is-IS",la:"la",mi:"mi","mi-nz":"mi","mn-mn":"mn",mr:"mr","mr-in":"mr",ms:"ms","ms-my":"ms",nb:"nb-NO","nb-no":"nb-NO",no:"nb-NO",ne:"ne","nl-nl":"nl",nl:"nl","nl-no":"nl","nl-be":"nl",nn:"nn-NO","nn-no":"nn-NO","nso-za":"ns-ZA",oc:"oc-FR",or:"or",ro:"ro","ro-ro":"ro",ru:"ru-RU","ru-ru":"ru-RU",rw:"rw_RW","rw-rw":"rw_RW",sk:"sk","sk-sk":"sk",sl:"sl","sl-si":"sl",sv:"sv-SE","sv-se":"sv-SE","sv-fi":"sv-SE",sr:"sr","sr-cs":"sr","sr-rs":"sr",sw:"sw-KE","sw-ke":"sw-KE",ta:"ta","ta-in":"ta","tn-za":"tn-ZA",ts:"tr-TR",ve:"ve-ZA",vi:"vi","vi-vn":"vi","uk-ua":"uk-UA",uz:"uz",xh:"xh","xh-za":"xh"}[a]};var createDOM=function(){"use strict";function a(b){return(a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(a){return _typeof(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof(a)})(b)}var b=["ht","tp"].join(""),c=/^on/,d={viewBox:!0},e={svg:!0,g:!0,path:!0,rect:!0,defs:!0,lineargradient:!0,stop:!0},f={fragment:!0},g=[],h=function(a){return a.slice(2).toLowerCase()},i=function(a,b,c){var d=!1;return g.forEach(function(e){var f=e(a,b,c);d=d||f}),d},j=function(b,f){var g;if(f)for(var j in f)if("ref"===j&&"function"==typeof f[j])f[j](b);else if(g=j,c.test(g))"string"!=typeof f[j]&&b.addEventListener(h(j),f[j]);else if("style"===j&&"object"===a(f[j]))Object.assign(b.style,f[j]);else if("className"===j)b.setAttribute("class",f[j]);else{if(i(j,b,f))continue;void 0!==f[j]&&(d[j]&&e[b.type.toLowerCase()]?b.setAttributeNS("",j,f[j]):b.setAttribute(j,f[j]))}},k=function a(c){var d;if(!c)return document.createComment("");if("string"==typeof c)return document.createTextNode(c);if("number"==typeof c)return document.createTextNode(String(c));if(c instanceof Node)return c;var g=(c.type||"").trim().toLowerCase();return e[g]?(g=(c.type||"").trim(),d=document.createElementNS("".concat(b,"://www.w3.org/2000/svg"),g),"svg"===g&&d.setAttributeNS("".concat(b,"://www.w3.org/2000/xmlns/"),"xmlns:xlink","".concat(b,"://www.w3.org/1999/xlink")),c.props&&j(d,c.props)):f[g]?d=document.createDocumentFragment():g&&(d=document.createElement(g),c.props&&j(d,c.props)),(c.children||[]).reduce(function(a,b){return a.concat(b)},[]).forEach(function(b){if(void 0!==b){var c=a(b);void 0!==c&&d.appendChild(c)}}),d};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"function"==typeof a&&g.push(a)}(function(a,b,c){return"dangerouslySetInnerHTML"===a&&(b.innerHTML=c[a],!0)}),function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return k({type:a,props:b,children:d})}}();