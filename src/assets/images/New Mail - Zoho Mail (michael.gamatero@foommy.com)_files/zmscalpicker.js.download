function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ZEVENTS=function(e){return new ZCALPicker(e)},ZEVENTS.count=0,ZEVENTS.obj={},ZEVENTS.template=function(e){switch(e){case"type1":return{_HTML:'<li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><i class="#py#" rel="PY"></i></li><li class="zcal_arr"><i class="#pm#" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="#nm#" rel="NM"></i></li><li class="zcal_arr"><i class="#ny#" rel="NY"></i></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li><li class="zcal_tmz"><span>#tz#</span></li></ul></li>',_cont:{tag:"UL",_class:"zcal_mCal"},_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b"}};case"type2":return{_HTML:'<ul class="zcal_mCal #shadow# #hover#"><li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><svg rel="PY"><polygon points="10.8,4.7 7.8,7.7 10.8,10.7 10.8,12 7.2,8.3 6.5,7.7 7.2,7 10.8,3.4"></polygon><polygon points="4.8,7.7 8.7,11.5 8.6,13.1 3.2,7.7 4,6.9 8.6,2.3 8.7,3.9"></polygon></svg></li><li class="zcal_arr"><svg  rel="PM"><polygon points="10.7,2.3 10.7,4 6.9,7.8 10.7,11.6 10.7,13.2 5.2,7.8"></polygon></svg></li><li><span >#HEADM#</span><span>#HEADY#</span></li><li class="zcal_arr"><svg rel="NM" ><polygon points="5.2,13.2 5.2,11.5 9,7.7 5.2,3.9 5.2,2.3 10.7,7.7"></polygon></svg></li><li class="zcal_arr"><svg rel="NY" ><polygon points="4.7,10.7 7.7,7.7 4.7,4.7 4.7,3.4 8.3,7 9,7.7 8.3,8.3 4.7,12"></polygon><polygon points="10.7,7.7 6.8,3.9 6.9,2.3 12.3,7.7 11.5,8.5 6.9,13.1 6.8,11.5"></polygon></svg></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# #cl# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></li></ul>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};case"type3":return{_HTML:'<li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr" ><i class="#py#" rel="PY"></i></li><li class="zcal_arr" ><i class="#pm#" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="#nm#" rel="NM"></i></li><li class="zcal_arr" ><i class="#ny#" rel="NY"></i></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li rel="DT" class="zcal_table">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li></ul></li>',_class:{sel:"em",dis:"u",nor:"b"},_cont:{tag:"UL",_class:"zcal_mCal"},_bsecont:{tag:"DIV",_class:"zcal_mpcal"},_patch:{tag:"DIV",_cont:"<b></b>"}};case"type4":return{_HTML:'<li class="zcl_mCaltt zcl_table"><ul><li><span>#HEADM#</span><span>#HEADY#</span></li><li class="zcl_W20"><i class="#pm#" rel="PM"></i><i class="#nm#" rel="NM"></i></li></ul></li><li class="zcl_mCaldy zcl_table"><ul>#wk<li#hgt#>#item#</li>wk#</ul></li><li class="zcl_table zcl_mCaldt" rel="DT">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li></ul></li>',_cont:{tag:"UL",_class:"zcl_mCal"},_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b"},_cust:{dysel:"zcl_sl",pm:"zcli-larrow",nm:"zcli-rarrow"}};case"type5":return{_HTML:'<div class="zcal_mCal #shadow# #hover# zcl_mCalwti"><div class="zcal_table"><ul><li class="zcal_mCalti"><div class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><i class="zci-fst" rel="PY"></i></li><li class="zcal_arr"><i class="zci-pre" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="zci-nxt" rel="NM"></i></li><li class="zcal_arr"><i class="zci-lst" rel="NY"></i></li></ul></div><div class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></div></li><li class="zcal_mTil"><i class="zci-tiupar" rel="UT"></i><div ><ul id="zcl_t" style="overflow-y:auto;height:205px">#tr<li#ti# rel="TP">#item#</li>tr#</ul></div><i class="zci-tidnar" rel="TD"></i></li></ul></div><div class="zcal_mCalbtm"><div class="SC_PUbtm"><span rel="OK">Ok</span></div></div></div>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};case"type6":return{_HTML:'<div class="zcal_mCal #shadow# #hover#"><div class="zcal_table"><ul><li><div class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><svg rel="PY"><polygon points="10.8,4.7 7.8,7.7 10.8,10.7 10.8,12 7.2,8.3 6.5,7.7 7.2,7 10.8,3.4"></polygon><polygon points="4.8,7.7 8.7,11.5 8.6,13.1 3.2,7.7 4,6.9 8.6,2.3 8.7,3.9"></polygon></svg></li><li class="zcal_arr"><svg  rel="PM"><polygon points="10.7,2.3 10.7,4 6.9,7.8 10.7,11.6 10.7,13.2 5.2,7.8"></polygon></svg></li><li><span>#HEADM#</span><span>#HEADY#</span></li><li class="zcal_arr"><svg rel="NM" ><polygon points="5.2,13.2 5.2,11.5 9,7.7 5.2,3.9 5.2,2.3 10.7,7.7"></polygon></svg></li><li class="zcal_arr"><svg rel="NY" ><polygon points="4.7,10.7 7.7,7.7 4.7,4.7 4.7,3.4 8.3,7 9,7.7 8.3,8.3 4.7,12"></polygon><polygon points="10.7,7.7 6.8,3.9 6.9,2.3 12.3,7.7 11.5,8.5 6.9,13.1 6.8,11.5"></polygon></svg></li></ul></div><div class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# #cl# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></div></li></ul></div><div class="zcal_mCalbtm zcal_mC_sz_cn zcal_table"><ul><li class="zcal_txl" rel="TL"><span class="zcal_mC_sz_ti">#br<input type="text" id="zcal_hr" rel="HI" value="#cuHr#" data-item="">:<input type="text" id="zcal_min" rel="MI" value="#cuMin#">#tf:<input type="text" readonly id="zcal_ap" rel="AP" value="#apm#">br#</span></li><li><div class="SC_PUbtm" style="padding: 0px;"><span rel="OK">Ok</span></div></li></ul></div></div>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};case"type7":return{_HTML:'<div class="zcal_mCal #shadow# #hover# #timediv#"><div class="zcal_table"><ul><li class="#timediv#"><div class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><svg rel="PY" class="#py#"><polygon points="10.8,4.7 7.8,7.7 10.8,10.7 10.8,12 7.2,8.3 6.5,7.7 7.2,7 10.8,3.4"></polygon><polygon points="4.8,7.7 8.7,11.5 8.6,13.1 3.2,7.7 4,6.9 8.6,2.3 8.7,3.9"></polygon></svg></li><li class="zcal_arr"><svg class="#pm#" rel="PM"><polygon points="10.7,2.3 10.7,4 6.9,7.8 10.7,11.6 10.7,13.2 5.2,7.8"></polygon></svg></li><li><span rel="month_idx">#HEADM#</span><span rel="year_idx">#HEADY#</span></li><li class="zcal_arr"><svg class="#nm#" rel="NM" ><polygon points="5.2,13.2 5.2,11.5 9,7.7 5.2,3.9 5.2,2.3 10.7,7.7"></polygon></svg></li><li class="zcal_arr"><svg class="#ny#" rel="NY" ><polygon points="4.7,10.7 7.7,7.7 4.7,4.7 4.7,3.4 8.3,7 9,7.7 8.3,8.3 4.7,12"></polygon><polygon points="10.7,7.7 6.8,3.9 6.9,2.3 12.3,7.7 11.5,8.5 6.9,13.1 6.8,11.5"></polygon></svg></li></ul></div><div class="#viewclass#" id="mcvw"><div class="zcal_mCal_yr zcal_table">#ycr<ul>#yt<li rel="year_sel" class="#selclass#">#item#</li>yt#</ul>ycr#</div><div class="zcal_mCal_mth zcal_table">#mcr<ul>#mt<li rel="month_sel" class="#selclass#">#item#</li>mt#</ul>mcr#</div><div class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# #cl# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></div></div></li>#timerow<li class="zcal_mTil"><i class="zci-tiupar" rel="UT"></i><div ><ul id="zcl_t" style="overflow-y:auto;height:205px">#tr<li#ti# rel="TP">#item#</li>tr#</ul></div><i class="zci-tidnar" rel="TD"></i></li>timerow#</ul></div>#okrow<div class="zcal_mCalbtm"><div class="SC_PUbtm"><span rel="OK">Ok</span></div></div>okrow##bottomtimerow<div class="zcal_mCalbtm zcal_mC_sz_cn zcal_table"><ul><li class="zcal_txl" rel="TL"><span class="zcal_mC_sz_ti">#br<input type="text" id="zcal_hr" rel="HI" value="#cuHr#" data-item="">:<input type="text" id="zcal_min" rel="MI" value="#cuMin#">#tf:<input type="text" readonly id="zcal_ap" rel="AP" value="#apm#">br#</span></li><li><div class="SC_PUbtm"  style="padding: 0px;"><span rel="OK">Ok</span></div></li></ul></div>bottomtimerow#</div>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};default:return}},ZEVENTS.selector=function(e){var t={},a=e.trim().split(" ");if(t.target=(a[0]||a).substring(1),2==a.length){a[1]=a[1].trim();var s=a[1].indexOf("[");if(-1!=s){var r=a[1].indexOf("]"),n=(a[1].indexOf("."),a[1].indexOf("="));t.ele=a[1].substring(0,s),t.atr=a[1].substring(s+1,r),t.atr_val=a[1].substring(n+1)}else t.atr="#"===a[1][0]?"id":"."==a[1][0]?"class":"",""!=t.atr?(t.atr_val=a[1].substring(a[1].search(/(#|\.)/g)+1),t.ele=""):(t.ele=a[1],t.atr_val="")}else t.ele="",t.atr="",t.atr_val="";return t},ZEVENTS.removeall=function(e){if("string"==typeof(e=e||"picker")&&"picker"==e&&ZEVENTS.obj.picker){var t=ZEVENTS.obj.picker;for(var a in t)ZEVENTS.remove(t[a],e)}},ZEVENTS.remove=function(e,t){if("object"==_typeof(e)&&e._name){var a=e._cont;e.clearobj(),e.clearvar(),e=null,t=t||"picker",delete ZEVENTS.obj[t][a]}},ZEVENTS.clear=function(e){"object"==_typeof(e)&&e._name&&(e.clearobj(),ZEVENTS.obj.state=null)},ZCALPicker=function(e){return this.tar=e,this},ZCALPicker.prototype.picker=function(e,t){var a,s=ZEVENTS.obj.picker||(ZEVENTS.obj.picker={});return t.target=this.tar,"date"==e?a=new ZCALdatepickr(t):"range"==e?a=new ZCALrangepickr(t):"time"==e&&(a=new ZCALtimepickr(t)),a&&(s[a._cont]=a),a};var ZCALtimepickr=function(e){return e?(this._name="timepicker",this._type=e.type&&/^[123]$/.test(e.type)?e.type:1,this._tar="object"==_typeof(e.target)?e.target:document.getElementById(e.target),this._tform=e.tform,e.refer?this._refer="object"==_typeof(e.refer)?e.refer:document.getElementById(e.refer):this._tar&&(this._refer="input"==this._tar.tagName.toLowerCase()?this._tar:this._tar.getElementsByTagName("input")[0]),this.os=0,this.n="",this.tmpO="no",this._cont=(new Date).getTime()+"_"+ZEVENTS.count++,this._prevalue="",this._menu=!1,this._sel=-1,this._errfn=[],this._chgefn=[],this):null};ZCALtimepickr.prototype.on=function(e,t){return"change"==e&&"function"==typeof t?this._chgefn.push(t):"error"==e&&"function"==typeof t&&this._errfn.push(t),this},ZCALtimepickr.prototype.bind=function(){function s(){if(o._inEl){ZCALremoveListener(o._inEl,"input",r),ZCALremoveListener(o._inEl,"keydown",l),ZCALremoveListener(o._inEl,"blur",c),ZCALremoveListener(o._inEl,"keypress",i);o._inEl.parentNode.removeChild(o._inEl);e1=null}if(o._ulEl){ZCALremoveListener(o._ulEl,"mousedown",u);o._ulEl.parentNode.removeChild(o._ulEl);e1=null}o._menu=!1,o._sel=-1,o._prevalue="",o._ulEl=o._inEl=null}var o=this;o.clearobj=function(){ZEVENTS.obj.state=null;var e=document.getElementById(o._cont);e&&(ZCALremoveListener(e,"mousedown",d),ZCALremoveListener(document,"scroll",docevehandle),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"mousewheel",docevehandle),ZCALremoveListener(o._tar,"keydown",m),e=e.parentNode.removeChild(e),e=null,o._sel=-1),o._inEl&&(""!=o._refer.placeholder?o._refer.value=o._refer.placeholder:o._refer.value=o._inEl.value,o._refer.placeholder=o._tform,s())},o.clearvar=function(){1==o._type?(ZCALremoveListener(o._tar,"focus",e),ZCALremoveListener(o._tar,"click",e),ZCALremoveListener(o._tar,"keydown",m)):3==o._type?(ZCALremoveListener(o._refer,"keydown",t),ZCALremoveListener(o._refer,"keyup",t),ZCALremoveListener(o._refer,"mouseup",t)):2==o._type&&ZCALremoveListener(o._refer,"focus",a)};var d=function(e){var t=e.target||event.srcElement;"li"==t.tagName.toLowerCase()&&(o._refer.value=t.innerHTML,n(),o.clearobj()),ZCALprevDef(e)},n=function(){var e=o._errfn,t=o._chgefn;if("hh:mm a"==o._tform?o.get12hrTime(o._refer.value):o.get24hrTime(o._refer.value))for(var a in t)t[a].call(o._refer);else for(var a in e)e[a].call(o._refer)},e=function(e){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=o;e.target||e.srcElement;var t="input"==this.tagName.toLowerCase()?this:this.getElementsByTagName("input")[0],a=t.value,s=o._tform||t.getAttribute("tform"),r=a.changeTimetoNumber(s);o._sel=r;var n=document.body.appendChild(document.createElement("ul"));n.style.width=(this.clientWidth<110?110:this.clientWidth)+"px",n.style.left=this.positionX()+"px",n.id=o._cont,ZCALaddListener(n,"mousedown",d);var l=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop);n.className="zcal_tilst "+(this.positionY()+250>l?"zcal_tilsbt":"zcal_tilstp");for(var i="",c=0;c<48;c++)i+='<li rel="'+c+'"'+(c==r?'class="zcal_sl"':"")+">"+(c+"").changeNumbertoTime(s)+"</li>";n.innerHTML=i,n.scrollTop=24*r,n.style.top=this.positionY()+250<l?this.positionY()+this.offsetHeight+"px":this.positionY()-n.offsetHeight+"px",ZCALprevDef(e),ZCALaddListener(document,"scroll",docevehandle=function(){o.clearobj()}),ZCALaddListener(document,"mousedown",docevehandle=function(){o.clearobj()}),ZCALaddListener(o._tar,"keydown",m),ZCALaddListener(o._refer,"blur",docevehandle=function(){o.clearobj()})},m=function(e){var t=e.which||e.keyCode||e.charCode,a=document.getElementById(o._cont).getElementsByTagName("li");38==t&&0!=o._sel?(a[o._sel--].className="",a[o._sel].className="zcal_sl",document.getElementById(o._cont).scrollTop=24*o._sel,n()):40==t&&o._sel!=a.length-1?(a[o._sel++].className="",a[o._sel].className="zcal_sl",document.getElementById(o._cont).scrollTop=24*o._sel,n()):13==t&&(this.value=a[o._sel].innerHTML,o.clearobj())},t=function(e){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=o;var t=this,a=(e=e||event).which||e.keyCode||e.charCode,s="HH:mm"==(o._tform||t.getAttribute("tform"));if("mouseup"==e.type.toLowerCase()){var r=ZCALselstart(t);return o.os=r<=2?ZCALcrtesel(t,0,2):3<=r&&r<=5?ZCALcrtesel(t,3,5):6<=r&&r<=8?ZCALcrtesel(t,6,8):0,!0}if("keyup"!=e.type.toLowerCase()||9==a){switch(!0){case 37==a:o.os=0!=o.os||s?0==o.os&&s?ZCALcrtesel(t,3,5):3==o.os?ZCALcrtesel(t,0,2):6==o.os?ZCALcrtesel(t,3,5):0:ZCALcrtesel(t,6,8);break;case 38==a:o.shiftnos(t,o.os,-1),n();break;case 39==a:o.os=0==o.os?ZCALcrtesel(t,3,5):3!=o.os||s?3==o.os&&s||6==o.os?ZCALcrtesel(t,0,2):0:ZCALcrtesel(t,6,8);break;case 40==a:o.shiftnos(t,o.os,1),n();break;case 48<=a&&a<=57:case 65==a||80==a:o.typenos(t,a,o.os),n();break;case 9==a:if("keydown"==e.type.toLowerCase()){if(ZCALselend(t)==t.value.length)return;o.tmpO="yes",ZCALselend(t)-ZCALselstart(t)!=2?o.os=ZCALcrtesel(t,0,2):o.os=0==o.os?ZCALcrtesel(t,3,5):3!=o.os||s?3==o.os&&s||6==o.os?ZCALcrtesel(t,0,2):0:ZCALcrtesel(t,6,8)}else"keyup"==e.type.toLowerCase()&&"no"==o.tmpO?ZCALselend(t)-ZCALselstart(t)!=2?o.os=ZCALcrtesel(t,0,2):o.os=0==o.os?ZCALcrtesel(t,3,5):3!=o.os||s?3==o.os&&s||6==o.os?ZCALcrtesel(t,0,2):0:ZCALcrtesel(t,6,8):"keyup"==e.type.toLowerCase()&&"yes"==o.tmpO&&(o.tmpO="no",ZCALprevDef(e))}ZCALprevDef(e)}},r=function(){if(o._prevalue!=this.value){this.value=this.value.replace("'","").replace("&","").replace("%","").replace(".",""),o._prevalue=this.value;var e="hh:mm a"==o._tform?o.timeObj12hr(this.value):o.timeObj24hr(this.value);if(e){if(""==e[0]){var t=o._ulEl.getElementsByTagName("li");t[o._sel].className="",t[e[1]].className="zcal_sl"}else{o._ulEl.innerHTML=e[0];var a=o._ulEl.getElementsByTagName("li").length;o._ulEl.style.height=24*(a<=2?a:4)+"px"}o._sel=e[1],o._ulEl.style.display="",o._ulEl.scrollTop=24*e[1],o._prevalue=this.value="hh:mm a"==o._tform?this.value.toUpperCase().replace(/^0/,""):this.value,o._refer.placeholder=e[2],o._refer.value=""}else o._ulEl.style.display="none",o._refer.placeholder="",o._refer.value=""}},l=function(e){var t=e.which||e.keyCode||e.charCode,a=o._ulEl.getElementsByTagName("li");if(38==t)0<o._sel&&(a[o._sel--].className="",a[o._sel].className="zcal_sl",this.value=a[o._sel].innerHTML,o._refer.placeholder=a[o._sel].innerHTML,o._ulEl.scrollTop=24*o._sel);else{if(39==t)return""!=o._refer.placeholder&&(this.value=o._refer.placeholder.substring(0,this.value.length+1)),r.call(this,e);40==t?a.length-1>o._sel&&(a[o._sel++].className="",a[o._sel].className="zcal_sl",this.value=a[o._sel].innerHTML,o._refer.placeholder=a[o._sel].innerHTML,o._ulEl.scrollTop=24*o._sel):13==t&&(""!=o._refer.placeholder?o._refer.value=o._refer.placeholder:o._refer.value=this.value,o._refer.placeholder=o._tform,n(),s())}},i=function(e){var t=e.which||e.keyCode||e.charCode;if(!/^(8|4[0689]|5[0-8]|3[7-9])$/.test(t)&&"HH:mm"==o._tform)return e.preventDefault(),e.stopPropagation(),!1;var a=this.selectionStart,s=this.selectionEnd;if(a==s&&s==this.value.length&&!/^(37|8|46)$/.test(t)){var r=String.fromCharCode(t);("hh:mm a"==o._tform?o.get12hrTime(this.value+r):o.get24hrTime(this.value+r))||(e.preventDefault(),e.stopPropagation())}},c=function(){""!=o._refer.placeholder?o._refer.value=o._refer.placeholder:o._refer.value=this.value,o._refer.placeholder=o._tform,n(),s()},u=function(e){var t=e.target||e.srcElement;"li"==t.tagName.toLowerCase()&&(o._refer.value=t.innerHTML,o._refer.placeHolder="",s(),n())},a=function(){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=o;var e=this.parentNode;o._inEl=e.getElementsByTagName("input")[1],o._ulEl=e.getElementsByTagName("ul")[0],o._inEl||(o._inEl=e.appendChild(document.createElement("input")),o._inEl.type="text",o._inEl.className="zcal_tiabs",ZCALaddListener(o._inEl,"input",r),ZCALaddListener(o._inEl,"keydown",l),ZCALaddListener(o._inEl,"blur",c),ZCALaddListener(o._inEl,"keypress",i)),o._ulEl||(o._ulEl=e.appendChild(document.createElement("ul")),ZCALaddListener(o._ulEl,"mousedown",u));var t="hh:mm a"==o._tform?o.timeObj12hr(this.value):o.timeObj24hr(this.value);if(t){o._ulEl.innerHTML=t[0],o._ulEl.style.display="";var a=o._ulEl.getElementsByTagName("li").length;o._ulEl.style.height=24*(a<=2?a:4)+"px",o._ulEl.scrollTop=24*t[1],o._inEl.value="hh:mm a"==o._tform?this.value.toUpperCase().replace(/^0/,""):this.value,this.placeholder=t[2],this.value="",o._sel=t[1],o._prevalue=this.value}else o._inEl.value=this.value,this.value="",this.placeholder="",o._ulEl.style.display="none";o._inEl.focus()};return 1==o._type?(ZCALaddListener(o._tar,"focus",e),ZCALaddListener(o._tar,"click",e)):2==o._type?ZCALaddListener(o._refer,"focus",a):3==o._type&&(ZCALaddListener(o._refer,"keydown",t),ZCALaddListener(o._refer,"keyup",t),ZCALaddListener(o._refer,"mouseup",t)),this},ZCALtimepickr.prototype.typenos=function(e,t,a){if(6==a&&/(A|P)/gi.test(String.fromCharCode(t))){var s=String.fromCharCode(t);return _ch="A"==s?" "+ZCALtform[0]:" "+ZCALtform[1],e.value=e.value.substring(0,5)+_ch,ZCALcrtesel(e,a,a+2),!0}var r=String.fromCharCode(t),n="HH:mm"==(this._tform||e.getAttribute("tform"));""==this.n?r="0"+(this.n=r):(r=this.n+""+r,this.n=""),0==a&&(!n&&parseInt(r,10)<=12||n&&parseInt(r,10)<=23)?e.value=r+e.value.substring(2):3==a&&parseInt(r,10)<=59&&(e.value=e.value.substring(0,3)+r+e.value.substring(5));var l=this;setTimeout(function(){l.n=""},1e4),ZCALcrtesel(e,a,a+2)},ZCALtimepickr.prototype.shiftnos=function(e,t,a){var s=e.value.substring(t,t+2);if(0==t){var r="HH:mm"==(this._tform||e.getAttribute("tform")),n=parseInt(s,10);r&&0==n&&-1==a?n=23:r||1!=n||-1!=a?r&&23==n&&1==a?n=0:r||12!=n||1!=a?n+=a:n=1:n=12,e.value=(n<=9?"0":"")+n+e.value.substring(2,8)}else if(3==t){0==(n=parseInt(s,10))&&-1==a?n=59:59==n&&1==a?n=1:n+=a,e.value=e.value.substring(0,3)+(n<=9?"0":"")+n+e.value.substring(5,8)}else 6==t&&(s==ZCALtform[0]?e.value=e.value.substring(0,5)+" "+ZCALtform[1]:e.value=e.value.substring(0,5)+" "+ZCALtform[0]);return ZCALcrtesel(e,t,t+2),"true"},ZCALtimepickr.prototype.timeObj12hr=function(e){var t=this.get12hrTime(e),a="";if(t&&t.arr){for(var s=0;s<t.arr.length;s++)a+="<li"+(s==t.sel?" class='zcal_sl'":"")+">"+t.arr[s]+"</li>";return this._menu=!1,[a,t.sel,t.arr[t.sel]]}if(t&&-1<t.sel){var r="";if(this._menu)r=0==t.sel?"12:00 AM":t.sel+":00 AM";else for(s=0;s<24;s++){var n=0==s?"12:00 AM":12==s?"12:00 PM":12<s?s-12+":00 PM":s+":00 AM";s==t.sel&&(r=n),a+="<li"+(s==t.sel?" class='zcal_sl'":"")+">"+n+"</li>",a+="<li>"+n.replace("00","30")+"</li>"}return this._menu=!0,[a,2*t.sel,r]}return!1},ZCALtimepickr.prototype.get12hrTime=function(e){var t,a,s=e.length;return 1<s&&":"==e[1]&&s++,!!(0<s&&s<=8&&(t=e.match(new RegExp(["^([0-9])$","^(0?[1-9]|1[012])$","^(0?[1-9]|1[012])(:)$","^(0?[1-9]|1[012])(:)([0-5])$","^(0?[1-9]|1[012])(:)([0-5][0-9])$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)([APap])$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)([APap][mM])$"][s-1]))))&&(t=Array.prototype.slice.call(t,1),s<4?{sel:11<(a=parseInt(t[0],10))?0:0==a?12:a}:4==s?{arr:[(e=0==e[0]?e.slice(1):e)+"0 AM",e+"5 PM",e+"0 AM",e+"5 PM"],sel:0}:4<s?{arr:[(a=0==(a=e.substring(0,5).trim())[0]?a.slice(1):a)+" AM",a+" PM"],sel:t[4]?/a/i.test(t[4][0])?0:1:0}:void 0)},ZCALtimepickr.prototype.timeObj24hr=function(e){var t=this.get24hrTime(e),a=tmp="";if(t&&t.arr){for(var s=0;s<t.arr.length;s++)a+="<li "+(s==t.sel?"class='zcal_sl'":"")+">"+t.arr[s]+"</li>";return this._menu=!1,[a,t.sel,t.arr[t.sel]]}if(t&&-1<t.sel){if(!this._menu)for(s=0;s<24;s++)tmp=s<10?"0"+s:s,a+="<li "+(s==t.sel?"class='zcal_sl'":"")+" >"+tmp+":00</li>",a+="<li>"+tmp+":30</li>";return this._menu=!0,[a,2*t.sel,(t.sel<10?"0"+t.sel:t.sel)+":00"]}},ZCALtimepickr.prototype.get24hrTime=function(e){var t,a=e.length;if(!(0<a&&a<6&&(t=e.match(new RegExp(["^([0-2])$","^([0-1][0-9]|2[0-3])$","^([0-1][0-9]|2[0-3])(:)$","^([0-1][0-9]|2[0-3])(:)([0-5])$","^([0-1][0-9]|2[0-3])(:)([0-5][0-9])$"][a-1])))))return!1;if(t=Array.prototype.slice.call(t,1),2==a)return{sel:s=parseInt(t[0],10)};if(a<4){var s=parseInt(t[0],10);return{sel:1==t[0].length&&s<=2?10*s:s}}return 4==a?{arr:[e+"0",e+"5"],sel:0}:5==a?{arr:[e],sel:0}:void 0};var ZCALrangepickr=function(e){if(e){this._name="rangepicker",e.range=e.range||["",""],e.range[0]=""!=e.range[0].trim()?new Date(e.range[0].parseDate(e.dform)):new Date(1947,8,15),e.range[1]=""!=e.range[1].trim()?new Date(e.range[1].parseDate(e.dform)):new Date(2147,8,15),e.range[1]=0<=e.range[0].diffTo("month",e.range[1])?e.range[1]:new Date(2147,8,15);var t=new Date,a=e.range[0].diffTo("month",new Date),s=t.diffTo("month",e.range[1]),r=0<=a&&0<s?new Date((new Date).setDate(1)):a<=0?e.range[0]:s<=0?new Date(e.range[1].getFullYear(),e.range[1].getMonth()-1,1):"",n=new Date(r.getFullYear(),r.getMonth()+1);return this._r1=new ZCALdatepickr({dform:e.dform||"MM/DD/YYYY",curdate:r,wkst:e.wkst||0,template:"type3",_cont:(new Date).getTime()+"_"+ZEVENTS.count++,range:e.range}),this._r2=new ZCALdatepickr({dform:e.dform||"MM/DD/YYYY",curdate:n,wkst:e.wkst||0,template:"type3",_cont:(new Date).getTime()+"_"+ZEVENTS.count++,range:e.range}),this._clkdates=[],this._selfn=[],this._tar="object"==_typeof(e.target)?e.target:document.getElementById(e.target),this._bsecont=ZEVENTS.template("type3")._bsecont,this._patch=ZEVENTS.template("type3")._patch,this._cont=(new Date).getTime()+"_"+ZEVENTS.count++,this}};ZCALrangepickr.prototype.on=function(e,t){return"select"==e&&"function"==typeof t&&this._selfn.push(t),this},ZCALrangepickr.prototype.bind=function(){var v=this,e=document.createElement(v._bsecont.tag);e.id=v._cont,e.className=v._bsecont._class,v._tar.appendChild(e);var t=v._r1._curDate.diffTo("month",v._r2._curDate);v.clearobj=function(){ZCALremoveListener(document.getElementById(v._r1._cont),"mousedown",s),ZCALremoveListener(document.getElementById(v._r2._cont),"mousedown",s),ZCALremoveListener(e,"selectstart",ZCALprevDef),ZCALremoveListener(e,"dragstart",ZCALprevDef);e.parentNode.removeChild(e)},v.clearvar=function(){v=e=t=null};function h(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}var s=function(e){var t=e.target||event.srcElement,a=t.getAttribute("rel"),s=t.parentNode.getAttribute("rel"),r="r1"==this.rel?v._r1:v._r2,n=new Date(r._curDate),l=!1;if("u"==t.tagName.toLowerCase()||-1!=t.className.indexOf("zcal_dis"))return ZCALprevDef(e),!1;if("PM"==a||"PM"==s)n=ZCALchangeMonth(n,-1),r._curDate=n;else if("NM"==a||"NM"==s)n=ZCALchangeMonth(n,1),r._curDate=n;else if("PY"==a||"PY"==s)n.setYear(n.getFullYear()-1),r._curDate=n;else if("NY"==a||"NY"==s)n.setYear(n.getFullYear()+1),r._curDate=n;else if("DT"==t.parentNode.parentNode.getAttribute("rel")){if(t.className&&t.className==ZEVENTS.template(r._template)._class.dis)return;if(n.setDate(parseInt(t.innerHTML,10)),0==(c=v._clkdates.length)||2<=c)v._clkdates=new Array(n);else if(1==c&&v._clkdates[0].getTime()!=n.getTime()){var i=n<v._clkdates[0]?0:1;v._clkdates.splice(i,0,n),l=!0}}var c=v._clkdates.length;if(v._r1._select=v._r2._select=[],2==c){var o=v._clkdates[0].diffTo("month",v._r1._curDate),d=v._r1._curDate.diffTo("month",v._clkdates[1]),m=v._clkdates[0].diffTo("month",v._r2._curDate),u=v._r2._curDate.diffTo("month",v._clkdates[1]);0<=o&&0<=d&&(v._r1._select={start:0<o?1:v._clkdates[0].getDate(),end:0<d?new Date(v._r1._curDate.getFullYear(),v._r1._curDate.getMonth()+1,0).getDate():v._clkdates[1].getDate()}),0<=m&&0<=u&&(v._r2._select={start:0<m?1:v._clkdates[0].getDate(),end:0<u?new Date(v._r2._curDate.getFullYear(),v._r2._curDate.getMonth()+1,0).getDate():v._clkdates[1].getDate()})}else 1==c&&0==v._clkdates[0].diffTo("month",n)&&(r._select=[n.getDate()]);var p=v._r1._curDate.diffTo("month",v._r2._curDate);if(v.resetDRange("r1"==this.rel?"r1":"r2"),h(g.call(v._r1)).innerHTML=v._r1.calendar(),h(C.call(v)).innerHTML=1<p?v._patch._cont:"",h(g.call(v._r2)).innerHTML=v._r2.calendar(),l)for(var _ in v._selfn)v._selfn[_].call({getDateRange:{from:v._clkdates[0],to:v._clkdates[1]}})};t<=0&&(v._r2._curDate=new Date(new Date(v._r1._curDate.getTime()).setMonth(v._r1._curDate.getMonth()+1)));var g=function(e){var t=document.getElementById(this._cont);if(!t){var a=ZEVENTS.template(this._template)._cont;(t=document.createElement(a.tag)).className=a._class,t.rel=e,t.id=this._cont,document.getElementById(v._cont).appendChild(t),ZCALaddListener(t,"mousedown",s)}return t},C=function(){var e;(e=document.getElementById(this._cont+"_patch"))||((e=document.createElement(this._patch.tag)).id=this._cont+"_patch",document.getElementById(this._cont).appendChild(e));return e};return v.resetDRange(),g.call(v._r1,"r1").innerHTML=v._r1.calendar(),C.call(v).innerHTML=1<t?v._patch._cont:"",g.call(v._r2,"r2").innerHTML=v._r2.calendar(),ZCALaddListener(e,"selectstart",ZCALprevDef),ZCALaddListener(e,"dragstart",ZCALprevDef),this},ZCALrangepickr.prototype.resetDRange=function(e){this._r1._edate=new Date(this._r2._curDate.getFullYear(),this._r2._curDate.getMonth(),0),this._r2._sdate=new Date(this._r1._curDate.getFullYear(),this._r1._curDate.getMonth()+1,1)};var ZCALdatepickr=function(e){return e=e||{},this.fullDtclk=null!=e.fullDtclk?e.fullDtclk:0,this._name="datepicker",this._dform=e.dform||"mm/dd/yyyy",this._tform=e.tform||0,this._wkst=e.wkst&&/^[0-7]$/g.test(e.wkst)?e.wkst:0,this._tar="object"==_typeof(e.target)?e.target:document.getElementById(e.target),this._type=e.mode||"inline",this._titype=e.time||"",this._select=e.select||[],this._monchge=[],this._yrchge=[],this._dtclk=[],this._okclk=[],this._customdate=e.customdate||"no",this._template=e.template||("yes"==this._customdate?"type7":"inline"==this._type?"type1":"popup"==this._type&&"right"==this._titype?"type5":"popup"!=this._type||"bottom"!=this._titype&&"bottom-inline"!=this._titype?"type2":"type7"),this._curDate=e.curdate||(e.today?e.today.parseDate(this._dform):new Date),this._cont=e._cont||(new Date).getTime()+"_"+ZEVENTS.count++,this._change=e.update||"yes",this._minhgt=e.minhgt||251,this._tz=e.timezone||"",this._selDate=new Date,this._curTime,this._pickerview=e.pickerview||"",e.fn&&(this.fn=e.fn),e.timerange&&(this._stime=e.timerange[0],this._etime=e.timerange[1]),e.range&&"[object String]"==Object.prototype.toString.call(e.range[0])?(this._sdate=e.range[0].parseDate(this._dform)||new Date(1947,8,15),this._edate=e.range[1].parseDate(this._dform)||new Date(2147,8,15)):e.range&&"[object Date]"==Object.prototype.toString.call(e.range[0])?(this._sdate=e.range[0],this._edate=e.range[1]):(this._sdate=null,this._edate=null),e.refer?this._refer="object"==_typeof(e.refer)?e.refer:document.getElementById(e.refer):this._tar&&(this._refer="input"==this._tar.tagName.toLowerCase()?this._tar:this._tar.getElementsByTagName("input")[0]),this};ZCALdatepickr.prototype.on=function(e,t){return"monthchge"==e&&"function"==typeof t?this._monchge.push(t):"yearchge"==e&&"function"==typeof t?this._yrchge.push(t):"dateclick"==e&&"function"==typeof t?this._dtclk.push(t):"ok"==e&&"function"==typeof t&&this._okclk.push(t),this},ZCALdatepickr.prototype.updateselect=function(e){return this._r1||(this._select=e||this._select,document.getElementById(this._cont).innerHTML=this.calendar()),this},ZCALdatepickr.prototype.bind=function(){var y=this,e=ZEVENTS.template(y._template)._cont,E="",T=document.createElement(e.tag);T.id=y._cont,T.className=e._class,y.clearobj=function(){if(ZEVENTS.obj.state=null,document.getElementById(y._cont)){ZCALremoveListener(T,"mousedown",r),ZCALremoveListener(T,"selectstart",ZCALprevDef),ZCALremoveListener(T,"dragstart",ZCALprevDef);T.parentNode.removeChild(T);"popup"==y._type&&(ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"scroll",docevehandle),ZCALremoveListener(document,"mousewheel",docevehandle),"bottom"!=y._titype&&"bottom-inline"!=y._titype||(ZCALremoveListener(T,"keydown",docevekeyhandle1),ZCALremoveListener(T,"keyup",docevekeyhandle2),ZCALremoveListener(T,"focusout",docevekeyhandle1))),0}},y.hide=function(e){var t=!0;T.contains(e.target)&&(t=!1),t&&y.clearobj()},y.clearvar=function(){y=T=e=null};function t(e){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state);var t=(ZEVENTS.obj.state=y)._refer,a=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop),s=(document.documentElement.clientWidth||window.innerWidth)+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);document.body.appendChild(T),ZCALaddListener(T,"mousedown",r),ZCALaddListener(T,"selectstart",ZCALprevDef),ZCALaddListener(T,"dragstart",ZCALprevDef),ZCALaddListener(document,"mousedown",docevehandle=function(e){y.hide(e)}),ZCALaddListener(document,"scroll",docevehandle=function(e){y.hide(e)}),ZCALaddListener(document,"mousewheel",docevehandle=function(e){y.hide(e)}),"bottom"==y._titype||"bottom-inline"==y._titype?(E=this.parentNode.positionY()+this.parentNode.offsetHeight+y._minhgt>a?"no":"yes",T.style.top=this.parentNode.positionY()+this.parentNode.offsetHeight-y._minhgt+"px"):(E=this.positionY()+this.offsetHeight+y._minhgt>a?"no":"yes",T.style.left=this.positionX()+(this.positionX()+260>s?-260+this.offsetWidth:0)+"px",T.style.top=("yes"==E?this.positionY()+this.offsetHeight:this.positionY()-T.offsetHeight)+"px"),y._curDate=t.value.parseDate(y._dform)||new Date((new Date).setHours(0,0,0,0)),T.innerHTML=y.calendar(E),T.style.left="bottom"==y._titype||"bottom-inline"==y._titype?this.parentNode.positionX()-T.offsetWidth+"px":T.style.left,T.style.top="bottom"==y._titype||"bottom-inline"==y._titype?this.parentNode.positionY()+this.parentNode.offsetHeight-T.offsetHeight+"px":T.style.top,T.style.top=("bottom"==y._titype||"bottom-inline"==y._titype)&&parseInt(T.style.top)<0?this.parentNode.positionY()+this.parentNode.offsetHeight+"px":T.style.top,y._refer.focus(),ZCALprevDef(e)}function D(e,t,a,s){return 0==s?{getDates:function(){return[t,e]}}:2==s?{getDateObj:function(){return{selectDate:e,selectTime:a}}}:{getDate:function(){return e}}}var r=function(e){var t=(e=e||event).target||e.srcElement,a=t.getAttribute("rel"),s=t.parentNode.getAttribute("rel"),r=[],n=0,l=new Date(y._curDate);if("u"==t.tagName.toLowerCase()||"object"!=_typeof(t.className)&&-1!=t.className.indexOf("zcal_dis")){if(1!=y.fullDtclk||"u"!=t.tagName.toLowerCase())return ZCALprevDef(e),!1;r=y._dtclk,n=1;var i=parseInt(t.getAttribute("rel").split("Y")[0]),c=parseInt(t.getAttribute("rel").split("Y")[1]);l.setDate(parseInt(t.innerHTML,10)),l.setMonth(i),l.setYear(c)}if("PY"==a||"PY"==s){var o="PY"==a?t:t.parentNode;if("object"==_typeof(o)&&"zcal_dis"==o.getAttribute("class"))return;r=y._yrchge,l.setYear(l.getFullYear()-1)}else if("NY"==a||"NY"==s){o="NY"==a?t:t.parentNode;if("object"==_typeof(o)&&"zcal_dis"==o.getAttribute("class"))return;r=y._yrchge,l.setYear(l.getFullYear()+1)}else if("PM"==a||"PM"==s){o="PM"==a?t:t.parentNode;if("object"==_typeof(o)){if("zcal_dis"==o.getAttribute("class"))return;if(document.querySelector("div.zcal_vw_yr")){var d=document.querySelectorAll("li[rel=year_sel]"),m=parseInt(d[0].querySelector("span").innerHTML)-12,u=parseInt(m)+11;document.querySelector("span[rel=year_idx]").innerHTML=m+" - "+u,l.setFullYear(m),y._tempview="year"!=y._pickerview,y._pickerview="year"}else document.querySelector("div.zcal_vw_mth")?(l.setFullYear(y._curDate.getFullYear()-1),document.querySelector("span[rel=year_idx]").innerHTML=y._curDate.getFullYear(),y._tempview="month"!=y._pickerview,y._pickerview="month"):(r=y._monchge,l=ZCALchangeMonth(l,-1))}else r=y._monchge,l=ZCALchangeMonth(l,-1)}else if("NM"==a||"NM"==s){o="NM"==a?t:t.parentNode;if("object"==_typeof(o)){if("zcal_dis"==o.getAttribute("class"))return;if(T.querySelector("div.zcal_vw_yr")){d=T.querySelectorAll("li[rel=year_sel]"),m=parseInt(d[d.length-1].querySelector("span").innerHTML)+1,u=parseInt(m)+11;T.querySelector("span[rel=year_idx]").innerHTML=m+" - "+u,l.setFullYear(m),y._tempview="year"!=y._pickerview,y._pickerview="year"}else T.querySelector("div.zcal_vw_mth")?(l.setFullYear(l.getFullYear()+1),T.querySelector("span[rel=year_idx]").innerHTML=y._curDate.getFullYear(),y._tempview="month"!=y._pickerview,y._pickerview="month"):(l=ZCALchangeMonth(l,1),r=y._monchge)}else l=ZCALchangeMonth(l,1),r=y._monchge}else if("TL"==a||"HI"==a||"MI"==a||"AP"==a)n=3;else if("DT"!=t.parentNode.parentNode.getAttribute("rel")||"bottom"!=y._titype&&"bottom-inline"!=y._titype){if("month_idx"==a&&"no"!=y._customdate)n=2,y.updateHead(T,t,"month_idx");else if("year_idx"==a&&"no"!=y._customdate)n=2,y.updateHead(T,t,"year_idx");else if("month_sel"==s||"month_sel"==a){n="month"==y._pickerview?1:0;f=(p="month_sel"==a?t.childNodes[0]:t).getAttribute("rel");if("zcal_dis"==p.parentNode.className)return;"month"==y._pickerview?(l.setMonth(f),r=y._dtclk,y.clearobj()):(r=y._monchge,l.setMonth(f),T.querySelector("div.zcal_mCalvw").className="zcal_mCalvw zcal_vw_dy")}else if("year_sel"==s||"year_sel"==a){n=2;var p="year_sel"==a?t.childNodes[0]:t;f=parseInt(p.innerHTML,10);if("zcal_dis"==p.parentNode.className)return;"year"==y._pickerview?(l.setFullYear(f),r=y._dtclk,y.clearobj()):(r=y._yrchge,l.setFullYear(f),document.querySelector("span[rel=year_idx]").innerHTML=y._curDate.getFullYear(),y._tempview="month"!=y._pickerview,y._pickerview="month",n=0)}else if("DT"==t.parentNode.parentNode.getAttribute("rel"))r=y._dtclk,n=1,l.setDate(parseInt(t.innerHTML,10));else if("OK"==a){n=2;var _=document.getElementById("zcal_hr").value,v=document.getElementById("zcal_min").value,h=document.getElementById("zcal_ap")?document.getElementById("zcal_ap").value:"";""==_&&(_=12<(new Date).getHour()?(new Date).getHour()-12:(new Date).getHour()),""==v&&(v=(new Date).getMinutes());var g=h?_+":"+v+":"+h:_+":"+v;if(y._curTime=g,t.parentNode.parentNode.parentNode.parentNode.parentNode.querySelectorAll(".zcal_sl").length){var C=t.parentNode.parentNode.parentNode.parentNode.parentNode.querySelectorAll(".zcal_sl")[0].innerHTML;l.setDate(parseInt(C,10))}else{C=t.parentNode.parentNode.parentNode.parentNode.parentNode.querySelectorAll("s")[0].innerHTML;l.setDate(parseInt(C,10))}r=y._okclk,y.clearobj()}}else{var f;n=2,(f=t.parentNode.parentNode).querySelector(".zcal_sl")?f.querySelector(".zcal_sl").innerHTML!=t.innerHTML&&(f.querySelector(".zcal_sl").className="",t.className="zcal_sl"):t.className="zcal_sl",r=y._dtclk,l.setDate(parseInt(t.innerHTML,10)),y._selDate=l}if(0==n){for(y._curDate=l;T.firstChild;)T.removeChild(T.firstChild);T.innerHTML=y.calendar(E)}for(var L in 1==n&&y&&"popup"==y._type&&("bottom"==y._titype||"bottom-inline"==y._titype?"yes"==y._change&&(y._refer.value=l.getDateBy(y._dform)):("yes"==y._change&&(y._refer.value=l.getDateBy(y._dform)),y.clearobj())),r)r[L].call(D(l,y._curDate,y._curTime,n));3!=n&&ZCALprevDef(e)};return"inline"==y._type?(y._tar.appendChild(T),ZCALaddListener(T,"mousedown",r),ZCALaddListener(T,"selectstart",ZCALprevDef),ZCALaddListener(T,"dragstart",ZCALprevDef),T.innerHTML=y.calendar()):"popup"==y._type&&("bottom"==y._titype||"bottom-inline"==y._titype)||"popup"==y._type&&y.fn?(ZCALaddListener(y._refer,"click",function(){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state);var e=(ZEVENTS.obj.state=y)._refer;E="yes",y._curDate=(1<e.value.split(" ").length?e.value.split(" ")[0].parseDate(y._dform):e.value.parseDate(y._dform))||new Date,T.innerHTML=y.calendar(E),ZCALaddListener(T,"mousedown",r),ZCALaddListener(document,"mousedown",docevehandle=function(e){y.hide(e)}),ZCALaddListener(document,"scroll",docevehandle=function(e){y.hide(e)}),ZCALaddListener(document,"mousewheel",docevehandle=function(e){y.hide(e)}),y.fn(T)}),ZCALaddListener(T,"keydown",docevekeyhandle1=function(e){!function(e,t){var a=e.which||e.keyCode||e.charCode;if("zcal_hr"==t){var s=document.getElementById(t).value;38==a?0==y._tform?s<=11?(document.getElementById(t).value=++s,document.getElementById(t).value=9<s?s:"0"+s):document.getElementById(t).value="01":s<=23?(document.getElementById(t).value=++s,document.getElementById(t).value=9<s?s:"0"+s):document.getElementById(t).value="01":40==a&&(0==y._tform?1<s&&1!=s?(document.getElementById(t).value=--s,document.getElementById(t).value=9<s?s:"0"+s):document.getElementById(t).value=12:1<s&&1!=s?(document.getElementById(t).value=--s,document.getElementById(t).value=9<s?s:"0"+s):document.getElementById(t).value=24)}else if("zcal_min"==t){s=document.getElementById(t).value;if(38==a)if(s<=58){var r=++s;document.getElementById(t).value=r<10?"0"+r:r}else document.getElementById(t).value="00";else if(40==a)if(0<s&&0!=s){r=--s;document.getElementById(t).value=r<10?"0"+r:r}else document.getElementById(t).value=59}else if("zcal_ap"==t){s=document.getElementById(t).value;38==a?document.getElementById(t).value="AM"==s?"PM":"AM":40==a&&(document.getElementById(t).value="AM"==s?"PM":"AM")}}(e,e.target.id)}),ZCALaddListener(T,"keyup",docevekeyhandle2=function(e){!function(e,t){var a=e.which||e.keyCode||e.charCode;if("zcal_hr"==t){if(38!=a&&40!=a){var s=document.getElementById(t).value,r=/^[0-9]{1,10}$/;document.getElementById(t).value;r.test(s)?0==y._tform?document.getElementById(t).value=12<s&&s<24?s-12<10?"0"+(s-12):s-12:s<12?document.getElementById(t).value:12<(new Date).getHours()?"0"+((new Date).getHours()-12):(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours():document.getElementById(t).value=12<s&&s<24?s<10?"0"+s:s:s<12?document.getElementById(t).value:12<(new Date).getHours()?(new Date).getHours():(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours():""!=s&&(document.getElementById(t).value=(new Date).getHours())}}else if("zcal_min"==t&&38!=a&&40!=a){s=document.getElementById(t).value,r=/^[0-9]{1,10}$/,document.getElementById(t).value;r.test(s)?(60<s||2<s.length)&&(document.getElementById(t).value=(new Date).getMinutes()):""!=s&&(document.getElementById(t).value="00")}}(e,e.target.id)}),ZCALaddListener(T,"focusout",docevekeyhandle1=function(e){!function(e){if("zcal_hr"==e)""==document.getElementById(e).value&&(0==y._tform?document.getElementById(e).value=12<(new Date).getHours()?"0"+((new Date).getHours()-12):(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours():document.getElementById(e).value=12<(new Date).getHours()?(new Date).getHours():(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours());else if("zcal_min"==e){""==document.getElementById(e).value&&(document.getElementById(e).value=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes())}}(e.target.id)})):"popup"==y._type&&(ZCALaddListener(y._refer,"focus",t),ZCALaddListener(y._refer,"blur",docevehandle=function(){y.clearobj()}),ZCALaddListener(y._refer,"keypress",ZCALprevDef),ZCALaddListener(y._tar,"mousedown",t)),this},ZCALdatepickr.prototype.updateHead=function(e,t,a){if("month_idx"==a){var s=this._sdate?this._sdate.getMonth():"",r=this._edate?this._edate.getMonth():"";if(s&&r&&s==r)return;t.style.display="none";var n=e.querySelectorAll("li[rel=month_sel]");"zcal_dis"==n[n.length-1].className&&e.querySelector("svg[rel=nm]").setAttribute("class","zcal_dis"),"zcal_dis"==n[0].className&&e.querySelector("svg[rel=pm]").setAttribute("class","zcal_dis"),e.querySelector("div.zcal_mCalvw")&&(e.querySelector("div.zcal_mCalvw").className="zcal_mCalvw zcal_vw_mth")}else if("year_idx"==a){var l=e.querySelectorAll("li[rel=year_sel]"),i=l[0].querySelector("span").innerHTML,c=l[l.length-1].querySelector("span").innerHTML,o=this._sdate?this._sdate.getFullYear():"",d=this._edate?this._edate.getFullYear():"";if(o&&d&&o==d)return;t.innerHTML=i+" - "+c,t.previousSibling.style.display="none",o&&d&&(i<o?e.querySelector("svg[rel=pm]").setAttribute("class","zcal_dis"):d<c&&e.querySelector("svg[rel=nm]").setAttribute("class","zcal_dis")),e.querySelector("div.zcal_mCalvw")&&(e.querySelector("div.zcal_mCalvw").className="zcal_mCalvw zcal_vw_yr")}e.querySelector("svg[rel=NY]").setAttribute("class","zcal_dis"),e.querySelector("svg[rel=PY]").setAttribute("class","zcal_dis")},ZCALdatepickr.prototype.changeDate=function(e){var t=document.getElementById(this._cont);for(this._curDate=e?e.parseDate(this._dform):this._curDate;t.firstChild;)t.removeChild(t.firstChild);return t.innerHTML=this.calendar(""),!0},ZCALdatepickr.prototype.calendar=function(e){var t=ZEVENTS.template(this._template),a=t._HTML,s=t._class,r=t._cust;if("type7"==this._template)if("right"==this._titype){var n=(a=(a=(a=(a=a.replace("#timerow","")).replace("timerow#","")).replace("#okrow","")).replace("okrow#","")).indexOf("#bottomtimerow"),l=a.indexOf("bottomtimerow#");a=a.replace(a.substring(n,l+"bottomtimerow#".length),"")}else if("bottom"==this._titype||"bottom-inline"==this._titype){n=(a=(a=a.replace("#bottomtimerow","")).replace("bottomtimerow#","")).indexOf("#timerow"),l=a.indexOf("timerow#");var i=(a=a.replace(a.substring(n,l+"timerow#".length),"")).indexOf("#okrow"),c=a.indexOf("okrow#");a=a.replace(a.substring(i,c+"okrow#".length),""),0==this._tform&&(a=a.replace("#tf",""))}else{n=a.indexOf("#timerow"),l=a.indexOf("timerow#"),i=(a=a.replace(a.substring(n,l+"timerow#".length),"")).indexOf("#okrow"),c=a.indexOf("okrow#");var o=(a=a.replace(a.substring(i,c+"okrow#".length),"")).indexOf("#bottomtimerow"),d=a.indexOf("bottomtimerow#");a=a.replace(a.substring(o,d+"bottomtimerow#".length),"")}var m=a.indexOf("#wk"),u=a.indexOf("wk#"),p=a.indexOf("#dr"),_=a.indexOf("dr#"),v=a.indexOf("#tr"),h=a.indexOf("tr#"),g=(l=a.indexOf("#br"),i=a.indexOf("br#"),c=a.indexOf("#tf"),a.indexOf("#ycr")),C=a.indexOf("ycr#"),f=a.indexOf("#mcr"),L=a.indexOf("mcr#"),y="type7"==this._template?a.substring(0,g):a.substring(0,m);if(y+="type7"==this._template?this.yearrow(a.substring(g+4,C)):"",y+="type7"==this._template?a.substring(C+4,f):"",y+="type7"==this._template?this.monthrow(a.substring(f+4,L)):"",y+="type7"==this._template?a.substring(L+4,m):"",y=(y="type7"==this._template?y.replace("#viewclass#","month"==this._pickerview?"zcal_mCalvw zcal_vw_mth":"year"==this._pickerview?"zcal_mCalvw zcal_vw_yr":"zcal_mCalvw zcal_vw_dy"):y).replace("#HEAD#",this._curDate.getDateBy("MMMM YYYY")).replace("#HEADM#","year"==this._pickerview||"month"==this._pickerview?"":this._curDate.getDateBy("MMMM")).replace("#HEADY#","year"==this._pickerview?this._curDate.getDateBy("YYYY")+"-"+(parseInt(this._curDate.getDateBy("YYYY"))+11):this._curDate.getDateBy("YYYY")),this._sdate&&this._edate){var E=this._sdate.getFullYear(),T=this._sdate.getMonth(),D=this._edate.getFullYear(),b=this._edate.getMonth(),Z=this._curDate.getFullYear(),A=this._curDate.getMonth(),S=this._curDate.getDate();y=y.replace("#py#",("type7"==this._template?"":"zci-fst ")+(new Date(Z-1,A,S)>=this._sdate&&"year"!=this._pickerview&&"month"!=this._pickerview?"":"zcal_dis")).replace("#ny#",("type7"==this._template?"":"zci-lst ")+(new Date(Z+1,A,S)<=this._edate&&"year"!=this._pickerview&&"month"!=this._pickerview?"":"zcal_dis")).replace("#pm#",("type7"==this._template?"":"zci-pre ")+("type7"==this._template&&"month"==this._pickerview&&Z<=E?"zcal_dis":new Date(Z,A,1)>new Date(E,T,1)?"":"zcal_dis")).replace("#nm#",("type7"==this._template?"":"zci-nxt ")+("type7"==this._template&&"month"==this._pickerview&&D<=Z?"zcal_dis":new Date("type7"==this._template&&"year"==this._pickerview?Z+11:Z,A,1)<new Date(D,b,1)?"":"zcal_dis"))}else y=y.replace("#py#","type7"==this._template?"month"==this._pickerview||"year"==this._pickerview?"zcal_dis":"":r?r.py:"zci-fst").replace("#ny#","type7"==this._template?"month"==this._pickerview||"year"==this._pickerview?"zcal_dis":"":r?r.ny:"zci-lst").replace("#pm#","type7"==this._template?"":r?r.pm:"zci-pre").replace("#nm#","type7"==this._template?"":r?r.nm:"zci-nxt");return y=1==this.fullDtclk?y.replace("#hover#","zcal_mCalce"):y.replace("#hover#",""),"bottom-inline"!=this._titype&&(y=y.replace("#shadow#",e&&"yes"!=e?s.shup:s.shdwn)),"type7"==this._template&&(y=y.replace("#timediv#","right"==this._titype?"zcl_mCalwti":"")),y+=this.weekrow(a.substring(m+3,u)),y+=a.substring(u+3,p),y+=this.daterow(a.substring(p+3,_)),"right"==this._titype?(y+=a.substring(_+3,v).replace("#tz#",this._tz),y+=this.timerow(a.substring(v+3,h)),y+=a.substring(h+3,a.length)):"bottom"==this._titype||"bottom-inline"==this._titype?(y+=a.substring(_+3,l).replace("#tz#",this._tz),y+=this.setTimeValue(a.substring(l+3,0==this._tform?i:c)),y+=a.substring(i+3,a.length)):y+=a.substring(_+3,a.length).replace("#tz#",this._tz),this._tempview&&(this._pickerview=""!=this._pickerview?"":this._pickerview),y},ZCALdatepickr.prototype.setTimeValue=function(e){var t=this._refer,a=(1<t.value.split(" ").length?t.value.split(" ")[1]:t.value)||new Date,s=new Date,r=12<(a="string"==typeof a?(s.setHours(a.split(":")[0]),s.setMinutes(a.split(":")[1]),s.setSeconds(a.split(":")[2]),s):a).getHours()&&0==this._tform?a.getHours()-12:a.getHours(),n=r,l=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),i=12<=a.getHours()?"PM":"AM",c=9<n?n:0==n?12:"0"+n;return e.replace("#cuHr#",c).replace("#cuMin#",l).replace("#apm#",i)},ZCALdatepickr.prototype.yearrow=function(e){for(var t="",a=this._sdate?this._sdate.getFullYear():"",s=this._edate?this._edate.getFullYear():"",r=e.indexOf("#yt"),n=e.indexOf("yt#"),l=this._curDate.getFullYear(),i=((new Date).getFullYear(),new Date,e.substring(r+3,n)),c=0,o=0;o<4;o++){t+=e.substring(0,r);for(var d=0;d<3;d++){var m="";m=i.replace("#item#","<span>"+(l+c)+"</span>"),this._curDate.getFullYear()==l+c?m=a&&s&&(l+c<a||s<l+c)?m.replace("#selclass#","zcal_dis"):m.replace("#selclass#","zcal_sl_cr"):a&&s&&(l+c<a||s<l+c)&&(m=m.replace("#selclass#","zcal_dis")),t+=m,c++}t+=e.substring(n+3,e.length)}return t},ZCALdatepickr.prototype.monthrow=function(e){for(var t="",a=e.indexOf("#mt"),s=e.indexOf("mt#"),r=e.substring(a+3,s),n=cnt=0,l=this._curDate.getFullYear(),i=this._sdate?this._sdate.getMonth():"",c=this._edate?this._edate.getMonth():"",o=this._sdate?this._sdate.getFullYear():"",d=this._edate?this._edate.getFullYear():"",m=0;m<4;m++){t+=e.substring(0,a);for(var u=0;u<3;u++){var p="";p=r.replace("#item#","<span rel="+(n+cnt)+">"+Date.MONTH_NAMES[1][n+cnt]+"</span>"),o&&d&&(l==o||l==d)&&(i&&c&&l==d&&n+cnt>c?p=p.replace("#selclass#","zcal_dis"):i&&c&&l==o&&n+cnt<i&&(p=p.replace("#selclass#","zcal_dis"))),this._curDate.getMonth()==n+cnt&&(p=p.replace("#selclass#","zcal_sl_cr")),t+=p,cnt++}t+=e.substring(s+3,e.length)}return t},ZCALdatepickr.prototype.timerow=function(e){var t=new Date;t.setTime((new Date).getTime());var a,s=t.getDate(),r=t.getMonth();t.getFullYear(),r=r+1<10?"0"+(r+1):r+1,s=s<10?"0"+s:s,t.setTime((new Date).getTime()),a=46<(a=2*t.getHours()+(30<t.getMinutes()?2:1))?46:a;for(var n="",l=0;l<48;l++){var i=!1;this._stime&&da.getFullYear()==this._selDate.getFullYear()&&da.getMonth()==this._selDate.getMonth()&&da.getDate()==this._selDate.getDate()&&(i=!0),n+=e.replace("#item#",(l+"").changeNumbertoTime("hh:mm a")).replace("#ti#",l==a?' class="zcal_mCcrti"':1==i&&l<a?' class="zcal_dis"':"")}return n},ZCALdatepickr.prototype.weekrow=function(e){for(var t=new Date(this._curDate).getDay(),a=this._wkst,s=ZEVENTS.template(this._template),r=0,n="";r<7;)n+=e.replace("#item#",Date.WEEKS_DAYS[2][a]).replace("#hgt#",a==t&&s._cust?" class="+s._cust.dysel:""),a=a<6?a+1:0,r++;return n},ZCALdatepickr.prototype.daterow=function(e){var t=e.indexOf("#dc"),a=e.indexOf("dc#"),s=e.substring(t+3,a),r=new Date(this._curDate),n=r.getDate(),l=r.getMonth(),i="",c="",o="",d=",",m=(this._type,"INPUT"==this._tar.tagName?""!=this._tar.value?this._tar.value:"":this._tar.querySelector("input")&&" "!=this._tar.querySelector("input").value?this._tar.querySelector("input").value:""),u=""!=(m=1<m.split(" ").length?m.split(" ")[0]:m)?m.parseDate(this._dform).getMonth():"",p=""!=m?m.parseDate(this._dform).getFullYear():"",_="[object Object]"==Object.prototype.toString.call(this._select);if(!_)for(var v=0;v<this._select.length;v++)d+=this._select[v]+",";r.setDate(1);var h=r.getDay(),g=new Date(r.getFullYear(),r.getMonth(),1),C=new Date(r.getFullYear(),r.getMonth()+1,0),f=(Math.ceil((g.getDay()+C.getDate())/7),h-this._wkst+(h-this._wkst<0?7:0));r.setDate(r.getDate()-f);for(var L=ZEVENTS.template(this._template)._class,y=0;y<6;y++){o+=e.substring(0,t);for(var E=0;E<7;E++){var T="";i=r.getDate(),c=r.getMonth(),cyer=r.getFullYear();var D=L.nor;if(c==l&&!this._sdate&&!this._edate||c==l&&this._sdate&&this._edate&&this._sdate<=r&&this._edate>=r){(""!=d&&-1<d.indexOf(","+i+",")||_&&this._select.start<=i&&this._select.end>=i)&&(D=L.sel);var b=(new Date).getDate(),Z=(new Date).getMonth(),A=(new Date).getFullYear();b==i&&Z==c&&A==cyer&&(D=L.hglt,T="zcal_mCcrdy"),n==i&&n!=b&&L.hglt&&u==c&&p==cyer&&(T="zcal_sl")}else D=L.dis;o+=s.replace(/#tag#/g,D).replace("#cl#",T?"class="+T:"").replace("#item#",i).replace("#month#",r.getMonth()).replace("#year#",r.getFullYear()),r.setDate(i+1)}o+=e.substring(a+3,e.length)}return o},Element.prototype.positionX=function(e){var t=0,a=this;if("function"==typeof a.getBoundingClientRect)t=a.getBoundingClientRect().left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0);else if(a.offsetParent)for(;a.offsetParent;)t+=a.offsetLeft,a=a.offsetParent;else a.x&&(urleft+=a.x);return t},Element.prototype.positionY=function(){var e=0,t=this;if("function"==typeof t.getBoundingClientRect)e=t.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);else if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e};var extendNativeObject=function(e,t,a){if(e&&t&&a){if(!e.prototype[t])try{return e.prototype[t]=a,!0}catch(e){}return!1}};extendNativeObject(String,"trim",function(){var e=this;return e=(e=e.replace(/^\s*(.*)/,"$1")).replace(/(.*?)\s*$/,"$1")}),extendNativeObject(String,"changeNumbertoTime",function(e){var t,a,s=parseInt(this,10);return t="hh:mm a"==e?(a=0==(a=24<s?s-24:s)||1==a?12:parseInt(a/2,10),23<s?" "+ZCALtform[1]:" "+ZCALtform[0]):(a=parseInt(s/2,10),""),(a<10?"0":"")+a+":"+(s%2==1?"30":"00")+t}),extendNativeObject(String,"changeTimetoNumber",function(e){if(this.indexOf(":")<0)return 0;var t=this.split(":");if(t[0]=parseInt(t[0],10),"hh:mm a"==e){var a=t[1].split(" ");a[1]==ZCALtform[1]&&12!=t[0]?t[0]+=12:a[1]==ZCALtform[0]&&12==t[0]&&(t[0]=0),t[1]=a[0]}return t[1]=parseInt(t[1],10),2*t[0]+(30==t[1]?1:0)}),extendNativeObject(String,"parseDate",function(e){function t(e,t){for(var a in t)if(e.toLowerCase().trim()==t[a].toLowerCase())return parseInt(a,10)+1;return!1}if(!e||""==e.trim())return!1;if(this&&""==this.trim())return!1;var a=this.match(/(\d+)|([a-zA-Z]+)/g),s=0,r={},n=e.toLowerCase().match(/([a-z]+)/g);if(3!=n.length||3!=a.length)return!1;for(var s in n)"d"==n[s]||"m"==n[s]?n[s]+=n[s]:"mmm"==n[s]?(a[s]=t(a[s],Date.MONTH_NAMES[1]),n[s]="mm"):"mmmm"==n[s]?(a[s]=t(a[s],Date.MONTH_NAMES[0]),n[s]="mm"):"yy"==n[s]&&(a[s]=70<=a[s]?1900+parseInt(a[s],10):2e3+parseInt(a[s],10),n[s]="yyyy"),r[n[s]]=a[s];return new Date(r.yyyy,r.mm-1,r.dd)}),Date.MONTH_NAMES=new Array(["January","February","March","April","May","June","July","August","September","October","November","December"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),Date.WEEKS_DAYS=new Array(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["S","M","T","W","T","F","S"]),ZCALtform=["am","pm"],extendNativeObject(Date,"getDaysOfMonth",function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()}),extendNativeObject(Date,"getDateBy",function(e){function t(e){return(e<0||9<e?"":"0")+e}if(""!=e.trim()){e+="";var a="",s=0,r="",n="",l=this.getYear()+"",i=this.getMonth()+1,c=this.getDate(),o=this.getDay();l.length<4&&(l=""+(+l+1900));var d={};for(d.YYYY=l,d.YY=l.substring(2,4),d.M=i,d.MM=t(i),d.MMMM=Date.MONTH_NAMES[0][i-1],d.MMM=Date.MONTH_NAMES[1][i-1],d.D=c,d.DD=t(c),d.E=Date.WEEKS_DAYS[1][o],d.EE=Date.WEEKS_DAYS[0][o];s<e.length;){for(r=e.charAt(s),n="";e.charAt(s)==r&&s<e.length;)n+=e.charAt(s++);null!=d[n.toUpperCase()]?a+=d[n.toUpperCase()]:a+=n}return a}}),extendNativeObject(Date,"getTimeBy",function(e){function t(e,t){var a=e+"";for(t=t||2;a.length<t;)a="0"+a;return a}var a=this.getHours(),s=12<a?a-12:0==a?12:a;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+t(a))).replace(/(^|[^\\])H/g,"$1"+a)).replace(/(^|[^\\])hh+/g,"$1"+t(s))).replace(/(^|[^\\])h/g,"$1"+s);var r=this.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+t(r))).replace(/(^|[^\\])m/g,"$1"+r);var n=this.getSeconds(),l=a<12?"AM":"PM";e=(e=(e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+t(n))).replace(/(^|[^\\])s/g,"$1"+n)).replace(/(^|[^\\])TT+/g,"$1"+l)).replace(/(^|[^\\])T/g,"$1"+l.charAt(0));var i=l.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+i)).replace(/(^|[^\\])t/g,"$1"+i.charAt(0));var c=-this.getTimezoneOffset(),o=c?0<c?"+":"-":"Z",d=(c=Math.abs(c))%60;return o+=t(Math.floor(c/60))+":"+t(d),e=e.replace(/(^|[^\\])K/g,"$1"+o)}),extendNativeObject(Date,"diffTo",function(e,t){return t=t||new Date,"days"==e?parseInt((t.getTime()-this.getTime())/864e5,10):"month"==e?t.getMonth()-this.getMonth()+12*(t.getFullYear()-this.getFullYear()):"year"==e?t.getFullYear()-this.getFullYear():void 0});var ZCALaddListener=document.addEventListener?function(e,t,a,s){"mousewheel"==t&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(t="DOMMouseScroll"),e.addEventListener(t,a,Boolean(s))}:function(e,t,a){e.attachEvent("on"+t,a)},ZCALremoveListener=document.removeEventListener?function(e,t,a,s){"mousewheel"==t&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(t="DOMMouseScroll"),e.removeEventListener(t,a,Boolean(s))}:function(e,t,a){e.removeEventListener("on"+t,a)},ZCALprevDef=function(e){(e=e||event).stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1)};ZCALcrtesel=function(e,t,a){if(e.createTextRange){e.focus();var s=e.createTextRange();s.collapse(!0),s.moveStart("character",t),s.moveEnd("character",a-t),s.select()}else e.setSelectionRange?(e.focus(),e.setSelectionRange(t,a)):void 0!==e.selectionStart&&(e.focus(),e.selectionStart=t,e.selectionEnd=a);return t},ZCALselstart=function(e){if(document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart},ZCALselend=function(e){if(document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},ZCALchangeMonth=function(e,t){var a=new Date(e.getFullYear(),e.getMonth()+t,1),s=e.getDate(),r=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();return a.setDate(s<=r?s:r),a};var _ZCL_streamEve,ZCL_RQ=[],ZCL_URL=[],ZCL_LOGIN_STATE=!0,zcal_zmcontext="/zm";function ZCL_XHR(e,t,a,s,r){if(e=zcal_zmcontext+e,ZCL_LOGIN_STATE){rt=ZCL_RQ.length,ZCL_RQ[rt]=ZCL_GetHTTPTransport(),ZCL_URL[rt]=e,"function"==typeof t?(ZCL_RQ[rt].zcal_callback=t,ZCL_RQ[rt].zcal_reqindex=rt,ZCL_RQ[rt].onreadystatechange=function(){var e=this.zcal_callback,t=this.zcal_reqindex;4==this.readyState&&(e(-1!=this.getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml")?this.responseXML:this,ZCL_URL[t]),ZCL_RQ[t]=null)}):ZCL_RQ[rt].onreadystatechange=function(){if(4==ZCL_RQ[rt].readyState){ZCL_XHRInclude(ZCL_RQ[rt],ZCL_URL[rt]);var e=ZCL_RQ[rt].getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");t(-1!=e?ZCL_RQ[rt].responseXML:ZCL_RQ[rt],ZCL_URL[rt]),ZCL_RQ[rt]=null}},a=a||"POST";var n=ZCL_getCookie("aprmjrnpkcrkks");return-1!=e.indexOf("?")?(s=e.substring(e.indexOf("?")+1,e.length),e=e.substring(0,e.indexOf("?"))):s="",s+=(""!=s?"&":"")+"mstpcrdhkur="+n,ZCL_RQ[rt].open(a,e,!0),"delete"==a&&s&&ZCL_RQ[rt].setRequestHeader("X-ZCSRF-TOKEN",s),"POST"==a?(r=r||"application/x-www-form-urlencoded;charset=UTF-8",ZCL_RQ[rt].setRequestHeader("Content-Type",r),ZCL_RQ[rt].send(s)):ZCL_RQ[rt].send(null),!0}return!1}function ZCL_XHRInclude(){return!0}function ZCL_XHRSync(e,t,a){var s=ZCL_GetHTTPTransport();return m=t?"POST":"GET",e+=(e.indexOf("?")+1?"&":"?")+(new Date).getTime(),s.open(m,e,!1),"POST"==m?(a=a||"application/x-www-form-urlencoded;charset=UTF-8",s.setRequestHeader("Content-Type",a),s.send(t)):s.send(null),s}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZCL_$(e){return document.getElementById(e)}function ZCL_getCalopt(t){var a,s=$.Deferred();return"undefined"!=typeof zcal&&void 0===zcal.cdata?ZCL_uXHR("/cal/set.do?type=opt",function(e){"200"==e.status?(a=JSON.parse(e.responseText),s.resolve(a[t])):s.reject()}):(a=zcal.cdata.opt,s.resolve(a[t])),s}function ZCL_getFilter(){var e=zmail.Search.Models.Filters;return[e.ZCalTitleFilter,e.ZCalAlldayFilter,e.LocationFilter,e.ZCalCalendarFilter,e.ZCalOrganizerFilter,e.ZCalDateFilter,e.ZCalFromDateFilter,e.ZCalToDateFilter]}function ZCL_getWeekStart(){return ZCL_getCalopt("WK")}ZCL_uXHR=function(e,t){return e=zcal_zmcontext+e,rt=ZCL_RQ.length,ZCL_RQ[rt]=ZCL_GetHTTPTransport(),ZCL_URL[rt]=e,"function"==typeof t?(ZCL_RQ[rt].zcal_callback=t,ZCL_RQ[rt].zcal_reqindex=rt,ZCL_RQ[rt].onreadystatechange=function(){var e=this.zcal_callback,t=this.zcal_reqindex;4==this.readyState&&(e(-1!=this.getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml")?this.responseXML:this,ZCL_URL[t]),ZCL_RQ[t]=null)}):ZCL_RQ[rt].onreadystatechange=function(){if(4==ZCL_RQ[rt].readyState){ZCL_XHRInclude(ZCL_RQ[rt],ZCL_URL[rt]);var e=ZCL_RQ[rt].getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");t(-1!=e?ZCL_RQ[rt].responseXML:ZCL_RQ[rt],ZCL_URL[rt]),ZCL_RQ[rt]=null}},ZCL_RQ[rt].open("GET",e,!0),ZCL_RQ[rt].setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),ZCL_RQ[rt].send(null),!0},ZCL_GetHTTPTransport=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){throw new Exception("Browser not supported")}}},ZCL_formSubmit=function(e,t,a){if(!ZCL_$("zcl_tarFrame")){var s=_zm.getDOM(["IFRAME",{attrs:{id:"zcl_tarFrame",name:"zcl_tarFrame",style:"display:none",width:"0",height:"0",frameborder:"0"}}]);document.body.appendChild(s)}var r=_zm.getDOM(["FORM",{attrs:{id:"dwnldForm",name:"dwnldForm",style:"display:none",target:"zcl_tarFrame",method:a||"post",action:zcal_zmcontext+t+"?frameorigin="+window.location.protocol+"//"+window.location.hostname}}]);for(var n in e)r.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:n,value:e[n]}}]));var l=ZCL_getCookie("aprmjrnpkcrkks");r.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:"mstpcrdhkur",value:l}}])),document.body.appendChild(r),r.submit(),r.parentNode.removeChild(r)},ZCL_getCookie=function(e){e=new RegExp("^"+e+"=");for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var s=t[a].trim();if(e.test(s))return s.replace(e,"")}return null};var loadZcalSearch=function(){function a(e){var t=document.createElement("script");t.type="text/javascript",t.src="//"+e.jsPath+e.search.js[0],document.head.appendChild(t)}window.__zcalDev?window.__zcalDev.loadConfig.calFiles.then(function(e){a(e)}):ZCL_uXHR("/ncal/loadjs.do",function(e){var t=JSON.parse(e.responseText);a(t[1])})};loadZcalSearch();var ZCL_streamEve=(_defineProperty(_ZCL_streamEve={entId:"",dataObj:{},RQ:new Array,URL:new Array,LOGIN_STATE:!0,callback:"",timeObj:new Object,curTimeGMT:"",timeIntVl:"",eventExpireIntvl:"",grpId:"",isreq:!1,timeIncDur:12e4,chckEventExpDur:3e5,allAttnElem:"",parentDOM:"",remUserID:"",remStTime:"",curAttendeeList:[],isAttReqInvoked:!0,initEventTBox:function(e,t,a){var s=document.createDocumentFragment(),r=document.createElement("div");r.innerHTML='<textarea  id="eventTitle" placeholder="Event title, @attendees"></textarea>',s.appendChild(r);var n=document.createElement("div");n.className="Sevent_data",n.innerHTML='<span id="eventDate_span"><i class="msi-calendar"></i><input type="text"  placeholder="Date" id="eventDate"></span><i class="msi-clock"></i><span style="border:none;" class="zcal_time zcal_nbr" id="eventTime_span"><input type="text" placeholder="Time" id="eventTime" ></span><i class="msi-duration"></i><span class="zcal_time zcal_nbr" id="eventDur_span"><input onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" readonly type="text" value="00:30 Min" id="eventDur" placeholder="Duration"></ul></span><i class="msi-location"></i><input type="text" placeholder="Choose Location" id="eventLoc">',s.appendChild(n),a(s,ZCL_streamEve.eventAddPublish),ZCL_streamEve.initDateTimePicker(n.firstChild,n.childNodes[2]),r.firstChild&&ZCL_streamEve.setMention(r.firstChild)},curStartAndEndTime:function(){var e=["12:00 am","12:30 am","01:00 am","01:30 am","02:00 am","02:30 am","03:00 am","03:30 am","04:00 am","04:30 am","05:00 am","05:30 am","06:00 am","06:30 am","07:00 am","07:30 am","08:00 am","08:30 am","09:00 am","09:30 am","10:00 am","10:30 am","11:00 am","11:30 am","12:00 pm","12:30 pm","01:00 pm","01:30 pm","02:00 pm","02:30 pm","03:00 pm","03:30 pm","04:00 pm","04:30 pm","05:00 pm","05:30 pm","06:00 pm","06:30 pm","07:00 pm","07:30 pm","08:00 pm","08:30 pm","09:00 pm","09:30 pm","10:00 pm","10:30 pm","11:00 pm","11:30 pm"],t=new Array,a=new Date,s=2*a.getHours()+(30<a.getMinutes()?2:1);return s=46<s?46:s,t.ST=e[s],t.ET=e[s+1],t},initDateTimePicker:function(r,n){!function(e){if(r){var t=(new Date).getDateBy("MM/dd/yyyy"),a=r.getElementsByTagName("input")[0];a.value=t,e(r).picker("date",{dform:"MM/DD/YYYY",refer:a,wkst:0,range:[t,""],mode:"popup",update:"yes",minhgt:251}).bind()}if(n){var s=ZCL_streamEve.curStartAndEndTime();n.getElementsByTagName("input")[0].value=s.ST,e(n).picker("time",{tform:"hh:mm a",type:1}).bind()}}(ZEVENTS)},setEventDurDropdwn:function(e,t){if(ZCL_$("eventDur_span")||ZCL_$("SCeventDur_span")||ZCL_$("de_eveDur")){var a=["00:30 Min","01:00 Hr","01:30 Hr","02:00 Hr","02:30 Hr","03:00 Hr","03:30 Hr","04:00 Hr","04:30 Hr","05:00 Hr"],s=e.target||e.srcElement,r=("input"==t.tagName.toLowerCase()?t:t.getElementsByTagName("input")[0]).value,n=document.body.appendChild(document.createElement("ul"));n.style.width=(t.clientWidth<110?110:t.clientWidth)+"px",n.style.left=t.positionX()+"px",n.id="SC_eventDur"==s.id?"SCeventDur_ul":"eventDur_ul",ZCALaddListener(n,"mousedown",ZCL_streamEve.ulEvent);var l=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop);n.className="zcal_tilst "+(t.positionY()+250>l?"zcal_tilsbt":"zcal_tilstp");for(var i="",c=0;c<a.length;c++)i+='<li rel="'+c+'"'+(a[c]==r?'class="zcal_sl"':"")+">"+a[c]+"</li>";n.innerHTML=i,n.style.top=t.positionY()+250<l?t.positionY()+t.offsetHeight+"px":t.positionY()-n.offsetHeight+"px",ZCALaddListener(document,"mousedown",docevehandle=function(e){ZCL_streamEve.selectEventDuration(e,s.id)}),ZCALaddListener(document,"keydown",docevekeyhandle=function(e){ZCL_streamEve.myKeyPressHandler(e,s.id)}),ZCALaddListener(t,"blur",docevehandle=function(e){ZCL_streamEve.selectEventDuration(e,s.id)})}},ulEvent:function(e){var t=e.target||e.srcElement;"li"==t.tagName.toLowerCase()&&($("#eveInpDu")[0].value=t.innerHTML,$("#eventDur_ul").remove()),ZCALprevDef(e)},selectEventDuration:function(e,t){var a=e.target.innerHTML.trim().toLowerCase();/^(0[0-5]):(00|30)\s*(hr|min)$/.test(a)&&(ZCL_$(t).value=e.target.innerHTML),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"keydown",docevekeyhandle),ZCALremoveListener(document,"blur",docevehandle),"SC_eventDur"==t?$("#SCeventDur_ul").remove():"eventDur"==t?$("#eventDur_ul").remove():"eveInpDu"==t&&$("#eventDur_ul").remove()},myKeyPressHandler:function(e,t){var a,s,r=e.which||e.keyCode||e.charCode;s="eveInpDu"==t?(a=document.getElementById("eventDur_ul").getElementsByTagName("li"),ZCL_$("eventDur_ul").childNodes):(a="eventDur"==t?document.getElementById("eventDur_ul").getElementsByTagName("li"):document.getElementById("SCeventDur_ul").getElementsByTagName("li"),"eventDur"==t?ZCL_$("eventDur_ul").childNodes:ZCL_$("SCeventDur_ul").childNodes);for(var n=ZCL_$(t),l="",i=0;i<s.length;i++)if("zcal_sl"==s[i].getAttribute("class")){l=s[i].getAttribute("rel");break}27!=r&&13!=r||("eveInpDu"==t?$("#eventDur_ul").remove():"eventDur"==t?ZCL_$("eventDur_ul").remove():ZCL_$("SCeventDur_ul").remove(),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"keydown",docevekeyhandle)),38==r&&0!=l?(a[l--].className="",a[l].className="zcal_sl",n.value=a[l--].innerHTML):40==r&&l!=a.length-1&&(a[l++].className="",a[l].className="zcal_sl",n.value=a[l++].innerHTML)},eventPublish:function(e,t){var a={};ZCL_streamEve.callback=t;var s=ZCL_streamEve.getEventParams(e);s.ERR_ARR?(a.ERROR={},a.ERROR.message=s.ERR_ARR[0],ZCL_streamEve.callback(a)):ZCL_XHR("/cal/stream/api/private/json/addEvent?"+("sum="+encodeURIComponent(s.TITLE)+"&sday="+s.ST_DATE+"&smonth="+s.ST_MONTH+"&syear="+s.ST_YEAR+"&shour="+s.ST_HOUR+"&smin="+s.ST_MIN+"&eday="+s.END_DATE+"&emonth="+s.END_MONTH+"&eyear="+s.END_YEAR+"&ehour="+s.END_HOUR+"&emin="+s.END_MIN+"&loc="+encodeURIComponent(s.LOCATION)+"&zgid="+e+"&att="+encodeURIComponent(s.ATTN)),ZCL_streamEve.afterSubmit)},eventAddPublish:function(e,t,a){var s={};ZCL_streamEve.callback=a;var r=e.gid,n=!!e.lckInv&&e.lckInv,l=ZCL_streamEve.getEventDOMParams(r,t);if(l.ERR_ARR)s.ERROR={},s.ERROR.message=l.ERR_ARR[0],ZCL_streamEve.callback(s);else{var i="sum="+encodeURIComponent(l.TITLE)+"&sday="+l.ST_DATE+"&smonth="+l.ST_MONTH+"&syear="+l.ST_YEAR+"&shour="+l.ST_HOUR+"&smin="+l.ST_MIN+"&eday="+l.END_DATE+"&emonth="+l.END_MONTH+"&eyear="+l.END_YEAR+"&ehour="+l.END_HOUR+"&emin="+l.END_MIN+"&loc="+encodeURIComponent(l.LOCATION)+"&zgid="+r+"&att="+encodeURIComponent(l.ATTN)+"&lckInv="+n;if(null!=e.inv_allMem)i+="&inv_allMem="+e.inv_allMem;ZCL_XHR("/cal/stream/api/private/json/addEvent?"+i,ZCL_streamEve.afterSubmit)}},afterSubmit:function(e){var t={},a=ZCL_streamEve.evl(1,e.responseText),s=a.response.result;a.response.error?(t.ERROR={},"err_nostreamadd"==a.response.error?t.ERROR.message="Problem in adding event":"err_eveavail"==a.response.error?t.ERROR.message="As per group policy, event cannot be added to the group as another event for the same time already exists.":t.ERROR.message=a.response.error.message?a.response.error.message:a.response.error):(t.ERROR={},s.hasOwnProperty("APL_REQ")&&"1"==s.APL_REQ?t.ERROR.message="Event will be added to the group after admin approval is done.":(t.ENTITY_ID=s.ENTITY_ID,t.GROUP_ID=s.GROUP_ID)),ZCL_streamEve.callback(t)},evl:function(e,t){if(!(arguments.length<2)){if(1==e)return JSON.parse(t);if(2==arguments.length)return window[t].apply(this);var a=Array.prototype.slice.call(arguments,2);return window[t].apply(this,a)}},getEventParams:function(e){var t=new Array,a=ZCL_$("eventDate").value,s=ZCL_$("eventTime").value,r=ZCL_$("eventDur").value,n=ZCL_$("eventTitle").parentNode.firstChild.innerHTML.split("<b")[0],l=ZCL_$("eventLoc").value,i=zmMention.getMentions($("#eventTitle")),c=ZCL_streamEve.getMentionEmails(i),o=zmail.zuid==e,d=ZCL_streamEve.validateEventParams(a,s,n,c,o);return 0==Object.keys(d).length?((t=ZCL_streamEve.calcEventTime(a,s,r)).TITLE=n,t.LOCATION=l,t.ATTN=c):t.ERR_ARR=d,t},getEventDOMParams:function(e,t){var a=new Array,s=t.lastChild.firstChild.lastChild.value,r=t.lastChild.childNodes[2].lastChild.value,n=t.lastChild.childNodes[4].lastChild.value,l=t.lastChild.lastChild.value,i=t.firstChild.firstChild.lastChild.parentNode.firstChild.innerHTML.split("<b")[0];i=i.trim();var c=zmMention.getMentions(t.firstChild.firstChild.getElementsByTagName("TEXTAREA")),o=ZCL_streamEve.getMentionEmails(c),d=ZCL_streamEve.validateEventParams(s,r,i,o,m),m=zmail.zuid==e;return 0==Object.keys(d).length?((a=ZCL_streamEve.calcEventTime(s,r,n)).TITLE=i,a.LOCATION=l,a.ATTN=o):a.ERR_ARR=d,a},getMentionEmails:function(e){var t="";for(var a in e)t+=""==t?e[a].eid:","+e[a].eid;return t},validateEventParams:function(e,t,a,s,r){var n=new Array;if(""==a?n.push(" Title is mandatory"):255<a.length&&n.push("Event title cannot exceed 255 characters"),""==e)n.push("Date is mandatory");else if(/^\d{2}\/\d{2}\/\d{4}$/.test(e)){var l=(new Date).getDateBy("MM/dd/yyyy");Date.parse(e)<l&&n.push("The date is earlier than today")}else n.push("Invalid date format");return""==t?n.push("Time is mandatory"):/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(t.toLowerCase())||n.push("Invalid time format"),r&&""==s&&n.push("Select a group or mention/tag someone in the event"),n},calcEventTime:function(e,t,a){t=ZCL_streamEve.parseTime(t);var s=e.split("/"),r=a.split(" ")[0],n=parseInt(r.split(":")[0]),l=parseInt(r.split(":")[1]),i=new Date(Date.parse(e));i.setHours(t.HH),i.setMinutes(t.mm),i.setSeconds(0,0);var c=new Date(Date.parse(e));c.setHours(i.getHours()+n),c.setMinutes(i.getMinutes()+l),c.setSeconds(0,0);var o=c.getDate(),d=c.getMonth()+1,m=o<10?"0"+o:o+"",u=d<10?"0"+d:d,p=(c.getFullYear(),ZCL_streamEve.parseTime((c.getHours()<10?"0"+c.getHours():c.getHours())+":"+c.getMinutes())),_=new Array;return _.END_HOUR=p.HH,_.END_MIN=p.mm,_.ST_HOUR=t.HH,_.ST_MIN=t.mm,_.ST_MONTH=s[0],_.ST_DATE=s[1],_.ST_YEAR=s[2],_.END_MONTH=u+"",_.END_DATE=m,_.END_YEAR=c.getFullYear()+"",_},correctTimeFormat:function(e){return 1==e.length?e="000"+e:2==e.length?e="00"+e:3==e.length&&(e="0"+e),e},addEventAttendee:function(e){ZCL_XHR("/cal/stream/api/private/json/addAttendee?"+("ckey="+ckey+"&ekey="+ekey+"att="+e))},updateAttStatusFrmNotification:function(e,t){var a=e.parentNode.getAttribute("eveid"),s=e.innerHTML,r=0;"Yes"==s?r=1:"No"==s?r=2:"MayBe"==s&&(r=3),ZCL_XHR("/cal/stream/api/private/json/updateAttStatus?"+("ckey="+t+"&ekey="+a+"&status="+r),ZCL_streamEve.afterUpdateAttnFrmNoti)},updateAttendeeStatus:function(e,t){var a=e.parentNode.getAttribute("eveid"),s=e.innerHTML,r=0;"Yes"==s?r=1:"No"==s?r=2:"Maybe"==s&&(r=3),ZCL_XHR("/cal/stream/api/private/json/updateAttStatus?"+("ckey="+t+"&ekey="+a+"&status="+r),ZCL_streamEve.afterUpdateAttn)},afterUpdateAttnFrmNoti:function(e){var t=ZCL_streamEve.evl(1,e.responseText).response.result,a=t.status,s=t.message;if(1==a){t.eventKey;for(var r=t.eventstatus,n=document.querySelectorAll('[eveid="'+t.eventKey+'"]'),l=0;l<n.length;l++){var i=n[l].getAttribute("eveid");if(t.eventKey==i)for(var c=n[l].childNodes,o=0;o<c.length;o++)o==r-1?c[o].className="sel":c[o].removeAttribute("class")}zmUtil.succErrMsg("s",s)}else if(-1!=s.indexOf("Event is expired")){for(n=document.querySelectorAll('[eveid="'+t.eventKey+'"]'),l=0;l<n.length;l++){i=n[l].getAttribute("eveid");if(n[l].className="eventExpired",t.eventKey==i)for(c=n[l].childNodes,o=0;o<c.length;o++)c[o].removeAttribute("onclick")}zmUtil.succErrMsg("e",s)}else zmUtil.succErrMsg("e",s)},getAllAttendee:function(e,t,a){ZCL_streamEve.allAttnElem=e;var s="ckey="+t+"&ekey="+a;ZCL_streamEve.isAttReqInvoked&&(ZCL_streamEve.isAttReqInvoked=!1,ZCL_XHR("/cal/stream/api/private/json/getAllAttendeeStatus?"+s,ZCL_streamEve.afterGetAllAttn))},getAttendeesHtml:function(e,t,a){var s=$("<ul class='SC_Phr SC_P2r'/>");new Array;for(var r in t){var n=t[r].STS,l=t[r].ATT_ZUID+"",i="undefined"!=l?e[l].photo:zmail.defaultPhoto?zmail.defaultPhoto:zmResource.get("image","SC-Photo.png"),c=_zm.getDOM(["LI",{child:[["DIV",{child:[["text","&nbsp;&nbsp;"+e[l].eid],["SPAN",{child:[["text","&nbsp;&nbsp;"+n]]}]]}],["IMG",{attrs:{src:i}}]]}]);s.append(c),delete e[l]}for(var o in e){var d=o==a?"Yes":"Pending";c=_zm.getDOM(["LI",{child:[["DIV",{child:[["text","&nbsp;&nbsp;"+e[o].eid],["SPAN",{child:[["text","&nbsp;&nbsp;"+d]]}]]}],["IMG",{attrs:{src:e[o].photo}}]]}]);s.append(c)}return s},ParseByDB:function(e){var t=e.substring(0,2),a=e.substring(2,4),s=(0==(t=parseInt(t,10))?"12|am":12==t?"12|pm":t<12?t+"|am":t-12+"|pm").split("|"),r={};return r.HH=t<10?"0"+t:t,r.hh=s[0]<10?"0"+s[0]:s[0],r.mm=a.length<2?"0"+a:a,r.a=s[1],r},parseTime:function(e){var t=e.trim().toLowerCase();if(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/.test(t))return ZCL_streamEve.ParseByRT(t);if(/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(t))return ZCL_streamEve.ParseByAm(t);if(/^(20|21|22|23|[01]\d|\d)[0-5][0-9]$/.test(t))return ZCL_streamEve.ParseByDB(t);if(t=t.replace(/\D/gi,""),isNaN(t))return{HH:"08",hh:"08",mm:"00",a:"am"};var a=t.length;return t=1==a?t+"000":2==a?t+"00":3==a?t+"0":4<a?t.substring(0,4):t,/^(20|21|22|23|[01]\d|\d)[0-5][0-9]$/.test(t)?ZCL_streamEve.ParseByDB(t):{HH:"08",hh:"08",mm:"00",a:"am"}},ParseByRT:function(e){var t=e.split(":");t[0]=parseInt(t[0],10);var a=(0==t[0]?"12|am":12==t[0]?"12|pm":t[0]<12?t[0]+"|am":t[0]-12+"|pm").split("|"),s={};return s.HH=t[0]<10?"0"+t[0]:t[0],s.hh=a[0]<10?"0"+a[0]:a[0],s.mm=t[1],s.a=a[1],s},ParseByAm:function(e){var t=e.split(/:|\s+/);t.length<3&&(t[2]=t[1].substring(2,4),t[1]=t[1].substring(0,2)),t[0]=parseInt(t[0],10);var a={};return a.hh=t[0]<10?"0"+t[0]:t[0],a.mm=t[1],a.a=t[2],a.HH=12==t[0]&&"am"==a.a?"00":"pm"==a.a&&12!=t[0]?t[0]+12:t[0]<10?"0"+t[0]:t[0],a},setMention:function(e){var t={contentArray:"org",compare:["fn","ln","nn","eid"],LType:"3",OType:"3",drag:!1};zmAutoFill.setAutofill(t,$(e))},eventDelete:function(e){ZCL_XHR("/cal/stream/api/private/json/deleteEvent?eKey="+e.eventUID+"&cKey="+e.calUID+"&zmstreamweb=true",ZCL_streamEve.afterDelEvent)},clearETBox:function(){zmMention.clearMention($("#eventTitle"));var e=ZCL_streamEve.curStartAndEndTime();ZCL_$("eventDate").value=(new Date).getDateBy("MM/dd/yyyy"),ZCL_$("eventTime").value=e.ST,ZCL_$("eventDur").value="00:30 Min",ZCL_$("eventTitle").value="",ZCL_$("eventLoc").value=""},clearETBoxDOM:function(e){zmMention.clearMention(e.firstChild.firstChild.lastChild);var t=ZCL_streamEve.curStartAndEndTime();e.lastChild.firstChild.lastChild.value=(new Date).getDateBy("MM/dd/yyyy"),e.lastChild.childNodes[2].lastChild.value=t.ST,e.lastChild.childNodes[4].lastChild.value="00:30 Min",e.lastChild.lastChild.value="",e.firstChild.firstChild.lastChild=""},afterDelEvent:function(e){var t=ZCL_streamEve.evl(1,e.responseText).response.result.eKey;delete ZCL_streamEve.timeObj[t]},eventExpired:function(e,t){return e<t},setTimeIntrvl:function(e,t){if(-1==Object.keys(ZCL_streamEve.timeObj).indexOf(e.events.eventUID)&&!t){var a=e.events.endDateTime?e.events.endDateTime:e.events.endDate,s=e.events.startDateTime?e.events.startDateTime:e.events.startDate,r=new Array;r[0]=parseInt(s),r[1]=parseInt(a),ZCL_streamEve.timeObj[e.events.eventUID]=r}""!=ZCL_streamEve.curTimeGMT||ZCL_streamEve.isreq||(ZCL_streamEve.isreq=!0,ZCL_streamEve.getCurrentSerTime()),""==ZCL_streamEve.timeIntVl&&(ZCL_streamEve.eventExpireIntvl=setInterval(ZCL_streamEve.checkEventExpire,ZCL_streamEve.chckEventExpDur))},getCurrentSerTime:function(){ZCL_XHR("/cal/stream/api/private/json/getcurtime?",ZCL_streamEve.aftergetcurtime)},aftergetcurtime:function(e){var t=ZCL_streamEve.evl(1,e.responseText);""==ZCL_streamEve.curTimeGMT&&(ZCL_streamEve.curTimeGMT=t.response.result.CUR_TIME,ZCL_streamEve.timeIntVl=setInterval(ZCL_streamEve.incCurTime,ZCL_streamEve.timeIncDur))},incCurTime:function(){ZCL_streamEve.curTimeGMT;var e=new Date;e.setTime(ZCL_streamEve.curTimeGMT),e.setMinutes(e.getMinutes()+2),ZCL_streamEve.curTimeGMT=e.getTime()},clearTimeIntrvl:function(){ZCL_streamEve.curTimeGMT="",ZCL_streamEve.timeObj={},clearInterval(ZCL_streamEve.eventExpireIntvl),clearInterval(ZCL_streamEve.timeIntVl),ZCL_streamEve.eventExpireIntvl="",ZCL_streamEve.timeIntVl="",ZCL_streamEve.isreq=!1},streamEveNotificationPreview:function(e,t){if("object"==_typeof(e.eventData))var a=e.eventData;else a=ZCL_streamEve.evl(1,e.eventData);var s="eKey="+a.eKey+"&cKey="+a.cKey;ZCL_streamEve.remUserID=a.userZUID,ZCL_streamEve.parentDOM=t,ZCL_streamEve.remStTime=a.st,ZCL_XHR("/cal/stream/api/private/json/eventDetails?"+s,ZCL_streamEve.constStrmEvePreview)},constStrmEvePreview:function(e){var t=ZCL_streamEve.evl(1,e.responseText),a=t.response.result.events.event,s=t.response.result.events.curTime,r=!1,n=a.ISRECUR,l=a.SD,i=a.ST,c=(l.substring(0,4),l.substring(6,8),i.substring(0,2)),o=i.substring(3,5),d=i.substring(6,8);parseInt(l.substring(4,6));var m=new Date,u=new Date(a.STMILLIS);if(a.ETMILLIS<s&&0==n)r=!0;else if(1==n){if(null!=(E=a.REPEAT).UNTIL)r=E.UNTIL<s;else r=!1;var p=ZCL_streamEve.remStTime;u=new Date(p)}var _=a.ED,v=a.ET,h=_.substring(0,4),g=_.substring(6,8),C=v.substring(0,2),f=v.substring(3,5),L=parseInt(_.substring(4,6)),y=a.ALLDAY,E={};--L;var T=new Date(h,L,g);T.setHours(C),T.setMinutes(f);var D,b={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"}[u.getDay()+""],Z=ZCL_streamEve.parentDOM;D="0"==y?b+"&nbsp;&nbsp;at&nbsp;&nbsp;"+c+"&nbsp;:&nbsp;"+o+"&nbsp;&nbsp;"+d:b;var A=a.ATTENDEE_DETAILS.length,S=Z.appendChild(document.createElement("div"));S.className="SCS_post";var z=S.appendChild(document.createElement("div"));z.className="SCS_postWra";var w=z.appendChild(document.createElement("div"));w.className="postMsg";var M=w.appendChild(document.createElement("span"));M.className="zmsEventExpired",M.appendChild(document.createElement("h3")).innerHTML=ZCL_streamEve.ZCL_streamHTML(a.SUM);var N=w.appendChild(document.createElement("div"));N.className="zmsEventPost";var I=N.appendChild(document.createElement("div"));I.className="zmsEventWra";var k=N.appendChild(document.createElement("div"));k.className="zmsEventAtt";var O=0<A?k.appendChild(document.createElement("div")):"";""!=O&&(O.innerHTML='<span class="SC_thm">&nbsp;&nbsp;'+A+"&nbsp;&nbsp;</span>Invited");var H=I.appendChild(document.createElement("div"));if(H.className="zmsEventCal zmEventInfo zmEvExp",H.appendChild(document.createElement("span")).innerHTML={0:"JAN",1:"FEB",2:"MAR",3:"APR",4:"MAY",5:"JUN",6:"JUL",7:"AUG",8:"SEP",9:"OCT",10:"NOV",11:"DEC"}[u.getMonth()+""],H.appendChild(document.createElement("span")).innerHTML=u.getDate(),r&&0<A){var R=H.appendChild(document.createElement("div"));R.className="zmEventTag",R.innerHTML="<span>Expired</span>"}var P=I.appendChild(document.createElement("div"));P.className="zmsEventDtl";var x=P.appendChild(document.createElement("div"));x.appendChild(document.createElement("i")).className="msi-clock",x.appendChild(document.createElement("strong")).innerHTML=D;var Y=document.createElement("div");Y.className="greyText",u.getFullYear()==m.getFullYear()&&u.getMonth()==m.getMonth()&&u.getDate()==m.getDate()&&(Y.innerHTML="Today",x.appendChild(Y));var $=new Date(m.getFullYear(),m.getMonth(),m.getDate()+1);$.getFullYear()==u.getFullYear()&&$.getMonth()==u.getMonth()&&$.getDate()==u.getDate()&&(Y.innerHTML="Tomorrow",x.appendChild(Y));var U=new Date(m.getFullYear(),m.getMonth(),m.getDate()+2);U.getFullYear()==u.getFullYear()&&U.getMonth()==u.getMonth()&&U.getDate()==u.getDate()&&(Y.innerHTML="2 Days from now",x.appendChild(Y));var F=new Date(m.getFullYear(),m.getMonth(),m.getDate()+3);if(F.getFullYear()==u.getFullYear()&&F.getMonth()==u.getMonth()&&F.getDate()==u.getDate()&&(Y.innerHTML="3 Days from now",x.appendChild(Y)),0<a.ATTENDEE_DETAILS.length){for(var B=0,j=0,V=0,q=a.ATTENDEE_DETAILS.length,G=a.CKEY,X=0,Q=0;Q<q;Q++){var K=a.ATTENDEE_DETAILS[Q],W=parseInt(K.STATUS);B=1==W?B+1:B,j=2==W?j+1:j,V=3==W?V+1:V,(null!=K.ZUID?K.ZUID:K.zuid)==ZCL_streamEve.remUserID&&(X=W)}var J=P.appendChild(document.createElement("div"));J.className="zmsEventAction";var ee="Are you attending ?";ee+=r?'<ul eveid="'+a.EUID+'" class="zmsEventExpired">':'<ul eveid="'+a.EUID+'" class="zmsEvent">';var te=r?"":"ZCL_streamEve.updateAttStatusFrmNotification(this,'"+G+"')";0==X?ee+='<li onclick="'+te+'">Yes</li><li onclick="'+te+'">No</li><li onclick="'+te+'">Maybe</li>':1==X?ee+='<li class="sel">Yes</li><li onclick="'+te+'">No</li><li onclick="'+te+'">Maybe</li>':2==X?ee+='<li onclick="'+te+'">Yes</li><li class="sel">No</li><li onclick="'+te+'">Maybe</li>':3==X&&(ee+='<li onclick="'+te+'">Yes</li><li onclick="'+te+'">No</li><li class="sel">Maybe</li>'),ee+="</ul>",J.innerHTML=ee,k.appendChild(document.createElement("div")).innerHTML='<span class="SC_thm">&nbsp;&nbsp;'+B+'&nbsp;&nbsp;</span>Yes<span class="SC_SDot"></span><span class="SC_thm">&nbsp;&nbsp;'+j+'&nbsp;&nbsp;</span>No<span class="SC_SDot"></span><span class="SC_thm">&nbsp;&nbsp;'+V+"&nbsp;&nbsp;</span>Maybe"}},ZCL_streamHTML:function(e){return e=(e=(e=(e=e.replace(/"/g,"&quot;")).replace(/'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")},getEventElem:function(e){var t=e.events.endDateTime?e.events.endDateTime:e.events.endDate,a=!1;a=""!=ZCL_streamEve.curTimeGMT?ZCL_streamEve.eventExpired(t,ZCL_streamEve.curTimeGMT):ZCL_streamEve.eventExpired(t,e.events.currTimeGMT),ZCL_streamEve.setTimeIntrvl(e,a);var s=zmCont.isGroup(e.gnrl.group.id),r=e.events.attendees?e.events.attendees.length:0,n=-1;if(s){var l=zmCont.getGroup(e.gnrl.group.id);n=1<(n=parseInt(e.act.invitees)+parseInt(l.members.length))?n-1:n}else n=parseInt(e.act.invitees);var i=ZCL_streamEve.consDateTime(e),c="<h3>"+ZCL_streamEve.ZCL_streamHTML(e.cntnt.title)+"</h3>";if(a)var o='<div class="zmsEventPost zmsEventExpired">';else o='<div class="zmsEventPost">';o+='<div class="zmsEventWra">',a&&0<r?(o+='<div class="zmsEventCal zmEventInfo zmEvExp" expTagEId = "'+e.events.eventUID+'">',o+="<span>"+i.MOY+"</span><span>"+i.DOM+'</span><div class="zmEventTag"><span>Expired</span></div></div>'):(o+='<div class="zmsEventCal zmEventInfo" expTagEId = "'+e.events.eventUID+'">',o+="<span>"+i.MOY+"</span><span>"+i.DOM+'</span><div class="zmEventTag"><span></span></div></div>'),o+='<div class="zmsEventDtl" id="zcl_eveDtl_'+e.events.eventUID+'" ><div>',o+='<i class="msi-clock"></i>',o+="<strong>"+i.DOW+" at "+i.STH+":"+i.STM+" "+i.STA+"</strong>",o+=e.events.timezone&&""!=e.events.timezone?'<span class="SC_SDot"></span><strong>&nbsp;'+e.events.timezone+'</strong><span class="SC_SDot"></span>':"",o+=null!=i.dayTxt?'<div class="greyText" id="zcl_dayTxt"  >'+i.dayTxt+"</div>":"",o+="</div>",o+=""!=e.events.location?'<div><i class="msi-location"></i>'+ZCL_streamEve.ZCL_streamHTML(e.events.location)+"</div>":"";var d=0,m=0,u=0,p=0;if(e.events.attendees){var _=e.events.attendees;r=_.length;for(var v=0;v<_.length;v++){var h=_[v];d="Yes"==h.STS?d+1:d,m="No"==h.STS?m+1:m,u="Maybe"==h.STS?u+1:u,p="Pending"==h.STS?p+1:p}for(var g in e.events.attendees)e.events.attendees[g].ATT_ZUID==zmail.zuid&&0<r&&(o+=a?'<div class="zmsEventAction"> Are you attending ? <ul eveid="'+e.events.eventUID+'" class="zmsEventExpired">':'<div class="zmsEventAction"> Are you attending ? <ul eveid="'+e.events.eventUID+'" >',o+=ZCL_streamEve.setEventStatus(e.events.status,e.events.calUID,e.gnrl.owner,a),o+="</ul></div>");if(o+="</div></div>",0<r){var C="ZCL_streamEve.getAllAttendee(this,'"+e.events.calUID+"','"+e.events.eventUID+"')";o+='<div class="zmsEventAtt" zclAttAllEId="'+e.events.eventUID+'" >',o+='<div id="zms_zcl_invAll" onclick = '+C+'><span><span class="SC_thm" >'+r+"</span> Invited</span></div>",o+='<div zclAttByStsEId="'+e.events.eventUID+'" >',0<d&&(o+=1==e.events.status?'<span id="acceptList" onclick='+C+' ><span class="SC_thm" cuSts=true id="zcl_sts_1" >'+d+'</span>&nbsp;&nbsp;Yes</span><span class="SC_SDot"></span>':'<span id="acceptList"  onclick = '+C+'><span class="SC_thm" cuSts=false id="zcl_sts_1" >'+d+'</span>&nbsp;&nbsp;Yes</span><span class="SC_SDot"></span>'),0<m&&(o+=2==e.events.status?'<span id="declinedList" onclick = '+C+'><span class="SC_thm" cuSts=true  id="zcl_sts_2">'+m+'</span>&nbsp;&nbsp;No</span><span class="SC_SDot"></span>':'<span id="declinedList" onclick = '+C+'><span class="SC_thm" cuSts=false id="zcl_sts_2">'+m+'</span>&nbsp;&nbsp;No</span><span class="SC_SDot"></span>'),0<u&&(o+=3==e.events.status?'<span id="maybeList" onclick = '+C+'><span class="SC_thm" cuSts=true id="zcl_sts_3" >'+u+'</span>&nbsp;&nbsp;Maybe</span><span class="SC_SDot"></span>':'<span id="maybeList" onclick = '+C+'><span class="SC_thm" cuSts=false id="zcl_sts_3" >'+u+'</span>&nbsp;&nbsp;Maybe</span><span class="SC_SDot"></span>'),0<p&&(o+=0==e.events.status?'<span id="pendingList" onclick = '+C+'><span class="SC_thm" cuSts=true id="zcl_sts_0">'+p+"</span>&nbsp;&nbsp;pending</span>":'<span id="pendingList" onclick = '+C+'><span class="SC_thm" cuSts=false id="zcl_sts_0">'+p+"</span>&nbsp;&nbsp;Pending</span>"),o+="</div>",o+="</div>"}}o+="</div>",o+="</div>";var f=document.createDocumentFragment(),L=document.createElement("span");a&&(L.className="zmsEventExpired"),L.innerHTML=c,f.appendChild(L);var y=document.createElement("div");return y.className="Sevent_list",y.innerHTML=o,f.appendChild(y),f},clSrchAtt:function(){var e=ZCL_$("zmsSrchAttList");e.innerHTML="",e.style.display="block",0<ZCL_$("SC_PUcen_ZCL_AttList").childNodes[0].childNodes.length?(ZCL_$("SC_PUcen_ZCL_Srch").style.display="none",ZCL_$("zcl_msgcontent").style.display="none",ZCL_$("SC_PUcen_ZCL_AttList").style.display="block"):(ZCL_$("SC_PUcen_ZCL_Srch").style.display="block",ZCL_$("zcl_msgcontent").innerHTML="No entries yet",ZCL_$("zcl_msgcontent").style.display="block",ZCL_$("SC_PUcen_ZCL_AttList").style.display="none")},showAttMsg:function(e){null!=ZCL_$("SC_PUcen_ZCL_AttList")&&(ZCL_$("SC_PUcen_ZCL_AttList").style.display="none");var t=ZCL_$("zcl_msgcontent"),a=ZCL_$("zmsSrchAttList");null!=a&&(a.style.display="none"),ZCL_$("SC_PUcen_ZCL_Srch").style.display="block",t.style.display="block",t.innerHTML=e},searchAtt:function(e,t){var a=e.value.trim(),s=ZCL_$("zcl_attStsTab").getAttribute("cTab"),r="";if("zcl_all"==s?r="":"zcl_yes"==s?r="msi-like":"zcl_no"==s?r="msi-no":"zcl_myb"==s?r="msi-maybe":"zcl_pending"==s&&(r="msi-pending"),"keydown"==t.type&&9==t.keyCode&&""==a)return ZCL_streamEve.clSrchAtt(),0;if("blur"==t.type&&(t.target.parentNode.className="SC_sch"),"focus"==t.type&&(t.target.parentNode.className="SC_sch inputFocus"),8==t.keyCode&&ZCL_streamEve.clSrchAtt(),""==a)return ZCL_streamEve.clSrchAtt(),0;if(""==a)return 0;if(27==t.keyCode)return ZCL_streamEve.clSrchAtt(),e.value="",0;var n=e.value.charAt(0),l=ZCL_streamEve.curAttendeeList.emlList,i="No matches for this search. Try again",c=ZCL_$("SC_PUcen_ZCL_Srch");if(null==l[n])return ZCL_streamEve.showAttMsg(i),0;var o=l[n];if(0<o.length){var d=0,m=ZCL_$("zmsSrchAttList");m.innerHTML="";for(var u=0;u<o.length;u++){var p=o[u].email,_=o[u];if(p.startsWith(a)&&(r==o[u].stsclass||""==r)){d++;var v=_zm.getDOM(["LI",{child:[["DIV",{attrs:{class:"SC_avtr"},child:[["IMG",{attrs:{src:_.photo}}]]}],["text","&nbsp;&nbsp;"+_.email],["SPAN",{child:[["i",{attrs:{class:_.stsclass}}]]}]]}]);m.appendChild(v)}}return 0<m.childNodes.length?(ZCL_$("SC_PUcen_ZCL_AttList").style.display="none",8<d&&(c.style.height="400px"),c.appendChild(m),c.style.display="block"):ZCL_streamEve.showAttMsg(i),0}return ZCL_streamEve.showAttMsg(i),0},addEml:function(e){var t,a=e.email.charAt(0),s=ZCL_streamEve.curAttendeeList.emlList;null!=s[a]?(0<(t=s[a]).length?t[t.length]=e:(t=new Array)[0]=e,s[a]=t):((t=new Array)[0]=e,s[a]=t)}},"getAttendeesHtml",function(e,t,a,s){var r=$("<div class='SC_PUcen' id='SC_PUcen_ZCL_AttList'>"),n=0,l=$("<ul class='zmsEventList zmListReset' id='zmsattList'>");new Array;for(var i in ZCL_streamEve.curAttendeeList.acceptList=new Array,ZCL_streamEve.curAttendeeList.declinedList=new Array,ZCL_streamEve.curAttendeeList.maybeList=new Array,ZCL_streamEve.curAttendeeList.pendingList=new Array,ZCL_streamEve.curAttendeeList.all=new Array,ZCL_streamEve.curAttendeeList.emlList={},t){var c=t[i].STS,o=t[i].ATT_ZUID+"",d="";0<Object.keys(e).length&&e.hasOwnProperty(o)&&(t[i].photo="undefined"!=o?e[o].photo:zmail.defaultPhoto?zmail.defaultPhoto:zmResource.get("image","SC-Photo.png"),t[i].email=t[i].AID,"Yes"==c?(d="msi-like",t[i].stsclass=d,ZCL_streamEve.curAttendeeList.acceptList[ZCL_streamEve.curAttendeeList.acceptList.length]=t[i]):"No"==c?(d="msi-unlike",t[i].stsclass=d,ZCL_streamEve.curAttendeeList.declinedList[ZCL_streamEve.curAttendeeList.declinedList.length]=t[i]):"Maybe"==c?(d="msi-maybe",t[i].stsclass=d,ZCL_streamEve.curAttendeeList.maybeList[ZCL_streamEve.curAttendeeList.maybeList.length]=t[i]):"Pending"==c&&(d="msi-pending",t[i].stsclass=d,ZCL_streamEve.curAttendeeList.pendingList[ZCL_streamEve.curAttendeeList.pendingList.length]=t[i]),ZCL_streamEve.addEml(t[i]),ZCL_streamEve.curAttendeeList.all[ZCL_streamEve.curAttendeeList.all.length]=t[i])}var m="zms_zcl_invAll"==a?t:ZCL_streamEve.curAttendeeList[a],u=ZCL_$("zms_attView").childNodes[0].childNodes[1];for(var p in ZCL_$("zcl_attSearch").value="","acceptList"==a?(t=ZCL_streamEve.curAttendeeList.acceptList,d="msi-like",u.setAttribute("cTab","zcl_yes")):"declinedList"==a?(t=ZCL_streamEve.curAttendeeList.declinedList,d="msi-unlike",u.setAttribute("cTab","zcl_no")):"maybeList"==a?(t=ZCL_streamEve.curAttendeeList.maybeList,d="msi-maybe",u.setAttribute("cTab","zcl_myb")):"pendingList"==a?(t=ZCL_streamEve.curAttendeeList.pendingList,d="msi-pending",u.setAttribute("cTab","zcl_pending")):"zms_zcl_invAll"==a&&(t=ZCL_streamEve.curAttendeeList.all,d="all",u.setAttribute("cTab","zcl_all")),m){d=m[p].stsclass,o=m[p].ATT_ZUID+"";if(0<Object.keys(e).length&&e.hasOwnProperty(o)){var _=null!=m[p].ATT_ZUID&&""!=e[o].eid?e[o].eid:m[p].email,v=null!=m[p].ATT_ZUID?e[o].photo:zmail.defaultPhoto?zmail.defaultPhoto:zmResource.get("image","SC-Photo.png"),h=_zm.getDOM(["LI",{child:[["DIV",{attrs:{class:"SC_avtr"},child:[["IMG",{attrs:{src:v}}]]}],["text","&nbsp;&nbsp;"+_],["SPAN",{child:[["i",{attrs:{class:d}}]]}]]}]);l.append(h),n++,delete e[o]}}r.append(l),s.append(r);var g=document.createElement("div");g.id="SC_PUcen_ZCL_Srch",g.setAttribute("class","SC_PUcen");var C=document.createElement("div");C.id="zcl_msgcontent",C.setAttribute("class","SC_nmsg"),C.style.display="none";C.innerHTML="No matches for this search. Try again";var f=document.createElement("ul");if(f.id="zmsSrchAttList",f.setAttribute("class","zmsEventList"),g.appendChild(C),g.appendChild(f),g.setAttribute("display","none"),s.append(g),8<n)r.height(400);else if(0==n){ZCL_streamEve.showAttMsg("No entries yet")}return r}),_defineProperty(_ZCL_streamEve,"afterGetAllAttn",function(e){var t=ZCL_streamEve.evl(1,e.responseText).response.result.response,a=ZCL_streamEve.allAttnElem,s=a.getAttribute("attrgrpid"),r=a.id,n=(zmCont.isGroup(s),""),l=0,i=0,c=0,o=0,d=0,m="";for(var u in t)""==n?n=t[u].ATT_ZUID+"":n+=","+t[u].ATT_ZUID,i="Yes"==t[u].STS?i+1:i,c="No"==t[u].STS?c+1:c,o="Maybe"==t[u].STS?o+1:o,d="Pending"==t[u].STS?d+1:d,l++;for(var p in t)""==m?m=t[p].AID+"":m+=","+t[p].AID;if(ZCL_streamEve.isAttReqInvoked=!0,0<l){var _;ZCL_$("zms_attView")?$("#zms_attView").innerHTML="":$("body").append("<div id='zms_attView' class='SU_PU'/>"),_=$("#zms_attView");var v,h=[];for(var g in t)t[g].hasOwnProperty("ATT_ZUID")&&h.push(t[g].ATT_ZUID.toString());var C={promise:!0,zuid:h};zmail.ContactBook.get(C).done(function(e){v=e});var f={};for(var p in v){f[v[p].attrs.zid]=v[p].attrs}var L=$("<div class='SC_PUtt'>"),y="";y="<div class='SC_sch'><i class='msi-search'></i><input id='zcl_attSearch' onfocus=ZCL_streamEve.searchAtt(this,event)  onkeyup=ZCL_streamEve.searchAtt(this,event) onblur = ZCL_streamEve.searchAtt(this,event) type='text' placeholder='Search Guest'  style='width:380px;'></div>";y+="<ul class='SCS_tab' id='zcl_attStsTab' cTab='zcl_all' >",y+="zms_zcl_invAll"==r?"<li class='stSel' onclick=ZCL_streamEve.showList('all',this) id='zcl_selall' >Invited(&nbsp;"+l+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('all',this) id='zcl_selall' >Invited(&nbsp;"+l+"&nbsp;)</li>",y+=0==i?"":"acceptList"==r?"<li onclick=ZCL_streamEve.showList('yes',this) class='stSel' id='zcl_selyes'>Yes(&nbsp;"+i+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('yes',this) id='zcl_selyes'>Yes(&nbsp;"+i+"&nbsp;)</li>",y+=0==c?"":"declinedList"==r?"<li onclick=ZCL_streamEve.showList('no',this) class='stSel' id='zcl_selno'>No(&nbsp;"+c+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('no',this) id='zcl_selno'>No(&nbsp;"+c+"&nbsp;)</li>",y+=0==o?"":"maybeList"==r?"<li onclick=ZCL_streamEve.showList('maybe',this) class='stSel' id='zcl_selmyb'>Maybe(&nbsp;"+o+"&nbsp;)</li> ":"<li onclick=ZCL_streamEve.showList('maybe',this) id='zcl_selmyb'>Maybe(&nbsp;"+o+"&nbsp;)</li> ",y+=0==d?"":"pendingList"==r?"<li onclick=ZCL_streamEve.showList('pending',this) class='stSel' id='zcl_selpnd'>Pending(&nbsp;"+d+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('pending',this) id='zcl_selpnd'>Pending(&nbsp;"+d+"&nbsp;)</li>",y+="</ul>",L.append(y),_.append(L),ZCL_streamEve.getAttendeesHtml(f,t,r,_);Dialog.new({title:"Invitees",$content:_,defaultCloseIcon:!0,closeAction:function(){ZCL_streamEve.cleanStrmCalInfo()}})}}),_defineProperty(_ZCL_streamEve,"cleanStrmCalInfo",function(){ZCL_streamEve.curAttendeeList={}}),_defineProperty(_ZCL_streamEve,"constrctAttList",function(e){var t=$("<ul class='zmsEventList zmListReset'  id='zmsattList'>");new Array;for(var a in e){e[a].STS,e[a].ATT_ZUID;var s=e[a].stsclass,r=_zm.getDOM(["LI",{child:[["DIV",{attrs:{class:"SC_avtr"},child:[["IMG",{attrs:{src:e[a].photo}}]]}],["text","&nbsp;&nbsp;"+e[a].email],["SPAN",{child:[["i",{attrs:{class:s}}]]}]]}]);t.append(r)}return t}),_defineProperty(_ZCL_streamEve,"showList",function(e,t){var a;ZCL_streamEve.clSrchAtt(),ZCL_$("SC_PUcen_ZCL_Srch").style.display="none",ZCL_$("SC_PUcen_ZCL_AttList").style.display="block";var s=ZCL_$("zms_attView").childNodes[0].childNodes[1];ZCL_$("zcl_attSearch").value="","yes"==e?(a=ZCL_streamEve.curAttendeeList.acceptList,attStsCls="msi-like",s.setAttribute("cTab","zcl_yes")):"no"==e?(a=ZCL_streamEve.curAttendeeList.declinedList,attStsCls="msi-unlike",s.setAttribute("cTab","zcl_no")):"maybe"==e?(a=ZCL_streamEve.curAttendeeList.maybeList,attStsCls="msi-maybe",s.setAttribute("cTab","zcl_myb")):"pending"==e?(a=ZCL_streamEve.curAttendeeList.pendingList,attStsCls="msi-pending",s.setAttribute("cTab","zcl_pending")):"all"==e&&(a=ZCL_streamEve.curAttendeeList.all,attStsCls="all",s.setAttribute("cTab","zcl_all"));var r="";for(var n in a)""==r?r=a[n].ATT_ZUID+"":r+=","+a[n].ATT_ZUID;for(var l=zmCont.getOrgContacts(r),i=ZCL_$("zms_attView").childNodes[0].childNodes[1].getElementsByTagName("li"),c=0;c<i.length;c++){var o=i[c];o.id!=t.id?o.className="":o.className="stSel"}ZCL_$("zms_attView").childNodes[1].innerHTML="";var d=ZCL_streamEve.constrctAttList(a,l),m=$("#SC_PUcen_ZCL_AttList"),u=a.length;if(8<u)m.height(400);else if(0==u){ZCL_streamEve.showAttMsg("No entries yet")}m.append(d)}),_defineProperty(_ZCL_streamEve,"afterUpdateAttn",function(e){var t=ZCL_streamEve.evl(1,e.responseText).response.result,a=t.status,s=t.message,r=t.eventstatus,n=1;if("1"==a){for(var l=document.querySelectorAll('[eveid="'+t.eventKey+'"]'),i=0;i<l.length;i++){var c=l[i].getAttribute("eveid");if(t.eventKey==c)for(var o=l[i].childNodes,d=0;d<o.length;d++)n==t.eventstatus?o[d].className="sel":o[d].removeAttribute("class"),n++}for(var m=document.querySelectorAll('[zclAttByStsEId="'+t.eventKey+'"'),u=0;u<m.length;u++)for(var p=m[u].childNodes,_=0;_<p.length;_++)if(0<p[_].childNodes.length){var v=p[_].childNodes[0];"false"==v.getAttribute("custs")&&v.id=="zcl_sts_"+r?(v.innerHTML=parseInt(v.innerHTML)+1,v.setAttribute("custs",!0)):0!=parseInt(v.innerHTML)&&"true"==v.getAttribute("custs")&&(v.innerHTML=parseInt(v.innerHTML)-1,v.setAttribute("custs",!1))}zmUtil.succErrMsg("s",s)}else if(-1!=s.indexOf("Event is expired")){for(l=document.querySelectorAll('[eveid="'+t.eventKey+'"]'),i=0;i<l.length;i++){c=l[i].getAttribute("eveid");if(l[i].className="eventExpired",t.eventKey==c)for(o=l[i].childNodes,d=0;d<o.length;d++)o[d].removeAttribute("onclick")}zmUtil.succErrMsg("e",s)}else zmUtil.succErrMsg("e",s)}),_defineProperty(_ZCL_streamEve,"setEventStatus",function(e,t,a,s){var r="",n=s?"":"ZCL_streamEve.updateAttendeeStatus(this,'"+t+"')";return r+="-1"==e&&a||"1"==e?'<li class="sel" onclick="'+n+'">Yes</li>':'<li onclick="'+n+'">Yes</li>',r+="2"==e?'<li class="sel" onclick="'+n+'">No</li>':'<li onclick="'+n+'">No</li>',r+="3"==e?'<li class="sel" onclick="'+n+'">Maybe</li>':'<li onclick="'+n+'">Maybe</li>'}),_defineProperty(_ZCL_streamEve,"get_whole_values",function(e,t){for(time_data=[e],i=0;i<t.length;i++)time_data.push(parseInt(time_data[i]/t[i])),time_data[i]=time_data[i]%t[i];return time_data}),_defineProperty(_ZCL_streamEve,"millisToTime",function(e){var t=parseInt(e/1e3%60),a=parseInt(e/6e4%60),s=parseInt(e/36e5%24),r=parseInt(e/864e5);return(s=(s+=parseInt(24*r))<10?"0"+s:s)+":"+(a=a<10?"0"+a:a)+":"+(t=t<10?"0"+t:t)}),_defineProperty(_ZCL_streamEve,"checkEventExpire",function(){for(var e=Object.keys(ZCL_streamEve.timeObj),t=0;t<e.length;t++){var a=e[t];if(0<(r=document.querySelectorAll('[eveid="'+a+'"]')).length){var s=ZCL_streamEve.timeObj[a];if(s[1]<ZCL_streamEve.curTimeGMT){for(var r=document.querySelectorAll('[eveid="'+a+'"]'),n=!1,l=0;l<r.length;l++){var i=r[l].getAttribute("eveid");if(r[l].className="zmsEventExpired",a==i)for(var c=r[l].childNodes,o=0;o<c.length;o++)c[o].removeAttribute("onclick"),n=!0;delete ZCL_streamEve.timeObj[a]}if(n){var d=document.querySelectorAll('[expTagEId="'+a+'"]');d[0].className="zmsEventCal zmEventInfo zmEvExp",d[0].childNodes[2].childNodes[0].innerHTML="Expired"}var m=new Date(s[0]),u=new Date(s[1]),p=ZCL_streamEve.getCurrDateDispStr(m,u,ZCL_streamEve.curTimeGMT);document.getElementById("zcl_eveDtl_"+a).childNodes[0].childNodes[5].innerHTML=p}else{m=new Date(s[0]),u=new Date(s[1]),p=ZCL_streamEve.getCurrDateDispStr(m,u,ZCL_streamEve.curTimeGMT);document.getElementById("zcl_eveDtl_"+a).childNodes[0].childNodes[5].innerHTML=p}}else delete ZCL_streamEve.timeObj[a]}0==(e=Object.keys(ZCL_streamEve.timeObj)).length&&ZCL_streamEve.clearTimeIntrvl()}),_defineProperty(_ZCL_streamEve,"consDateTime",function(e){var t,a,s,r="",n="",l=/((19|20)[0-9][0-9])(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/,i=new Date,c=new Date;if(l.test(e.events.startDate)&&l.test(e.events.endDate)||l.test(e.events.startDateTime)&&l.test(e.events.endDateTime)){var o=l.test(e.events.startDateTime)?e.events.startDateTime:e.events.startDate,d=(n=l.test(e.events.endDateTime)?e.events.endDateTime:e.events.endDate,o.substring(0,4));r=(p=o.substring(6,8))+"/"+(_=o.substring(4,6))+"/"+d;var m=n.substring(0,4);n=(v=n.substring(6,8))+"/"+(h=n.substring(4,6))+"/"+m,(u=new Date).setTime(o),i=new Date(d,_-1,p),c=new Date(m,h-1,v)}else{var u,p,_;o=e.events.startDateTime?e.events.startDateTime:e.events.startDate,n=e.events.endDateTime?e.events.endDateTime:e.events.endDate;(u=new Date).setTime(o),r=(p=(p=u.getDate())<10?"0"+p:p)+"/"+(_=(_=u.getMonth()+1)<10?"0"+_:_)+"/"+(d=u.getFullYear());var v,h,g=new Date;g.setTime(n),n=(v=(v=g.getDate())<10?"0"+v:v)+"/"+(h=(h=g.getMonth()+1)<10?"0"+h:h)+"/"+(m=g.getFullYear()),i=new Date(d,_-1,p),c=new Date(m,h-1,v)}var C=ZCL_streamEve.correctTimeFormat(e.events.startTime),f=ZCL_streamEve.correctTimeFormat(e.events.endTime),L=ZCL_streamEve.parseTime(C),y=ZCL_streamEve.parseTime(f),E=L.hh+":"+L.mm+" "+L.a,T=y.hh+":"+y.mm+" "+y.a,D="",b="";i.setHours(L.HH),i.setMinutes(L.mm),t={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"}[i.getDay()+""],a={0:"JAN",1:"FEB",2:"MAR",3:"APR",4:"MAY",5:"JUN",6:"JUL",7:"AUG",8:"SEP",9:"OCT",10:"NOV",11:"DEC"}[i.getMonth()+""],s=i.getDate(),c.setHours(y.HH),c.setMinutes(y.mm),r==n||e.events.allDay?r!=n||e.events.allDay?r!=n&&e.events.allDay?D=r+"&nbsp;to&nbsp;"+n:r==n&&e.events.allDay&&(D=r):(D=r,b=E+"&nbsp;to&nbsp;"+T):(D=r+"&nbsp;to&nbsp;"+n,b=E+"&nbsp;to&nbsp;"+T);var Z=new Array;Z.DATE=D,Z.TIME=b,Z.DOW=t,Z.MOY=a,Z.DOM=s,Z.STH=L.hh,Z.STM=L.mm,Z.STA=L.a;var A=new Date;if(i.getFullYear()==A.getFullYear()&&i.getMonth()==A.getMonth()&&i.getDate()==A.getDate()){var S=""!=ZCL_streamEve.curTimeGMT?ZCL_streamEve.curTimeGMT:e.events.currTimeGMT;Z.dayTxt=ZCL_streamEve.getCurrDateDispStr(i,c,S)}var z=new Date(A.getFullYear(),A.getMonth(),A.getDate()+1);z.getFullYear()==i.getFullYear()&&z.getMonth()==i.getMonth()&&z.getDate()==i.getDate()&&(Z.dayTxt="Tomorrow");var w=new Date(A.getFullYear(),A.getMonth(),A.getDate()+2);w.getFullYear()==i.getFullYear()&&w.getMonth()==i.getMonth()&&w.getDate()==i.getDate()&&(Z.dayTxt="2 Days from now");var M=new Date(A.getFullYear(),A.getMonth(),A.getDate()+3);return M.getFullYear()==i.getFullYear()&&M.getMonth()==i.getMonth()&&M.getDate()==i.getDate()&&(Z.dayTxt="3 Days from now"),Z}),_defineProperty(_ZCL_streamEve,"getCurrDateDispStr",function(e,t,a){var s=new Date(a),r="";if(s<=t&&e<=s){var n=ZCL_streamEve.millisToTime(s-e).split(":");if(r="Started before ","00"!=n[0]&&(r+=parseInt(n[0])+" hours"),"00"!=n[1]){var l=parseInt(n[1])+" minutes";r+=""!=r?" "+l:l}}else if(s.getDate()==e.getDate()&&s<=e){if(r="Starts in ","00"!=(i=ZCL_streamEve.millisToTime(e-s).split(":"))[0]&&(r+=parseInt(i[0])+" hours"),"00"!=i[1]){l=parseInt(i[1])+" minutes";r+=""!=r?" "+l:l}}else if(s.getDate()==t.getDate()&&t<=s){var i=ZCL_streamEve.millisToTime(s-t).split(":"),c=0==t.getMinutes()?"":":"+t.getMinutes(),o=0==t.getHours()?12+c+" am":12==t.getHours()?t.getHours()+" "+c+" pm":12<t.getHours()?t.getHours()-12+" "+c+" pm":t.getHours()+" "+c+" am";r="Event ended at ",r+=o}else r="Today";return r}),_defineProperty(_ZCL_streamEve,"Sm_ComposeEventBoxcon",function(e,t){var a=$(e),s=$('<div class="Sevent_update SC_e" id="ScEvent_'+t+'">');s.append('<div class="Sevent_data"><span id="scDate_span"><i class="msi-calendar"></i><input type="text" placeholder="Date" id = "SC_eventDate"></span><i class="msi-clock"></i><span style="border:none;" class="zcal_time zcal_nbr" id="scTime"><input type="text" placeholder="Time" id="SC_eventTime"></span><i class="msi-duration"></i><span class="zcal_time zcal_nbr" id="SCeventDur_span"><input onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" type="text" readonly value="00:30 Min" id="SC_eventDur" placeholder="Duration"></span><i class="msi-location"></i><input type="text" placeholder="Choose Location" id="SC_eventLoc"></div>'),a.find(".zmScContent").after(s),ZCL_streamEve.initDateTimePicker(s[0].firstChild.firstChild,s[0].firstChild.childNodes[2])}),_defineProperty(_ZCL_streamEve,"Sm_ComposeAddStreamEvent",function(e){ZCL_streamEve.dataObj=e;var t="";for(var a in e.attendees)t+=""==t?e.attendees[a]:","+e.attendees[a];var s=new Array,r=ZCL_$("SC_eventDate").value,n=ZCL_$("SC_eventTime").value,l=ZCL_$("SC_eventDur").value,i=ZCL_$("SC_eventLoc").value;s=ZCL_streamEve.calcEventTime(r,n,l);var c=new Array;if(""==r)c.push("Date is mandatory");else if(/^\d{2}\/\d{2}\/\d{4}$/.test(r)){var o=(new Date).getDateBy("MM/dd/yyyy");Date.parse(r)<o&&c.push("The date is earlier than today")}else c.push("Invalid date format");if(""==n?c.push("Time is mandatory"):/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(n.toLowerCase())||c.push("Invalid time format"),0==Object.keys(c).length){var d="sum="+encodeURIComponent(e.title)+"&sday="+s.ST_DATE+"&smonth="+s.ST_MONTH+"&syear="+s.ST_YEAR+"&shour="+s.ST_HOUR+"&smin="+s.ST_MIN+"&eday="+s.END_DATE+"&emonth="+s.END_MONTH+"&eyear="+s.END_YEAR+"&ehour="+s.END_HOUR+"&emin="+s.END_MIN+"&loc="+encodeURIComponent(i)+"&zgid="+e.groupId+"&att="+encodeURIComponent(t)+"&lckInv="+e.lckInv;if(null!=e.inv_allMem)d+="&inv_allMem="+e.inv_allMem;ZCL_XHR("/cal/stream/api/private/json/addEvent?"+d,ZCL_streamEve.afterSubEvent)}else ZCL_streamEve.dataObj.onFailure(c[0])}),_defineProperty(_ZCL_streamEve,"afterSubEvent",function(e){if(200==e.status){var t=ZCL_streamEve.evl(1,e.responseText);t.response.result;"success"==t.response.result.status?ZCL_streamEve.dataObj.onSuccess():(Errmsg="err_nostreamadd"==t.response.error?"Problem in adding event":t.response.error.message?t.response.error.message:t.response.error,ZCL_streamEve.dataObj.onFailure(Errmsg))}else 400!=e.status&&500!=e.status||(Errmsg="Problem in adding event",ZCL_streamEve.dataObj.onFailure(Errmsg))}),_ZCL_streamEve);ZCL_dputDate=function(e,t){var a=t?zcal.DFORMAT[zcal.cdata.opt.DF]:"MM/dd/yyyy",s=e.substring(6,8),r=e.substring(4,6),n=e.substring(0,4);return a.replace("dd",s).replace("MM",r).replace("yyyy",n)};var dataObj=[];function ZCL_mailDetViewEvePopup(e){var t=e.ST;if(null!=t)var a=t.slice(0,2),s=(12<a?a-12:a)+":"+t.slice(2,4)+" "+(12<a?"pm":"am");var r=ZCL_dputDate(e.SD),n={},l=$('<ul id="c_event" class="zm_dateExt shw"></ul>');if(e.view&&"new"==e.view)var i=$('<li><div class="zmcDatePost"><div id="zcl_scroll"><div class="SC_floatLabel zmIconLabel"><input type="text" id="de_eveTitle" class="zmQukAddTitle"  value="'+ZCL_streamEve.ZCL_streamHTML(e.SUM)+'"  placeholder="Enter event title" /><i class="msi-Vevnt SC_thm"></i></div><div class="SC_floatLabelRow fLCol3"><div class="SC_floatLabel zmIconLabel" id="de_eveDate"><input class="hasDD" type="text" id="eveInpDt" value="'+r+'" required="" readonly="readonly" placeholder="Due date" style="display: inline-block;"><i class="msi-calendar SC_thm"></i></div><div class="SC_floatLabel zmIconLabel" id="de_eveTime"><input class="hasDD" id="eveInpTi" title="Time" type="text" required="" value="2:30 pm" placeholder="Time"><i class="msi-clock SC_thm"></i></div><div class="SC_floatLabel zmIconLabel" id="de_eveDur"><input class="hasDD" id="eveInpDu" title="Duration" onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" value="00:30 Min" type="text" readonly="" placeholder="Duration"><i class="msi-duration SC_thm"></i></div></div><div class="SC_dyn" id="optMore1"><div class="SC_floatLabel zmIconLabel"><input class="hasDD" type="text" id="de_eveLoc" required="" placeholder="Set a location"><i class="msi-location SC_thm"></i></div><div class="SC_floatLabel zmIconLabel"><textarea id="de_eveDesc" class="" placeholder="Enter description" spellcheck="true" style="z-index: auto; position: relative; line-height: 18px; font-size: 14px; transition: none; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"></textarea><i class="msi-rsvp SC_thm"></i></div></div></div><div class="addInv SC_floatLabel flFLabel clearfix"  id="de_attDiv" title="Attendee"><b style="vertical-align: middle"><i class="msi-group SC_thm"></i> Invitees :</b><div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div></div><div class="SC_frt zm_moreOpt" id="moreOpt1" style="margin-top: 15px;"><span class="SC_gray SC_dyn">Less<i class="msi-prev SC_gray"></i></span><span class="">More<i class="msi-next SC_gray"></i></span></div><div class="SC_PUbtm"><span id="de_savEve">Create</span><span id="de_canEve" data-val="Cancel">Cancel</span></div></div></li>');else i=$('<li><div class="zmcDatePost"><div class="SC_floatLabel placeholder zm_mention noBdr" style="color: transparent; overflow: hidden;"><div class="zm_mentionbg"></div><input type="text" id="de_eveTitle" placeholder="Untitled event" value="'+ZCL_streamEve.ZCL_streamHTML(e.SUM)+'" class="ZT_prvTitle"><label>Event Title</label></div><div class="SC_floatLabelRow fLCol3"><div class="SC_floatLabel placeholder noBdr"  id="de_eveDate"><input class="hasDD" id="eveInpDt" title="Date" value="'+r+'" type="text" required="" readonly="" placeholder="Pick a date"><label>When</label></div><div class="SC_floatLabel placeholder noBdr" id="de_eveTime"><input class="hasDD" id="eveInpTi" title="Time" type="text" required="" value="'+(null!=s?s:"")+'"  placeholder="Time"></div><div class="SC_floatLabel placeholder noBdr" id="de_eveDur"><input class="hasDD" id="eveInpDu" title="Duration" onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" value="00:30 Min" type="text" readonly="" placeholder="Duration"></div></div><div class="SC_dyn" id="optMore1"><div class="SC_floatLabel placeholder noBdr"><input class="hasDD" type="text"  id="de_eveLoc" required=""  placeholder="Set a location"><label>Where</label></div><div class="SC_floatLabel placeholder noBdr"><textarea id="de_eveDesc" class="" placeholder="Enter description" spellcheck="true" style="z-index: auto; position: relative; line-height: 18px; font-size: 14px; transition: none; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"></textarea><label>Description</label></div></div><div class="addInv SC_floatLabel flFLabel clearfix" id="de_attDiv" title="Attendee"><div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div></div><div class="SC_frt " id="moreOpt1" style="margin-top: 15px;"><span class="SC_gray SC_dyn">Less<i class="msi-prev SC_gray"></i></span><span class="SC_gray">More<i class="msi-next SC_gray"></i></span></div><div class="SC_PUbtm"><span id="de_savEve">Create</span><span id="de_canEve" data-val="Cancel">Cancel</span></div></div></li>');return l.append(i),$(l).on("click",function(e){if("de_eveAtt"===e.target.parentNode.parentNode.parentNode.id)2<$("#de_attDiv")[0].childNodes.length?$(l).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix edit_parti":($(l).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix edit_parti",$(l).find("#de_attDiv")[0].innerHTML='<input type="text" class="zm_sgst" id="de_att"><div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div>'),$(l).find("input").focus(),bindFunction(l);else if("de_attDiv"!==e.target.id&&"de_eveAtt"!==$(e.target).parent()[0].id&&"de_attDiv"!==$(e.target).parent()[0].id&&"at"!==$(e.target).parent()[0].id)if(2<$("#de_attDiv")[0].childNodes.length){$(l).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix",$("#zcl_b").remove();var t=document.createElement("b");t.id="zcl_b",t.style="vertical-align: middle",t.innerHTML='<i class="msi-group SC_thm"></i> Invitees :',$(l).find("#de_attDiv")[0].insertBefore(t,$(l).find("#de_attDiv")[0].firstChild)}else $(l).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix",$(l).find("#de_attDiv")[0].innerHTML='<b style="vertical-align: middle"><i class="msi-group SC_thm"></i> Invitees :</b><div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div>'}),$(l).find("#moreOpt1").on("click",function(){var e=$(l).find("#optMore1")[0].className;$(l).find("#optMore1")[0].className=""==e?"SC_dyn":"",$(l).find("#moreOpt1")[0].childNodes[0].className="SC_gray SC_dyn"==$(l).find("#moreOpt1")[0].childNodes[0].className?"":"SC_gray SC_dyn",$(l).find("#moreOpt1")[0].childNodes[1].className="SC_gray SC_dyn"==$(l).find("#moreOpt1")[0].childNodes[1].className?"":"SC_gray SC_dyn",$(l).find("#zcl_scroll")[0].scrollTop=150}),deEveDatepicker($(l).find("#de_eveDate")[0]),deEveTimepicker($(l).find("#de_eveTime")[0]),$(l).find("#de_canEve").on("click",function(){zmUtil.hideMenu()}),$(l).find("#de_savEve").on("click",function(){ZCL_saveDetCreEvent()}),n.$el=$(l),n}function bindFunction(r){var n=$(r).find("#de_att");zmAppLoader.load("zmContactsAutoComplete").done(function(){zmContactsAutoComplete.autoComplete({input:n[0],contactType:"org",exclude:function(){var e=[];if($("#de_attDiv")[0])for(var t=$("#de_attDiv")[0].childNodes,a=0;a<t.length;a++)"at"==t[a].id&&e.push(t[a].getElementsByTagName("SPAN")[0].id);return e},excludeMe:!0,onSelect:function(e,t){t=t.item.attributes;dataObj.push(t);var a=$(r).find("#de_attDiv"),s=document.createElement("div");s.className="SC_cs myInv dFill",s.setAttribute("data-uid",t.zid),s.setAttribute("id","at"),s.innerHTML='<div class="SC_avtr"><img src='+t.profileImage+'></div><span id="'+t.id+'">'+t.firstName+'</span><i class="msi-close closePopup"></i></div>',a.prepend($(s)),$(n).val(""),$(s).find(".closePopup").on("click",function(){$(this).parent("#at").remove()})}})})}function deEveDatepicker(a){!function(e){if(a){var t=a.getElementsByTagName("input")[0];e(a).picker("date",{dform:"MM/dd/yyyy",refer:t,wkst:0,mode:"popup",update:"yes",minhgt:251,customdate:"yes"}).bind()}}(ZEVENTS)}function deEveTimepicker(s){!function(e){if(s){var t=ZCL_streamEve.curStartAndEndTime(),a=s.getElementsByTagName("input")[0];a.value=""!=a.value?a.value:t.ST,e(s).picker("time",{tform:"hh:mm a",type:1}).bind()}}(ZEVENTS)}function ZCL_saveDetCreEvent(){var e=$("#de_eveTitle")[0].value;if(""==e)return zmUtil.succErrMsg("e",zcal.i18n.plenttle),!1;var t=$("#eveInpDt")[0].value,a=$("#eveInpTi")[0].value,s=/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(a);if(""==a)return zmUtil.succErrMsg("e","Please enter the time"),!1;if(!s)return zmUtil.succErrMsg("e","Invalid time format"),!1;var r=$("#eveInpDu")[0].value,n=ZCL_streamEve.calcEventTime(t,a,r),l=ZCL_dputDate(n.ST_YEAR+n.ST_MONTH+n.ST_DATE,"df"),i=ZCL_dputDate(n.END_YEAR+n.END_MONTH+n.END_DATE,"df"),c=n.ST_HOUR+n.ST_MIN,o=n.END_HOUR+n.END_MIN,d=$("#de_eveLoc")[0].value,m=$("#de_eveDesc")[0].value,u="";for(var p in dataObj)u+=""==u?dataObj[p].email:","+dataObj[p].email;var _=zcal.cdata.defcal,v=zcal.getCalObj(_),h={EID:"",EUID:"",EPERM:2<=v[12]?2:1==v[12]?1:0,DPERM:2<=v[12]?2:0,SD:l,ST:c,ED:i,ET:o,ADAY:0,LOC:d,DESC:m,ETZ:"",IN_ETZ:!1,CLASS:0,IMP:0,CNAME:_,TRANS:1,ETSK:0,ECRM:0,ENTS:0,EMET:0,LINK:"",SUM:e,EC:-1,ATT:u,ADD_MODE:"PP",INVITE_ALL:!1,NTFY:""!=u?1:-1};ZCL_detailObj(h),zmUtil.hideMenu()}var ZCL_groupPolicy={parentDOM:"",type:"0",grpId:"",idArr:["zclApprEveCre","zclCalShPri","zclSndInv","zclRestOvrlpEve","zclGrpNtfy"],constGroupPolicy:function(e){var t=ZCL_streamEve.evl(1,e.responseText),a=(t.message.adminOptions.RESTRICT_OVERLAP,t.message.adminOptions.INVITATION_NONGROUP,t.message.adminOptions.APPROVAL_CREATION,t.message.adminOptions.APPROVAL_CAL_SUBS,t.message.adminOptions.GROUP_NOTIFY,[t.message.adminOptions.APPROVAL_CREATION,t.message.adminOptions.APPROVAL_CAL_SUBS,t.message.adminOptions.INVITATION_NONGROUP,t.message.adminOptions.RESTRICT_OVERLAP,t.message.adminOptions.GROUP_NOTIFY]),s='{"APPROVAL_CREATION":[{"0":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.needappr+'"}],"APPROVAL_CAL_SUBS":[{"1":"'+zcal.i18n.yes+'"},{"0":"'+zcal.i18n.no+'"},{"2":"'+zcal.i18n.needappr+'"}],"INVITATION_NONGROUP":[{"3":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.onlymem+'"},{"2":"'+zcal.i18n.orgmem+'"}],"RESTRICT_OVERLAP":[{"0":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.dontallow_label+'"}],"GROUP_NOTIFY":[{"1":"'+zcal.i18n.yes+'"},{"0":"'+zcal.i18n.no+'"}]}',r='{"APPROVAL_CREATION":[{"0":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.needappr+'"}],"APPROVAL_CAL_SUBS":[{"1":"'+zcal.i18n.yes+'"},{"0":"'+zcal.i18n.no+'"},{"2":"'+zcal.i18n.needappr+'"}],"INVITATION_NONGROUP":[{"3":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.onlymem+'"}],"RESTRICT_OVERLAP":[{"0":"'+zcal.i18n.allow_label+'"},{"1":"'+zcal.i18n.dontallow_label+'"}],"GROUP_NOTIFY":[{"1":"'+zcal.i18n.yes+'"},{"0":"'+zcal.i18n.no+'"}]}',n='{"RESTRICT_OVERLAP":"'+zcal.i18n.restoverlap+'","INVITATION_NONGROUP":"'+zcal.i18n.sendinvi+'","APPROVAL_CREATION":"'+zcal.i18n.apprevent+'","APPROVAL_CAL_SUBS":"'+zcal.i18n.calsharingpriv+'","GROUP_NOTIFY":"'+zcal.i18n.groupnotify+'"}',l="0"==ZCL_groupPolicy.type?ZCL_Evl("1",r):ZCL_Evl("1",s);n=ZCL_Evl("1",n);var c=Object.keys(l),o=ZCL_groupPolicy.parentDOM;o.innerHTML="";var d=o.appendChild(document.createElement("div"));for(d.className="zmTable",i=0;i<c.length;i++){var m=d.appendChild(document.createElement("div"));m.className="zmTableRow",m.id=ZCL_groupPolicy.idArr[i],m.setAttribute("rel",a[i]);var u=m.appendChild(document.createElement("div"));u.className="zmTableTd",u.innerHTML=0==i?"<label>"+n[c[i]]+"*</label>":"<label>"+n[c[i]]+"</label>";var p=l[c[i]],_=m.appendChild(document.createElement("div"));_.className="zmTableTd";var v=_.appendChild(document.createElement("div"));for(v.className="zmRadioInline zmNoBdr",k=0;k<p.length;k++){var h=p[k],g=Object.keys(h),C=v.appendChild(document.createElement("div"));C.className="zmRadioEle zmRadioInlineEle",C.setAttribute("onclick","ZCL_groupPolicy.zcl_chgRadio(this, '"+g[0]+"')");var f=C.appendChild(document.createElement("input"));"zclApprEveCre"==ZCL_groupPolicy.idArr[i]?f.checked=0==a[i]&&0==k||1==a[i]&&1==k:"zclCalShPri"==ZCL_groupPolicy.idArr[i]?f.checked=0==a[i]&&1==k||1==a[i]&&0==k||2==a[i]&&2==k:"zclSndInv"==ZCL_groupPolicy.idArr[i]?"0"==ZCL_groupPolicy.type?f.checked=(1==a[i]||4==a[i])&&1==k||3==a[i]&&0==k:f.checked=(1==a[i]||4==a[i])&&1==k||3==a[i]&&0==k||2==a[i]&&2==k:"zclRestOvrlpEve"==ZCL_groupPolicy.idArr[i]?f.checked=0==a[i]&&0==k||1==a[i]&&1==k:"zclGrpNtfy"==ZCL_groupPolicy.idArr[i]&&(f.checked="1"==a[i]&&0==k||"0"==a[i]&&1==k),f.type="radio",C.appendChild(document.createElement("label")).innerHTML="<i class='msi-tick'></i>"+h[g[0]]}}var L=o.appendChild(document.createElement("div"));L.className="zmParaTxt",L.innerHTML="<p>* "+zcal.i18n.setting_msg+"</p>"},getGroupPolicy:function(e,t){ZCL_groupPolicy.grpId=e.grpId+"",ZCL_groupPolicy.type=e.type+"",ZCL_groupPolicy.parentDOM=t;ZCL_XHR("/cal/adminSet.do?mode=fetch&space_id="+ZCL_groupPolicy.grpId+"&type=0",ZCL_groupPolicy.constGroupPolicy)},zcl_chgRadio:function(e,t){var a=e.parentNode.parentNode;a.parentNode.setAttribute("rel",t);for(var s=a.parentNode.querySelectorAll("input"),r=0;r<s.length;r++){s[r].checked=!1}e.querySelectorAll("input")[0].checked=!0,ZCL_groupPolicy.updateGroupPolicy()},updateGroupPolicy:function(){var e=ZCL_groupPolicy.grpId,t=(ZCL_groupPolicy.type,{}),a=ZCL_groupPolicy.parentDOM.querySelectorAll("div.zmTableRow");t.APPROVAL_CREATION=a[0].getAttribute("rel"),t.APPROVAL_CAL_SUBS=a[1].getAttribute("rel"),t.INVITATION_NONGROUP=a[2].getAttribute("rel"),t.RESTRICT_OVERLAP=a[3].getAttribute("rel"),t.GROUP_NOTIFY=a[4].getAttribute("rel"),ZCL_XHR("/cal/adminSet.do?mode=update&type=0&space_id="+e+"&optObj="+encodeURIComponent(JSON.stringify(t)),ZCL_groupPolicy.zcl_retSvGroup)},zcl_retSvGroup:function(e){ZCL_streamEve.evl(1,e.responseText).message}};
