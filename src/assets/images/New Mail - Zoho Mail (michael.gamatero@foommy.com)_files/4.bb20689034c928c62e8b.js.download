(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{bLvj:function(t,e,n){"use strict";n.d(e,"r",function(){return S}),n.d(e,"q",function(){return _}),n.d(e,"G",function(){return I}),n.d(e,"I",function(){return A}),n.d(e,"X",function(){return L}),n.d(e,"d",function(){return H}),n.d(e,"V",function(){return w}),n.d(e,"ab",function(){return j}),n.d(e,"M",function(){return P}),n.d(e,"lb",function(){return F}),n.d(e,"mb",function(){return Z}),n.d(e,"pb",function(){return k}),n.d(e,"u",function(){return x}),n.d(e,"t",function(){return m}),n.d(e,"v",function(){return lt}),n.d(e,"K",function(){return z}),n.d(e,"F",function(){return g}),n.d(e,"z",function(){return p}),n.d(e,"L",function(){return s}),n.d(e,"H",function(){return W}),n.d(e,"J",function(){return T}),n.d(e,"w",function(){return E}),n.d(e,"N",function(){return R}),n.d(e,"O",function(){return V}),n.d(e,"x",function(){return N}),n.d(e,"l",function(){return B}),n.d(e,"s",function(){return q}),n.d(e,"n",function(){return b}),n.d(e,"P",function(){return U}),n.d(e,"B",function(){return G}),n.d(e,"k",function(){return J}),n.d(e,"m",function(){return y}),n.d(e,"jb",function(){return D}),n.d(e,"ib",function(){return K}),n.d(e,"c",function(){return X}),n.d(e,"p",function(){return Q}),n.d(e,"o",function(){return Y}),n.d(e,"fb",function(){return $}),n.d(e,"gb",function(){return tt}),n.d(e,"j",function(){return et}),n.d(e,"Z",function(){return it}),n.d(e,"Y",function(){return nt}),n.d(e,"S",function(){return rt}),n.d(e,"i",function(){return at}),n.d(e,"hb",function(){return ot}),n.d(e,"U",function(){return ct}),n.d(e,"e",function(){return h}),n.d(e,"W",function(){return ut}),n.d(e,"db",function(){return dt}),n.d(e,"a",function(){return ft}),n.d(e,"A",function(){return Ct}),n.d(e,"D",function(){return st}),n.d(e,"E",function(){return v}),n.d(e,"b",function(){return mt}),n.d(e,"cb",function(){return gt}),n.d(e,"ob",function(){return zt}),n.d(e,"g",function(){return C}),n.d(e,"h",function(){return pt}),n.d(e,"nb",function(){return O}),n.d(e,"y",function(){return M}),n.d(e,"bb",function(){return It}),n.d(e,"eb",function(){return ht}),n.d(e,"C",function(){return vt}),n.d(e,"kb",function(){return bt}),n.d(e,"T",function(){return Mt}),n.d(e,"R",function(){return Ot}),n.d(e,"f",function(){return Tt}),n.d(e,"Q",function(){return Dt});var i=n("EVdn"),r=n.n(i),a=n("hSUr"),o=n("qfKh"),l=n("V61T"),c=n("m8qQ"),u=n("YV/N"),d=o.b.require,f=zmail.Utils.DOM,s=function(){return 1===d("zmPreviewTemplate").currentWorkSpace},m=function(t){var e,n=d("zmInit"),i={};if(t)i=t;else if(s()){i=d("zmWindow").getListingDetObj()}else i=n.getListingDetObj();return"-1"!==(e=i.fId||i.label||i.view||i.flag)&&"1"!==e&&"2"!==e&&"3"!==e||(e="flag"),e},g=function(){return[zmail.folId.dId,zmail.folId.teId,zmail.folId.sId,zmail.folId.tId,zmail.folId.oId,zmail.folId.spId]},z=function(t){var e=g();return!(s()||!Object(l.H)(t)||-1!==e.indexOf(t))},p=function(t){try{var e=d("zmfolAction"),n=zmail.folTree;if(!t&&!s()&&!d("zmTab").currentTab.indexOf("zm_srch"))return 0;if(t||(t=m()),z(t)||-1!==g().indexOf(t)){var i=e.getParentFolderId(t);return i?n[1][i].CH[t].CV:n[0][t].CV}return zmail.folviewThread}catch(t){return Object(c.a)(t),zmail.folviewThread}},I=function(t){var e,n,i,a,o,l,c,u,m,g,z,I=d("zmList"),h=d("zmPrev"),v=d("zmInit"),b=d("ZMail.lConstants"),C=[],M=[],O={};if(s()){var T="";return T=f.selector("#zmWindowWrapper .SC_pct").not(".SC_pct.SC_Drft").length>1?f.selector("#zmWindowWrapper .SC_Tfcs").children().eq(0).attr("data-mid"):f.selector("#zmWindowWrapper .SC_pct").children().eq(0).attr("data-mid"),C.push(T),[C,M]}(t=t||d("zmTab").currentTab,g=v.getListingDetObj(),O=I.getElemObj(t),"zm_Container"===t||-1!==t.indexOf("zm_srch"))?((e=O.mainElem.find("div."+b.cls.chkBox)).length||f.selector(".SC_Tfcs .zmPHdr",O.prevElem).length||(e=O.mainElem.find("."+b.cls.sel)),e.length?e.each(function(){(u=this.id||f.getAttribute(this,"data-detail")).indexOf("t")||(u=u.substring(1,u.length)),(I.getMailObj(u)||{}).TH&&"lt"===f.getData(this,"ty")?M.push(u):C.push(u)}):""!==f.getAttribute(O.prevElem,"data-mid")&&((e=f.getAttribute(f.element(O.prevElem).find(".SC_Tfcs .zmPHdr"),"data-mid"))?C.push(e):(u=h.prevDetails(t).msgId)&&C.push(u))):-1!==t.indexOf("zm_tab")?(e=t.indexOf("zm_tabt")?t.substring(6,t.length):zmsuite.getCenter(t)[1].getNodes()[1].$el.find("div.SC_Tfcs").find("div.zmPHdr").attr("data-mid"))&&C.push(e):"zmStreamsApp"===t?C.push(zmsuite.getCenter(t)[1].$el.attr("data-mid")):"zmncenter"===t&&(u=h.prevDetails(t).msgId)&&C.push(u);for(o=M.length,n=0;n<o;n++)if(m=I.getMailObj(M[n]).T,z=I.getListObj(m))for(c=(l=z.MO).length,i=0;i<c;i++)-1!==(a=r.a.inArray(l[i],C))&&C.splice(a,1);return 0!==p()&&"zm_srch1"!==t&&("zm_Container"!==t||g.fId!==zmail.folId.tId&&g.fId!==zmail.folId.sId)||(C=C.concat(M),M=[]),[C,M]},h=function(){var t=I();return!!(t[0].length+t[1].length)},v=function(t,e){if(t)try{var n;return n=(n=ZMail.listing.collection.get(t))&&n.attributes,e?n&&n[e]:n}catch(t){return void Object(c.a)(t)}},b=function(t){var e,n,i=[],r=t.length;for(e=0;e<r;e++)(n=v(t[e])).FD!==zmail.folId.sId&&n.FD!==zmail.folId.dId&&i.push(t[e]);return i},C=function(t){ZMail.listing.collection.clearMapDModels(t)},M=function(t,e,n){return ZMail.listing.collection.getListObj(t,e,n)},O=function(t,e,n){ZMail.listing.collection.setListObj(t,e,n)},T=function(t){var e=0;t=t||[];var n,i=d("zmList");return t.forEach(function(t){n=i.getMailObj(t),e+=n&&n.TC||0}),e},D=function(t,e,n,i){var r;"tIcon"!==(e=e||{}).from&&(t.comments=!0,r=v(t.msgId)||{},t.entityId=t.entityId||r.T||t.msgId,t.groupId=t.groupId||zmail.zuid,t.entityType=1);var a={u:zmail.conPath+"/md.do",t:"POST",fn:n,p:t,ep:e};"function"==typeof i&&(a.efn=i),zmContentCache.fetch(a)},j=function(t){var e=d("zmList"),n=d("zmInit"),i=v(t);if(i&&i.PA){var r=i.PA,o=v(r);if(o&&o.DMID&&delete o.DMID,!s()){if(0!==p()){var l=e.getViewBasedMsgList(i.T,n.getListingDetObj(),!0);if(l.length>0){var c=b(l);r=c.length?c[0]:l[0]}}(o=v(r)||{}).DC&&o.DC>0&&(o.DC-=1),a.f.load("MailActions").then(function(){d("zmmailAct").updateDraftCountInUI(r,"discard_draft",o.DC,"zm_Container")})}}},y=function(t){var e=d("zmPreviewTemplate"),n=t.draftId;t.msgId;if("discard_draft"===t.actionType){var i,r,a=v(n),o=0;a&&a.TH&&(i=a.T,(r=M(i))&&(-1!==(o=r.MO.indexOf(n))&&r.MO.splice(o,1),e.discardMsgPreview(n)),a.FD===zmail.folId.dId&&j(n))}},w=function(t){var e=d("zmList"),n=e.getListObj(t);if(t&&n){var i,r,a,o=n.MO,l=o.length;for(i=0;i<l;i++)(r=e.getMailObj(o[i])).FD===zmail.folId.dId&&((a=r.PA&&e.getMailObj(r.PA))&&!a.DMID&&(a.DMID=o[i]),o.splice(i,1),l--,i--);O(t,"MO",o)}},S=function(){var t,e=d("zmList"),n=[],i=[],r=d("ZMail.lConstants");return e.getElemObj().mainElem.find(".SC_mclst").find("."+r.cls.chkBox).each(function(e,a){a=f.element(a),"t"===(t=a[0].id).charAt(0)?i.push(t.substr(1,t.length-1)):("lt"===a.attr("data-ty")||"th"===a.attr("data-ty")&&!a.parent().prev().hasClass(r.cls.chkBox))&&n.push(t)}),[n,i]},_=function(){var t=S();return t[0].length+T(t[1])},A=function(t){var e,n,i,r=[];n=t.length;var a=d("zmList");for(e=0;e<n;e++)(i=a.getMailObj(t[e]))&&r.push(i.T);return r},L=function(t,e){var n=zmail.mailContainer;if(n){var i=n.getObject(t);i?n.rememberAsRecent(i.id):n.addObject({id:t,data:e})}},H=function(t,e){var n,i,a=d("zmPrev"),o=d("zmPreviewTemplate"),l=e.thId,c=[];if(t.tdata&&l){if(zmUtil.isInlineCompose()&&w(l),a.prevDetails("zm_Container").msgId){var u=a.prevDetails("zm_Container").msgId;v(u,"T")===l&&(n=!0,c=o.getMissingMailList(l,"P"))}zmsuite.isWorkspaceAvailable("zm_tabt"+l)&&(i=!0,c=o.getMissingMailList(l,"T")),n&&r.a.publish("/mail/updatemailview",[{list:c,opentype:4===zmail.mailOpt.isPopup?4:0,mode:"sdraft"}]),i&&r.a.publish("/mail/updatemailview",[{list:c,opentype:2,mode:"sdraft"}])}},P=function(t){return v(t,"FD")===zmail.folId.dId},F=function(t){var e=d("zmInit");if(t.error){var n=t.accId||t.AID;if(zmail.accId===n){var i=e.getListingDetObj();if(zmsuite.isWorkspaceAvailable("zm_Container")&&zmail.folId.oId===i.fId?(f.clearHTML(zmail.mailCenter.listElem),C(),e.setListingDetObj({}),e.foldView({folId:zmail.folId.oId}),r.a.publish("mail/updateOutBox",t)):ZMail.utils.updateCount({fId:zmail.folId.oId,mode:"dec"}),"true"===t.error){var a=Object(u.b)("d18ef4040270607c10771e542a1b11e6");Object(l.zb)("e",a)}}}},Z=function(t,e){try{var n=zmail.mailLeft.getNodes()[0].getLayer("zmlTreeH").el.find("#"+e);t?n.find(".zmTreeCount").addClass("zmRedClr"):n.find(".zmTreeCount").removeClass("zmRedClr")}catch(t){Object(c.a)(t)}},k=function(t,e){var n,i=d("zmList");t[e].email.accid!==zmail.accId&&(n={actionType:"viewGroupMailEntity",entityId:t[e].email.msgid,entityType:"1",streamsView:"true",groupId:t.gnrl.by,accId:t[e].email.accid}),i.getMailData({msgId:t[e].email.msgid,opentype:2,type:"lt",src:"external",eprm:n})},x=function(t){return v(t,"FD")||null},W=function(){var t,e,n,i=I(),r=i[0],a=i[1];for(n=0,e=r.length;n<e;)(t=v(r[n],"TAG"))&&t.length?n++:(r.splice(n,1),e--);for(n=0,e=a.length;n<e;)(t=v(a[n],"TAG"))&&t.length?n++:(a.splice(n,1),e--);return[r,a]},E=function(t,e){var n,i,a={};if(e)a=zmail.shrTree[0];else{var o,l=zmail.folTree[1],c={};for(o in l)r.a.extend(!0,c,l[o].CH);r.a.extend(!0,a,zmail.folTree[0],c)}for(n in a)if(i=a[n],(e?i.SHID:i.SH)===t)return n},R=function(t,e,n){var i,r,a,o,l,c,u=d("zmPrev"),f="";t&&0===t.indexOf("t")&&(t=t.substring(1));var s=d("zmList");if(a=s.getMailObj(t),e)switch(e){case"preview":if(n)switch(n){case"zm_Container":o=!0;break;case"zm_srch1":l=!0}else o=!0,l=!0;break;case"tab":c=!0}else o=!0,l=!0,c=!0;if(o&&zmsuite.isWorkspaceAvailable("zm_Container")){if(("lt"===(i=u.prevDetails("zm_Container")).type||"th"===i.type)&&i.msgId===t)return!0;var m=i.msgId&&s.getMailObj(i.msgId);if(a&&m&&a.T&&a.T===m.T)return!0}if(l&&zmsuite.isWorkspaceAvailable("zm_srch1")&&("lt"===(r=u.prevDetails("zm_srch1")).type||"th"===r.type)&&r.msgId===t)return!0;if(c){if(f="zm_tab"+t,zmsuite.isWorkspaceAvailable(f))return!0;if(a&&a.TH&&(f="zm_tabt"+a.T,zmsuite.isWorkspaceAvailable(f)))return!0}return!1},V=function(t,e){return R(t,"preview",e)},N=function(t){var e,n,i,r=zmail.folTree[0]||[],a=zmail.folTree[1]||[],o={};for(e in r)o[e]=r[e];for(e in a)for(n in i=a[e].CH||{})o[n]=i[n];return o[t]},B=function(t){var e,n,i=d("zmList"),r=t.fId,a=t.viewId;if(n=(e=M(r,"MO")||M(a,"MO")||[]).length,e.length>0){var o,l,c,u={},f={},s=[];for(o=0;o<n;o++)if((f=v(e[o]))&&f.TH)for(u={fId:r},c=(s=i.getMailSummaryList(u,f.T)).length,l=0;l<c;l++)y({draftId:s[l],actionType:"discard_draft"})}},q=function(t,e){var n=d("zmList").getViewBasedMsgList(t,e,!0);return e.fId===zmail.folId.sId?n[0]:(n=b(n))[0]},U=function(t){return Boolean(v(t))},G=function(t,e){e=e||{};var n=r.a.Deferred(),i=e.reload||!1,a=e.nocache||!1,o=e.params||{};if(t)if(!i&&zmContentCache.isCached(t))n.resolve(zmContentCache.get(t));else{var l={accId:zmail.accId,split:!0,summary:!0},c={};l.msgId=c.msgId=t;var u=v(t,"FD");for(var d in u&&(l.folId=u),o)l[d]=o[d];!i&&a||(c.forceFetch=!0),D(l,c,function(e,i){i=i||{},e=e||{};var r=Object.keys(e).length;0===r||1===r&&e.MSGID?n.reject():n.resolve(zmContentCache.get(t))},function(t){n.reject()})}else n.reject();return n.promise()},J=function(t){if(!s()){var e=v(t);if(e)if(m()===e.FD){var n={action:"delete"};e.TH&&e.FD!==zmail.folId.dId&&e.FD!==zmail.folId.tId&&!e.AR?(n.mailId=[],n.tmailId=[t]):(n.mailId=[t],n.tmailId=[]),zmail.MailAction.Initializer.rdoActions({result:"success"},n)}else zmail.folId.dId===e.FD&&ZMail.utils.updateCount({fId:zmail.folId.dId,mode:"dec",state:"read"})}},K=function(t){d("zmInit").foldView({folId:t,reInitialize:!0}),zmail.mailLeft.selRow(t,"zmlTreeH",!0),ZMail.topbar.header.renovate()},X=function(t){if(t)return 1===(t=f.element(t)).length&&t.hasClass("SC_simg")&&(t.children().removeClass("SC_ldot"),t.children().each(function(t,e){"none"!==f.getStyle(e,"display")&&f.addClass(e,"SC_ldot")})),t},Q=function(t){return zmail.labInfo[t]?zmail.labInfo[t].dispName:""},Y=function(t){var e=zmText.get("mail").listing.flagmenu;return{1:e.infoflag,2:e.important,3:e.followup}[t]||""},$=function(t,e){a.f.load("mail").then(function(){d("zmRestore").restoreMailApp(t.data,e)})},tt=function(t){a.f.load("mail").then(function(){d("zmRestore").restoreTabs(t)})},et=function(t,e){var n={};if(e=e||{},t.length)return t=t.join(),n.SearchStr=encodeURIComponent(t),n.view="search",e.fId?n.viewfolId=e.fId:(e.flag&&(n.flag=1),e.label&&"-1"!==e.label&&(n.label=e.label),"unread"===e.view&&(n.unreadStatus=1)),n},nt=function(t){try{if(zmail.isRHSEnabled){var e=d("ZMWidgets");e.publish&&(e.publish("mail_preview",ZMWidgets.getMailDetails(t)),r.a.publish("attachment/cancelCallback"))}}catch(t){Object(c.a)(t)}},it=function(){nt()},rt=function(t){var e=v(t,"FD");return!(!e||!Object(l.K)(e,"R"))},at=function(t){try{var e=d("zmfolAction"),n=t.folName;if(!n||!Object.keys(t).length)return!1;var i=d("zmAjq"),r=t.type,a={accId:zmail.accId,mode:"add",fName:n};"subFol"===r&&(a.pfolId=t.parentFolId);i.XHR({u:zmail.conPath+"/folAction.do",t:"POST",fn:function(n,i){"subFol"===r?e.insertNewSubFolder(n,i):e.insertNewFolder(n,i),"function"==typeof t.onSuccess&&t.onSuccess(n,i)},efn:t.onFail,p:a,csr:"s",ep:t.eprm||{}})}catch(t){Object(c.a)(t)}},ot=function(){var t=r.a.Deferred(),e=d("zmComponent");return"1"===d("zmAdHocSettings").getSecuredownload()?a.f.load("securedownload").then(function(){e.securedownload().then(function(e){e.adHocValue&&t.resolve(e)},function(){t.reject()})}):t.resolve({password:""}),t},lt=function(t){if(zmail.folTree[0][t])return zmail.folTree[0][t].FN;var e,n=zmail.folTree[1];for(var i in n)if((e=n[i].CH)[t])return e[t].FN;var r=zmail.shrTree||[];for(var a in r)if(r[a][t])return r[a][t].FN;return""},ct=function(t){var e={};(e={msgId:t.pid,opentype:2,type:"lt",src:"zmncenter",commentuuid:t.commentuuid}).eprm={accId:Object(l.y)(),isSh:!0,groupId:t.gid,shareId:t.shId,thId:t.pid},t.gid!==zmail.zuid&&(e.eprm.shId=t.shId),d("zmList").getMailData(e)},ut=function(t){var e=t.mailId,n=t.onComplete,i={accId:zmail.accId,mode:"moveto",mailId:e,todo:5,fT:0,folderSpec:0};d("zmAjq").XHR({u:zmail.conPath+"/mA.do",t:"POST",fn:n,p:i})},dt=function(){ZMail.listing.collection.reset()},ft=function(t,e,n,i){return ZMail.listing.collection.storeDMap(t,{mapId:e,startIndex:n,overWrite:i})},st=function(t){try{return ZMail.listing.collection.get(t)}catch(t){return Object(c.a)(t),""}},mt=function(t,e){ZMail.listing.collection.add(t)},gt=function(t){return ZMail.listing.collection.clearModel(t)},zt=function(t,e,n){ZMail.listing.collection.get(n).set(t,e)},pt=function(t,e){ZMail.listing.collection.createListObj(t,e)},It=function(t){ZMail.listing.collection.clearMap(t)},ht=function(){ZMail.listing.collection.resetListMap()},vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zm_Container";return ZMail.listing.collection.getViewDetails(t)||{}},bt=function(t,e){e=e||"zm_Container",ZMail.listing.collection.setViewDetails(e,t)},Ct=function(){return ZMail.listing.collection._modelMap},Mt=function(){return!zmail.policyBasedHiddenItems||zmail.policyBasedHiddenItems.isShareFolderEnabled},Ot=function(){try{if(zmail.Settings){var t=zmail.Settings.MailSuite.Settings.Integration;return t.Apps.Collection.getIntegAppConfig(t.Constants.ZOHOPROJECTS).getStatus()}return!1}catch(t){return Object(c.a)(t),!1}},Tt=function(t){return new Promise(function(e,n){var i=_zm.getOfflineEnabledAccounts(t)||[];if(i.length){var r,a,o=i.map(function(t){return r=t+"_mail",a=t+"_attachments",caches.delete(a),localStorage.removeItem(a),idb.delete(r).then(function(){return e()},function(t){Object(c.a)(t),n()})});Promise.all(o).then(function(){return e()},function(){return n()})}else e()})},Dt=!1}}]);