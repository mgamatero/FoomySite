"use strict";var _this=void 0;define([],function(e,i){var s=e("zmail.Core.Namespaces").create("zmail.Settings.Apps.SendMailAs.models"),n=e("zmComponent"),m={};s.isSmimeEnabled="false";var r=$.Deferred(),t=$.Deferred(),a=!1,o=function(){var e=Object.keys(zmail.cmpdata.FROM_LIST),m=[],i={mode:"isSmimeEmail",emailAddresses:e};return zmAjq.XHR({u:zmail.conPath+"/SMimeAction.do",p:i,fn:function(i){a=!0;var n={};e.forEach(function(e){(n={}).emailId=e,n.isSmimeEnabled=i[e],m.push(n)}),t.resolve(m),s.smimeEmailList=m},isXHRNeeded:!1}),t.promise()};s.getConfirmEmailList=function(e){return o()};var d,l=function(){s.isSmimeEnabled="false",r.resolve()};return m.isSmimeEnabled=function(){return r.promise()},m.getSmimeEnalbedAddress=function(){return o()},m.getConfirmedEmailList=function(){var i=$.Deferred(),e=zmail.Settings.Apps.SendMailAs.models;return e.hasOwnProperty("API")?i.resolve(e.API.getConfirmedList()):a?i.resolve(s.smimeEmailList):(m.getSmimeEnalbedAddress().done(function(e){i.resolve(e)}),i.promise())},n.smimeUtil=m,d=_this,zmAjq.XHR({u:zmail.conPath+"/SMimeAction.do",p:{mode:"isSmimeEnabled"},fn:function(e){"true"===e.enabled&&(s.isSmimeEnabled=e.enabled,o(),r.resolve(e))}.bind(d),efn:l,isXHRNeeded:!1}),n});