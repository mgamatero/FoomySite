var PB=PB||{};PB.parts=location.hostname.split("."),PB.subdomain=PB.parts.shift(),PB.uplvldom=PB.parts.join("."),PB.server=PB.uplvldom.includes("tsi")?"https://phonebridge.csez.zohocorpin.com":"https://phonebridge."+PB.uplvldom,PB.serviceData=void 0,PB.jsurl="",PB.integEnabled=!1;var tagNeededProducts=["ZohoCRM","ZohoRecruit","ZohoSupport","SDPOnDemand"];function initPBSDK(){return new Promise(function(e,n){var t=document.createElement("script");t.src=PB.jsurl+"/pbone.js",document.head.appendChild(t),t.onload=function(){ZPB.initPlatform(PB.serviceData),e()}})}function attachZTIListner(){window.ZTI&&(ZTI.handleCrossProductMessage=function(e){if(e.action&&"reloadSDK"===e.action){var n=document.getElementById("zpbsdk");e.hasOwnProperty("integValue")&&(PB.integEnabled=e.integValue),void 0!=PB.serviceData.doNotDisturb&&!PB.serviceData.doNotDisturb&&n?n.src=n.src:initPBSDK()}else if(e.hasOwnProperty("CTDConfiguration"))for(var t=document.getElementsByTagName("zpb-phone"),i=0;i<t.length;i++)e.CTDConfiguration?t[i].component.setData("isCTD",!0):t[i].component.setData("isCTD",!1)})}function registerCustomTag(){Lyte.Component.register("zpb-phone",{_template:'<template tag-name="zpb-phone"><a class="pH2" title="Call" onclick="{{action(\'telcall\',event,number)}}"></a>\t</template>\n<style>.telIcon{ display: inline-block; width: 16px;height: 19px;background: transparent url(//img.zohostatic.com/phonebridge/V59/images/svgicons.svg) no-repeat -160px -471px;margin-right: 6px;cursor: pointer;}</style>',_dynamicNodes:[{type:"attr",position:[0]}],_observedAttributes:["number","lyteUnbound"],data:function(){return{number:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1})}},actions:{telcall:function(e,n){e.stopPropagation(),window.location.href="tel:"+n}}})}PB.init=function(e){attachZTIListner(),PB.serviceData=e,void 0!=e.pbDomain&&""!=e.pbDomain&&(PB.server=e.pbDomain),PB.pbxhr=new XMLHttpRequest,PB.pbxhr.open("GET",PB.server+"/phonebridge/integration/integrationREST?serviceName="+e.serviceName+"&serviceID="+e.serviceId,!0),PB.pbxhr.withCredentials=!0,PB.pbxhr.onreadystatechange=PB.ready,PB.pbxhr.send(null)},PB.ready=function(){if(this.readyState===this.DONE){var e=PB.pbxhr.response;if("true"===e||"syncuser"==e)PB.integEnabled=!0,initPBSDK().then(function(){window.callbackZPB&&callbackZPB()});else if(tagNeededProducts.includes(PB.serviceData.serviceName))if(window.Lyte)registerCustomTag();else{var n=document.createElement("script");n.src=wmsUserConfig.phonebridgejsurl.substring(0,wmsUserConfig.phonebridgejsurl.lastIndexOf("/"))+"/lyte-parent-dom.js",n.type="text/javascript",n.onload=function(){registerCustomTag()},document.head.appendChild(n)}}},PB.loadSetup=function(e,n,t){if("undefined"!=typeof ZPB)return ZPB.loadSetup(e,n,t);initPBSDK().then(function(){return ZPB.loadSetup(e,n,t)})},PB.isIntegrationEnabled=function(){return PB.integEnabled},PB.ZPBconfigJson="undefined"!=typeof WebMessanger&&WebMessanger.getPhoneBridgeConfig(),PB.ZPBconfigJson&&PB.ZPBconfigJson.serviceId&&(PB.jsurl=wmsUserConfig.phonebridgejsurl.substring(0,wmsUserConfig.phonebridgejsurl.lastIndexOf("/")),PB.init(PB.ZPBconfigJson)),"undefined"!=typeof WebMessanger&&null!=WebMessanger.getPhoneBridgeContainer()&&(WebMessanger.getPhoneBridgeContainer().style.visibility="hidden"),window.callbackZPB&&callbackZPB(),PB.enableSMS=function(e){PB.loadSetup(0,"",e)};