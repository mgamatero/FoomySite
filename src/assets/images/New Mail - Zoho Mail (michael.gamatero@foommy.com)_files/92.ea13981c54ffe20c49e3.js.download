(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{"2Z7q":function(e,t,i){"use strict";i.d(t,"d",function(){return m});var a=i("orEe");i.d(t,"a",function(){return a.LHSApps}),i.d(t,"f",function(){return a.outerWrapper}),i.d(t,"c",function(){return a.defaultAppLogo}),i.d(t,"b",function(){return a.customAppLogo});var s=i("FmIy"),n=i("E582"),r=i("v73g");i.d(t,"e",function(){return r.a});var o=i("HYDp"),l=i("S1Ht");i.d(t,"h",function(){return l.b}),i.d(t,"g",function(){return l.a});var c=i("qost"),d=i("N6X1"),m=function(){Object(o.a)(),Object(s.b)(),Object(s.a)(),Object(n.a)(),Object(c.a)(),Object(d.a)()}},"3eEl":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("orEe"),o={};o.getDragHelperDom=function(){return s.a.e(Object(n.b)("div",{className:"zmTreeDrop"}))},o.getLeftRowsContainerDom=function(e){var t=s.a.e(Object(n.b)("div",{className:"zmTreeData"}));return e&&e.id&&t.attr("id",e.id),e&&e.style&&t.attr("style",e.style),t},o.getLeftLayerContainerDom=function(e){var t=s.a.e(Object(n.b)("div",{className:"zmTreeBlk"}));return e&&e.id&&t.attr("id",e.id),t},o.getCustomNodeDom=function(e){e=e||{};var t=s.a.e(Object(n.b)("div",{className:"zmStreamsOnBoard zmTreeNode"}));if(e.id&&t.attr("id",e.id),e.title&&t.attr("title",e.title),e.customNodeHtmlTemplate){var i=Array.isArray(e.customNodeHtmlTemplate)?Object(r.getDOM)(e.customNodeHtmlTemplate):e.customNodeHtmlTemplate;t.append(i)}return t},o.getTopLayerDom=function(e){var t=s.a.e(Object(n.b)("div",{className:"zmTreeNode"}));return e&&e.id&&t.attr("id",e.id),e&&e.title&&t.attr("title",e.title),t},o.getCountDom=function(e){var t=s.a.e(Object(n.b)("div",{className:"zmTreeNDWra"})),i=s.a.e(Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"})));return e&&e.title&&i.attr("title",e.title),e.txtNodeClass&&i.addClass(e.txtNodeClass),t.append(i),t},o.listDom=function(e,t){var i,a,r,l,c,d,m,u="",h="",p="",f=e.txtNodeClass;if(e.customNode)i=o.getCustomNodeDom({id:e.id,customNodeHtmlTemplate:e.customNodeHtmlTemplate});else if("1"===t){var b;if(e.count&&e.count>0&&e.id!==zmail.folId.teId&&e.id!==zmail.folId.dId&&!e.notBold&&(u="zmBold"),h=e.count,l=e.hideNode,p=e.rowTitle||e.name,h<0&&(h=0),i=o.getTopLayerDom({id:e.id,title:p}),e.hasChild&&(b=e.expChild?Object(n.b)("i",{className:"msi-barrow"}):Object(n.b)("i",{className:"msi-rarrow"})),(a=o.getCountDom({txtNodeClass:f})).find(".zmTreeText").addClass(u),a.find(".jsZmTreeText").text(e.name),(e.hasChild||e.shared&&"-1"!==e.shared||e.addNewType)&&i.append(b),e.shared&&"-1"!==e.shared){var g=(c="mailsuite",d="sharingDisabled",zmText.get(c,d,m)),z=Object(n.b)("i",{title:zmUtil.isShrFolEnabled()?"":g,className:"msi-share",style:zmUtil.isShrFolEnabled()?"":"opacity:0.3"});i.append(z)}else e.addNewType&&(i.append(Object(n.b)("i",{className:"msi-plus ".concat("SC_thm")})),a.addClass("SC_thm"));i.append(a),h&&0!==parseInt(h)&&i.append(Object(n.b)("span",{className:"zmTreeCount"},h)),l&&i.hide()}else if("2"===t){i=o.getTopLayerDom({id:e.id}),(r=s.a.e(Object(n.b)("i",{className:"msi-uncheck  zmLabelBox"}))).css("background-color",e.color);var v=(a=o.getCountDom({title:e.name})).find(".zmTreeText");v.find(".jsZmTreeText").text(e.name),i.append(r),e.shared&&"-1"!==e.shared&&v.prependDOM(Object(n.b)("i",{className:"msi-share"})),v.prepend(r),i.append(a)}else if("3"===t){if(i=o.getTopLayerDom({id:e.id}),e.accessText){var C=s.a.e(Object(n.b)("span",{className:"zmSFolPer"}));C.text(e.accessText),i.append(C),C.attr("title",e.sharedFolderToolTip)}var O=s.a.e(Object(n.b)("div",{className:"zmTreeCount"}));(a=o.getCountDom({title:e.name})).find(".jsZmTreeText").text(e.name);var y=s.a.e(Object(n.b)("img",null));y.attr("src",zmResource.get("image","SC-Photo.png")),O.append(y),e.dispName&&y.attr("title",e.dispName),zmail.ContactBook.fetchProcess.done(function(){zmail.ContactBook.get({zuid:e.OZUID,type:"org"}).done(function(e){if(e.length>0){var t=e[0].attrs;y.attr("src",t.photo)}})}),e.entityClass&&a.find(".zmTreeText").prependDOM(Object(n.b)("i",{className:e.entityClass})),i.append(a),i.append(O)}else"4"===t?((i=o.getTopLayerDom({id:e.id})).appendDOM(Object(n.b)("i",{className:"msi-workspace"})),(a=o.getCountDom({title:e.name})).find(".jsZmTreeText").text(e.name),i.append(a)):"5"===t?(i=o.getTopLayerDom({id:e.id}),"1"===e.check&&i.addClass("zmCalCheck"),(r=s.a.e(Object(n.b)("i",{className:"msi-tick"}))).css("color",e.color),a=o.getCountDom({title:e.name}),s()(a.find(".jsZmTreeText")).text(e.name),s()(a).append(r),i.append(a)):"6"===t&&(i=e.hasChild||e.addNewType?o.listDom(e,"1"):o.listDom(e,"5"));return i}},"4ji5":function(e,t,i){"use strict";i.d(t,"a",function(){return m});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=function(e){return s()(e.target||e.currentTarget).closest(this.selector.layer).attr("id")},o=function(){return this.__instance.layerArr.map(function(e){return e.id})},l=function(){var e=zmAdHocSettings.getAllAppsLeftOrder()[this.appKey]||o.apply(this);return"string"==typeof(e=function(e){var t=o.apply(this).filter(function(t){return-1===e.indexOf(t)})||[];return e.concat(t)}.apply(this,[e]))?e.split(","):e},c=function(){var e=this.leftOrder,t=this.__instance.layerArr,i=this.__instance.layerArr.length,a=e.indexOf(this.draggedLayerId),s=t.splice(a,1)[0];e.splice(a,1);var n=e.indexOf(this.curId);n=(n="after"===this.direction?n+1:n)>=i?i-1:n,e.splice(n,0,this.draggedLayerId),s&&t.splice(n,0,s),"m"===zmState.leftStateInfo.appsKeyMap[this.appKey]&&(zmAdHocSettings.setLeftOrder(e.join(",")),zmail.leftOrder=e),function(){var e=zmAdHocSettings.getAllAppsLeftOrder();e[this.appKey]=this.leftOrder,zmAdHocSettings.setAllAppsLeftOrder(e)}.apply(this)},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),this.__instance=t.__instance,this.appKey=t.appKey,this.$el=s()(t.$el),this.$dragHelper=this.getDragHelperDom(),this.$dragHelper.hide(),this.idNameMap=t.idNameMap||{},this.$dragImage=this.getDragImageDom(),this.layerStateInfo=this.layerStateInfo||{},this.selector=t.selector||{left:".zmTreeWrapper",header:".zmTreeTitle",headerText:".zmTreeText",list:".zmTreeData",layer:".zmTreeBlk"},this.leftOrder=l.apply(this)}return babelHelpers.createClass(e,[{key:"removeDragImages",value:function(){return this.$dragImage.remove(),this}},{key:"removeHelpers",value:function(){return this.$dragHelper.hide(),this.$dragHelper.remove(),this}},{key:"removeDragClass",value:function(){return this.$el.removeClass("zmTreeOrderOn"),this.IEBrowser&&this.$el.find("#".concat(this.curId)).find(".zmTreeTitle").removeClass("msi-drag"),this}},{key:"restoreDraggedHeader",value:function(){return this.draggedLayerId&&this.$el.find("#".concat(this.draggedLayerId)).find(this.selector.header).show(),this}},{key:"clearStateData",value:function(){return this.layerStateInfo={},this.draggedLayerId="",this.draggedLayerName="",this}},{key:"restoreLayers",value:function(){var e=this.selector.list;for(var t in this.layerStateInfo)this.layerStateInfo[t]&&this.$el.find("#".concat(t)).find(e).show();return this}},{key:"restore",value:function(){this.removeHelpers().removeDragImages().removeDragClass().restoreDraggedHeader().restoreLayers().clearStateData()}},{key:"getDragHelperDom",value:function(){return s()(Object(n.b)("div",{className:"zmTreeDrop"}))}},{key:"getDragImageDom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LayerName";return s()(Object(n.b)("div",{className:"zmTreeTitle zmDragHelper"},Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"},e))))}},{key:"setDragImageText",value:function(e){this.$dragImage&&this.$dragImage.find(this.selector.headerText).text(e)}},{key:"setStateInfo",value:function(){var e=this;return this.$el.find(e.selector.list).each(function(t){var i=s()(this).closest(e.selector.layer).attr("id");i&&(e.layerStateInfo[i]=e.layerStateInfo[i]||s()(this).is(":visible"))}),this}},{key:"hideList",value:function(){return this.$el.find(this.selector.list).hide(),this}},{key:"addDragClass",value:function(){return this.$el.addClass("zmTreeOrderOn"),this}},{key:"dragStartHandler",value:function(e){this.draggedLayerId=this.curId=r.apply(this,[e])||this.draggedLayerId,this.draggedLayerName=s()(e.currentTarget).closest(this.selector.header).find(this.selector.headerText).text();var t=e.originalEvent.dataTransfer;t.effectAllowed="move";var i,a=this.idNameMap[this.draggedLayerId];t.setDragImage?(t.setData("draggedLayerId",this.draggedLayerId),t.setData("text/plain",a),this.setDragImageText(a),s()(document.body).append(this.$dragImage),t.setDragImage(this.$dragImage[0],5,5)):((i=s()(e.target)).removeClass("msi-drag"),i.addClass("zmDragHelperIE"),setTimeout(function(){i.removeClass("zmDragHelperIE"),i.addClass("msi-drag")},0),this.IEBrowser=!0),setTimeout(function(){this.setStateInfo().hideList().addDragClass(),s()(document.body).has(this.$dragHelper).length||this.bindDragNDropEvents(!0),this.$el.find("#".concat(this.draggedLayerId)).find(this.selector.header).hide(),this.$el.find("#".concat(this.draggedLayerId)).after(this.$dragHelper),this.$dragHelper.show(),this.layerPositionToDragHelper=this.draggedLayerId}.bind(this))}},{key:"dragOverHandler",value:function(e){e.preventDefault();var t=s()(e.target||e.currentTarget);if(this.draggedLayerId){var i=t.closest(this.selector.layer);i=i[0]?i:s()("#".concat(this.curId)),this.curId=i.attr("id")||this.curId;var a=i[0].getBoundingClientRect();this.direction=a.top+a.height/2>e.originalEvent.y?"before":"after",function(){var e=this.$el,t=this.curId,i=this.draggedLayerId,a=this.$dragHelper,s=t&&e.find("#".concat(t));return"before"===this.direction&&t!==i?s.before(a):s&&s.next().attr("id")===i?e.find("#".concat(i)).after(a):s.after(a),a.show(),this}.apply(this)}return!1}},{key:"dragEndHandler",value:function(e){this.layerPositionToDragHelper="",this.restore()}},{key:"dropHandler",value:function(e){return this.draggedLayerId&&(this.curId=r.apply(this,[e])||this.curId,this.curId&&this.curId!==this.draggedLayerId&&(c.apply(this),"after"===this.direction?s()("#".concat(this.curId)).after(s()("#".concat(this.draggedLayerId))):s()("#".concat(this.curId)).before(s()("#".concat(this.draggedLayerId))),this.layerPositionToDragHelper=""),this.restore()),!1}},{key:"getEvents",value:function(){return[{name:"dragstart",handler:this.dragStartHandler.bind(this)},{name:"dragover",handler:this.dragOverHandler.bind(this)},{name:"dragend",handler:this.dragEndHandler.bind(this)},{name:"drop",handler:this.dropHandler.bind(this)}]}},{key:"bindDragNDropEvents",value:function(e){var t=this.$el,i=this.$dragHelper,a=this.$el.find(this.selector.header);a.attr("draggable","true"),this.getEvents().forEach(function(s){e?i.off(s.name).on(s.name,s.handler):(a.off(s.name).on(s.name,s.handler),i.off(s.name).on(s.name,s.handler),t.off(s.name).on(s.name,s.handler))})}},{key:"unbindDragNDropEvents",value:function(){var e=this.$el,t=this.$dragHelper,i=this.$el.find(this.selector.header);i.removeAttr("draggable"),this.getEvents().forEach(function(a){i.off(a.name),t.off(a.name),e.off(a.name)})}}]),e}(),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new d(e);return t.bindDragNDropEvents(),t}},"6l5i":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("Nw99"),s=i("D/I7"),n=i("wTXI"),r=i("oLIc"),o=i("9ewF"),l={},c={};l.listItemCollection=a.b,l.currentList=c,l.addCollection=function(e,t,i){c[t]&&(c[t].getMetaInfo("container").remove(),c[t].reset({flushMetaInfo:!0})),"list"===e?c[t]=new a.b({comparator:"seq"}):"tag"===e?c[t]=new o.a({comparator:"seq"}):"folder"===e?c[t]=new s.a({comparator:"seq"}):"sharedFolder"===e?c[t]=new r.a({comparator:"seq"}):"countList"===e&&(c[t]=new n.a({comparator:"seq"})),c[t].add(i.list),c[t].render(i),c[t].setMetaInfo("id",t),c[t].on("change",function(e){e.update()}),c[t].on("remove",function(e){e.remove();var t=e.attributes.parent;if(t&&"-1"!==t){var i=e._collection.query().where("id","is",t).select()[0],a=i.attributes.child.indexOf(e.id);a>-1&&i.attributes.child.splice(a,1),0===i.attributes.child.length&&i.$el.find("i").remove()}e._collection.updateSeqCount(e.attributes.seq,-1,e.id)}),c[t].on("add",function(e){c[t].insertItem(e),e.attributes.isVisible&&$(e.$el).show(),e._collection.updateSeqCount(e.attributes.seq,1,e.id),e._collection.sort({comparator:"seq"})})},l.removeCollection=function(e){c[e].destroy()},l.getModel=function(e,t){return c[e]?c[e].get(t):{}},l.updateCollection=function(e,t,i){"update"===t?c[e].get(i.id).set(i):"remove"===t?c[e].remove(i.id):"add"===t&&c[e].add(i)},l.updateSelection=function(e,t){if(l.currentSelected.collectionId){var i=l.getModel(l.currentSelected.collectionId,l.currentSelected.modelId);i&&i.set("isSelected",!1)}var a=l.getModel(e,t);if(!a)return!1;a.set("isSelected",!0),l.currentSelected={collectionId:e,modelId:t}},l.currentSelected={},l.ListItem=a.a},"9ewF":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("Nw99"),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setTextTitle",value:function(){s()(this.$el).find(".jsZmTreeText").text(this.attributes.text),s()(this.$el).attr("title",this.attributes.title)}},{key:"updateColor",value:function(){s()(this.$el).find(".zmLabelBox").css("background-color",this.attributes.color)}},{key:"update",value:function(){this.changed.text&&this.setTextTitle(),this.changed.color&&this.updateColor(),void 0!==this.changed.isSelected&&this.updateSelection()}},{key:"template",value:function(){return Object(n.b)("div",{className:"zmTreeNode"},Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("i",{className:"msi-uncheck zmLabelBox"}),Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"}))))}},{key:"setZMSData",value:function(){var e={rowInfo:{layerId:"zmllabelH",type:"list"},rowObject:{}};e.rowObject[this.id]={color:this.attributes.color,dispName:this.attributes.text,fav:"true",id:this.attributes.id,label:this.attributes.text,se:this.attributes.seq,shId:"-1"},s()(this.$el).data("zmsData",e)}},{key:"getDefaults",value:function(){return{id:"",color:"",text:"",title:"",seq:0,visible:!0,isSelected:!1}}}]),t}(r.a),l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return o}},{key:"setValues",value:function(e){e.setZMSData(),e.setTextTitle(),e.updateColor()}},{key:"render",value:function(e){var t=this;this.initContainer(e);var i=this.getMetaInfo("listContainer");this.forEach(function(e){"header"!==e.id&&t.renderElem(e,i)})}}]),t}(r.b)},CZP8:function(e,t,i){"use strict";i.r(t);var a=i("orEe"),s=i("2Z7q"),n=i("Hm9R"),r=i("Ie37"),o=i("xLM4"),l=i("yKbc"),c=i("W6MD"),d=i("3eEl"),m=i("6l5i"),u=i("Ftsq");window.zmInit={bindWindowEvents:n.a,setHeight:n.g,zmsubStr:n.h,notificationBand:n.d,serverDown:n.e,serverUp:n.f,handleServiceMessage:n.c,nn6:document.getElementById&&!document.all,topelement:document.getElementById&&!document.all?"HTML":"BODY",cliHgt:0,cliWid:0,hashObj:{},core:n.b},window.zmCenterWrapper=a.CenterWrapper,window.zmTab=a.Tab,a.Tab.currentTab=a.Tab.getCurrentTab(),window.zmCustomization={getAppBarWidth:o.b,initLHSResizeHandlers:o.d,initAppBarToggle:o.c,appBarToggleState:o.a},window.zmCenterListing={create:r.a,getMappedClass:r.b,registerListItemTemplate:r.c},window.zmLeft=l.a,window.ZMLayer=c.a,c.a.views=d.a,window.zmLHS=m.a,window.zmsuite={showApp:a.setCurrentAndShowApp,showExistingApp:a.showExistingApp,setWorkSpace:a.setWorkSpace,createWorkspace:a.createWorkspaceInfo,showWorkSpace:a.constructAndShowApp,isWorkspaceAvailable:a.isWorkspaceAvailable,closeWorkspace:a.closeWorkspace,getLeftBandElements:u.d,getChatBandElements:u.c,getAppObj:a.getAppObj,getLeft:a.getLeft,getCenter:a.getCenter,getCenterOuter:a.getCenterOuter,getRight:a.getRight,renderCenter:a.renderCenter,renderWorkSpace:a.renderCenter,getWorkSpace:a.getWorkSpace,isMaxLimitReached:a.Tab.isMaxLimitReached,deleteAppInfo:a.deleteAppInfo,getCurrentAppObjId:a.getCurrentAppObjId,setAppInfo:a.setAppInfo,getAppLeft:a.getAppLeft,createNewDialog:u.b,showContextMenu:u.j,showMenu:u.k,showDragHandler:a.showDragHandler,removeDragHandler:a.removeDragHandler,loadStreams:u.h,loadAttachView:u.g,resetWorkspace:a.resetWorkspace,init:u.f,setFaqKey:u.i,getTabDOM:u.e,getAppRouter:a.getAppRouter,setAppRouter:a.setAppRouter,createAppRouter:a.createAppRouter,addLoadingBand:u.a},window.zmAppSuite={init:s.d,loadNewFeedback:s.e,setTabStats:s.h,setLoadingTime:s.g,LHSApps:s.a,outerWrapper:s.f,defaultAppLogo:s.c,customAppLogo:s.b}},"D/I7":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("Nw99"),o="msi-rarrow",l="msi-barrow",c=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){return{id:"",text:"",title:"",parent:"",child:[],state:"",seq:0,count:"",childVisible:!0,isVisible:!0,isShared:!1,showIndication:"",isSelected:!1}}},{key:"hide",value:function(){s()(this.$el).hide(),this.isVisible=!1}},{key:"show",value:function(){s()(this.$el).show(),this.isVisible=!0}},{key:"setTextTitle",value:function(){s()(this.$el).find(".jsZmTreeText").text(this.attributes.text),s()(this.$el).attr("title",this.attributes.text)}},{key:"updateChildVisiblity",value:function(){if(!this.childCont)return 0;this.childCont.css("display",this.attributes.childVisible?"block":"none"),this.attributes.childVisible?this.$el.find("i").removeClass(o).addClass(l):this.$el.find("i").removeClass(l).addClass(o)}},{key:"updateChildProp",value:function(){this.attributes.childVisible=!this.attributes.childVisible,this.updateChildVisiblity()}},{key:"toggleElem",value:function(){this.attributes.isVisible=!this.attributes.isVisible,this.$el.css("display",this.attributes.isVisible?"block":"none")}},{key:"updateParent",value:function(e){if("-1"===e)return!1}},{key:"updateSelection",value:function(){!0===this.attributes.isSelected?this.$el.addClass("zmCurTree"):this.$el.removeClass("zmCurTree")}},{key:"update",value:function(){this.changed&&((this.changed.text||this.changed.title)&&this.setTextTitle(),void 0!==this.changed.count&&this.updateCount(),this.changed.childVisible&&this.updateChildVisiblity(),this.changed.isVisible&&this.toggleElem(),this.changed.parent&&this.updateParent(),void 0!==this.changed.isSelected&&this.updateSelection())}},{key:"template",value:function(){var e;if(this.attributes.child.length){var t=l;!1===this.attributes.childVisible&&(t=o),e=Object(n.b)("i",{className:t})}var i=String(this.attributes.id);return Object(n.b)("div",{id:i,className:"zmTreeNode"},e,Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"}))),Object(n.b)("span",{className:"zmTreeCount"}))}},{key:"makeBold",value:function(){s()(this.$el).find(".zmTreTxt").addClass("zmBold")}},{key:"removeBold",value:function(){s()(this.$el).find(".zmTreTxt").removeClass("zmBold")}},{key:"updateCount",value:function(){this.attributes.count>0?s()(this.$el).find(".zmTreeCount").text(this.attributes.count):s()(this.$el).find(".zmTreeCount").text(""),"read"===this.attributes.state?this.removeBold():this.makeBold(),this.attributes.showIndication&&s()(this.$el).find(".zmTreeCount").addClass("SC_new")}},{key:"removeNewCountUpdate",value:function(e){s()(e).find(".zmTreTxt").removeClass("SC_new")}}]),t}(r.a),d=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return c}},{key:"parentContainerTemplate",value:function(e){return Object(n.b)("div",{className:"jsSubTreCont zmSubTreeData",style:{display:e?"block":"none"}})}},{key:"constructParentContainer",value:function(e){e.childCont=s()(this.parentContainerTemplate(e.attributes.childVisible)),e.childCont.insertAfter(e.$el)}},{key:"initValues",value:function(e){var t=s()(e.template());e.$el=t,e.attributes.child.length>0&&s()(t).append(this.constructParentContainer(e)),"-1"!==e.attributes.parent&&s()(t).css("padding-left","27px"),!e.attributes.isPrimary&&this.get("more")&&!1===this.get("more").attributes.showAll&&s()(t).hide(),this.setValues(e),e.updateCount()}},{key:"renderElem",value:function(e,t,i){this.initValues(e),"update"===i?s()(e.$el).insertAfter(t):s()(t).append(e.$el),e.attributes.child.length>0&&e.updateChildVisiblity()}},{key:"insertItem",value:function(e){var t;if(this.initValues(e),"-1"===e.attributes.parent)if(this.get("more")&&this.get("more").attributes)t=this.get("more").$el,s()(e.$el).insertBefore(t);else if(e.attributes.seq>1)(t=this.query().where("seq","is",e.attributes.seq-1).and().where("parent","is","-1").select()[0].$el).next().attr("class").includes("jsSubTreCont")&&(t=t.next()),s()(e.$el).insertAfter(t),e.child&&0===e.child.length&&this.constructParentContainer(e);else if(1===e.attributes.seq){var i=this.getMetaInfo("container");s()(i).append(e.$el)}else t=this.query().where("seq","is",e.attributes.seq).select()[0].$el,s()(e.$el).insertBefore(t);else if(e.attributes.seq>1)t=this.query().where("parent","is",e.attributes.parent).and().where("seq","is",e.attributes.seq-1).select()[0].$el,s()(e.$el).insertAfter(t);else if(1===e.attributes.seq){var a=this.query().where("id","is",e.attributes.parent).select()[0];if(0===a.attributes.child.length){this.constructParentContainer(a);var r=Object(n.b)("span",null,Object(n.b)("i",{className:l}));s()(a.$el).prepend(r)}a.attributes.child.push(e.attributes.id),s()(a.childCont).append(e.$el)}else t=this.query().where("parent","is",e.attributes.parent).and().where("seq","is",e.attributes.seq).select()[0].$el,s()(e.$el).insertBefore(t)}},{key:"renderList",value:function(e,t,i){var a=this;e.forEach(function(e){var n=a.get(e);"header"!==n.id&&void 0===n.$el&&"more"!==n.id&&"less"!==n.id&&(a.renderElem(n,t),!1===i&&!1===n.attributes.isPrimary&&"-1"===n.attributes.parent&&s()(n.$el).hide()),n.attributes.child.length>0&&(a.constructParentContainer(n),a.renderList(n.attributes.child,n.childCont,i))})}},{key:"containerClickEvent",value:function(){var e=this;this.getMetaInfo("listContainer").on("click contextmenu",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var i=s()(t.target).closest(".zmTreeNode");e.getMetaInfo("clickCallback")({collection:e,elem:i,event:t})})}},{key:"initShowAndHide",value:function(){this.renderElem(this.get("more"),this.getMetaInfo("listContainer"),"add");var e=this.get("more");e.set("showAll",!1),e.$el.find(".zmTreeText").addClass("SC_thm"),this.setMetaInfo("toggle",e.$el);var t=this;s()(e.$el).on("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),t.get("more").set("showAll",!t.get("more").attributes.showAll),t.get("more").attributes.showAll?(t.query().where("parent","is","-1").select().forEach(function(e){e.show()}),t.get("more").set("text",t.get("less").attributes.title)):(t.query().where("parent","is","-1").and().where("isPrimary","is",!1).select().forEach(function(e){e.hide()}),t.get("more").set("text",t.get("more").attributes.title))})}},{key:"render",value:function(e){this.initContainer(e);var t=this.getMetaInfo("listContainer"),i=this.query().where("parent","is","-1").select();this.renderList(i,t,e.showAll),!1===e.showAll&&this.initShowAndHide()}}]),t}(r.b)},E582:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var a=26,s=40,n=7,r=34,o=11,l=12;var c=function(){var e,t,i,c,d=(t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],_zm.is_ie?{version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:(_zm.is_opera||_zm.is_edge)&&null!==(e=t.match(/\b(OPR|Edge)\/(\d+)/))?{version:e.slice(1).join(" ").replace("OPR ","").replace("Edge ","").replace("Safari ","")}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),{version:i[1]})).version;(_zm.is_opera&&d<a||_zm.is_chrome&&d<s||_zm.isSafari&&d<n||_zm.is_mozilla&&d<r||_zm.is_ie&&d<o||_zm.is_edge&&d<l)&&$.e((c=zmText.get("mailsuite"),zdom("div",{className:"zmMsgBox zmInfoBox"},zdom("span",null,c.banner.message)))).insertDOMBefore($.q(".zmWrapper"))}},FmIy:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return r});var a=function(e,t,i){return zmText.get("mailsuite",e,t,i)},s=".zmWrapper",n=["zmMsgBox","zmFailBox"].join(" "),r=function(){if(zmail.isROMode){var e=zdom("div",{id:"roMode",className:n},zdom("span",null,a("roMode",{productName:zmail.globalI18N.productName})));$.e(e).insertDOMBefore($.q(s))}},o=function(){zmAjq.XHR({u:"userStatus.do",t:"POST",fn:function(e){if("NOT BLOCKED"!==e.blockstatus&&"[]"!==e.blockstatus){var t=JSON.parse(e.blockstatus),i=!1;if(t instanceof Array)t.forEach(function(e){11===e.BlockCategoryInt&&(i=!0)});else try{11===JSON.parse(e.blockStatus)[0].BlockCategoryInt&&(i=!0)}catch(e){i=!1}if(32===t[0].BlockType&&i)return window.location.href=window.location.origin+"/UnblockMe",!1;zmail.postJsDeffered.promise.then(function(){var i,r=(e=t)[0].BlockCategoryInt,o=e[0].Blocktype;if("Blocked"===e[0].BlockStatus&&1===r){var l=a("accountBlock",{companyName:zmail.globalI18N.companyName}),c=a("unblock"),d=a("_clickHere");i=zdom("div",{id:"accountBlock",className:n},zdom("span",null,l,zdom("a",{target:"_blank",href:"/UnblockMe"}," ",d)," ",c)),$.e(i).insertDOMBefore($.q(s))}else if("Blocked"===e[0].BlockStatus&&2===r){var m=a("outgoingPermanent"),u=a("learnmore"),h=a("clickHere"),p=a("outgoingBlock");i=12===o?zdom("div",{id:"OutgoingBlock",className:n},zdom("span",null,m," "," ",zdom("a",{target:"_blank",href:"/UnblockMe"}," ",u))):zdom("div",{id:"OutgoingBlock",className:n},zdom("span",null,p," ",zdom("a",{target:"_blank",href:"/UnblockMe"}," ",h))),$.e(i).insertDOMBefore($.q(s))}else if("Blocked"===e[0].BlockStatus&&4===r){var f=a("clickHere");zmAppLoader.load("zm-settings-core").then(function(){zmail.Settings.Apps.PopAccounts.Util.Util.getZohoAccount().isImapEnabled&&(i=zdom("div",{id:"OutgoingBlock",className:n},zdom("span",null,a("imapBlock")," ",zdom("a",{target:"_blank",href:"/UnblockMe"}," ",f))),$.e(i).insertDOMBefore($.q(s)))})}else if("Blocked"===e[0].BlockStatus&&3===r){var b=a("clickHere");zmAppLoader.load("zm-settings-core").then(function(){zmail.Settings.Apps.PopAccounts.Util.Util.getZohoAccount().isPopEnabled&&(i=zdom("div",{id:"OutgoingBlock",className:n},zdom("span",null,a("popBlock")," ",zdom("a",{target:"_blank",href:"/UnblockMe"}," ",b))),$.e(i).insertDOMBefore($.q(s)))})}})}},efn:function(e){if(e)return!1},p:{mode:"blockstatus"},csr:"s"})}},Ftsq:function(e,t,i){"use strict";i.d(t,"d",function(){return Z}),i.d(t,"c",function(){return G}),i.d(t,"b",function(){return H}),i.d(t,"j",function(){return B}),i.d(t,"k",function(){return K}),i.d(t,"h",function(){return N}),i.d(t,"g",function(){return D}),i.d(t,"f",function(){return W}),i.d(t,"i",function(){return A}),i.d(t,"e",function(){return S}),i.d(t,"a",function(){return j}),i.d(t,"l",function(){return E});var a,s,n,r,o,l=i("EVdn"),c=i.n(l),d=i("jQ7T"),m=i("XnJN"),u=i("sEfC"),h=i.n(u),p=i("orEe"),f=i("2Z7q"),b=i("V61T"),g=i("vr4s"),z=i("Q/Su"),v=i("+sAg"),C=i("xLM4"),O=p.Tab.isMaxLimitReached,y={},T=function(e,t,i){return zmText.get("mailsuite",e,t,i)},A=function(e,t){var i=Object(p.getAppObj)(e);i&&(i.faqKey=t)},S=function(){return c.a.e(o)},j=function(e,t,i){var a,s,n,r;if(i=i||"listing",Object(p.isWorkspaceAvailable)(e)){if(s=(r=Object(p.getAppObj)(e).centerObj).node,"header"===t){if("2"===s)return!1;n=1}else"action"===t?n=0:"list"===t&&("2"===s&&(n=1),n=2);if((a=r.centerArr[0].getNodes()[n].$el).length)return Object(m.a)({container:a[0],type:i,notToSetInnerHTML:!0,addAtFirst:!0})}},k=function(e,t){var i=/(zmThm[A-Z]+[a-z]*)/g,a=function(){if(zmAdHocSettings.getTheme()!==e)return!1;var t,a=_zm.getClassNameForTheme(e),s=c.a.q("body").attr("class");s&&(t=s.match(i)),t&&c.a.q("body").removeClass(t.join(" ")),zmTopBar.setHamBurgerTheme(),c.a.q("body").addClass(a);try{var n=_zm.getThemeNameForTheme(e);zmail.Settings&&zmail.Settings.MailSuite.Settings.General&&(zmail.Settings.MailSuite.Settings.General.UITheme.Setting.set(n),zmail.Settings.AppModel&&zmail.Settings.AppModel.set({theme:n}))}catch(e){}};if(t){var s=_zm.getClassNameForTheme(e);c.a.q("body").addClass(s)}var n="".concat(e+(zmail.isProduction?"-min":""),".css");zmAppLoader.__loadedFiles[zmResource.get("css",n)]?a():zmAppLoader.loadFiles("css",[n]).done(a)},w=function(){if("wp"===zmail.fromService)return e="".concat("theme"+(zmail.isProduction?"min":""),".css"),Promise.all([zmAppLoader.loadFiles("css",[e]).done(function(){zmAppLoader.loadFiles("extcss",zmResource.get("css","theme.css")),c.a.q("body").addClass("zmThm")})]),!1;var e,t=zmAdHocSettings.getTheme();k(t||"theme1",!0),zmAdHocSettings.subscribeThemeChange(function(){k(zmAdHocSettings.getTheme())})},I=function(e){var t=e.id||y[e.name];c.a.q("body").removeClass("font".concat(s)).addClass("font".concat(t)),s=t},L=function(){zmAdHocSettings.getFontValidValues().forEach(function(e,t){y[t+=1]=e,y[e]=t}),zmAdHocSettings.getFont()in y||zmAdHocSettings.setFont(zmAdHocSettings.getFontDefault()),I({name:zmAdHocSettings.getFont()}),zmAdHocSettings.subscribeFontChange(function(){I({name:zmAdHocSettings.getFont()})})},N=function(e){O()||zmAppLoader.load("streamsApp").then(function(){zmail.ContactBook.fetchProcess.then(function(){zmStreamsApp.init(e)})},function(){Object(b.n)("Streams module not loaded")})},D=function(){zmail.accId===Object(b.y)()?Object(p.isWorkspaceAvailable)("attView")?Object(p.constructAndShowApp)("attView"):O()||Object(p.isWorkspaceAvailable)("attView")||zmModules.getAttachViewModule().then(function(e){(0,e.attView)()}):Object(b.zb)("e",T("attViewNotSupported"))},H=function(e){var t=e.action;Object(g.hideMenu)(),"mail"===t?Object(z.i)():"note"===t?Object(g.loadNotes)("popup"):"task"===t?Object(g.loadTask)({action:"addCTask",groupId:zmail.zuid}):"event"===t?zmApp.loadCalendar("/calendar/event"):"contact"===t?zmcontact.showQuickCreate():"cmpdialog"===t?Object(z.e)():"link"===t?Object(g.loadLink)({mode:"create",groupId:zmail.zuid,catid:""}):"smartdialog"===t?Object(b.Y)({eType:"1",type:"tab"}):"streams"===t&&Object(v.n)()},E=function(e){var t,i=e.handler,s=function(){var e=zmText.get("dropMenus"),t={mail:{txt:e.composemail,data:{action:"mail"}},notes:{txt:e.createnote,data:{action:"note"}},task:{txt:e.createtask,data:{action:"task"}},calendar:{txt:e.createevent,data:{action:"event"}},contacts:{txt:e.createcontact,data:{action:"contact"}},bookmarks:{txt:e.createlink,data:{action:"link"}},smartCompose:{txt:e.smartCompose,data:{action:"smartdialog"}},quickCompose:{txt:"Quick Compose",data:{action:"cmpdialog"}}},i=["mail","notes","task","calendar","contacts","bookmarks"].filter(function(e){return zmsuite.lhsAppsAvailable.includes(e)});_zm.isSmartComposeEnabled()&&i.unshift("smartCompose"),zmail.showFeature&&i.push("quickCompose");var a,s;return a={m:"mail",n:"notes",t:"task",l:"bookmarks",c:"calendar",cn:"contacts"}[zmApp.currentApp],s=[],"mail"===a&&i.includes("smartCompose")&&(a="smartCompose"),i.forEach(function(e){a!==e&&s.push(t[e])}),{list:s,clk:H}},n=s(),r={list:n.list,mouseDownClose:!1,onHide:function(){if(t.removeClass("zmNewBtnDdOn"),r.isOpen&&r.mouseDownClose)return r.isOpen=!1,0;r.isOpen=!1,r.mouseDownClose=!1}};r.clk=n.clk,r.ulClass="zm_compul",r.defaultclass=!1,r.parWidth=!0,r.removeBorderValue=!0,r.spanClass="SC_dd wbdr",a=zmsuite.$el.LHSBlock.find(".zmNewBtn"),c.a.e(a).find(".msi-barrow").off("click").on("click",function(){if(r.list=s().list,r.par=c.a.e(a),!0===r.mouseDownClose)return r.mouseDownClose=!1,0;t=r.par,r.mouseDownClose=!1,r.isOpen=!0,r.par.addClass("zmNewBtnDdOn"),zmDropDownMenu.create(r)}).on("mousedown",function(){!0===r.isOpen&&(r.mouseDownClose=!0)}),i&&i.create&&c.a.e(a).find("span").eq(0).off("click").click(h()(i.create,250,!0))},x=function(e){zmail.isAdmin=!1,zmail.bizData=e,zmail.isSuperAdmin=!1,zmail.isCustomAdmin=!1,zmail.bizUrl=e.links;var t=zmail.bizUrl&&zmail.bizUrl.filter(function(e){return"CP"===e.linkType});zmail.bizControlPanelUrl=(t[0]||{}).link,e&&e.info&&(zmail.isAdmin=e.info.isAdmin,zmail.superAdmin=e.info.superAdmin,zmail.isCustomAdmin=e.info.isCustomAdmin,r(e),!e.info.hasOwnProperty("superAdmin")&&e.info.isAdmin&&(zmail.isSuperAdmin=!0))};zmail.fetchPlanDetails=function(){return n||(n=new Promise(function(e,t){r=e}))};var M=function(){zmail.postJsDeffered.promise.then(function(){var e;e=(e=zmail.staticVersion).replace(".","_"),zmAdHocSettings.setTotUIVersion(e),zmAppLoader.load("helpMenuUtil").then(function(){}),zmAppLoader.load("dragNDropUtil").then(function(){var e=c.a.q("#topBar .secContainer");if(e){(new zmail.dndComp.Drop).init(e[0],{onDrop:function(){return!1},onDragOver:function(e,t){return("draggingAtt"===t.id||"attachView"===t.id)&&(zmDragger.hoverOnTabs(c.a.e(e)),{allowDragOver:!0})}})}})})},_=function(){if(o=void 0,zmsuite.topbarInitialized=!1,Object(C.d)(),"true"===zmail.hasCustomLogo&&!0!==zmail.isInternalOrgUser&&!0!==zmail.fromOtherService){var e=p.customAppLogo;c.a.e(e).find("a").attr("href","".concat(zmail.conPath,"/#mail")),c.a.e(e).find("img").attr("src",zmail.logoSrc),zmsuite.$el.LHSBlock.prepend(e),zmsuite.$el.appLogo=e}else if(!0!==zmail.fromOtherService){var t=Object(d.b)("div",{className:"zmAppLNwra"},Object(d.b)("span",{className:"zmAppLogo",id:"zmAppLogo"},Object(d.b)("i",{className:"msi-zohoMail zmDoubleIcon"})),Object(d.b)("span",{className:"zmAppName"},"Mail"));zmsuite.$el.LHSBlock.prepend(t),zmsuite.$el.appLogo=t}zmsuite.customization={appBar:{width:60,isVisible:!1}},window.zmTopBar.init({}),Object(C.c)(),Object(f.d)();var i="en",a="".concat(zmail.urls.zohoWebsiteLink,"/new/help/");if(zmail.urls.whatsNew="".concat(location.protocol,"//").concat(zmail.zohoUrl,"/mail/whats-new.html"),zmail.isFuji&&("ja"===zmail.user.lang&&(i=zmail.user.lang),a="//www.skydesk.jp/".concat(i,"/apps/mail/new/help")),zmail.urls.helpURL=a,!zmail.fromOtherService){zmail.Utils.FeatureUtil.isHidden("FeedbackForm")||zmAppSuite.loadNewFeedback,zmsuite.Initialized=!0,zmsuite.topbarInitialized=!0,zmail.isInternalOrgUser&&!zmail.fromOtherService&&c.a.e(document.body).addClass("zmZC")}M(),w(),zmAdHocSettings.subscribe("settingsloaded",L),zmail.mailsuiteLoadResolver.then(function(){zmAppLoader.load("zmail-inferrer"),zmAppLoader.load("notificationCenter").then(function(){(zmAjq.XHR({u:"/biz/bizApi.do",t:"post",p:{mode:"getUserProfile"},fn:x,csr:"s"}),zmail.fetchPlanDetails()).then(function(e){var t=zmail.isAdmin||zmail.isSuperAdmin||zmail.isCustomAdmin;zmNCenter.Main.init(),t?zmNCenter.bizNotification.load(e):zmNCenter.bizNotification.bizResolve()}),new Promise(function(e,t){zmAjq.XHR({u:"/zm/userSettings.do",t:"POST",fn:function(t){e({curUsage:t.curUsage,docUsage:t.docsUsage,allotedUsage:t.allotedSpace})},p:{mode:"userUsageStatsVO"},csr:"s"})}).then(function(e){zmail.usageDetails=e})})})},B=function(e,t){var i=new zmContextMenu;return i.setMenuObj(t),i.paint(e),zmail.debug&&(window._lastContextMenu=i),i},P=function(e){var t=(e=e||{}).app;t&&t.router&&t.router.activate()},$=function(e,t){var i=(t=t||{}).app;i&&i.router&&i.router.deactivate()},q=function(e){var t=Object(p.getAppObj)(e);t&&(t.router?(t.router.activate(),t.router.update()):Object(p.clearHash)(),t.faqKey&&Object(b.Gb)(t.faqKey),c.a.e(t).triggerHandler("tabFocused"))},R=function(e,t,i){var a,s;a=i,(s=Object(p.getAppObj)(a))&&(s.router&&s.router.deactivate(),c.a.e(s).triggerHandler("tabBlurred")),q(t)},U=function(){q(p.Tab.getCurrentTab())},F=function(e,t){var i,a="",s="";"zm_Contacts"===t?(a="contacts",s="contacts"):"zcal_Container"===t&&(s="calendar"),a&&(i=p.RouteHelper.create(),Object(p.setAppRouter)(t,i),i.initialize({hashKey:a,handler:function(e){Object(b.n)("External app hash url changed",e,a,t,this)}})),s&&(A(t,s),Object(b.Gb)(s))},V=function(){c.a.q("#zm_centerHolder").scrollTop(0).scrollLeft(0)},W=function(){var e=p.outerWrapper;c.a.e(document.body).append(e);var t,i=c.a.e(e).find(".zmWrapper");zmsuite.$el={appBar:i.find(".zmAppsBar"),topBar:i.find(".zmTopBar"),zmBody:e,LHSBlock:i.find(".zmLHSBlk"),lhs:i.find("#zm_lftree"),centerBlock:i.find(".zmCaRBlk"),chatBarDummyDOM:c.a.q(".zmChatBar"),centerHolder:i.find(".zmWorkSpace"),workspaceContainer:i.find(".SCmWra")},zmsuite.outerWrapper=i,t=void 0!==_zm.isSmartComposeEnabled&&_zm.isSmartComposeEnabled()?T("smartCompose"):T("compose");var a=T("offlineStatus"),s=Object(d.b)("fragment",null,Object(d.b)("div",{className:"zmNewBtn zm_compose"},Object(d.b)("span",null,t),Object(d.b)("i",{className:"msi-barrow"})),Object(d.b)("div",{className:"zmTreeWrapper",id:"jsZMLeft"}),Object(d.b)("div",{className:"zmTreeResize",id:"zmTreeResize"}),Object(d.b)("div",{className:"zmAccSwitch"}),_zm.isOfflineEnabled()&&Object(d.b)("div",{className:"zmNWStatus offline"},Object(d.b)("i",{className:"msi-offline"}),Object(d.b)("span",null,a))),n=parseInt(zmAdHocSettings.getLhsResize());zmsuite.$el.lhs.append(s),zmsuite.$el.lhs.css("width",_zm.convertToREM(n)),_(),c.a.subscribe("mailsuite/appOpened",P),c.a.subscribe("mailsuite/appClosed",$),c.a.subscribe("/apps/tabSwitched",R),c.a.subscribe("zm/framework/dialogClosed",U),c.a.subscribe("mailsuite/appCreated",F),c.a.subscribe("mailsuite/center/fixScroll",V)},Z=function(){var e={},t=c.a.q(".zmAppsBar");e.hamburger=t.find(".zmHamburger")[0],zmail.isInternalOrgUser&&!1===zmail.fromOtherService&&(e.hamburger=zmsuite.$el.topBar.find("#zmAppLogo")[0]),e.notification=t.find(".zmBoxNoti")[0];for(var i=t.find(".zmApps li"),a=0;a<i.length;a++){var s=c.a.e(i[a]),n=s.data("name");e[String(n)]=s[0]}return e},G=function(){return{feedback:c.a.q(".jszmChtBndFdbck")[0]}},K=function(){var e;return(e=zmDropDownMenu).show.apply(e,arguments)}},HYDp:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a=function(){var e=zmFrameWork.utils.getOSName();["MacOSX","MacOS"].includes(e)&&$.e(document.body).addClass("zmMacOS")}},Hm9R:function(e,t,i){"use strict";i.d(t,"a",function(){return y}),i.d(t,"g",function(){return O}),i.d(t,"h",function(){return T}),i.d(t,"d",function(){return A}),i.d(t,"e",function(){return S}),i.d(t,"f",function(){return j}),i.d(t,"c",function(){return k}),i.d(t,"b",function(){return I});var a=i("EVdn"),s=i.n(a),n=i("orEe"),r=i("Ftsq"),o=i("w7ec"),l=void 0,c=!1,d=!0,m=s.a.Deferred(),u=null,h=!0,p=null,f=new Promise(function(e){p=e});zmail.mailsuiteLoadResolver=f;var b=function(e){_zm.checkForCRMMailAddonUser(e).done(function(e){window.zmail.isCRMMailAddonUser=e}),_zm.checkForCRMUser(e).done(function(e){window.zmail.isCRMServiceUser=e})},g=function(){var e=window.zmAppLoader,t=e.load("zm-settings-core"),i=e.load("zm-settings-mailsuite-appshell"),a=new Promise(function(e,i){t.then(function(){zmail.Settings.initializeSystem().then(zmail.Settings.Apps.Signature.loadSignatureModule().then(e,i))},function(){window.console.log("Settings Core Module - failed to load")})});return i.then(null,function(){window.console.log("Settings App Shell Module - failed to load")}),a};zmail.Core.Namespaces.create("zmail.Settings"),zmail.Settings.initSettings=g;var z=function(){zmAdHocSettings.setHugeAttOnBoarding("1"),zmAdHocSettings.setWorkdriveInteg("1"),zmAdHocSettings.setSmimeViewState("1"),zmAdHocSettings.setHotKeysOnboarding("1"),zmAdHocSettings.setUndoSendMsg("1"),zmAdHocSettings.setMarketplaceOnBoarding("false")},v=function(){d=!0},C=function(){!function(){zmail.showFeature&&"restore"===zmAdHocSettings.getLPageType()&&s()("#jsRestoreTabs").removeClass("zmHideD");var e=function(e){if(!0===(e=e||{}).trigger)switch(e.hashKey){case"mail":break;case"task":zmApp.showApp("t");break;case"notes":zmModules.notes.getNotesApp();break;case"calendar":zmApp.showApp("c");break;case"contacts":zmApp.showApp("cn");break;case"links":zmApp.showApp("l");break;case"compose":"draft"===e.hashParams[0]?zmUtil.requireComposeModule().done(function(){var t={mode:"draft",msgId:e.hashParams[1],hashKey:!0};zmComp.cmpReply(t)}):!zmail.fromOtherService&&_zm.isSmartComposeEnabled()&&1===e.hashParams.length&&-1!==["6","1","2","3","4"].indexOf(e.hashParams[0])?zmUtil.loadSmartCompose({eType:e.hashParams[0],type:"tab"}):zmUtil.requireComposeModule().done(function(){zmComp.compose()});break;case"stream":zmAppLoader.load("streamsApp");break;case"attachview":Object(r.g)();break;case"notifications":zmAppLoader.load("notificationCenter").then(function(){zmNCenter.bizNotification.bizLoader().then(function(){zmNCenter.tab()})});break;case"reminders":zmail.isPrivilegedUser&&zmAppLoader.load("reminder-component").then(function(){s.a.publish("/reminder/tab/open")});break;case"groups":zmUtil.loadGroupManagement().then(function(){zmModules.getMemberViewModule().then(function(e){var t=e.constructMemberPopup,i=e.resetMemberValues,a=e.addMemberDialog,s=e.memberText,n=e.getUserDetails;zmStreamsApp.GroupManageApp.assignFunction({constructMemberPopup:t,resetMemberValues:i,addMemberDialog:a,memberText:s,getUserDetails:n}),zmStreamsApp.GroupManageApp.init({groupManage:!0})})});break;case"settings":zmail.policyBasedHiddenItems.hasOwnProperty("isSettingsEnabled")&&!zmail.policyBasedHiddenItems.isSettingsEnabled&&(h=!1),h&&zmail.Settings.MailSuite.App.openApp();break;case"search":e.hashParams.length&&zmAppLoader.load("mailSearch").then(function(){zmAppLoader.load("search-impl").then(function(){zmail.Search.setContext(zmail.Search.Models.Contexts.mailSearchContext,{ignoreUsableFilters:!0}),zmail.Search.newSearch({value:decodeURIComponent(e.hashParams[0]||"")},{addShrinkClass:!0,disableSearchBoxFocus:!0})})});break;case"check-crm-account":_zm.checkForCRMUser(!0).done(function(e){window.zmail.isCRMServiceUser=e,e?_zm.succErrMsg("s",zmText.get("mailsuite","crm.accountActive")):_zm.succErrMsg("e",zmText.get("mailsuite","crm.accountInactive"))}).fail(function(){_zm.succErrMsg("e",zmText.get("mailsuite","crm.accountInactive"))});break;case"testrun":3===e.hashParams.length&&zmail.isdevPlatformenabled&&(zmail.zappsTestRun={appId:e.hashParams[0],version:e.hashParams[1],hashkey:e.hashParams[2]})}};s.a.subscribe("mailsuite/hashurl/changed",function(t,i){e(i)}),s.a.subscribe("mailsuite/hashurl/handleinitial",function(){var t=Object(n.decode)();e({hashKey:t.key,hashParams:t.params,trigger:!0})})}(),function(){var e;if(u){if(e=zmAdHocSettings.getLPageType(),u.key||zmail.fromOtherService)s.a.publish("mailsuite/hashurl/handleinitial"),zmail.showFeature&&"restore"===e&&zmTopBar.initRestoreTabs();else if("restore"===e)zmState.setStoredLandingPageData();else if("none"!==e){var t=e.split("-");if("app"===t[0])switch(t[1]){case"mail":break;case"calendar":zmApp.showApp("c");break;case"tasks":zmApp.showApp("t");break;case"notes":zmApp.showApp("n");break;case"contacts":zmApp.showApp("cn");break;case"bookmarks":zmApp.showApp("l");break;case"streams":Object(r.h)()}}u=null}}(),zmail.mailOpt.dtNotify&&1===zmUtil.getDesktopNotificationPermission()&&Notification.requestPermission(),zmAppLoader.load("postLoadFilter"),zmModules.notes.getNotesStickyApp().then(function(e){(0,e.restoreStickyNotes)()}),function(){if("localStorage"in window&&null!==window.localStorage)for(var e=0,t=localStorage.length;e<t;e++){var i=localStorage.key(e),a="".concat(zmail.zuid,"_streamsContent"),s="ZMOffline/".concat(zmail.zuid);if(0===i.indexOf("ZMOffline/")&&i!==s){var n=i.split("/")[1];zmUtil.debugLog("Other user data present. clean up: ".concat(n)),zmUtil.cleanupMailDB(n),zmUtil.removeComposeDB(n)}else-1!==i.indexOf("_streamsContent")&&i!==a&&localStorage.removeItem(i)}}(),zmUtil.getIntegStatus(),zmUtil.loadStreamsLHS(),zmUtil.integStatusFetchProcess.then(function(){zmUtil.toggleChatBar(),b()});var e=zmail.Offline.Utils;_zm.isOfflineLockAvailable()&&e.loadFonts("all"),zmModules.initPostLoadUtil().then(function(e){(0,e.initCopyListener)()})},O=function(){zmInit.cliHgt=s()(zmail.win).height(),zmInit.cliWid=s()(zmail.win).width()},y=function(){var e,t=["(","ht","tp","s://",")|(","ht","tp","://",")"].join(""),i=new RegExp("^(/|".concat(t,").+$"));s()(zmail.win).on("resize",function(){O()}),s()(zmail.win).on("click",function(e){if(!(1===e.which||0===e.button))return!0;var t,a,n,r,o,l=!1,c=e.target||e.srcElement,d=_zm.getLeftClickHandlers();if(!s()(c).closest("[contenteditable=true]").length){for(n in d)t=d[n].attrName,a=zmUtil.regExpEscape(d[n].attrVal),r=new RegExp("^".concat(a,"$")),(o=s()(c).closest(d[n].tagName.toLowerCase())).length&&o[0].hasAttribute(t)&&r.test(o.attr(t))&&(l=!0,d[n].callback&&d[n].callback(o[0]));if(o){var m=o.length&&o[0].hasAttribute("href")&&i.test(o.attr("href"));l?e.preventDefault():(o=s()(c).closest("a"),m&&("wp"===zmail.fromService?(s.a.publish("otherService/openURL",{url:s()(o).attr("href")}),e.preventDefault()):o.attr("rel","noreferrer")))}}}),s()(zmail.win).on("mousedown",function(e){s.a.publish("ZMAIL_MOUSE_DOWN_EVENT",e),zmsuite.hasOwnProperty("preventHideDropdown")||(zmsuite.preventHideDropdown=!1),"n"===zmApp.selectedApp||s.a.q("#hugeOnboard").length||s.a.q("#workOnboard").length||zmsuite.preventHideDropdown||zmUtil.hideMenu(!0)}),e=function(e){var t,i,a,s,n,r,o,l=e&&e.type;if("INPUT"!==(r=(e.target||e.srcElement).nodeName)&&"TEXTAREA"!==r&&(i=(t=e&&e.dataTransfer)&&t.items))for(a=0,n=i.length;a<n;a++)if((s=i[a])&&"text/uri-list"===s.type){e.preventDefault(),"drop"===l&&!t.getData("text/html").length&&t.getData("text/uri-list").length&&(e.preventDefault(),o=t.getData("text/uri-list"),zmUtil.loadLink({mode:"create",link:o}));break}},zmail.win.addEventListener("dragover",e,!1),zmail.win.addEventListener("drop",e,!1)},T=function(e,t){return-1!==e.indexOf(t)&&(e=e.substring(t.length,e.length)),e},A={display:function(e,t){(_zm?_zm.succErrMsg:window.console.log)(e,t.msg)},success:function(e){l.display("s",e)},failure:function(e){l.display("e",e)}},S=function(){c=!0},j=function(e){c||d?(window.console.log('zmInit.serverUp, Going to publish "zmailReconnect" -'.concat(new Date)),c=!1,d=!1,setTimeout(v,5e3),s.a.publish("zmailReconnect",[e])):window.console.log("zmInit.serverUp, Ignoring serverUp --".concat(new Date))},k=function(e){var t;try{t=s.a.parseJSON(e.msg)}catch(e){window.console.error("Improper wms message")}(function(e){if(e&&e.v&&e.app&&"zm"===e.app){if(e.all)return!0;if(e.notzoid&&Array.isArray(e.notzoid))return!(e.notzoid.indexOf([zmail.zoid].join(""))>-1);if(e.zuid&&Array.isArray(e.zuid)&&e.zuid.indexOf(zmail.zuid)>-1)return!0;if(e.zoid&&Array.isArray(e.zoid)&&e.zoid.indexOf([zmail.zoid].join(""))>-1)return!0;if(e.zgid&&Array.isArray(e.zgid))for(var t=0;t<e.zgid.length;t++)if(zmail.ContactBook.isGroup(String(e.zgid[t])))return!0}return!1})(t)&&zmAppLoader.__reloadCacheBustMap().then(function(){zmAppLoader.load("updater",{forceLoad:!0,avoidCache:!0}).done(function(){t.type&&_updater.init([t.type].join(""),t.latVer,t.opts)})})},w=function(){zmail.devMode&&(zmail.debug=!0),zmail.isRebranded=zmail.isRebranded||!1,zmail.rebrandInfo=zmail.rebrandInfo||{},zmail.rebrandInfo.serviceName=zmail.rebrandInfo.serviceName||zmText.get("mailsuite","global.companyName"),zmail.globalI18N={},zmail.globalI18N.companyName=zmail.rebrandInfo.serviceName,zmail.globalI18N.productName=zmText.get("mailsuite","global.productName",{companyName:zmail.globalI18N.companyName}),zmail._isNightModeSeen=zmAdHocSettings.getNightMode(),"string"==typeof zmail.adhocUserSettings&&(zmail.adhocUserSettings=s.a.parseJSON(zmail.adhocUserSettings)),"string"==typeof zmail.adhocAccountSettings&&(zmail.adhocAccountSettings=s.a.parseJSON(zmail.adhocAccountSettings)),zmAdHocSettings.fetchFromObject(zmail.adhocUserSettings,zmail.adhocAccountSettings),delete zmail.adhocUserSettings,delete zmail.adhocAccountSettings,zmsuite.init(),n.Tab.init(),zmail.logoutURL=zmail.logoutURL||"/biz/logout",zmWinTitle.init(),zmWinTitle.updateTitle(),_zm.checkAndSetDarkMode();var e=g();zmail.postJsDeffered.promise.then(babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!==zmAdHocSettings.getOnBoardingPage()||zmail.isRebranded){e.next=4;break}zmAppLoader.load("onBoardingUtil").then(function(){setTimeout(function(){s.a.publish("mailsuite/searchClose"),zmComponent.onBoarding.previousScope=zmComponent.keybindings.getScope();var e=zmComponent.onBoarding.init();document.body.appendChild(e),zmComponent.onBoarding.onBoardingWelcome.bindEvents(),z()},1e3)}),e.next=34;break;case 4:if(!zmail.isMarketPlaceOnboardingSet){e.next=8;break}_zm.is_ie11?zmAppLoader.load("marketplaceOnboarding").then(function(){(new zmComponent.marketplaceOnboarding.onBoarding).init(),z()}):z(),e.next=34;break;case 8:if("0"!==zmAdHocSettings.getHotKeysOnboarding()){e.next=12;break}zmAppLoader.load("hotkeysOnboarding").then(function(){z(),(new zmComponent.hotkeysOnboarding.onBoarding).init()}),e.next=34;break;case 12:if(!zmail.isPrivilegedUser||"1"===zmAdHocSettings.getReminderOnBoarding()){e.next=16;break}zmAppLoader.load("reminder-onboarding").then(function(){zmail.Components.Reminder.Onboarding.init()}),e.next=34;break;case 16:if("0"!==zmAdHocSettings.getSmimeViewState()){e.next=20;break}zmAppLoader.load("smimeOnboarding").then(function(){(new zmComponent.smimeOnboarding.onBoarding).init()}),e.next=34;break;case 20:if(!zmail.isPrivilegedUser||"0"!==zmAdHocSettings.getBookmarksAddonMsg()){e.next=24;break}zmAppLoader.load("bookmarks-extn-onboarding"),e.next=34;break;case 24:if(!zmail.isZMOfflineEnabled||"0"!==zmAdHocSettings.getOfflineOnboarding()||_zm.isOfflineEnabled()||!_zm.isOfflineSupportAvailableInBrowser()){e.next=28;break}zmAppLoader.load("offlineOnboarding").then(function(){(new zmComponent.offlineOnboarding.onBoarding).init()}),e.next=34;break;case 28:if("false"!==zmail.isPaidUser&&!zmail.isInternalOrgUser||"0"!==zmAdHocSettings.getTimeZoneChangeDetect()){e.next=34;break}return e.next=31,i.e(122).then(i.bind(null,"/iUF"));case 31:(0,e.sent.promptTimeZoneChange)();case 34:case"end":return e.stop()}},e)}))),zmail.showFeature&&""===zmAdHocSettings.getPreviousTheme()&&zmAdHocSettings.setPreviousTheme(zmAdHocSettings.getTheme()),zmState.init();var t,a,r=(zmail.isDBLockAvailable=!1,new Promise(function(e,t){_zm.isOfflineEnabled()?zmail.Offline.Utils.getOfflineStatus().then(function(t){zmail.Offline.lockStatus=t,1===t&&(zmail.isDBLockAvailable=!0),e(t)},function(t){zmail.Offline.lockStatus=t,4===t&&window.console.error("Service Worker registration failed"),e(t)}):e(2)}));zmail.workerPromise=r,y(),zmail.staticUrls.docsJS="".concat(zmPath.getCompletePath("default").domain.js,"/personal/").concat(zmail.docsStaticVersion,"/docscomponents/js/docscomponent_mail.js"),zmail.staticUrls.docsCSS="".concat(zmPath.getCompletePath("default").domain.js,"/personal/").concat(zmail.docsStaticVersion,"/docscomponents/css/lightgrey/docscomponent_mail.css"),s.a.subscribe("group/unread",function(e,t){t.groupId!==zmail.zuid&&zmUtil.streamUpdate(t)}),s.a.subscribe("zmail/SaveTabState",function(e,t){zmUtil.saveTabState(t)}),s.a.subscribe("SETTINGS_MAIL_VIEW",function(e,t){zmail.mailOpt.isPopup=t}),s.a.subscribe("SETTINGS_ASK_RECEIPT_ON_READ",function(e,t){zmail.mailOpt.askReceipt=t}),s.a.subscribe("SETTINGS_TIME_FORMAT",function(e,t){zmail.mailOpt.isRTime=t}),s.a.subscribe("CS_EDITOR_TYPE_CHANGED",function(e,t){zmail.mailOpt.compTab=t,zmail.allowInline=1!==t}),s.a.subscribe("CS_ENCODING_CHANGED",function(e,t){zmail.cmpdata.CHAR_SET=t}),s.a.subscribe("CS_SUGGEST_CONTACTS_CHANGED",function(e,t){"undefined"!=typeof zmComp&&(t?(zmComp.offSugList(),zmComp.offSugDOMList()):t||zmComp.onSugList())}),s.a.subscribe("ncenter/watchReminder",function(e,t){var i=t.mailID;i&&zmList.getMailData({msgId:i,tId:t.tId||i,opentype:2,type:"lt",src:"external",isReminder:!0})}),s.a.subscribe("CS_FONT_FAMILY_CHANGED",function(e,t){zmail.mailOpt.ff=t}),s.a.subscribe("CS_FONT_SIZE_CHANGED",function(e,t){zmail.mailOpt.fs=t}),s.a.subscribe("CS_SENDING_DELAY_CHANGED",function(e,t){zmail.cmpdata.OUT_INTERVAL=t}),s.a.subscribe("CS_SHOW_BCC_CHANGED",function(e,t){zmail.cmpdata.SHOWBCC=t}),s.a.subscribe("CS_ASK_RECEIPT_CHANGED",function(e,t){zmail.cmpdata.ASKRECEIPT=t?1:0}),s.a.subscribe("SIGNATURE_ADDED",function(e,t){zmail.cmpdata.SIGN_INFO[t.id]={},zmail.cmpdata.SIGN_INFO[t.id].SIG_CONT=t.content,zmail.cmpdata.SIGN_INFO[t.id].SIG_TIT=t.name,zmail.cmpdata.SIGN_INFO[t.id].SIG_POS=t.position}),s.a.subscribe("SIGNATURE_UPDATED",function(e,t){zmail.cmpdata.SIGN_INFO&&zmail.cmpdata.SIGN_INFO[t.id]&&(zmail.cmpdata.SIGN_INFO[t.id].SIG_CONT=t.content,zmail.cmpdata.SIGN_INFO[t.id].SIG_TIT=t.name,zmail.cmpdata.SIGN_INFO[t.id].SIG_POS=t.position)}),s.a.subscribe("SIGNATURE_DELETED",function(e,t){t.id&&delete zmail.cmpdata.SIGN_INFO[t.id]}),s.a.subscribe("SIGNATURE_ASSOCIATED",function(e,t){t.mailIds&&t.mailIds.length&&t.mailIds.forEach(function(e){e&&zmail.cmpdata.FROM_LIST[e]&&(zmail.cmpdata.FROM_LIST[e].FRM_SIGID=t.id)}),t.mailIdsWithNoSignature&&t.mailIdsWithNoSignature.length&&t.mailIdsWithNoSignature.forEach(function(e){e&&zmail.cmpdata.FROM_LIST[e]&&(zmail.cmpdata.FROM_LIST[e].FRM_SIGID=null)})}),s.a.subscribe("integration/CRMStatusChange",function(e,t){b(!0)}),s.a.subscribe("integration/chatStatusChange",function(e,t){zmUtil.reRegisterWMS()}),zmail.windowVisibility=-1,void 0!==document.hidden?(t="hidden",a="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",a="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",a="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",a="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[t]?window.console.log("Visibilty API not supported"):(zmail.windowVisibility=1,s()(document).on(a,function(){document[t]?zmail.windowVisibility=0:zmail.windowVisibility=1})),u=Object(n.decode)(),zmail.showFeature&&"editor"===u.key&&(u.params.length&&(zmail.editorStatic=u.params[0]),u=null,Object(n.clearHash)());var o=zmAppLoader.load("mail");zmail.isPrivilegedUser&&function(){s()("#ms_load").remove(),zmail.isLoadingBandRemoved=!0,zmail.__logger=Object.assign({},zmAppLoader.__loadedModules),zmail.__logger=Object.keys(zmail.__logger).sort();try{window.performance&&performance.mark&&!performance.getEntriesByName("mark_fully_visible").length&&performance.mark("mark_fully_visible")}catch(e){zmUtil.debugLog(e)}}(),e.then(function(){zmComponent.soundNotifier.initialize()}),o.then(function(){zmAppLoader.load("zmContacts"),zmAppLoader.load("tooltip")}),Promise.all([e,o,r]).then(function(){zmInit.initMailSuite().then(function(){if(zmail.time2=performance.now(),_zm.isOfflineEnabled()){var e=zmail.Offline.lockStatus;!function(e){var t=zmText.get("mailsuite","offline");2===e?_zm.succErrMsg("i",zmText.applyArgs(t.anotherInstance,{companyName:zmail.globalI18N.companyName}),{hideAfter:5e3}):1===e?_zm.succErrMsg("i",t.available,{hideAfter:5e3}):3!==e&&4!==e||_zm.succErrMsg("i",t.error)}(e),1===e&&(zmTopBar.createAndShowOfflineSyncIcon(),window.navigator.onLine?zmTopBar.updateOfflineSyncIcon({type:void 0,tooltip:zmText.get("mailOffline","syncTooltips.syncInProgress")}):zmTopBar.updateOfflineSyncIcon({type:"offline",tooltip:zmText.get("mailOffline","syncTooltips.offline")}),t=zmText.get("mailsuite","offline"),s.a.subscribe("/network/online",function(){zmail.pageOfflineMode&&_zm.succErrMsg("i",t.pageOfflineMode)}),!1===window.navigator.onLine&&(zmail.pageOfflineMode=!0))}var t;p()}).then(function(){zmModules.getCommonUtilsModule().then(function(){return zmAppLoader.load("postLoad")}).then(function(){zmail.postJsDeffered.resolve(),s.a.when(zmail.ContactBook.fetchProcess).then(function(){m.resolve()}),f.then(function(){C()})})})}),zmAppLoader.load("search-impl").then(function(){zmail.newSearch=!0,zmail.Search.init()})};!function(){zmail.featVer=zmail.featVer||{};var e=zmail.featVer;e.mailCollab=e.mailCollab||"1",zmail.collabVersion=e.mailCollab}(),zmail.postJsDeffered.promise.then(function(){zmUtil.requireMailCollab().then(null,function(){zmUtil.debugLog("Mail Collab - module load error")})});var I={initMailSuite:function(){var e;Object(o.a)(),n.Events.on(n.EVENT_NAME.UPDATE_SUITE_EVENTS,function(e){Object(r.l)(e)}),Object(o.b)(),window.zmail.isCRMMailAddonUser=null,window.zmail.isCRMServiceUser=null,e=s.a.Deferred(),zmail.newSearch=!0,zmAppLoader.load("contact-book").done(function(){zmail.ContactBook.initialize(),zmail.ContactBook.groupsFetched.done(function(){zmCont.initGroups(),e.resolve()})}),e.promise(),zmModules.getCommonUtilsModule().then(function(){return w()})}}},Ie37:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return n});var a={},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),this.listType=t.type,this.propertyMap=t.mapObj,this.classMap=t.classObj,this.data=t.dataObj}return babelHelpers.createClass(e,[{key:"setDataObj",value:function(e){this.data=e}},{key:"getHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",t=a[this.listType];if("function"!=typeof t)throw new Error("HTMLGenerator not available for ListItem.Type=".concat(this.listType));return t({returnType:e,propertyMap:this.propertyMap,classMap:this.classMap,data:this.data})}}]),e}(),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,i=e.generator;t&&"function"==typeof i&&(a[t]=i)},r=function(e,t,i,a){var s="";return t[a]&&("object"===babelHelpers.typeof(t[a])?t[a][i[e[a]]]&&(s=t[a][i[e[a]]]):s=t[a]),s},o=function(e){return new s(e)}},N6X1:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=function(e,t,i){return zmText.get("mailsuite",e,t,i)},s=function(){var e={mail:{app:"mail",icon:"msi-mailApp",selected:!0,appName:a("tooltips.mail"),onClick:function(){zmApp.showApp("m")}},calendar:{app:"calendar",icon:"msi-calendarApp",appName:a("tooltips.calendar"),onClick:function(){zmApp.showApp("c")}},task:{app:"task",icon:"msi-tasksApp",appName:a("tooltips.tasks"),onClick:function(){zmApp.showApp("t")}},notes:{app:"notes",icon:"msi-notesApp",appName:a("tooltips.notes"),onClick:function(){zmApp.showApp("n")}},contacts:{app:"contacts",icon:"msi-contactsApp",appName:a("tooltips.contacts"),onClick:function(){zmApp.showApp("cn")}},bookmarks:{app:"bookmarks",icon:"msi-bookmarksApp",appName:a("tooltips.links"),onClick:function(){zmApp.showApp("l")}}},t=["mail","calendar","task","notes","contacts","bookmarks"],i=[],s=function(e){if(zmail.leftAppOrder instanceof Array||(zmail.leftAppOrder=zmail.leftAppOrder?zmail.leftAppOrder.split(","):[]),e&&e.length)return _.sortBy(e,function(e){var t=zmail.leftAppOrder.indexOf(e.id);return t>-1?t:100})}(function(){var i=zmail.Utils.FeatureUtil.availableApps;zmsuite.lhsAppsAvailable=zmail.Utils.FeatureUtil.availableApps;var a=[],s=e;return t.forEach(function(e){i.indexOf(e)>-1&&a.push(s[e])}),a}()),n={};s.forEach(function(e){n[e.app]=e,i.push(e.app)}),window.zmLHSApps=new zmAppSuite.LHSApps({apps:n,selectedApp:"mail",targetElement:zmsuite.$el.appBar[0],order:i}),zmail.appList=new zmAppList([]),_zm&&_zm.isOfflineEnabled()&&($.subscribe("/network/offline",function(){window.zmLHSApps.disableApps(["calendar","task","notes","bookmarks","contacts"])}),$.subscribe("/network/online",function(){window.zmLHSApps.enableApps(["calendar","task","notes","bookmarks","contacts"])}),!1===window.navigator.onLine&&window.zmLHSApps.disableApps(["calendar","task","notes","bookmarks","contacts"]))}},Nw99:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return l});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("7sa5"),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){return{id:"",text:"",title:"",seq:0,visible:!0,isSelected:!1}}},{key:"setTextTitle",value:function(){s()(this.$el).find(".jsZmTreeText").text(this.attributes.text),s()(this.$el).attr("title",this.attributes.title)}},{key:"setSelection",value:function(){s()(this.$el).addClass("zmCurTree")}},{key:"removeSelection",value:function(){s()(this.$el).removeClass("zmCurTree")}},{key:"template",value:function(){return Object(n.b)("div",{className:"zmTreeNode"},Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"}))))}},{key:"remove",value:function(){s()(this.$el).remove()}},{key:"updateSelection",value:function(){!0===this.changed.isSelected?this.setSelection():this.removeSelection()}},{key:"update",value:function(){this.changed.text&&this.setTextTitle(),void 0!==this.changed.isSelected&&this.updateSelection()}},{key:"container",value:function(e){var t,i=[];if(e.attributes.icons){for(var a=0;a<e.attributes.icons.length;a++)i.push(Object(n.b)("i",{className:e.attributes.icons[a].className,id:e.attributes.icons[a].id}));t=Object(n.b)("div",{className:"zmTreeTIcon"},i)}return Object(n.b)("div",{className:"zmTreeBlk",id:e.attributes.containerID},Object(n.b)("div",{className:"zmTreeTitle   "},e.attributes.drag?Object(n.b)("i",{className:"msi-drag"}):void 0,Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"})),t),Object(n.b)("div",{className:"zmTreeData"}))}}]),t}(r.b),l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return o}},{key:"createContainer",value:function(e,t){var i=s()(e.container(e));this.setMetaInfo({container:i,header:i.find(".zmTreeTitle"),listContainer:i.find(".zmTreeData"),listVisible:t}),t||i.find(".zmTreeData").hide(),this.headerClickEvent(),this.containerClickEvent(),s.a.q("#jsZMLeft").append(i)}},{key:"headerClickEvent",value:function(){var e=this,t=this;this.getMetaInfo("header").on("click",function(i){if(i.preventDefault(),i.stopPropagation(),s()(i.target).closest("i").length>0){for(var a=s()(i.target).closest("i").attr("id"),n=t.get("header").attributes.icons,r=0;r<n.length;r++)n[r].id===a&&n[r].callback();return!1}var o=e.getMetaInfo("listVisible"),l=e.getMetaInfo("listContainer");o?s()(l).slideUp():s()(l).slideDown(),e.setMetaInfo("listVisible",!o),t.getMetaInfo("clickCallback")({collection:t,elem:{type:"header"}})})}},{key:"containerClickEvent",value:function(){var e=this;this.getMetaInfo("container").on("click contextmenu",function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation();var i=s()(t.target).closest(".zmTreeNode");e.getMetaInfo("clickCallback")({collection:e,elem:i,event:t})})}},{key:"setHeader",value:function(e,t){e.getMetaInfo().header.find(".zmTreeText").text(t.attributes.text)}},{key:"setValues",value:function(e){e.setTextTitle()}},{key:"arrowTemplate",value:function(){return Object(n.b)("span",null,Object(n.b)("i",{className:"msi-rarrow msi-barrow"}))}},{key:"initValues",value:function(e){e.$el=e.template(),s()(e.$el).attr("id",e.attributes.id),this.setValues(e)}},{key:"renderElem",value:function(e,t){this.initValues(e),s()(t).append(e.$el)}},{key:"initContainer",value:function(e){var t=this.get("header");this.createContainer(t,e.isVisible),this.setHeader(this,t),this.setMetaInfo({clickCallback:e.clickCallback})}},{key:"render",value:function(e){var t=this;this.initContainer(e);var i=this.getMetaInfo("listContainer");this.forEach(function(e){"header"!==e.id&&t.renderElem(e,i)})}},{key:"updateSeqCount",value:function(e,t,i){e=parseInt(e),this.map(function(a){return a.attributes.seq>e&&a.id!==i&&(a.attributes.seq=parseInt(a.attributes.seq)+t),a})}},{key:"insertItem",value:function(e){var t;this.initValues(e);var i=this.pluck("seq");i=i.filter(function(t){return t!==e.attributes.seq});var a=Math.max.apply(Math,babelHelpers.toConsumableArray(i));if(a===-1/0&&(a=0),e.attributes.seq>=0&&(a=e.attributes.seq),a>1)t=this.query().where("seq","is",a).select()[0].$el,0===s()(t).parent().length?s()(this.getMetaInfo("listContainer")).append(e.$el):s()(e.$el).insertAfter(t);else{var n=this.query().where("seq","is",a).select();t=n[n.length-1].$el,0===a?s()(this.getMetaInfo("listContainer")).prepend(e.$el):t?s()(e.$el).insertBefore(t):s()(this.getMetaInfo("listContainer")).append(e.$el)}}}]),t}(r.a)},S1Ht:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return a});var a=function(e){if(!zmail.isInternalOrgUser)return 0;var t=zmFrameWork.utils.getOSName(),i=zmFrameWork.utils.getBrowserName();i=t+i;var a=Math.ceil((new Date).getDate()/7),s=(new Date).getMonth()+1,n=zmAdHocSettings.getUiStats(),r=!1;n[a]||(n[a]={}),n[a]&&n[a].month!==s&&(n[a]={}),n[a].month=s,n[a][i]||(n[a][i]={}),n[a][i].fastTime||(r=!0,n[a][i].fastTime=e,n[a][i].slowTime=e,n[a][i].tabLimit=1),(n[a][i].fastTime>e||n[a][i].fastTime<0)&&(r=!0,n[a][i].fastTime=e),(n[a][i].slowTime<e||n[a][i].slowTime<0)&&(r=!0,n[a][i].slowTime=e),!0===r&&zmAdHocSettings.setUiStats(n),zmsuite.statsUpdated=!0},s=function(e){var t=Math.ceil((new Date).getDate()/7),i=zmAdHocSettings.getUiStats(),a=zmFrameWork.utils.getBrowserName();(zmail.isInternalOrgUser&&i[t]&&i[t][a]&&!i[t][a].tabLimit||i[t][a].tabLimit<5*Math.ceil(e/5))&&(i[t][a].tabLimit=5*Math.ceil(e/5),zmAdHocSettings.setUiStats(i))}},W6MD:function(e,t,i){"use strict";i.d(t,"a",function(){return A});var a,s=i("EVdn"),n=i.n(s),r=i("jQ7T"),o=i("orEe"),l=i("Ie37"),c=zmail.Core.Namespaces.get("zmState.leftStateInfo"),d=!1,m="msi-rarrow",u="msi-barrow",h=".msi-rarrow",p=".msi-barrow",f="i.msi-rarrow",b=".zmTreeNode",g=".zmTreeText",z=".zmTreeCount",v=".zmTreeData",C=".zmTreeTitle",O="padding-left",y=function(e,t,i,a){var s={name:e[t.name]||e.name||"",count:e[t.count]||e.count||"",seq:e[t.seq]||e.seq||"",id:e[t.id]||e.id||"",parentId:e[t.parentId]||e.parentId||"",color:e[t.color]||e.color||"",hasChild:e[t.hasChild]||e.hasChild||"",check:e[t.check]||e.check||"",expChild:e[t.expChild]||e.expChild||"",dropdown:e[t.dropdown]||e.dropdown||"",licon:e[t.licon]||e.licon||"",ricon:e[t.ricon]||e.ricon||"",isSel:e[t.isSel]||e.isSel||"",showList:e[t.showList]||e.showList||"",shared:e[t.shared]||e.shared||"",OZUID:e[t.OZUID]||e.OZUID||"",hideNode:e[t.hideNode]||e.hideNode||!1,notBold:t.notBold||!1,dispName:e[t.dispName]||"",addNewType:e[t.addNewType]||e.addNewType||!1,customNode:e[t.customNode]||e.customNode||!1,customNodeHtmlTemplate:e[t.customNodeHtmlTemplate]||e.customNodeHtmlTemplate||"",sharedFolderToolTip:e[t.sharedFolderToolTip]||e.sharedFolderToolTip||"",txtNodeClass:e.txtNodeClass,rowTitle:e.rowTitle};return i&&(s.accessText=Object(l.b)(t,i,e,"accessText")),a&&(s.entityClass=Object(l.b)(t,a,e,"entityClass")),s},T=function(e,t){var i=t.getAppKey()||c.utils.getKeyFromAppId(zmApp.currentApp);return c.utils.checkForPresence(e,i)},A=function(){function e(){babelHelpers.classCallCheck(this,e),this.showList=!0,this.mapObject=void 0,this.classObject=void 0,this.entityClass=void 0,this.headerType=void 0,this.headerObject=void 0,this.listType=void 0,this.hasChild=void 0,this.listId=void 0,this.isListArr=void 0,this.listObject=void 0,this.id=void 0,this.fn=void 0,this.el=void 0,this.treeDepth=void 0,this.trashId=void 0,this.hasCount=void 0,this.childToggleFn=void 0,this.dragHelper=void 0,this.dragEventObj=void 0,this.disableSelection=!1}return babelHelpers.createClass(e,[{key:"rebindChildToggleEvents",value:function(){this.childToggleFn&&this.setChildToggle(this.childToggleFn)}},{key:"setChildToggle",value:function(e){var t=this,i=t.el;e=e||_.noop,this.childToggleFn=this.childToggleFn===e?this.childToggleFn:e,"function"==typeof this.childToggleFn&&i.off("click").on("click","i.msi-rarrow, i.msi-barrow",function(e){e.preventDefault(),e.stopPropagation();var i,a,s=e.type,r=e.target||e.srcElement;r=a=n()(r);var o=2,l=[m,u,"SClbl"];for(i in l)if(r.hasClass(l[i])){o=1;break}r.hasClass("zmTreeNode")||(r=r.parents(b)),r.find("span:first").removeClass("zmThmClr"),r.length||(r=a).hasClass("zmTreeText")||(r=r.parents(g));var c=r.data("zmsData");c.type=s,c.eventInfo=e,c.colInfo={column:o};var d={zmsData:c};t.childToggle(d,r,this,t),n.a.publish("lhs/expandCollapse")})}},{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disableSelection=Boolean(e.disableSelection),this.avoidStateSave=Boolean(e.avoidStateSave),this.showList=Boolean(e.showList),this.isHeaderSel=e.isHeaderSel,this.mapObject=e.mapObject,this.classObject=e.classObject,this.entityClass=e.entityClass,this.headerObject=e.dataObject&&e.dataObject.headerObject,this.headerObject&&"function"==typeof this.headerObject.onAdd&&(this.headerObject.onAdd=_.debounce(this.headerObject.onAdd,400)),this.listType=e.type,this.hasChild=Boolean(e.hasChild),this.hasCountObject=Boolean(e.hasCountObject),this.listId=e.listId,this.trashId=e.trashId,this.listObject=e.dataObject&&e.dataObject.listObject,this.hasCountObject&&(this.countObject=e.dataObject&&e.dataObject.countObject),this.hasChild&&(this.childObject=e.dataObject&&e.dataObject.childObject,this.treeDepth=e.treeDepth),this.id=e.id,this.clearEl(),this.isListArr=Boolean(e.isListArr),this.childToggleFn=e.childToggleFn||this.childToggleFn,this.listObject&&this.listObject instanceof Array&&(this.isListArr=!0),this.listObject||(this.listObject=this.isListArr?[]:{})}},{key:"setListener",value:function(e,t){this.el.off(e).on(e,t)}},{key:"setLayerId",value:function(e){this.id=e}},{key:"setHeaderObject",value:function(e){this.headerObject=e}},{key:"setMapObject",value:function(e){this.mapObject=e}},{key:"setCountObject",value:function(e){this.countObject=e}},{key:"setChildObject",value:function(e){this.childObject=e}},{key:"setListId",value:function(e){this.listId=e}},{key:"setType",value:function(e){this.listType=e}},{key:"setListObject",value:function(e){this.listObject=e}},{key:"getListObject",value:function(){return this.listObject}},{key:"getHeaderObject",value:function(){return this.headerObject}},{key:"getChildObject",value:function(){return this.childObject}},{key:"getMappedHeaderObject",value:function(){return y(this.headerObject,this.mapObject||"")}},{key:"editHeader",value:function(e){this.headerObject=e;var t=this.getHeaderDOM();n.a.q("#".concat(this.id)).children().first().remove(),n.a.q("#".concat(this.id)).prepend(t)}},{key:"hasUnreadChild",value:function(e){var t,i;if(!this.isListArr&&this.countObject&&this.childObject&&this.childObject[e])for(t in i=this.childObject[e].CH)if(i.hasOwnProperty(t)){if(this.countObject[t]&&this.countObject[t].c>"0")return!0;this.childObject[t]&&this.childObject.CH&&this.hasUnreadChild(t)}}},{key:"getRowDom",value:function(t,i,a){var s=this.listType;a===zmail.zuid&&(i.count="aucount");var n=y(t,i,this.classObject,this.entityClass);if(!this.isListArr&&(n.id=a,this.countObject)){var r=(this.countObject||"")[a]||"";r&&(n.count=r[i.count]||r.count||0,n.parentId=r[i.parentId]||r.parentId||-1)}var o=e.views.listDom(n,s);this.hasUnreadChild(a)&&!n.notBold&&o.find(g).addClass("zmBold"),a===zmail.zuid&&(i.count="scount");var l={layerId:this.id,type:"list"};i.infoObject&&(l.info=i.infoObject);var c={rowInfo:l};if(this.isListArr)c.rowObject=t;else{var d=a,m=t,u=(this.countObject||"")[d],h={};if(h[d]=m,c.rowObject=h,u){var p={};p[d]=u,c.countObject=p}}return o.data("zmsData",c),o}},{key:"getUserObjRow",value:function(e){var t,i={};if(this.isListArr){var a=e[this.mapObject.id]||e.id||"";i.id=a,i.data=e}else for(t in e)e.hasOwnProperty(t)&&(i.id=t,i.data=e[t]);return i}},{key:"getNodeIndex",value:function(e){var t,i=-1,a=this.mapObject,s=this.listObject.length;for(t=0;t<s;t+=1){if((this.listObject[t][a.id]||this.listObject[t].id||"")===e){i=t;break}}return i}},{key:"getFirstObj",value:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return e[t]}},{key:"editNode",value:function(e,t,i){if(e){var a,s=n.a.extend({},e),r=this.id,o=n.a.q("#".concat(r));t=t||this.mapObject;var l=this.getUserObjRow(s),c={mode:"edit",nObj:s},d=o.find("#".concat(l.id));if(this.hasCountObject&&void 0!==this.countObject[l.id]&&(c.pId=this.countObject[l.id].p),this.updateListObject(c),d.length){var m=this.getRowDom(l.data,t,l.id);if(m){if(d.hasClass("zmCurTree")&&m.addClass("zmCurTree"),d.find("span").eq(0).hasClass("zmThmClr")&&m.find("span").eq(0).addClass("zmThmClr"),d.find(z).hasClass("zmThmClr")&&m.find(z).addClass("zmThmClr"),a=d.css(O),a=parseInt(a.replace("px","")),d.replaceWith(m),i&&this.hasChild){n.a.q("#".concat(l.id,"cld")).remove();var u,h,p,f=l.data;for(u in f)f.hasOwnProperty(u)&&(h=f.HC,p=f.E);h&&p&&this.consChild(l.id,m,a,!0)}m.css(O,a)}}}}},{key:"moveNode",value:function(e,t,i,a,s){if(e){var r,o,l,c,d,m,u,h,p,f,g,z=0,C=0,y=this,T=!0;for(g in e)e.hasOwnProperty(g)&&(c=g);if(!c||!i||c!==i){m=n.a.extend({},e);var A=n.a.extend(!0,{},e);if(this.countObject&&(u=this.countObject[c].p),p={mode:"delete",nObj:m,pId:u,NoRecursiveDelete:!0},this.updateListObject(p),m=A,!this.isListArr){a&&"-1"!==a?this.childObject[a]&&(f=this.childObject[a].CH):f=this.listObject;var S=this.mapObject.sequence||"SE";i&&(C=f[i][S]),this.getFirstObj(m)[S]=C+1}p={mode:"add",nObj:m,pId:a},this.updateListObject(p);var j=this.el.find("#".concat(c)).eq(0),k=parseInt(j.css(O)),w=j.clone(!0);j.remove();var I=this.el.find("#".concat(c,"cld")).eq(0);I.length&&(d=I.clone(!0)),u&&((h=this.el.find("#".concat(u,"cld")).eq(0)).children(b).length||(h.remove(),this.el.find("#".concat(u," i.msi-rarrow")).remove(),this.el.find("#".concat(u," i.msi-barrow")).remove()));var L=this.createNodeDetails(a,s);if(i?(o=this.el.find("#".concat(i)).eq(0),(l=this.el.find("#".concat(i,"cld"))).length&&(o=l.eq(0))):o=this.el.find(v),a&&((r=this.el.find("#".concat(a))).length&&(z=parseInt(r.css(O))),this.el.find("#".concat(a,"cld")).length&&(r=this.el.find("#".concat(a,"cld")))),L.padLeft?w.css(O,L.padLeft):w.removeAttr("style"),I.remove(),a)if(i)o.after(w);else if((r=this.el.find("#".concat(a,"cld"))).length){var N=w.attr("id");r.children().eq(0).attr("id")!==N&&r.prepend(w)}else this.consChild(a,n.a.q("#".concat(a)),z,!0),T=!1;else i?o.after(w):o.prepend(w);d&&d.length&&(d.find(b).each(function(){var e;e=1===y.treeDepth?parseInt(n()(this).css(O)):parseInt(n()(this).css(O))-k+(L.padLeft||21),n()(this).css(O,"".concat(e,"px"))}),T&&this.el.find("#".concat(c)).after(d)),u&&"-1"!==u&&this.removeHighlightFromParent(u),this.hasUnreadChild(a)&&this.highlightParent(a,this.el)}}}},{key:"deleteNode",value:function(e,t){if(e){var i=n.a.extend({},e),a=this.createNodeDetails().domEl,s=this.getUserObjRow(i);if(a.find("#".concat(s.id)).remove(),a.find("#".concat(s.id,"cld")).remove(),this.hasChild){var r=s.id,o=this.countObject[r];if(o&&"-1"!==o.p){var l=o.p,c=a.find("#".concat(l,"cld"));if(c.length&&0===c.children().length){c.remove();var d=a.find("#".concat(l));d.find(f).remove(),d.find("i.msi-barrow").remove()}}}var m={mode:"delete",nObj:i,pId:t};this.updateListObject(m)}}},{key:"createNodeDetails",value:function(e,t){var i,a,s={},o=0,l=this.el.find(v);if(e){var c=a=this.el.find("#".concat(e)),d={zmsData:c.data("zmsData")};if(c.find(h).length&&!c.find(p).length){var f,b,g=d.zmsData.rowObject;for(b in g)g.hasOwnProperty(b)&&(f=b);t?(i=parseInt(c.css(O)),this.consChild(f,c,i,!0),this.hideChild(c.find(h),f)):this.showChild(c.find(h),f,c),l=this.el.find("#".concat(e,"cld"))}l.length||(l=n.a.e(Object(r.b)("div",{id:"".concat(e,"cld")})),this.el.find("#".concat(e)).after(l)),a.find(h).length||(a.find(p).remove(),a.find(h).remove(),t?a.prepend(Object(r.b)("i",{className:m})):a.prepend(Object(r.b)("i",{className:u}))),o=parseInt(a.css(O))+12}return s.domEl=l,s.padLeft=o,s}},{key:"addClassAtStart",value:function(e,t){if("1"===String(this.listType)){var i=this.el.find("#".concat(e));if(!i.find(".".concat(t)).length){var a=n.a.e(Object(r.b)("i",{className:t}));i.prepend(a)}}}},{key:"removeClassAtStart",value:function(e,t){if("1"===String(this.listType)){var i=this.el.find("#".concat(e)).find(".".concat(t));i.length&&i.remove()}}},{key:"addLoader",value:function(e){if("1"===String(this.listType)){var t=this.el.find("#".concat(e)),i=Object(r.b)("span",{className:"zmSpinLoader"}),a=t.find(".zmTreeNDWra");a.length&&a.after(i)}}},{key:"removeLoader",value:function(e){if("1"===String(this.listType)){var t=this.el.find("#".concat(e)).find(".zmSpinLoader");t.length&&t.remove()}}},{key:"addClass",value:function(e,t){var i=this.el.find("#".concat(e)).eq(0);i.length&&i.addClass(t)}},{key:"removeClass",value:function(e,t){var i=this.el.find("#".concat(e)).eq(0);i.length&&i.removeClass(t)}},{key:"hideNode",value:function(e){var t,i;"1"===String(this.listType)&&(t=this.mapObject.hideNode||"hideNode",(i=this.el.find("#".concat(e)).eq(0)).length&&(e in this.listObject&&(this.listObject[e][t]=!0),i.hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),"more"!==e&&"less"!==e&&"object"===babelHelpers.typeof(this.childObject)&&e in this.childObject&&i.find("span:first").children().first().hasClass(u)&&this.el.find("#".concat(e,"cld")).eq(0).hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)})))}},{key:"showNode",value:function(e){var t,i;"1"===String(this.listType)&&(t=this.mapObject.hideNode||"hideNode",(i=this.el.find("#".concat(e)).eq(0)).length&&(this.listObject[e][t]=!1,i.show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),"more"!==e&&"less"!==e&&"object"===babelHelpers.typeof(this.childObject)&&e in this.childObject&&i.find("span:first").children().first().hasClass(u)&&this.el.find("#".concat(e,"cld")).eq(0).show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)})))}},{key:"appendNode",value:function(e,t,i){if(e){var a,s=n.a.extend({},e),r=this.createNodeDetails(i),o=r.domEl;t=t||this.mapObject;var l=this.getUserObjRow(s),c=this.getRowDom(l.data,t,l.id);if(i&&r.padLeft&&c.css(O,r.padLeft),!this.isListArr){var d=this.childObject&&this.childObject[i]&&this.childObject[i].CH;d||(d=this.listObject);var m,u=0;if(d)for(m in d)d.hasOwnProperty(m)&&u<d[m].SE&&(u=d[m].SE);this.getFirstObj(s).SE=u+1}var h={mode:"add",nObj:s,pId:i};this.updateListObject(h),i?(this.consChild(i,c,r.padLeft,!0),a=n.a.q("#".concat(i)),this.showChild(a.find(f),i,a)):(o.append(c),this.callStaticHeaderAndScrollBarFn())}}},{key:"prependNode",value:function(e,t,i){if(e){var a=n.a.extend({},e),s=this.createNodeDetails(i),r=s.domEl;t=t||this.mapObject;var o=this.getUserObjRow(a),l=this.getRowDom(o.data,t,o.id);i&&s.padLeft&&l.css(O,s.padLeft),r.prepend(l),this.callStaticHeaderAndScrollBarFn(),this.isListArr||(this.getFirstObj(a).SE=1);var c={mode:"add",nObj:a,pId:i};this.updateListObject(c)}}},{key:"insertNodeBefore",value:function(e,t,i,a){if(e){var s=n.a.extend({},e),r=this.createNodeDetails(a),o=r.domEl;t=t||this.mapObject;var l=this.getUserObjRow(s),c=this.getRowDom(l.data,t,l.id);if(a&&r.padLeft&&c.css(O,r.padLeft),i){if(o.find("#".concat(i)).before(c),!this.isListArr){var d=this.getRowObj(i),m=this.mapObject.sequence||"SE",u=this.getFirstObj(d)[m];this.getFirstObj(s)[m]=u}var h={mode:"add",nObj:s,rel:{id:i,mode:"before"},pId:a};this.updateListObject(h)}}}},{key:"insertNodeAfter",value:function(e,t,i,a){if(e){var s=n.a.extend({},e),r=this.createNodeDetails(a),o=r.domEl,l=o;t=t||this.mapObject;var c=this.getUserObjRow(s),d=this.getRowDom(c.data,t,c.id);if(a&&r.padLeft&&d.css(O,r.padLeft),i){if(l=o.find("#".concat(i)),this.hasChild&&o.find("#".concat(i,"cld")).length&&(l=o.find("#".concat(i,"cld"))),!this.isListArr){var m=this.getRowObj(i),u=this.mapObject.sequence||"SE",h=this.getFirstObj(m)[u];this.getFirstObj(s)[u]=h+1}var p={mode:"add",nObj:s,rel:{id:i,mode:"after"},pId:a};this.updateListObject(p)}l.after(d),this.callStaticHeaderAndScrollBarFn()}}},{key:"insertNodeAt",value:function(e,t,i,a){if(e){var s=n.a.extend({},e),r=this.createNodeDetails(a);t=t||this.mapObject;var o=this.getUserObjRow(s),l=this.getRowDom(o.data,t,o.id);if(a&&r.padLeft&&l.css(O,r.padLeft),!this.isListArr){var c=this.mapObject.sequence||"SE";this.getFirstObj(s)[c]=parseInt(i)}var d={mode:"add",nObj:s,pId:a};this.updateListObject(d)}}},{key:"getRowObj",value:function(e){return this.getRowObjfromId(e)}},{key:"clearNew",value:function(e){this.el.find("#".concat(e," .zmThmClr")).removeClass("zmThmClr")}},{key:"getRowObjfromId",value:function(e){if(e){var t,i={};if(this.isListArr){var a=this.getNodeIndex(e);i=this.listObject[a]}else if(this.hasCountObject&&this.countObject){var s=(this.countObject[e]||{}).p;if("-1"!==s&&s){if(this.hasChild&&this.childObject&&this.childObject[s]&&this.childObject[s].CH){var n=this.childObject[s].CH[e];if(void 0===n)return!1;n.p=s,i[e]=n}}else t=this.listObject[e],i[e]=t}else t=this.listObject[e],i[e]=t;return i}}},{key:"highlightNode",value:function(e,t,i){var a;e&&(a=t.find("#".concat(e)),i&&a.find(z).addClass("zmThmClr"),a.find(g).hasClass("zmBold")||a.find(g).addClass("zmBold"))}},{key:"removeHighlightFromNode",value:function(e){var t=this.el.find("#".concat(e)).eq(0);t.length&&(t.find(z).removeClass("zmThmClr"),t.find(g).removeClass("zmBold"))}},{key:"removeCountThemeColor",value:function(e){var t=this.el.find("#".concat(e)).eq(0);t.length&&t.find(z).removeClass("zmThmClr")}},{key:"highlightParent",value:function(e,t,i,a,s){var n;if(e)n=t.find("#".concat(e)),i&&n.find(z).addClass("zmThmClr"),a&&s&&!n.find(p).length&&n.find(z).addClass("zmThmClr"),n.find(g).hasClass("zmBold")||n.find(g).addClass("zmBold"),"-1"!==String(e)&&"-1"!==this.countObject[e].p&&this.highlightParent(this.countObject[e].p,t,!1,!0,s);else{var r,o,l=this.childObject;for(r in l){var c=l[r].CH;for(o in c)parseInt(this.countObject[o].c)>0&&(i&&t.find("#".concat(e)).addClass("zmThmClr"),t.find("#".concat(r," .zmTreeText")).addClass("zmBold"),-1!==this.countObject[r].p&&this.highlightParent(this.countObject[r].p,t,!1,!0))}}}},{key:"removeHighlightFromParent",value:function(e,t){var i,a=n.a.q("#".concat(e)),s=n.a.q("#".concat(e,"cld"));i=this.countObject[e].c,a.find(z).removeClass("zmThmClr"),!t&&i<="0"&&!s.find("div.zmBold").length&&a.find(g).removeClass("zmBold"),s.find(".zmTreeCount.zmThmClr").length||a.find("span.zmThmClr").removeClass("zmThmClr"),"-1"!==String(this.countObject[e].p)&&(i=this.countObject[this.countObject[e].p].c,this.removeHighlightFromParent(this.countObject[e].p))}},{key:"updateCount",value:function(e,t,i,a,s,n){var r,o,l,c=this.mapObject&&this.mapObject.notBold,d=this.getRowObjfromId(e);this.countObject?(l=this.countObject[e],r="c"):(l=d[e]||d,r=this.mapObject.count,e===zmail.zuid&&(r="aucount"));var m=!!n&&n.state;switch(o=parseInt(l[r]),isNaN(o)&&(o=0),t){case"dec":o>0&&(l[r]=o-1);break;case"inc":l[r]=o+1;break;case"bdec":o>0&&(l[r]=o-i);break;case"binc":l[r]=o+i;break;case"upd":l[r]=i}l[r]<0&&(l[r]=0),this.editNode(d,this.mapObject),c||(this.hasChild?("inc"!==t&&"binc"!==t&&"upd"!==t||!parseInt(l[r])||("read"!==m?this.highlightParent(e,this.el,a,!1,s):this.removeHighlightFromNode(e)),"dec"!==t&&"bdec"!==t&&"upd"!==t||(parseInt(l[r])||this.removeHighlightFromParent(e),this.removeCountThemeColor(e))):("inc"!==t&&"binc"!==t&&"upd"!==t||!parseInt(l[r])||("read"!==m?this.highlightNode(e,this.el,a):this.removeHighlightFromNode(e)),"dec"!==t&&"bdec"!==t&&"upd"!==t||(parseInt(l[r])||this.removeHighlightFromNode(e),this.removeCountThemeColor(e))))}},{key:"isLayerExpanded",value:function(){return!T(this.id,Object(o.getLeft)())}},{key:"getHeaderDOM",value:function(){var e,t;if(this.headerObject){var i=this.mapObject||"",a=this.headerObject,s=y(a,i),l=n.a.e(Object(r.b)("div",{className:"zmTreeTIcon"})),c=!1;this.avoidStateSave||(e=T(this.id,Object(o.getLeft)()),this.showList=!e);var d=s.isSel?"zmTreeNode":"",m=["zmTreeTitle"];if(d&&m.push(d),t=n.a.e(Object(r.b)("div",{className:m.join(" ")})),zmsuite.sortLHSLayer){var u=Object(r.b)("i",{className:"msi-drag"});t.append(u)}(a.onAdd||a.settingsOption)&&(c=!0),s.count<0&&(s.count=0);var h=n.a.e(Object(r.b)("div",{className:"zmTreeNDWra"})),p=n.a.e(Object(r.b)("div",{className:"zmTreeText"}));if(p.text(s.name),h.append(p),t.append(h),(a.onAdd||a.settingsOption)&&t.append(l),a.settingsOption){var f=n.a.e(Object(r.b)("i",{className:a.settingsObject.className}));f.data("action","settings"),a.settingsObject.tooltip&&f.attr("title",a.settingsObject.tooltip),l.append(f)}if(s.count&&c){var b=n()(s.count);a.addIconTooltip&&b.attr("title",a.addIconTooltip),b.data("action","add"),l.append(b)}s.id&&t.attr("id",s.id);var g={type:"header",layerId:this.id};i.infoObject&&(g.info=i.infoObject),t.data({zmsData:{rowObject:a,rowInfo:g}})}return t}},{key:"consChild",value:function(e,t,i,a){var s,o,l,c,d=this.mapObject,p=[],f=this.childObject[e].CH;if(!f)return t;if(n()("#".concat(e,"cld")).remove(),t=n.a.e(t).add(Object(r.b)("div",{className:"jsSubTreCont zmSubTreeData",id:"".concat(e,"cld")})),this.callStaticHeaderAndScrollBarFn(),i+=12,!this.isListArr){for(l in f)if(f.hasOwnProperty(l)){var b=this.getRowDom(f[l],d,l);b=n()(b).css(O,i);var g=f[l][d.expChild]||f[l].expChild||"",z=f[l][d.hasChild]||f[l].hasChild||"";g&&z&&(b=this.consChild(l,b,i,!0)),p[f[l].SE-1]=b}for(c=n()(t[1]),o=p.length,s=0;s<o;s+=1)c.append(p[s]),this.callStaticHeaderAndScrollBarFn()}a&&(n()(t[0]).find(h).addClass(u).removeClass(m),t.eq(0).after(c),this.callStaticHeaderAndScrollBarFn());return t}},{key:"getListDOM",value:function(){if(this.listObject){var t,i,a=this.listObject,s=this.mapObject||"",n=this.showList?"":"display:none",r=this.listId||"",o=e.views.getLeftRowsContainerDom({id:r,style:n});if(this.isListArr){var l,c=a.length;for(l=0;l<c;l+=1)t=a[l],i=this.getRowDom(t,s),o.append(i)}else{var d,m,u=[];for(d in a)if(a.hasOwnProperty(d)){t=a[d],i=this.getRowDom(t,s,d);var h=t[s.expChild]||t.expChild||"",p=t[s.hasChild]||t.hasChild||"";t[s.sequence]?t[s.sequence]=parseInt(t[s.sequence]):t.sequence&&(t.sequence=parseInt(t[s.sequence]));var f=t[s.sequence]||t.sequence||t.se||0;if(p&&h&&("1"===String(this.listType)||"6"===String(this.listType))&&this.childObject){i=this.consChild(d,i,15)}f&&!u[f]?u[f]=i:f&&!u[f+1]?u.splice(f+1,0,i):f>0?u.splice(f,0,i):u.push(i)}for(m=0;m<u.length;m+=1)u[m]&&o.append(u[m])}return this.hasChild&&!s.notBold&&this.highlightParent(void 0,o),o}}},{key:"showChild",value:function(e,t,i){var a,s=this.el;e.addClass(u).removeClass(m),s.find("#".concat(t,"cld")).length?s.find("#".concat(t,"cld")).show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}):(a=parseInt(i.css(O)),this.consChild(t,i,a,!0)),this.updateExpCollapseState(s.find("#".concat(t)).eq(0),!0)}},{key:"hideChild",value:function(e,t){e.removeClass(u).addClass(m);var i=this.el;i.find("#".concat(t,"cld")).eq(0).hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),this.updateExpCollapseState(i.find("#".concat(t)).eq(0),!1)}},{key:"childToggle",value:function(e,t,i,a){var s,r,o=e.zmsData.rowObject;for(r in i=n()(i),o)o.hasOwnProperty(r)&&(s=r);i.hasClass(u)?a.hideChild(i,s):a.showChild(i,s,t)}},{key:"updateExpCollapseState",value:function(e,t){var i={};this.childToggleFn&&(i.zmsData=e.data("zmsData"),this.childToggleFn(i,e,t)),this.callStaticHeaderAndScrollBarFn()}},{key:"recursiveChildDelete",value:function(e){if(this.childObject&&this.childObject[e]){var t=this.getRowObjfromId(e)[e];t.HC=0,t.E=0;var i,a=this.childObject[e].CH;for(i in a)a.hasOwnProperty(i)&&this.recursiveChildDelete(i);delete this.childObject[e]}}},{key:"clearChild",value:function(e){var t=this.getRowObjfromId(e);this.clearChildObj(e),this.editNode(t,this.mapObject,!0)}},{key:"clearChildObj",value:function(e){var t,i=this.getRowObjfromId(e);for(t in this.childObject[e]&&this.recursiveChildDelete(e),i)i.hasOwnProperty(t)&&(i[t].HC=0,i[t].E=0)}},{key:"updateListObject",value:function(e){var t,i,a,s,r,o,l,c,d=e.mode,m=e.nObj;if(this.isListArr)if("add"===d){r=e.rel&&e.rel.id?e.rel.id:"";var u=e.rel&&e.rel.pos?e.rel.pos:"";r&&u?"before"===u?-1!==(s=this.getNodeIndex(r))&&this.listObject.splice(s,0,m):"after"===u&&-1!==(s=this.getNodeIndex(r))&&this.listObject.splice(s+1,0,m):this.listObject.push(m)}else"edit"===d?(o=m[this.mapObject.id]||m.id||"",s=this.getNodeIndex(o),this.listObject[s]=m):"delete"===d&&(o=m[this.mapObject.id]||m.id||"",s=this.getNodeIndex(o),this.listObject.splice(s,1));else{var h=e.pId||"-1";if(r=e.rel||"","add"===d||"edit"===d)for(i in m)if(this.hasCountObject&&(this.countObject[i]?this.countObject[i].p="-1"!==h?h:"-1":this.countObject[i]={p:h,c:0}),h&&"-1"!==h){if(this.childObject[h]&&this.childObject[h].CH){for(a in this.childObject[h].CH)this.childObject[h].CH[a].SE>=m[i].SE&&this.childObject[h].CH[a].SE++;this.childObject[h].CH[i]=m[i]}else for(i in this.childObject[h]={CH:{}},this.childObject[h].CH[i]=m[i],t=this.getRowObjfromId(h))t.hasOwnProperty(i)&&(t[i].HC=1);h in this.listObject&&(this.listObject[h].HC=1)}else{for(a in l=this.mapObject.sequence||"SE",c=m[i][l],this.listObject){var p=this.listObject[a][l];p>=c&&(this.listObject[a][l]=p+1)}this.listObject[i]=m[i]}else if("delete"===d){var f;for(i in m){for(a in f=h&&"-1"!==String(h)?this.childObject[h].CH:this.listObject,l=this.mapObject.sequence||"SE",c=f[i][l],f){var b=f[a][l];b&&b>c&&(f[a][l]=b-1)}h&&"-1"!==String(h)&&(e.NoRecursiveDelete||this.clearChildObj(i),n.a.isEmptyObject(this.childObject[h].CH)&&(delete this.childObject[h],this.clearChildObj(h))),delete f[i],zmail.zohoAccLabInfo[m[i].id]&&delete zmail.zohoAccLabInfo[m[i].id]}h in this.listObject&&this.childObject[h]&&0===Object.keys(this.childObject[h].CH).length&&(this.listObject[h].HC=0)}}}},{key:"clearEl",value:function(){this.el=e.views.getLeftLayerContainerDom({id:this.id}),"2"===String(this.listType)&&this.el.addClass("SC_lblpad"),this.callStaticHeaderAndScrollBarFn()}},{key:"constructLayer",value:function(){if(this.headerObject||this.listObject){this.clearEl();var e=this.el,t=this.getHeaderDOM(),i=this.getListDOM();return"6"!==this.listType&&"5"!==this.listType||n()(i).addClass("zmCalData"),e.append(t),e.append(i),this.dragEventObj&&this.attachDragDropEvents(),e}}},{key:"onMouseMove",value:function(e,t,i){var s,r,l,c,m,u,h,p,z,v,O="",y=!0,T=this;v=e.target||e.srcElement,v=n()(v),h=v;var A=t.fromData,S=v.parents(t.allowedParents);(h=v.closest(b)).length||(h=v.closest(g)),zmUtil.removeDocSelection();var j=n.a.q("#jsZMLeft"),k=n.a.q(".zmTreeWrapper"),w=j.offset(),I=e.pageY;if(i-I>0?u="top":i-I<=0&&(u="bottom"),e.pageX<w.left+j.width()&&(I-w.top<50&&I-w.top>0&&"top"===u?(!1===d&&setTimeout(function(){d=!1,k[0].scrollTop-=20},50),d=!0,this.removeDragHelper()):w.top+j.height()-I<50&&"bottom"===u&&(!1===d&&setTimeout(function(){d=!1,k[0].scrollTop+=20},50),d=!0,this.removeDragHelper())),!S.length)return this.removeDragHelper(),void Object(o.showDragHandler)(e,!1,t.helperText);if(!h.length){if(!(v=v.closest(".zmTreeDrop")).length)return this.removeDragHelper(),void Object(o.showDragHandler)(e,!1,t.helperText);if(v.prev().hasClass("zmTreeNode"))h=v.prev(),O="next";else if(v.next().hasClass("zmTreeNode"))h=v.next(),O="prev";else if(v.parent().hasClass("jsSubTreCont"))h=v.parent().prev(),O="next";else{if(!v.prev().prev().hasClass("zmTreeNode"))return this.removeDragHelper(),void Object(o.showDragHandler)(e,!1,t.helperText);h=v.prev().prev(),O="next"}}h.length&&(r=void 0!==h.data("zmsData")?h.data("zmsData").rowObject:{});var L=h.find(".jsZmTreeText"),N=h.offset().top,D=L.offset()&&L.offset().top;if(this.stopHoverOnRow(),h.closest(C).length>0){if(O="header",void 0===(h=h.closest(C)).closest(C).data("zmsData"))return!0;r=void 0!==h.closest(C).data("zmsData")?h.closest(C).data("zmsData").rowObject:{},y=t.allowDrop&&t.allowDrop(A,r,O),Object(o.showDragHandler)(e,!1,t.helperText)}else if(N<I&&D>I){if(O="prev",a&&(clearTimeout(a),a=0,s=null),!(y=t.allowDrop&&t.allowDrop(A,r,"prev")))return this.removeDragHelper(),Object(o.showDragHandler)(e,!1,t.helperText),!1;this.showDragHelper(h,O),Object(o.showDragHandler)(e,!0,t.helperText)}else if(N+h.outerHeight()>I&&D+L.height()<I){O="next",a&&(clearTimeout(a),a=0,s=null),p=h,h.next().hasClass("zmTreeDrop")&&(p=h.next()),(p=p.next()).hasClass("jsSubTreCont")&&(h=p.children(b).eq(0),O="prev"),p.length||(m=h.parents(".jsSubTreCont")).length&&((p=m.next().eq(0)).length?p.hasClass("zmTreeDrop")?p.next().length?(h=p.next(),O="prev"):(h=m.prev(),z=!0):(h=p,O="prev"):(h=m.prev(),z=!0));try{r=h.data("zmsData").rowObject}catch(e){window.console.log("ex thrown")}if(!(y=t.allowDrop&&t.allowDrop(A,r,O)))return this.removeDragHelper(),Object(o.showDragHandler)(e,!1,t.helperText),!1;z?this.showDragHelper(m,O):this.showDragHelper(h,O),Object(o.showDragHandler)(e,!0,t.helperText)}else if(N<I&&D+L.height()>=I){if(O="inside",!(y=t.allowDrop&&t.allowDrop(A,r,O)))return this.removeDragHelper(),Object(o.showDragHandler)(e,!1,t.helperText),!1;if(h.find(f).length&&!h.find("i.msi-barrow").length){for(c in r)r.hasOwnProperty(c)&&(l=c);s!==l&&(s=l,a&&(clearTimeout(a),a=0),a=setTimeout(function(){T.showChild(h.find(f),s,h)},500))}this.showDragHelper(L,O),Object(o.showDragHandler)(e,!0,t.helperText)}return{toDrop:y,curElem:h,pos:O}}},{key:"onDrop",value:function(e,t,i){var a,s,n,r,o,l,c=!1;i&&i.toDrop&&(o=i.curElem,"prev"===(l=i.pos)?(n=o.prev()).length?o=n.hasClass("zmTreeNode")?n:n.prev():(l="inside",((o=o.parent().prev()).hasClass("zmTreeData")||o.hasClass("zmTreeTitle"))&&(c=!0)):"inside"===l&&t.getDescendant&&(r=o.next()).length&&!r.hasClass("zmTreeNode")&&(l="next",o=r.children(".zmTreeNode:last")),s=!0===c?{id:"zmllabelH"}:o.data("zmsData").rowObject,a=t.fromData,delete t.fromData,t.onDrop(e,a,s,l))}},{key:"setDragDrop",value:function(e){this.dragEventObj=e}},{key:"attachDragDropEvents",value:function(){var e,t=this,i=this.dragEventObj;t.el.find(v).off("mousedown").mousedown(function(a){var s,r,l,c,d=a.which,m=a.pageY,u=a.target,h=a.srcElement,p=!1,f=i.rowCls||"zmL",z=i.selCls||"SC_check";if(3!==d){if(c=m,r=u||h,r=n()(r).closest(b),e=n.a.q("#jsZMLeft"),r.length&&(s=r.data("zmsData").rowObject,i.fromData=s),i.allowDrag){if(!s)return!1;if(!i.allowDrag(s))return}n()(document).off("mousemove.ZMLeft").on("mousemove.ZMLeft",function(e){var a,r;e.preventDefault(),a=e.target||e.srcElement,(r=(a=n()(a)).parents(v)).length||(r=a.closest(g)),(p=!0)&&(i.helperText=i.dragStart(e,s)),r.length?l=t.onMouseMove(e,i,c):(t.removeDragHelper(),Object(o.getCenter)()[0].getNodes()[2]&&Object(o.getCenter)()[0].getNodes()[2].onMouseMove(e,i)),c=e.pageY}),e.off("mouseleave.ZMLeft").on("mouseleave.ZMLeft",function(){}),n()(document).off("mouseup.ZMLeft").on("mouseup.ZMLeft",function(e){var a,s,r;r=e.target||e.srcElement,a=r=n()(r),(s=r.closest(b)).length||(s=r.closest(g),r.closest(C).length>0&&(s=r.closest(C)));var c=a.parents(i.allowedParents);Object(o.removeDragHandler)(),t.removeDragHelper(),t.showHoverOnRow();var d=n.a.q("#jsZMLeft");n()(document).off("mousemove.ZMLeft"),n()(document).off("mouseup.ZMLeft"),d.off("mouseleave.ZMLeft"),c.length&&(p&&(s.length||r.closest(".zmTreeDrop").length?t.onDrop(e,i,l):a.closest(".".concat(f)).length&&((a=a.closest(".".concat(f))).hasClass(z)&&(a=a.parents(".SC_mclst").find(".".concat(f,".").concat(z))),i.onDrop(e,i.fromData,a,"center"))),p=!1)})}})}},{key:"showDragHelper",value:function(t,i){var a,s=e.views.getDragHelperDom();a=t,"next"===i&&(a=t.next()),n()(t).closest(v).hasClass("zmTreeDropOn")||n()(t).closest(v).addClass("zmTreeDropOn"),a.hasClass("zmTreeDrop")||(this.dragHelper&&this.dragHelper.remove(),a&&a.length?a.before(s):t.after(s),this.dragHelper=s)}},{key:"removeDragHelper",value:function(){this.dragHelper&&(this.dragHelper.remove(),delete this.dragHelper)}},{key:"showHoverOnRow",value:function(){this.el.find(v).removeClass("zmTreeDropOn")}},{key:"stopHoverOnRow",value:function(){this.el.find(v).addClass("zmTreeDropOn")}},{key:"setStaticHeaderAndScrollBarFn",value:function(e){this.staticHeaderAndScrollBarFn=e}},{key:"callStaticHeaderAndScrollBarFn",value:function(){this.staticHeaderAndScrollBarFn&&"function"==typeof this.staticHeaderAndScrollBarFn&&this.staticHeaderAndScrollBarFn()}}]),e}()},oLIc:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("Nw99"),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){return{text:"",title:"",mode:"",shareType:"",userImg:"",zuid:"",imageTitle:""}}},{key:"template",value:function(){var e=Object(n.b)("img",{src:zmResource.get("image","SC-Photo.png")}),t=this.attributes.zuid;return zmail.ContactBook.fetchProcess.done(function(){zmail.ContactBook.get({zuid:t,type:"org"}).done(function(t){if(t.length>0){var i=t[0].attrs;s()(e).attr("src",i.photo)}})}),Object(n.b)("div",{className:"zmTreeNode"},Object(n.b)("span",{className:"zmSFolPer"}),Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"}))),Object(n.b)("div",{className:"zmTreeCount"},e))}},{key:"container",value:function(e){var t,i=[];if(e.attributes.icons){for(var a=0;a<e.attributes.icons.length;a++)i.push(Object(n.b)("i",{className:e.attributes.icons[a].className,id:e.attributes.icons[a].id}));t=Object(n.b)("div",{className:"zmTreeTIcon"},i)}return Object(n.b)("div",{className:"zmTreeBlk",id:e.attributes.containerID},Object(n.b)("div",{className:"zmTreeTitle   "},e.attributes.drag?Object(n.b)("i",{className:"msi-drag"}):void 0,Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"})),t),Object(n.b)("div",{className:"zmTreeData",id:"zmlSTree"}))}},{key:"setTitle",value:function(){s()(this.$el).find(".jsZmTreeText").text(this.attributes.text),s()(this.$el).find(".zmSFolPer").text(this.attributes.mode).attr("title",this.attributes.modeTitle),s()(this.$el).find("img").attr("title",this.attributes.imageTitle)}}]),t}(r.a),l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return o}},{key:"setValues",value:function(e){e.setTitle()}}]),t}(r.b)},qost:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var a,s,n=!1,r=!1,o={},l={},c=function(){var e,t,i=Object.keys(zmail.aInfo);for(var a in zmail.aInfo)if("1"===zmail.aInfo[a].accountType){zmail.defAccId=a;break}i.splice(i.indexOf(zmail.defAccId),1);var s=zmAdHocSettings.getAccountsLhsOrder();return"-no_acc-"!==s&&(t=s.split(","),i&&i.length&&(i=_.sortBy(i,function(i){return(e=t.indexOf(i))>-1?e:100}))),i.length&&(e=i.indexOf(zmail.accId))>0&&(i.splice(e,1),i.unshift(zmail.accId),zmAdHocSettings.setAccountsLhsOrder(_.first(i,3).join(","))),i}(),d=function(e){return e=parseInt(e)},m=function(e){return zdom("li",{className:"zmTreeNode","data-tooltip-pos":"right"},zdom("div",{className:"zmTreeNDWra"},zdom("i",{className:"msi-otherac zmThmClr"}),zdom("span",{className:"zmTreeText"}),zdom("span",{className:"zmTreeCount"})))},u=function(){zmail.postJsDeffered.promise.then(function(){s=zmComponent.customScrollBar("jszmPopAccCont","id")})},h=function(){var e=[];for(var t in zmail.aInfo)e.push([zmail.aInfo[t].seq,t]);return e.sort(function(e,t){return e[0]-t[0]}),e.map(function(e){return e[1]})},p=function(){o.moreAccountContainer.parent().hide()},f=function(e){var t=e.mailId,i=_zm.getEmailIcon(t);o.accountInfo.find("i").attr("class",i),o.accountInfo.find("font").text(e.disName)},b=function(){var e=zmail.aInfo[zmail.accId];f(e)},g=function(){var e=!1;o.htmlContainer.off("click").on("click",function(){var t=o.htmlContainer.find(".zmPopAcc");o.htmlContainer.find("#jszmAccSwitchBox span").removeClass("zmPopUpdate"),s&&($(s.scrollContainer).addClass("zmHideD"),setTimeout(function(){s.resize(),$(s.scrollContainer).removeClass("zmHideD")},250)),r=!r,t.slideToggle("fast",function(){e?s.resize():(e=!0,u())})}),o.moreAccountContainer.on("click",function(e){e.stopPropagation();var t=$.e(e.target).closest("li");if(t.length>0){var i=t.data("accID");if(zmail.accId===zmail.defAccId&&_zm.isOfflineLockAvailable()&&ZMStore.isOffline()){var a=zmText.get("mailsuite","offline");return _zm.succErrMsg("i",a.popAccountSwtichError),0}o.htmlContainer.find(".zmPopAcc"),zmUtil.switchAccount(i),$.publish("/mail/accountSwitch",{status:"started",accountID:i}),$.publish("popAccount/ExpCol"),i=zmail.accId}}),$.subscribe("zmsuite/loadApp",function(e,t){if(o.htmlContainer)if("m"===t.app)o.htmlContainer.css("display","block"),r?o.moreAccountContainer.parent().show():p(),b(),o.htmlContainer.find(".msi-barrow").removeClass("zmHideD"),o.htmlContainer.css("pointer-events","all"),o.updateHighLighter.removeClass("zmHideD");else{var i=zmail.aInfo[zmail.defAccId];f(i),p(),o.htmlContainer.find(".msi-barrow").addClass("zmHideD"),o.htmlContainer.css("pointer-events","none"),o.updateHighLighter.addClass("zmHideD")}})},z=function(e,t,i,a){if(a===zmail.accId)return!1;o.htmlContainer.find(e).length>0&&(e.find(".zmTreeCount").addClass("zmThmClr"),!o.updateHighLighter.hasClass("zmPopUpdate")&&t>0&&o.updateHighLighter.addClass("zmPopUpdate"),t>0&&$.e(e).find(".zmTreeCount").text(t),0===t&&$.e(e).find(".zmTreeCount").text(""))},v=function(){o.htmlContainer&&o.htmlContainer.remove();var e,t,i=zmsuite.$el.lhs.find(".zmAccSwitch");o.htmlContainer=$.e((t="zmAccSwitchBox ",c.length>0?e=zdom("i",{className:"msi-barrow"}):t+="cursorDefault",zdom("div",{className:"zmAccSwitchWra"},zdom("div",{className:t,id:"jszmAccSwitchBox"},zdom("span",{className:"",id:"jszmPopUpdate"}),zdom("div",{className:"zmAccSwitchInfo"},zdom("i",null),zdom("span",null),zdom("font",null)),e),zdom("div",{className:"zmPopAcc",style:{display:"none"}},zdom("ul",{id:"jszmPopAccCont"}))))),zmsuite.$el.popAccContainer=o.htmlContainer,o.accountInfo=o.htmlContainer.find(".zmAccSwitchInfo"),o.updateHighLighter=o.htmlContainer.find("#jszmPopUpdate"),$(i).append(o.htmlContainer),o.moreAccountContainer=o.htmlContainer.find("ul")},C=function(e,t){o.moreAccountContainer.children().remove();for(var i=0;i<e.length;i++){var a=e[i],s=zmail.aInfo[a];if(s.accId!==t){var r=$.e(m());r.attr("id","zm-ac-".concat(s.accId)).data("accID",s.accId),r.find(".zmTreeText").text(s.disName),r.find("i").attr("class",_zm.getEmailIcon(s.mailId));var c=s.disName;$(r).attr({"data-tooltip-title":c,"data-tooltip":s.mailId});var h=d(s.c);h>0&&r.find(".zmTreeCount").text(h),h>0&&!o.updateHighLighter.hasClass("zmPopUpdate")&&!1===n&&o.updateHighLighter.addClass("zmPopUpdate"),$.e(o.moreAccountContainer).append(r),l[s.accId]={},l[s.accId].$el=r,l[s.accId].updateCount=z}}u()},O=function(e,t){if("success"===(t=t||{}).status||"failed"===t.status){var i=zmail.accId;C(h(),i),b(),o.htmlContainer.find("#jszmAccSwitchBox span").removeClass("zmPopUpdate"),zmail.fromOtherService||(a||(a=zmsuite.$el.appBar.find(".zmApps")),a&&(a.children().removeClass("sel"),a.find(".msi-mailApp").parent().addClass("sel")))}},y=function(){v(),C(h(),zmail.accId),b(),c.length>0&&g(),!1===n&&($.subscribe("/mail/accountSwitch",O),n=!0)};$.subscribe("pop-accounts/reOrder",function(e,t){var i=1;(t=t.accIds).forEach(function(e){zmail.aInfo[e].seq=i,i++}),function(e){var t;for(o.moreAccountContainer.children().remove(),t=0;t<e.length;t++)if(e[t]!==zmail.accId){var i=zmail.aInfo[e[t]].mailId,a=$.e(m()),r=zmail.aInfo[e[t]].disName;$(a).attr({"data-tooltip-title":r,"data-tooltip":i}),a.attr("id","zm-ac-".concat(e[t])).data("accID",e[t]),a.find(".zmTreeText").text(r),a.find("i").attr("class",_zm.getEmailIcon(i));var c=d(zmail.aInfo[e[t]].c);c>0&&a.find(".zmTreeCount").text(c),c>0&&!o.updateHighLighter.hasClass("zmPopUpdate")&&!1===n&&o.updateHighLighter.addClass("zmPopUpdate"),$.e(o.moreAccountContainer).append(a),l[e[t]]={},l[e[t]].$el=a,l[e[t]].updateCount=z}s&&u()}(h())}),$.subscribe("settings/mail-accounts/pop-account-removed",function(e,t){var i=t.id;delete zmail.aInfo[i];var a=c.indexOf(i);if(c.splice(a,1),$.q("#zm-ac-".concat(i)).remove(),O(0,{status:"success"}),0===c.length)$(o.htmlContainer).find(".msi-barrow").remove();else if(0===$(o.htmlContainer).find(".msi-barrow").length){var s=zdom("i",{className:"msi-barrow"});$(o.htmlContainer).find("#jszmAccSwitchBox").append(s)}}),$.subscribe("settings/mail-accounts/displayNameChange",function(e,t){var i=t.obj.displayName,a=t.obj.id;zmail.aInfo[a].disName=i,a!==zmail.accId?($(zmsuite.$el.popAccContainer).find("#zm-ac-".concat(a," .zmTreeText")).text(i),$(zmsuite.$el.popAccContainer).find("#zm-ac-".concat(a)).attr("data-tooltip-title",i)):$(zmsuite.$el.popAccContainer).find(".zmAccSwitchInfo font").text(i)}),$.subscribe("settings/mail-accounts/pop-account-added",function(e,t){var i,a;i=t.id,a=t.data;var s=Object.keys(zmail.aInfo).length+1;if(zmail.aInfo[i]={Enabled:"true",accId:i,accName:"",accountType:"0",c:"0",disName:a.displayName,mailId:a.emailAddress,seq:s},0===$(o.htmlContainer).find(".msi-barrow").length){var n=zdom("i",{className:"msi-barrow"});$(o.htmlContainer).find("#jszmAccSwitchBox").removeClass("cursorDefault").append(n)}c.push(i),g(),O(0,{status:"success"})}),$.subscribe("/acc/unreadCountChange",function(e,t){if(t.mode&&t.accId&&zmail.aInfo[t.accId]){var i,a,s=parseInt(zmail.aInfo[t.accId].c);switch(t.mode){case"inc":zmail.aInfo[t.accId].c=[s+1].join("");break;case"dec":s>1&&(zmail.aInfo[t.accId].c=[s-1].join(""));break;case"update":s=void 0!==t.count?t.count:0,zmail.aInfo[t.accId].c=[s].join("");break;case"bulkInc":i=parseInt([t.count].join("")),zmail.aInfo[t.accId].c=[s+i].join("");break;case"bulkDec":a=s-parseInt([t.count].join("")),zmail.aInfo[t.accId].c=a<-1||0===a?"0":[a].join("")}l[t.accId]&&z(l[t.accId].$el,zmail.aInfo[t.accId].c,t.mode,t.accId)}})},v73g:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=function(e,t,i){return zmText.get("mailsuite",e,t,i)},s=function(){var e=zmPath.getCompletePath("default").domain.js,t=zmPath.getCompletePath("default").domain.css;"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/");var i="".concat(e+"zmsw","/").concat("s4","/js/zmate-min.js");zmAppLoader.loadFiles("extjs",i).then(function(){var i=zmail.aInfo[zmUtil.getZohoAccId()];if(zmail.supportWidget)zmail.supportWidget.toggleSideBar();else{var s="zm-feedback@zohocorp.com";zmail.isBaihui&&(s="support@zohocorp.com.cn");var n={type:"single",text:a("supportWidget"),privacyLink:"".concat(location.protocol,"//").concat(zmail.zohoUrl),lang:zmail.user.lang,fromAddress:zmail.aInfo[zmUtil.getZohoAccId()].mailId,menubar:{details:{ticket:{uploadObj:{desktop:{uploadAPI:"/zm/attach.do?mode=temp",uploadAPIParam:{type:"f",zmrcsr:zmAjq.getCookie("zmcsr"),accId:i.accId,tSize:0},autoLaunch:!0},onAttachmentRemove:function(e){var t={mode:"d",aId:i.accId,zmrcsr:zmAjq.getCookie("zmcsr"),sN:e.sN,fP:e.fP};zmAjq.XHR({u:"".concat(zmail.conPath,"/attach.do"),t:"POST",p:t})},iconClasses:{closeIcon:"msi-close",dragIcon:"msi-drag"},annotateObj:{iconClasses:{undoClass:"msi-undo",redoClass:"msi-redo",squareClass:"msi-box",circleClass:"msi-ellipse",maskClass:"msi-mask",lineClass:"msi-line",penClass:"msi-pen",cropClass:"msi-crop",textClass:"msi-text",colorClass:"msi-colorPalette"},afterInit:function(e){e.removeClass("ZC_annotatebox")}},slideshowObj:{iconClasses:{closeClass:"msi-close",prevClass:"msi-atprev",nextClass:"msi-atnext",moreClass:"msi-action",zoominClass:"msi-zoomin",zoomoutClass:"msi-zoomout",printClass:"msi-print",addToCloudClass:"msi-addcloud",downloadClass:"msi-download",zoomPlusClass:"msi-plus",zoomMinusClass:"msi-minus"},afterInit:function(e){e.removeClass("ZC_lightbox")}},imagePath:function(e){return zmResource.get("image","annotate/".concat(e))}},supportId:s,postURL:"".concat(zmail.conPath,"/sendfeedback.do"),type:"POST",params:{zmrcsr:zmAjq.getCookie("zmcsr"),accId:i.accId,zemailId:"".concat(i.disName,"<").concat(i.mailId,">")},headerTitle:a("helpcenter")}},hideTab:!0},faqDefaultParam:{categoryId:"4000000097801"},faqDomain:zmail.urls.supportURL,staticVersion:"s4",jsStaticPath:e,cssStaticPath:t};(zmail.isFuji||zmail.isBaihui)&&(n.type="ticket",n.menubar.details.ticket.headerTitle=a("contactus")),n.initCallBack=function(){zmail.supportWidget.toggleSideBar()},zmail.supportWidget=ZMate.init(n),zmUtil.updateFaqKey(zmUtil.getfaqDetails("searchKey"))}},function(){_zm.succErrMsg("e","Support widget could not be loaded !")})}},w7ec:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r});var a=i("orEe"),s=i("b5Xj"),n=function(){$.subscribe("/apps/tabSwitched",function(){var e=a.Tab.getTabIndex(a.Tab.getCurrentTab());if(a.Tab.tabArr[e]&&"Settings"===a.Tab.tabArr[e].appname){var t=$(Object(a.getCenter)()[0].$el).find(".SC_mclst"),i=$(Object(a.getCenter)()[0].$el).find(".zmAppContent");i.length>0&&($(t).insertBefore($(Object(a.getCenter)()[0].$el).find(".zmAppContent")),$(i).remove())}}),a.Events.on(a.EVENT_NAME.TAB_REORDER,function(){zmState.tabInfo.reorder()}),a.Events.on(a.EVENT_NAME.HIDE_MENU,function(){Object(s.b)()}),a.Events.on(a.EVENT_NAME.TAB_DRAG_HOVER,function(e){zmDragger.hoverOnTabs(e)}),a.Events.on(a.EVENT_NAME.SET_APP_STATE,function(e){zmState.appInfo.addNew(e.appId,e.stateData.data,!0),zmState.sendRequestToSaveState()}),a.Events.on(a.EVENT_NAME.HASH_URL_UPDATED,function(e){$.publish(a.EVENT_NAME.HASH_URL_UPDATED,e)}),a.Events.on(a.EVENT_NAME.HASH_URL_CHANGED,function(e){$.publish(a.EVENT_NAME.HASH_URL_CHANGED,e)}),a.Events.on(a.EVENT_NAME.AFTER_HASH_CHANGE,function(){"wp"===zmail.fromService&&$.publish("hashURL/changed")}),a.Events.on(a.EVENT_NAME.CHANGE_CURRENT_TAB,function(e){zmTab.currentTab=e}),a.Events.on(a.EVENT_NAME.CLOSE_ASSOCIATED_WORKSPACE,function(e){var t=e.id;zmCenterListing.mailObjectAPI.dropViewObjectStore(t)}),a.Events.on(a.EVENT_NAME.APP_CLOSED,function(e){$.publish(a.EVENT_NAME.APP_CLOSED,e)}),a.Events.on(a.EVENT_NAME.PREVIEW_RESIZE,function(){zmPreviewTemplate.setPreviewHeaderHeight(),zmStreamsApp.util.adjustWidth()}),a.Events.on(a.EVENT_NAME.PREVIEW_RESIZE_COMPLETED,function(e){$.publish("zmsuite/previewResize",e),zmAdHocSettings.setMailPreviewSize(parseInt(e.previewSize))}),a.Events.on("showMenu",function(e){zmsuite.showMenu(e)})},r=function(){Object(a.initAppSuite)({setDragDrophandler:function(e){e.allowedParents+=",.pluginBox";var t=this;this.dragEventObj=e,this.$el.mousedown(function(i){var s,n,r,o,l,c=!1,d=!0;if(3!==i.which){n=i.pageY,s=i.target||i.srcElement;var m=e.rowCls||"zmL",u=e.selCls||"SC_check";if((s=$(s).closest(".".concat(m))).length&&(!e.allowDrag||e.allowDrag(s))){var h=a.Tab.getCurrentTab();s.hasClass(u)&&(s=t.$el.find(".".concat(m,".").concat(u))),e.fromData=s,$(document).on("mousemove.ZMCenter",function(t){var i,s;$.publish("mail/draggingStarted",{text:zmDragger.getDropMessage()}),c=!0;var m=t.target||t.srcElement,u=$(m);if((i=u.parents(".zmTreeBlk"))&&i.length?(l="MovingToFolder",(s=Object(a.getLeft)().getNodes()[0])||(s=Object(a.getAppObj)(Object(a.getCurrentAppObjId)()).left.getNodes()[0])):(i=u.parents(".zmTtab"))&&i.length?(zmDragger.hoverOnTabs(u,"mail"),l="MovingToCompose"):(i=u.hasClass("SC_drag"))&&i.length?$.publish("mail/draggingOnCmpMask",{}):(i=u.parents(".SC_Twpr"))&&i.length?zmDragger.updateScroll(m,i):l="",d&&(e.helperText=e.dragStart(t,e.fromData)),d=!1,"MovingToFolder"===l){if("zmllabelH"===(o=s.getLayer(i[0].id)).id&&"m"===zmApp.currentApp)zmLHS.currentList.zmllabelH.getMetaInfo("listVisible")||zmLHS.currentList.zmllabelH.getMetaInfo("header").trigger("click");r=o.onMouseMove(t,e,n)}else Object(a.showDragHandler)(t,!1,e.helperText),s&&s.removeDragHelperFromLayers();n=t.pageY}),t.$el.on("mouseleave.ZMCenter",function(){Object(a.showDragHandler)(i,!1,e.helperText)}),$(document).on("mouseup.ZMCenter",function(i){var s,n,d,m;zmDragger.resetScrollPos();var u=[];if(s=i.target||i.srcElement,(s=$(s)).hasClass("zmPluginOverlay")?(n=s,l="eWidget"):(n=s.parents(".zmTreeBlk"))&&n.length?l="MovingToFolder":s.hasClass("SC_drag")?(n=s,l="MovingToCompose"):s.parent().hasClass("SC_drag")?(n=s.parent(),l="MovingToCompose"):s.closest(".zmTasksApp")&&(n=s.closest(".zmTasksApp"),l="MovingToTaskList"),$(document).off("mousemove.ZMCenter"),$(document).off("mouseup.ZMCenter"),t.$el.off("mouseleave.ZMCenter"),$.publish("mail/draggingEnded",{}),c&&n.length){if(s=i.target||i.srcElement,u=(s=$(s)).parents(e.allowedParents),"MovingToFolder"===l&&!u.length||"MovingToCompose"===l&&!n.length)return;r&&r.toDrop&&"MovingToFolder"===l?(s=r.curElem,"inside"===r.pos&&(m=s.data("zmsData").rowObject,d=e.fromData,delete e.fromData,e.onDrop(i,d,m,void 0))):"MovingToCompose"===l?zmDragger.dropOnCompose(e.fromData,h,n):"MovingToTaskList"===l?(m=s.closest("div.zmL").data(),d=e.fromData,delete e.fromData,e.onDrop(i,d,m,void 0)):"eWidget"===l&&ZMWidgets.publishDropData(e.fromData)}o&&(o.removeDragHelper(),o.showHoverOnRow()),Object(a.removeDragHandler)(),c=!1})}}})}})}},wTXI:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("Nw99"),o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){return{id:"",text:"",title:"",seq:0,count:"",state:"",showIndication:!1,visible:!0}}},{key:"template",value:function(){return Object(n.b)("div",{className:"zmTreeNode"},Object(n.b)("div",{className:"zmTreeNDWra"},Object(n.b)("div",{className:"zmTreeText"},Object(n.b)("span",{className:"jsZmTreeText"}))),Object(n.b)("span",{className:"zmTreeCount"}))}},{key:"updateState",value:function(){"unread"===this.attributes.state?s()(this.$el).find(".zmTreeText").addClass("zmBold"):s()(this.$el).find(".zmTreeText").removeClass("zmBold")}},{key:"toggleState",value:function(){this.attributes.state="unread"===this.attributes.state?"read":"unread"}},{key:"showIndication",value:function(){this.attributes.showIndication?s()(this.$el).find(".zmTreeCount").addClass("zmThmClr"):s()(this.$el).find(".zmTreeCount").removeClass("zmThmClr")}},{key:"updateCount",value:function(){this.attributes.count>0&&s()(this.$el).find(".zmTreeCount").text(this.attributes.count),this.updateState(),this.showIndication()}},{key:"update",value:function(){this.changed&&((this.changed.title||this.changed.text)&&this.setTextTitle(),void 0!==this.changed.count&&this.updateCount(),this.changed.showIndication&&this.showIndication(),this.changed.updateState&&this.updateState())}}]),t}(r.a),l=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return o}},{key:"setValues",value:function(e){e.setTextTitle(),e.updateCount()}}]),t}(r.b)},xLM4:function(e,t,i){"use strict";i.d(t,"b",function(){return c}),i.d(t,"d",function(){return h}),i.d(t,"c",function(){return m}),i.d(t,"a",function(){return u});var a,s=i("EVdn"),n=i.n(s),r=i("jQ7T"),o=i("orEe"),l=i("hSUr");"wp"===zmail.fromService&&l.f.load("mailInOtherServices");var c=function(){var e=parseFloat(n()(zmsuite.$el.appBar).width());return e>100?100:e},d=function(){function e(){babelHelpers.classCallCheck(this,e),this.$el=n()(this.htmlStruct())}return babelHelpers.createClass(e,[{key:"htmlStruct",value:function(){return Object(r.b)("div",{className:"zmCollapseLhs"},Object(r.b)("i",{className:"msi-collapsePane"}))}},{key:"toggle",value:function(e,t){var i=e.$el;if(t.isVisible){n.a.e(i).removeClass("off"),n.a.e(i).find("i").addClass("msi-collapsePane").removeClass("msi-expandPane"),zmsuite.$el.appBar.removeClass("zmHide");var a=n()(zmsuite.$el.appBar).outerWidth();n()(zmsuite.$el.appLogo).css("width",_zm.convertToREM(parseInt(zmAdHocSettings.getLhsResize())+a))}else n.a.e(i).addClass("off"),n.a.e(i).find("i").removeClass("msi-collapsePane").addClass("msi-expandPane"),zmsuite.$el.appBar.addClass("zmHide"),n()(zmsuite.$el.appLogo).css("width",_zm.convertToREM(parseInt(zmAdHocSettings.getLhsResize())));n.a.publish("zmsuite/appBarToggle",{started:!0});var s,r,o,l=(s="customization.".concat(t.isVisible?"hideApps":"showApps"),zmText.get("mailsuite",s,r,o));n()(i).attr({"data-tooltip":l,"data-tooltip-pos":"top"}),n.a.publish("zmsuite/lhsResize",{started:!0}),setTimeout(function(){t.clbk&&t.clbk(),n.a.publish("zmsuite/lhsResize",{completed:!0}),n.a.publish("zmsuite/appBarToggle",{completed:!0})},300)}},{key:"initMouseEvent",value:function(e){var t;zmsuite.customization.appBar.isVisible="true"===zmAdHocSettings.getLhsAppBarView(),n()(e.$el).on("click",function(){zmsuite.customization.appBar.isVisible=!zmsuite.customization.appBar.isVisible,e.toggle(e,{isVisible:zmsuite.customization.appBar.isVisible}),clearTimeout(t),t=setTimeout(function(){e.setValue()},1e3)})}},{key:"setValue",value:function(){zmAdHocSettings.setLhsAppBarView(String(zmsuite.customization.appBar.isVisible))}}]),e}(),m=function(){a=new d,n.a.e(zmsuite.$el.LHSBlock).append(a.$el),a.initMouseEvent(a),zmail.cssDeffered.then(function(){a.toggle(a,{isVisible:zmsuite.customization.appBar.isVisible})})},u=function(e){var t=e.show,i=e.callback,s=e.hide;t?a.toggle(a,{isVisible:!0,clbk:i}):s&&a.toggle(a,{isVisible:!1})},h=function(){zmail.postJsDeffered.promise.then(function(){var e={},t={mousedown:function(t){e.target.addClass("zmTRon"),e.boundingBox=n()(e.target).parent().offset()},mousemove:function(t){var i=t.clientX-e.boundingBox.left;i=(i=i>270?270:i)<180?180:i,e.orginalWidth=i,e.target.parent().css("width",_zm.convertToREM(i));var a=0;"true"===zmAdHocSettings.getLhsAppBarView()&&(a=n()(zmsuite.$el.appBar).outerWidth()),n()(zmsuite.$el.appLogo).css("width",_zm.convertToREM(i+a)),"undefined"!=typeof zmStreamsApp&&zmStreamsApp.util&&zmStreamsApp.util.adjustWidth(),n.a.publish("zmsuite/lhsResize",{width:i})},mouseup:function(){var t=parseInt(zmAdHocSettings.getLhsResize());o.Tab.tabResize({increaseInWidth:e.orginalWidth>t}),e.target.removeClass("zmTRon"),zmAdHocSettings.setLhsResize(e.orginalWidth),n.a.publish("zmsuite/lhsResize",{width:e.orginalWidth,completed:!0})}};e.target=zmsuite.$el.lhs.find("#zmTreeResize");var i={target:e.target,mousedownClbk:t.mousedown,mousemoveClbk:t.mousemove,mouseupClbk:t.mouseup};Object(o.resizeHandler)(i)})}},yKbc:function(e,t,i){"use strict";i.d(t,"a",function(){return z});var a=i("EVdn"),s=i.n(a),n=i("jQ7T"),r=i("xweI"),o=i.n(r),l=i("orEe"),c=i("4ji5"),d=i("+sAg"),m=i("vr4s"),u=i("7M+/"),h=Object(u.c)("zmState.leftStateInfo"),p={SELECTION:"zmCurTree",TREE_NODE:".zmTreeNode",TREE_DATA:".zmTreeData",TREE_TEXT:".zmTreeText"},f=function(){var e=Object(l.getCurrentAppObjId)(),t=Object(l.getLeft)(e);return h.utils.getKeyFromAppId(zmApp.currentApp)||t.getAppKey()},b=function(){function e(t){babelHelpers.classCallCheck(this,e),this.id=void 0,this.sortLayer=t&&t.sortLeft,this.layerArr=void 0,zmsuite.sortLHSLayer=this.sortLayer,this.push()}return babelHelpers.createClass(e,[{key:"push",value:function(e){this.id="zm_lftree",this.sortLayer?this.layerArr=this.getSortedLayer(e):this.layerArr=e&&e.layerArr,this.el=s.a.q("#jsZMLeft")}},{key:"getSortedLayer",value:function(e){var t=zmAdHocSettings.getLeftOrder();if(zmail.leftOrder=t.split(","),e&&e.layerArr){var i=e.__appKey||(e.__appKey=f());return t="string"==typeof(t=zmAdHocSettings.getAllAppsLeftOrder()[i]||e.layerArr.map(function(e){return e.id}))?t.split(","):t,o()(e.layerArr,function(e){var i=e.id,a=t.indexOf(i);return a>-1?a:100})}}},{key:"setListener",value:function(e,t){this.el.off(e).on(e,t)}},{key:"resetDefaultSelection",value:function(){var e=Object(l.getCurrentAppObjId)(),t=Object(l.getLeft)(e),i=t.selLayerId,a=t.selId,s=this.el.find(".".concat(p.SELECTION));s.length&&s.removeClass(p.SELECTION),this.getLayer(i).el.find("#".concat(a)).addClass(p.SELECTION)}},{key:"setTempSelection",value:function(e,t){var i,a=this.el.find(".".concat(p.SELECTION)),s=this.getLayer(e);s&&(i=s.el.find("#".concat(t)),a.length&&a.removeClass(p.SELECTION),i.length&&(i.addClass(p.SELECTION),i.find(".zmThmClr").removeClass("zmThmClr")))}},{key:"getLayer",value:function(e){var t,i;if(void 0!==this.layerArr){for(i=0;i<this.layerArr.length;i+=1)if(this.layerArr[i].id===e){t=this.layerArr[i];break}return t}}},{key:"getNextLayer",value:function(e){var t,i;for(i=0;i<this.layerArr.length;i+=1)if(this.layerArr[i].id===e&&i<this.layerArr.length-1){t=this.layerArr[i+1];break}return t}},{key:"getPreviousLayer",value:function(e){var t,i;for(i=0;i<this.layerArr.length;i+=1)if(this.layerArr[i].id===e&&i>0){t=this.layerArr[i-1];break}return t}},{key:"getLayerSeq",value:function(e){var t,i;for(i=0;i<this.layerArr.length;i+=1)if(this.layerArr[i].id===e){t=i;break}return t}},{key:"getLayerClone",value:function(e){var t,i;for(i=0;i<this.layerArr.length;i+=1)if(this.layerArr[i].id===e){t=this.layerArr[i];break}return s.a.extend(!0,{},t)}},{key:"setLayerArr",value:function(e){this.layerArr=e}},{key:"replaceLayer",value:function(e,t){var i=t.constructLayer(),a=this.getLayerSeq(e);this.layerArr.splice(a,1,t),s.a.q("#".concat(e)).replaceWith(i)}},{key:"deleteLayer",value:function(e){var t=this.getLayerSeq(e);this.layerArr.splice(t,1),s.a.q("#".concat(e)).remove(),this.showStaticHeaderAndScrollBar()}},{key:"appendLayer",value:function(e,t){var i=t.constructLayer();this.layerArr.push(t),s.a.q("#".concat(this.id)).find("#jsZMLeft").append(i),this.showStaticHeaderAndScrollBar()}},{key:"prependLayer",value:function(e){var t=e.constructLayer();this.layerArr.splice(0,0,e),s.a.q("#".concat(this.id)).find("#jsZMLeft").prepend(t),this.showStaticHeaderAndScrollBar()}},{key:"insertLayerBefore",value:function(e,t){var i=t.constructLayer();if(this.sortLayer)this.insertLayerAtSortedPosition(t);else{var a=this.getLayerSeq(e);this.layerArr.splice(a,0,t),s.a.q("#".concat(e)).before(i),this.showStaticHeaderAndScrollBar()}}},{key:"insertLayerAfter",value:function(e,t){if(this.sortLayer)this.insertLayerAtSortedPosition(t);else{var i=t.constructLayer(),a=this.getLayerSeq(e);this.layerArr.splice(a+1,0,t),s.a.q("#".concat(e)).after(i),this.showStaticHeaderAndScrollBar()}}},{key:"insertLayerAtSortedPosition",value:function(e){var t=e.constructLayer(),i=this.getLayerIdToInsert(e.id);if(-1===i)this.appendLayer(i,e);else if(0===i)this.prependLayer(e);else{var a=this.getLayerSeq(i);this.layerArr.splice(a+1,0,e),s.a.q("#".concat(i)).after(t),this.showStaticHeaderAndScrollBar()}}},{key:"insertLayerAt",value:function(e,t){}},{key:"removeDragHelperFromLayers",value:function(){var e,t=this.layerArr.length;for(e=0;e<t;e+=1)this.layerArr[e].removeDragHelper()}},{key:"getLayerIdToInsert",value:function(e){var t,i,a=zmail.leftOrder.indexOf(e);if(t=a,a>-1)for(i=0;i<a;i+=1)this.getLayer(zmail.leftOrder[i])&&(t=zmail.leftOrder[i]);return t}},{key:"showStaticHeaderAndScrollBar",value:function(){this.staticHeaderAndScrollBarFn&&"function"==typeof this.staticHeaderAndScrollBarFn&&this.staticHeaderAndScrollBarFn()}},{key:"setStaticHeaderAndScrollBarFn",value:function(e){this.staticHeaderAndScrollBarFn=e}},{key:"enableLayerSortable",value:function(){if(this.sortLayer){this.__appKey=this.__appKey||f();var e=this.layerArr.reduce(function(e,t){var i=t.getMappedHeaderObject();return e[t.id]=i.name,e},{});this._dragNDropInstance=Object(c.a)({$el:this.el,appKey:this.__appKey,idNameMap:e||{},__instance:this})}}},{key:"disableLayerSortable",value:function(){this.sortLayer&&this._dragNDropInstance&&this._dragNDropInstance.unbindDragNDropEvents()}}]),e}(),g=function(){function e(){babelHelpers.classCallCheck(this,e),this.id=void 0,this.el=void 0}return babelHelpers.createClass(e,[{key:"init",value:function(){}},{key:"setListener",value:function(e,t){this.el.off(e).on(e,t)}},{key:"setId",value:function(e){this.id=e}}]),e}(),z=function(){function e(t){babelHelpers.classCallCheck(this,e),this.id="jsZMLeft",this.leftAppKey=t.appKey||t.appId,this.top=void 0,this.center=void 0,this.bottom=void 0,this.sortLeftCenter=!0,this.nodeArr=[],t.data.LNodes&&this.push(t.data.LNodes),this.selId=void 0,this.noSelClass=t.noLeftSel,this.scrollBar=void 0}return babelHelpers.createClass(e,[{key:"push",value:function(){this.nodeArr[0]=this.center=new b({sortLeft:this.sortLeftCenter}),this.nodeArr[0].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),this.center.setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),this.nodeArr[1]=this.bottom=new g}},{key:"getNodes",value:function(){return this.nodeArr}},{key:"getAppKey",value:function(){return this.leftAppKey}},{key:"setAppKey",value:function(e){this.leftAppKey=e}},{key:"renderTop",value:function(){if(s.a.q(".SClt").remove(),this.top){var e=this.top.construct();e&&s.a.q("#".concat(this.id)).prepend(e)}}},{key:"isLayerExp",value:function(e){if(e){var t,i,a=this.center.layerArr;for(i=0;i<a.length;++i)if(a[i].id===e){t=a[i];break}if(t&&!t.avoidStateSave)return!t.isLayerExpanded();var n=s.a.q("#".concat(this.center.id)).find("#".concat(e)).eq(0).children().last();return n[0]?"block"===n.css("display"):void 0}}},{key:"renderLayers",value:function(){var e=this.center.el;e.html("");var t,i=this.center,a=i.layerArr;var n,r=[{className:"msi-manageGroup",id:"znNoteManageGroup",callback:function(){Object(d.m)().then(function(){zmStreamsApp.GroupManageApp.init({groupManage:!0})})}},{className:"msi-plus",id:"znNoteAddGroup",callback:function(){Object(d.m)().then(function(){zmStreamsApp.GroupManageApp.init({createGroup:!0})})}}],o=[{className:"msi-plus",id:"znNoteAddTags",callback:function(){zmTags.addTag()}}];function c(e,t){if("header"===t.type){for(var i=e.getMetaInfo("id"),a=Object(l.getAppLeft)().center.layerArr,n=0;n<a.length;n++)a[n].id===i&&(a[n].showList=e.getMetaInfo("listVisible"));return!0}return void 0===s()(t).attr("id")}function u(e){var t=e.collection,i=e.elem,a=s()(i).attr("id");if(c(t,i))return t.getMetaInfo("listVisible")?h.removeEntry(Object(l.getAppLeft)().getAppKey(),t.getMetaInfo("id")):h.addEntry(Object(l.getAppLeft)().getAppKey(),t.getMetaInfo("id")),!0;var n=e.event,r=t.get("header").attributes.info,o=t.get("header").attributes.containerID,d={zmsData:{type:"click",rowInfo:{info:r,layerId:o},rowObject:{},colInfo:{column:2},id:a,eventInfo:n,containerId:t.getMetaInfo("id")}};"l"===zmApp.selectedApp&&(d.zmsData.rowInfo.type="list"),d.zmsData.type=3===n.which?"contextmenu":"click";var u=t.get(a).attributes;d.zmsData.rowObject[a]={parentId:u.parent,HC:!!u.child&&u.child.length>0,id:a,dispName:u.text,name:u.text},"contextmenu"===d.zmsData.type&&s()("#jsZMLeft").one("scroll",function(){Object(m.hideMenu)()}),d.zmsData.rowObject[a].FN=u.text,u.groupId&&(d.zmsData.rowObject[a].groupId=u.groupId),"l"===zmApp.selectedApp&&"-1"!==u.parent&&(d.zmsData.rowObject[a].p=u.parent);["zmllabelH","zmlviewH","zmlSTreeH"].includes(o)&&"click"===d.zmsData.type&&(s.a.q("#jsZMLeft").find(p.TREE_NODE).removeClass("zmCurTree"),s.a.q("#".concat(d.zmsData.id)).addClass("zmCurTree")),"zmlSSrchTreeH"!==d.zmsData.containerId&&"contextmenu"!==n.type&&(Object(l.getAppLeft)().selId=d.zmsData.id,Object(l.getAppLeft)().selLayerId=d.zmsData.containerId),e.zmsData=d.zmsData,zmInit.bindLeftActions(e)}function f(e,t){var i=e.headerObject,a=e.id,s=t.infoObject,n={text:i.name,id:"header",info:s,containerID:a};return"m"===zmApp.currentApp&&(n.drag=!0),"hgroups"===i.id||"zmLinkGrpTree"===i.id&&_zm.isStreamsEnabled()?n.icons=r:"zmllabelH"===a&&(n.icons=o,"m"===zmApp.currentApp&&(n.icons[0].callback=function(){zmlab.showCreateTagPopUp({mode:"new"})})),n}function b(e,t){var i=e.listObject,a=e.mapObject,s=[];for(var n in s.push(f(e,a)),i){var r=i[n][a.id];s.push({id:r,color:i[n][a.color],text:i[n][a.name],title:i[n][a.name],seq:i[n][a.sequence]})}zmLHS.addCollection("tag","zmllabelH",{list:s,isVisible:!0===e.showList,clickCallback:t})}function g(e,i){var s=e.mapObject,n=e.listObject,r=[];r.push(f(e,s));var o=!1,l={};for(var c in n){var d=n[c][s.id];"more"!==d&&"less"!==d||(o=!0),l[d]={id:d,text:n[c][s.name],title:n[c][s.name],seq:n[c][s.sequence],count:e.countObject[d]?e.countObject[d][s.count]:0,parent:n[c][s.parentId]?n[c][s.parentId]:"-1",child:[],childVisible:n[c][s.expChild]||n[c].expChild||!1,isPrimary:!0!==n[c].shouldshow};var m=parseInt(l[d].count);isNaN(m)&&(m=0),l[d].count=m}var u=a[t].childObject;for(var h in u){var p=u[h].CH;for(var b in p){var g=p[b][s.id];l[g]={id:g,text:p[b][s.name],title:p[b][s.name],seq:p[b][s.sequence],count:a[t].countObject[g][s.count],parent:h,child:[],groupId:p[b].groupId,isPrimary:!1},"-1"!==l[g].parent&&l[l[g].parent]&&l[l[g].parent].child.push(g);var z=parseInt(l[g].count);isNaN(z)&&(z=0),l[g].count=z}}for(var v in l)r.push(l[v]);var C=!0;"ngroups"===a[t].id&&!0===o&&(C=!1),zmLHS.addCollection("folder",a[t].id,{list:r,isVisible:!0===a[t].showList,clickCallback:i,showAll:C})}function z(e){var t=e.collection,i=e.elem,a=s()(i).attr("id");if(c(t,i))return t.getMetaInfo("listVisible")?h.removeEntry(Object(l.getAppLeft)().getAppKey(),t.getMetaInfo("id")):h.addEntry(Object(l.getAppLeft)().getAppKey(),t.getMetaInfo("id")),!0;var r=e.event,o=t.get("header").attributes.info;if(s()(r.target).closest(".msi-rarrow").length>0||s()(r.target).closest(".msi-barrow").length>0){var d=t.get(a),u=Object(l.getAppLeft)().center.layerArr,p=t.getMetaInfo("id");d.updateChildProp();for(var f=0;f<u.length;f++)if(u[f].id===p){u[f].listObject[a].E=d.attributes.childVisible;break}return 0}var b={zmsData:{type:"click",rowInfo:{info:o},rowObject:{},colInfo:{column:2},id:a,eventInfo:r,containerId:t.getMetaInfo("id")}};"l"===zmApp.selectedApp&&(b.zmsData.rowInfo.type="list"),b.zmsData.type=3===r.which||"contextmenu"===r.type?"contextmenu":"click";var g=t.get(a).attributes;b.zmsData.rowObject[a]={parentId:g.parent,HC:!!g.child&&g.child.length>0,id:a,dispName:g.title,name:g.title},g.groupId&&(b.zmsData.rowObject[a].groupId=g.groupId),"contextmenu"===b.zmsData.type&&s()("#jsZMLeft").one("scroll",function(){Object(m.hideMenu)()}),"l"===zmApp.selectedApp&&"-1"!==g.parent&&(b.zmsData.rowObject[a].p=g.parent),Object(l.getAppLeft)().selId=b.zmsData.id,Object(l.getAppLeft)().selLayerId=b.zmsData.containerId,e.zmsData=b.zmsData,"l"!==zmApp.selectedApp&&"n"!==zmApp.selectedApp||("contextmenu"===b.zmsData.type&&"zmllabelH"===b.zmsData.containerId?zmTags.handleRightClick(e):"n"===zmApp.selectedApp?(znNote.leftSelectedId=b.zmsData.id,znNote.znLeftClbk(e)):n?n(e):zmModules.bookmarks.getApp().then(function(t){var i=t.handleLeftClick;(n=i)(e)})),3!==r.which&&"contextmenu"!==r.type&&zmLHS.updateSelection(t.getMetaInfo("id"),a)}var v=!1;for((void 0===zmApp.selectedApp&&"m"===zmApp.currentApp||"m"===zmApp.selectedApp)&&(v=!0),t=0;t<a.length;t+=1){var C=void 0,O={};if("n"===zmApp.selectedApp){var y=Object(l.getLeft)().getAppKey()||h.utils.getKeyFromAppId(zmApp.currentApp),T=h.utils.checkForPresence(a[t].id,y);a[t].showList=!T,"zmllabelH"===a[t].id?(b(a[t],z),a[t].el=zmLHS.currentList.zmllabelH.getMetaInfo("container"),C=void 0):"ngroups"!==a[t].id&&"nviews"!==a[t].id&&"dgroups"!==a[t].id||(g(a[t],z),C=void 0)}else if("l"===zmApp.selectedApp){var A=Object(l.getLeft)().getAppKey()||h.utils.getKeyFromAppId(zmApp.currentApp),S=h.utils.checkForPresence(a[t].id,A);a[t].showList=!S,"zmllabelH"===a[t].id?(b(a[t],z),a[t].el=zmLHS.currentList.zmllabelH.getMetaInfo("container"),C=void 0):"zmLinkGrpTree"!==a[t].id&&"zmLinkViewTree"!==a[t].id&&"zmLinkDGrpTree"!==a[t].id||(g(a[t],z),C=void 0)}else if(v&&["zmlSSrchTreeH","zmllabelH","zmlSTreeH","zmlviewH"].includes(a[t].id)){var j=Object(l.getLeft)().getAppKey()||h.utils.getKeyFromAppId(zmApp.currentApp),k=h.utils.checkForPresence(a[t].id,j);a[t].showList=!k;var w=a[t].mapObject,I=a[t].listObject,L=[];if("zmllabelH"===a[t].id)b(a[t],u),a[t].el=zmLHS.currentList.zmllabelH.getMetaInfo("container"),s()(a[t].el).find(p.TREE_DATA).attr("id","zmllabel"),a[t].attachDragDropEvents();else if("zmlSTreeH"===a[t].id){L.push(f(a[t],w));var N=2,D=a[t].classObject.accessText;for(var H in I){var E=H;O[E]={id:E,text:I[H][w.name]||I[H][w.dispName],title:I[H][w.dispName],mode:D[I[H][w.accessText]],modeTitle:I[H][w.sharedFolderToolTip],zuid:I[H][w.OZUID],imageTitle:I[H][w.dispName],seq:N},N++}for(var x in O)L.push(O[x]);zmLHS.addCollection("sharedFolder",a[t].id,{list:L,isVisible:a[t].showList,clickCallback:u})}else{for(var M in L.push(f(a[t],w)),I){var _=I[M][w.id]||M;O[_]={id:_,text:I[M][w.name],seq:parseInt(I[M][w.sequence])||Object.keys(O).length}}if(a[t].countObject){var B=a[t].countObject;for(var P in B){var $=I[P][w.id]||P;O[$].count=B[P].c,O[$].state=parseInt(B[P].c)>0?"unread":"read",O[$].parent=B[P].p}}for(var q in O)L.push(O[q]);if(zmLHS.addCollection("countList",a[t].id,{list:L,isVisible:!0===a[t].showList,clickCallback:u}),"zmlSSrchTreeH"===a[t].id)zmLHS.currentList.zmlSSrchTreeH.getMetaInfo("container").find(p.TREE_DATA).attr("id","zmlSSrchTree")}C=void 0,a[t].el=zmLHS.currentList[a[t].id].getMetaInfo("container")}else C=a[t].constructLayer();i.layerArr[t].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),a[t].rebindChildToggleEvents(),e.append(C)}}},{key:"rerender",value:function(e,t){if(e){var i,a=this.center,n=a.layerArr;if(n.length)for(i=0;i<n.length;++i)if(n[i].id===e){a.disableLayerSortable(),"header"===t?s()(n[i].el).find(p.TREE_TEXT).replaceWith(n[i].getHeaderDOM()):"list"===t?s()(n[i].el).find(p.TREE_DATA).replaceWith(n[i].getListDOM()):(s()(n[i].el).replaceWith(n[i].constructLayer()),a.layerArr[i].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this))),a.enableLayerSortable();break}}}},{key:"showStaticHeaderAndScrollBar",value:function(){}},{key:"scrollIntoView",value:function(e){var t,i,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;(t="object"===babelHelpers.typeof(e)?e:s.a.q("#".concat(e))[0])&&(t.scrollIntoView(),i=0,s.a.q("#".concat(this.center.id))[0]&&(i=s.a.q("#".concat(this.center.id))[0].scrollTop),n=i-(a?s.a.q("#zmLeft-upstatic-header")[0]?s.a.q("#zmLeft-upstatic-header")[0].offsetHeight:0:s.a.q("#zmLeft-btstatic-header")[0]?s.a.q("#zmLeft-btstatic-header")[0].offsetHeight:0),s.a.q("#".concat(this.center.id)).animate({scrollTop:"".concat(n,"px")},{duration:"slow",progress:this.showStaticHeaderAndScrollBar.bind(this)}))}},{key:"updateRowSelection",value:function(){var e=s.a.q("#".concat(this.id));this.noSelClass?e.addClass("SC_nosel"):e.removeClass("SC_nosel")}},{key:"render",value:function(){if(this.nodeArr.length){if("zm_Contacts"===this.leftAppKey&&"cn"!==zmApp.selectedApp)return!1;s.a.q("#".concat(this.id)).find(".SClm").remove(),zmsuite.sortLHSLayer=!0,this.renderTop(),this.renderLayers(),this.showStaticHeaderAndScrollBar(),this.selId&&("n"===zmApp.selectedApp||"l"===zmApp.selectedApp?zmLHS.updateSelection(this.selLayerId,this.selId):s.a.q("#".concat(this.selId)).addClass("zmCurTree")),this.center.disableLayerSortable(),this.center.enableLayerSortable()}this.updateRowSelection(),this.setcustomScrollbar()}},{key:"clear",value:function(){s.a.q("#".concat(this.id)).html(""),this.top=void 0,this.center=void 0,this.bottom=void 0,this.nodeArr=[],this.showStaticHeaderAndScrollBar()}},{key:"expParentOfRId",value:function(e,t){var i=t&&t.getRowObj(e)||{},a=i.p||(i[e]||{}).p;if(a){var n=s.a.q("#".concat(this.id)).find("#".concat(a)),r=n.find("i.msi-rarrow");n.is(":visible")&&!r.hasClass("msi-barrow")?r.trigger("click"):(this.expParentOfRId(a,t),n.is(":visible")&&!r.hasClass("msi-barrow")&&r.trigger("click"))}}},{key:"setcustomScrollbar",value:function(){var e=zmComponent.customScrollBar("zmTreeWrapper","class");window.customScroll&&window.customScroll.unbindwindowResize(),window.customScroll=e,e.scrollView(),s.a.subscribe("zmsuite/lhsResize",function(){e.resize()}),s.a.subscribe("lhs/expandCollapse",function(){e.resize()}),s.a.subscribe("zmsuite/appBarToggle",function(){e.resize()})}},{key:"selRow",value:function(e,t,i){if(e){if("n"===zmApp.selectedApp||"l"===zmApp.selectedApp)return zmLHS.updateSelection(t,e),0;s.a.q("#".concat(this.id)).find("div.zmTreeNode").removeClass("zmCurTree"),this.selId=e;var a=s.a.q("#".concat(this.id)).find("#".concat(e));if(a.addClass("zmCurTree"),!a.is(":visible")){var n=this.center.layerArr.filter(function(e){return e.id===t})[0];this.expParentOfRId(e,n),s.a.q("#".concat(e)).addClass("zmCurTree")}}if(t&&(this.selLayerId=t),i){var r=s.a.q("#".concat(e||t))[0];r&&(this.scrollIntoView(r),this.setcustomScrollbar())}}},{key:"getSelectedRowObj",value:function(){var e,t=this.center.getLayer(this.selLayerId);return t&&(e=t.getRowObj(this.selId)),e}},{key:"setListener",value:function(e,t){var i=t,a=this;e&&("click"===e||"contextmenu"===e?s.a.q("#".concat(a.id)).off(e).on(e,"div.zmTreeNode,div.zmTreeTitle",function(e){e.preventDefault(),e.stopPropagation();var t,n=e.type,r=e.target||e.srcElement;r=t=s()(r);var o,c=2,d=["msi-rarrow","msi-barrow"];for(o in d)if(d.hasOwnProperty(o)&&r.hasClass(d[o])){r.parent().removeClass("zmBold"),c=1;break}(r=r.closest(p.TREE_NODE)).length||((r=t).closest(".zmTreeTIcon").length&&(c=3),r.hasClass("zmTreeTitle")||(r=r.parents(".zmTreeTitle")),r.closest(".SC_cent").length&&(c=2));var m=r.data("zmsData"),u={zmsData:m=m||{}};u.zmsData.type=n,u.zmsData.colInfo={column:c},u.zmsData.eventInfo=e,u.zmsData.prevSelectLayer=Object(l.getAppLeft)().selLayerId;var f,b,g,z=u.zmsData.rowInfo.layerId;if("click"===n&&1!==c){(b=(f=Object(l.getAppLeft)())&&f.getNodes()&&f.getNodes()[0].getLayer(z))||(b=(f=Object(l.getAppObj)(Object(l.getCurrentAppObjId)()).left).getNodes()[0].getLayer(z));var v=b&&b.isHeaderSel||!1,C=s.a.q("#jsZMLeft");if(!r.hasClass("zmTreeNode")&&!r.hasClass("SC_cent")||r.parent().hasClass("zmCalData")){if(r.hasClass("zmTreeText")||r.hasClass("zmTreeTitle")){if(v)b.disableSelection||(2===c&&(C.find(p.TREE_NODE).removeClass("zmCurTree"),C.find(p.TREE_TEXT).removeClass("zmCurTree"),C.find(".SC_cent").removeClass("zmCurTree"),r.addClass("zmCurTree")),a.selId=r.attr("id"),a.selLayerId=z);else if(3===c){var O=s()(e.target).closest("i").data("action");return g=b.headerObject,"add"===O?g.onAdd&&g.onAdd(u):"settings"===O&&g.settingsObject&&g.settingsObject.onClick&&g.settingsObject.onClick(u),!0}!function(e,t,i,a){var n=s()(e).next(),r=h.utils.getKeyFromAppId(zmApp.currentApp)||i.getAppKey(),o=i.getNodes()[0].getLayer(t).avoidStateSave;n.is(":visible")?("function"==typeof a?n.slideUp({duration:"slow",progress:a,complete:a}):n.slideUp("slow"),o||h.addEntry(r,t)):("function"==typeof a?n.slideDown({duration:"slow",progress:a,complete:a}):n.slideDown("slow"),o||h.removeEntry(r,t))}(r,z,f,function(){a.showStaticHeaderAndScrollBar.bind(a),s.a.publish("lhs/expandCollapse")})}}else b.disableSelection||(C.find(p.TREE_NODE).removeClass("zmCurTree"),C.find(p.TREE_TEXT).removeClass("zmCurTree"),C.find(".SC_Cent").removeClass("zmCurTree"),r.addClass("zmCurTree"),r.find(".zmTreeCount.zmThmClr").removeClass("zmThmClr"),a.selId=r.attr("id"),a.selLayerId=z)}i(u)}):"mouseover"!==e&&"mouseout"!==e||this.getNodes()[0].el.on(e,i))}}]),e}();z.views={getLeftTreeContainer:function(e){this.el=s()(Object(n.b)("div",{className:"SClm",id:String(this.id)}));var t=s()(Object(n.b)("div",{className:"SClm"}));return e&&e.id&&t.attr("id",e.id),t}}}}]);