"use strict";!function(){var r=zmail.Core.Namespaces.get("_"),c={"shift+openBracket":"{","shift+closeBracket":"}","shift+backSlash":"|","shift+backtick":"~","shift+singleQuote":'"',"shift+semiColon":":","shift+equalTo":"+","shift+minus":"_",upArrow:"↑",downArrow:"↓",leftArrow:"←",rightArrow:"→",forwardSlash:"/",backSlash:"\\",openBracket:"[",closeBracket:"]",backtick:"`",singleQuote:"'",semiColon:";",period:".",comma:",",equalTo:"=",minus:"-",ctrl:"Ctrl",shift:"Shift",enter:"Enter",delete:"Delete",esc:"Esc"},d=function(e){var t=e.split("/"),a=[];return t.forEach(function(e){a.push.apply(a,babelHelpers.toConsumableArray(function(e){var t,a,i,r,l=e.split(/[+|/]/),s=l.length,n=[],o="";for(t=0;t<s;t++)i=l[t],r=l[t+1],(o=c[i+r])?(n.push(o),t+=1):n.push((a=l[t],c[a]||a.toLowerCase()));return n}(e)))}),a},u=function(e,t){var a,i=zmshCut[e];return r.isArray(i)&&(a=r(i).find(function(e){return e.uid===t})),a&&a.keyStr},p={"!":"shift+1","@":"shift+2","#":"shift+3",$:"shift+4","%":"shift+5","^":"shift+6","&":"shift+7","*":"shift+8","(":"shift+9",")":"shift+0","{":"shift+openBracket","}":"shift+closeBracket","|":"shift+backSlash","/":"forwardSlash","\\":"backSlash","[":"openBracket","]":"closeBracket","`":"backtick","~":"shift+backtick","'":"singleQuote",'"':"shift+singleQuote",";":"semiColon",":":"shift+semiColon",".":"period",",":"comma","=":"equalTo","+":"shift+equalTo","-":"minus",_:"shift+minus"},h=["gotoInbox","gotoUnreadView","gotoSentbox","gotoDraft","gotoFlagView","gotoAllView","gotoLabelView","selectMail","selectAllMail","deSelectAllMail","previousMail","nextMail","expandFolder","collapseFolder","previousTab","nextTab","closeTab","sendMail","sendMailNow","saveDraft","saveTemplate","cmposeToWin","compose","reply","replyAll","forward","editAsNew","search","advanceSearch","markmenu","labelMenu","shortcutMenu","moveToMenu","viewMenu","clearMenu","clearLabel","openMailInTab","openMailInWin","closePreview","showOriginalMail","fetchMail","reportSpam","printMail","markAsUnread","markAsRead","deleteMail","archiveMail","addToFilter","toMail","toCalendar","toTask","toNotes","toStreams","toAttachment","toBookmark","composeMail","createEvent","createTask","createNotes","addBookmark","mailSearch","taskSearch","notesSearch","streamsSearch","attachmentsSearch","calendarSearch","quickAccess","contactsSearch","bookmarksSearch","expandMail","collapseMail","previousMail1","nextMail1","print","systemPrint","reportNotSpam","openReader","createContact","toContact","notificationOpen","reminderOpen"],e=["backspace","tab","enter","esc","space","leftArrow","upArrow","rightArrow","downArrow","delete","semiColon","comma","equalTo","minus","period","forwardSlash","backtick","openBracket","backSlash","closeBracket","singleQuote"],f=function(e,t,a){return e.split(t).join(a)},b=function(t,a){return e.forEach(function(e){for(;t.length>=e.length&&t.includes(e);)a+=e,(t=t.replace(e,""))&&(a+="/")}),{encodedKey:t,decodedKey:a}},t=zmText.get("zm-settings-app-keyboardshortcuts-custom-model"),g={};g.BLOCK_NAMES={default:t.block.global,mail:t.block.mail,compose:t.block.compose,streams:t.block.streams,editor:t.block.editor},g.BLOCKS=["default","compose","mail","streams","editor"],g.LEFT_BLOCK=["default"],g.CENTER_BLOCK=["mail"],g.RIGHT_BLOCK=["compose","streams","editor"],g.default={GROUPS:["mailLeft","mailListing","default","appNavigation","newCreation","search","notification","reminders"],GROUP_NAME:{mailLeft:t.defaultGroup.mailLeft,mailListing:t.defaultGroup.mailListing,default:t.defaultGroup.default,appNavigation:t.defaultGroup.appNavigation,newCreation:t.defaultGroup.newCreation,reminders:t.defaultGroup.reminders,notification:t.defaultGroup.notification,search:t.defaultGroup.search}},g.compose={GROUPS:["default"],GROUP_NAME:{default:t.composeGroup.default}},g.mail={GROUPS:["mailLeft","mailListing","mailSelection"],GROUP_NAME:{mailLeft:t.mailGroup.mailLeft,mailListing:t.mailGroup.mailListing,mailSelection:t.mailGroup.mailSelection}},g.streams={GROUPS:["default"],GROUP_NAME:{default:t.streamsGroup.streamsTitle}},g.editor={GROUPS:["default"],GROUP_NAME:{default:t.editor.title}};var s,n,a=function(e,t,a){return zmText.get("preUtils","shortcut.".concat(e),t,a)},o={shortcutException:!0,type:"i",message:a("dispMsg.selectMail")},m={shortcutException:!0,type:"i",message:a("dispMsg.selectMails")},k="m",z="t",S="n",C="c",v="zmStreamsApp",A="l",M="cn",y={sc:function(){zmUtil.hideMenu();var e=zmApp.currentApp,t="1";"c"===e?t="4":"t"===e?t="3":"n"===e&&(t="2"),zmUtil.loadSmartCompose({eType:t,type:"tab"})},m:function(){zmUtil.hideMenu(),zmUtil.compose()},t:function(){zmUtil.hideMenu(),zmUtil.loadTask({action:"addCTask",groupId:zmail.zuid})},n:function(){zmUtil.hideMenu(),"n"===zmApp.currentApp?znNote.createInlineNotes():zmUtil.loadNotes("popup")},c:function(){zmUtil.hideMenu(),zmApp.loadCalendar("/calendar/event")},b:function(){zmUtil.hideMenu(),zmUtil.loadLink({mode:"create",groupId:zmail.zuid,catid:""})}},I=function(e,t){var a,i=zmUtil.getSelectedMails(),r=i[0].length,l=i[1].length;if(r||l){if(e||1===r&&0===l||0===r&&1===l){if(e)return i;a=r?i[0][0]:i[1][0]}else if(!t)throw o}else if(!t)throw m;return a},w=function(e){var t,a=zmInit.getListingDetObj();return(e=e||a.fId)===(t=zmail.folId).dId||e===t.teId||e===t.oId},T=function(e,t){t||(t=$.q("#".concat(e))),t.trigger("click");var a=t[0];a.scrollIntoView&&a.scrollIntoView()},L=function(e,t,a){if(zmApp&&"m"===zmApp.currentApp)switch(t){case"mailLeft":!function(e){var t,a,i,r,l,s=window.zmshCut;switch(e){case"gotoInbox":T(zmail.folId.iId);break;case"gotoUnreadView":T("zm_unread");break;case"gotoSentbox":T(zmail.folId.sId);break;case"gotoDraft":T(zmail.folId.dId);break;case"gotoFlagView":T("zm_flag");break;case"gotoAllView":T("zm_all");break;case"gotoLabelView":T(null,$.e($.q("#zmllabel").children()[0]));break;case"expandFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&((l=zmail.mailLeft.getNodes()[0].el.find("#".concat(s.currentLeftId))).hasClass("SC_ltl")?l.next(".SC_ldt").is(":visible")||l.trigger("click"):zmInit.findFolName(s.currentLeftId)&&l.find("i").not(".msi-barrow").trigger("click"));break;case"collapseFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&((l=zmail.mailLeft.getNodes()[0].el.find("#".concat(s.currentLeftId))).hasClass("zmTreeBlk")?l.next(".SC_ldt").is(":visible")&&l.trigger("click"):zmInit.findFolName(s.currentLeftId)&&l.find("i.msi-barrow").trigger("click"));break;case"nextRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")&&(t=(i=(a=zmail.mailLeft.getNodes()[0]).el).find(".SC_ltl:visible, .SC_tre:visible"),l=i.find("#".concat(s.currentLeftId)),(r=t.index(l[l.length-1]))<t.length-1)){if((l=$.e(t[r+1])).hasClass("SC_ltl")){for(l=a.getLayer(l[0].id);l&&l.disableSelection;)l=a.getNextLayer(l.id);l&&(s.currentLeftId=l.id,t.filter(".Stre").removeClass("Stre"),$.e(l.el.children()[0]).addClass("Stre"),l=l.el)}else l.trigger("click");l&&l.position().top>i.height()-20&&i.scrollTop(i.scrollTop()+33)}break;case"previousRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")){t=(i=(a=zmail.mailLeft.getNodes()[0]).el).find(".SC_ltl:visible, .SC_tre:visible"),l=i.find("#".concat(s.currentLeftId)),r=t.index(l[l.length-1]);var n=$.e(t[r]);if(n.hasClass("SC_ltl")){n=a.getLayer(n[0].id);for(var o=a.getPreviousLayer(n.id);o&&o.disableSelection;)n=o,o=a.getPreviousLayer(n.id);l=i.find("#".concat(n.id)),r=t.index(l[l.length-1])}0<r&&((l=$.e(t[r-1])).hasClass("SC_ltl")?(s.currentLeftId=l[0].id,t.filter(".Stre").removeClass("Stre"),l.addClass("Stre")):l.trigger("click"),l.position().top<20&&i.scrollTop(i.scrollTop()-33))}}}(e);break;case"mailListing":!function(e,t){if("zm_Container"===zmTab.currentTab||zmTab.currentTab.includes("zm_srch"))switch(e){case"selectMail":("zmStreamTree"!==zmail.mailLeft.selLayerId||zmTab.currentTab.includes("zm_srch"))&&zmList.chkSingleMsg();break;case"selectAllMail":("zmStreamTree"!==zmail.mailLeft.selLayerId||zmTab.currentTab.includes("zm_srch"))&&zmList.chkAll();break;case"deSelectAllMail":("zmStreamTree"!==zmail.mailLeft.selLayerId||zmTab.currentTab.includes("zm_srch"))&&zmList.unchkAll();break;case"previousMail":zmList.listingFocused&&(zmInit.isNewKSEnabled&&(!zmPrev.isPrevOpen()||0<zmUtil.getCheckedMailCount())?zmCenterListing.mailObjectAPI.setFocus("previous"):(zmPreviewTemplate.loadPrevMail(),t.preventDefault()));break;case"nextMail":zmList.listingFocused&&(zmInit.isNewKSEnabled&&(!zmPrev.isPrevOpen()||0<zmUtil.getCheckedMailCount())?zmCenterListing.mailObjectAPI.setFocus("next"):(zmPreviewTemplate.loadNextMail(),t.preventDefault()));break;case"expandMail":zmList.showThreadTree();break;case"collapseMail":zmList.hideThreadTree();break;case"openMail":if(!zmPrev.isPrevOpen()){var a=zmCenterListing.mailObjectAPI.getCurrentFocusedMsgId();a.includes("c")?zmList.showMailPreview({msgId:a.substr(1),opentype:zmail.userOptions.mailView,type:"th"}):zmList.showMailPreview({msgId:a,opentype:zmail.userOptions.mailView,type:"lt"})}}}(e,a);break;case"mailSelection":!function(e){var t,a,i,r,l,s,n,o,c=zmTab.currentTab.includes("zm_tab")?1:0,m="data-detail",d=_zm.isOfflineSyncActive();try{switch(e){case"reply":s=I(),n=zmUtil.getMailObj(s,"FD"),w()||zmUtil.isSharedFolder(n,"RW")||(zmUtil.hideMenu(),ZMail.utils.loadComposer({parentId:s,composeAction:"reply"}));break;case"replyAll":s=I(),n=zmUtil.getMailObj(s,"FD"),w()||zmUtil.isSharedFolder(n,"RW")||(zmUtil.hideMenu(),ZMail.utils.loadComposer({parentId:s,composeAction:"replyall"}));break;case"forward":s=I(),n=zmUtil.getMailObj(s,"FD"),w()||zmUtil.isSharedFolder(n,"RW")||(zmUtil.hideMenu(),ZMail.utils.loadComposer({parentId:s,composeAction:"fwdi"}));break;case"editAsNew":s=I(),n=zmUtil.getMailObj(s,"FD"),w()||zmUtil.isSharedFolder(n,"RW")||(zmUtil.hideMenu(),ZMail.utils.loadComposer({parentId:s,composeAction:"eanew"}));break;case"viewMenu":if(!w()&&"zm_Container"===zmTab.currentTab&&""!==zmInit.getListingDetObj().fId){var u=ZMail.utils.getHeaderRef({}).find(".msi-filter");u.is(":visible")&&u.trigger("click")}break;case"labelMenu":(t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId)!==zmail.folId.spId&&!w()&&I(!0,!0)&&(zmUtil.hideMenu(),(o=ZMail.utils.getHeaderRef({tabId:zmTab.currentTab,container:c?"preview":"center",partName:c?"menuBarRight":"menuBar"}).find(".msi-label")).is(":visible")&&o.trigger("click"));break;case"moveToMenu":(t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId)===zmail.folId.spId||w()||!I(!0,!0)||zmUtil.isSharedFolder(t)||d||(zmUtil.hideMenu(),(o=ZMail.utils.getHeaderRef({tabId:zmTab.currentTab,container:c?"preview":"center",partName:c?"menuBarRight":"menuBar"}).find(".msi-folder")).is(":visible")&&o.trigger("click"));break;case"clearLabel":w()||(i=(a=zmUtil.getSelectedMailsWithLabels())[0],r=a[1],(i.length||r.length)&&zmail.MailAction.Initializer.applyActions("label","click",{lA:"deleteall",msgId:i,thd:r}));break;case"openMailInTab":zmInit.getListingDetObj().fId!==zmail.folId.oId&&(zmInit.rclkId=I(),zmList.bindAction({action:"opentab",opentype:2}),zmInit.rclkId=0);break;case"openMailInWin":w()||(zmInit.rclkId=I(),zmUtil.getMailObj(zmInit.rclkId,"streams")||zmList.bindAction({action:"openwindow",opentype:2}),zmInit.rclkId=0);break;case"showOriginalMail":t=I(),w(zmUtil.getMailObj(t,"FD"))||zmPreviewTemplate.showOrgMsg({mId:t});break;case"reportSpam":a=zmail.folId,t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,!I(!0,!1)||w(t)||zmUtil.isSharedFolder(t)||d||t===a.spId||t===a.sId||zmail.MailAction.Initializer.doActions("spam");break;case"reportNotSpam":a=zmail.folId,t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,I(!0,!1)&&t===a.spId&&zmail.MailAction.Initializer.doActions("notspam");break;case"openReader":case"printMail":t=I(),zmPreviewTemplate.shortCutHandler(e,{mId:t});break;case"markAsUnread":t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,w()||zmUtil.isSharedFolder(t,"R")||d||(i=(a=I(!0,!1))[0],r=a[1],(i.length||r.length)&&zmail.MailAction.Initializer.applyActions("unread",null,{msgId:i,thd:r}));break;case"markAsRead":t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,w()||zmUtil.isSharedFolder(t,"R")||d||(i=(a=I(!0,!1))[0],r=a[1],(i.length||r.length)&&zmail.MailAction.Initializer.applyActions("read",null,{msgId:i,thd:r}));break;case"deleteMail":t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,!(a=I(!0,!1))||zmUtil.isSharedFolder(t)||d||(i=a[0],r=a[1],(i.length||r.length)&&zmail.MailAction.Initializer.doActions("delete",null,{msgId:i,thd:r}));break;case"archiveMail":a=zmail.folId,t=(l=zmsuite.getCenterOuter().$el.data(m))&&l.fId||zmInit.getListingDetObj().fId,!I(!0,!1)||zmUtil.isSharedFolder(t)||d||t===a.teId||t===a.spId||t===a.dId||t===a.oId||t===a.tId||zmail.MailAction.Initializer.doActions("archive")}}catch(e){e.shortcutException&&_zm.succErrMsg(e.type,e.message)}}(e)}},i=function(e,t,a){zmApp&&"t"===zmApp.currentApp&&"taskListing"===t&&zmTask.navigateListing(e)},l=function(e,t,a){zmApp&&"n"===zmApp.currentApp&&"noteListing"===t&&znNote.navigateListing(e)},O=function(e,t,a){var i,r=a.target,l=a.srcElement;if(zmTab.currentTab.includes("Cmp"))switch(e){case"sendMail":zmComp.sendMail({action:"compose",sendIm:!1,cmpId:zmTab.currentTab});break;case"sendMailNow":zmComp.sendMail({action:"compose",sendIm:!0,cmpId:zmTab.currentTab});break;case"saveDraft":zmComp.sendMail({action:"sdraft",cmpId:zmTab.currentTab});break;case"saveTemplate":zmComp.sendMail({action:"stemplate",cmpId:zmTab.currentTab});break;case"gotoSubject":0<(i=$.e(r||l).closest(".ze_body")).length&&(i.focusout(),$.q("#zmsub_".concat(zmTab.currentTab)).focus())}},N=function(e){var t=e.$els;t.$content.css({"max-height":"500px",width:"1000px"}),t.$contentWrapper.css({"max-width":"1080px"});var a=t.$content[0];ReactDOM.render(zmail.Settings.Apps.keyboardshortcuts.getView({fromDialog:!0}),a)},x=function(e,t,a){var i,r;switch(e){case"shortcutsList":zmAppLoader.load("zm-settings-app-keyboardshortcuts-custom").then(function(){zmshCut.collectionInstance.fetchList().then(function(){s&&s.remove();var e={positionWrapperClass:"SC_pe SC_PopTop",dialogDidMount:N,title:"Keyboard Shortcuts",$content:"",right:[],closeAction:function(e){var t=e.$els;ReactDOM.unmountComponentAtNode(t.$content[0]),s=void 0},defaultNavigator:!1};s=Dialog.new(e)})});break;case"clearMenu":zmUtil.hideMenu(!0);break;case"expandMail":case"collapseMail":case"previousMail":case"nextMail":case"openMail":L(e,t,a);break;case"previousTab":(i=zmTab.getPreviousTabId(zmTab.currentTab))&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(i));break;case"nextTab":(i=zmTab.getNextTabId(zmTab.currentTab))&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(i));break;case"closeTab":zmsuite.closeWorkspace(zmTab.currentTab)&&zmUtil.hideMenu(!0);break;case"closePreview":if((r=zmsuite.getCenter()[1])&&r.$el&&r.$el.hasClass("shw")){var l=r.headerObj.$el.find(".msi-close");l&&l.trigger("click")}$.publish("zm/shortcuts/global/closepreview",{});break;case"gotoSubject":O(e,0,a);break;case"toMail":case"toCalendar":case"toTask":case"toNotes":case"toStreams":case"toAttachment":case"toBookmark":case"toContact":!function(e,t){switch(e){case"toMail":zmApp.showApp(k);break;case"toCalendar":zmApp.showApp(C);break;case"toTask":zmApp.showApp(z);break;case"toNotes":zmApp.showApp(S);break;case"toBookmark":zmApp.showApp(A);break;case"toContact":zmApp.showApp(M);break;case"toStreams":zmsuite.loadStreams();break;case"toAttachment":zmsuite.loadAttachView()}}(e);break;case"compose":case"composeMail":case"createEvent":case"createTask":case"createNotes":case"addBookmark":case"createContact":!function(e,t){var a,i;switch(e){case"createContact":zmcontact.showQuickCreate();break;case"compose":i=zmApp.currentApp,zmail.isSmartComposeEnabled&&(i="sc"),(a=y[i])&&a();break;case"composeMail":y.m();break;case"createEvent":y.c();break;case"createTask":y.t();break;case"createNotes":y.n();break;case"addBookmark":y.b()}}(e);break;case"search":case"mailSearch":case"taskSearch":case"notesSearch":case"streamsSearch":case"quickAccess":case"bookmarksSearch":case"attachmentsSearch":case"calendarSearch":case"contactsSearch":!function(e){var t={},a=zmail.newSearch?zmail.Search.Models.Contexts:{},i=function(e){$.publish("mailsuite/searchOpen",{context:e})};switch(t=zmail.newSearch?{MAIL:a.mailSearchContext,STREAMS:a.streamSearchContext,TASK:a.taskContextSearch,NOTES:a.noteSearchContext,QUICK_ACCESS:a.Commands,BOOKMARKS:a.linkSearchContext,ATTACHMENT:a.attachmentSearchContext,CALENDAR:a.calendarContextSearch,CONTACTS:(window.ZContacts||{}).newSearchContext}:{MAIL:k,STREAMS:v,TASK:z,NOTES:S},e){case"search":i();break;case"mailSearch":i(t.MAIL);break;case"notesSearch":i(t.NOTES);break;case"taskSearch":i(t.TASK);break;case"streamsSearch":i(t.STREAMS);break;case"quickAccess":i(t.QUICK_ACCESS);break;case"bookmarksSearch":i(t.BOOKMARKS);break;case"attachmentsSearch":i(t.ATTACHMENT);break;case"calendarSearch":i(t.CALENDAR);break;case"contactsSearch":i(t.CONTACTS)}}(e);break;case"print":zmail.Printer.print();break;case"systemPrint":window.print();break;case"notificationOpen":"notificationOpen"===e&&$.publish("/zmcenter/popout/open");break;case"reminderOpen":"reminderOpen"===e&&zmAppLoader.load("reminder-component").then(function(){$.publish("/reminder/popout/open")},function(){throw zmUtil.debugLog("reminder-component module not loaded"),arguments})}},U=zmText.get("preUtils","shortcut").dispNames,_=[],E=[],P=[],B=[],R=[],D=[],F="default",H=x,j=function(e,t,a){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:H,l=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],s=!(6<arguments.length&&void 0!==arguments[6])||arguments[6];return(["streams","task","note"].includes(F)||a)&&(s=!1),{scope:F,group:e||"default",uid:t,keyStr:a||n[t],actions:[r],preventDefault:i,displayName:U[t],showInSettings:l,allowEdit:s}},K=function(e,t,a){for(var i=arguments.length,r=new Array(3<i?i-3:0),l=3;l<i;l++)r[l-3]=arguments[l];return t.map(function(e){return j.apply(void 0,[a,e,void 0].concat(r))})},G=function(e){return n=e,_.push(j("mailListing","expandMail","rightArrow"),j("mailListing","collapseMail","leftArrow"),j("mailListing","previousMail","upArrow"),j("mailListing","nextMail","downArrow"),j("mailListing","openMail","enter",!1,H,!1),j(null,"print","",!0),j(null,"systemPrint","",!0)),_.push(j("notification","notificationOpen","alt+n")),_.push(j("reminders","reminderOpen","alt+r")),zmail.mailOpt.isKey?(_.push(j(null,"shortcutsList","shift+forwardSlash")),function(e){_.push(j(null,"previousTab","",!0),j(null,"nextTab","",!0),j(null,"closeTab","",!0),j(null,"closePreview"),j(null,"clearMenu","",!0)),zmail.fromOtherService||_.push.apply(_,babelHelpers.toConsumableArray(K(e,["toMail","toCalendar","toTask","toNotes","toStreams","toAttachment","toBookmark","toContact"],"appNavigation")));var t=["compose","composeMail"];zmail.fromOtherService||t.push("createEvent","createTask","createNotes","addBookmark","createContact"),_.push.apply(_,babelHelpers.toConsumableArray(K(e,t,"newCreation",!0)))}(e),function(e){F="default",H=x;var t=["mail","streams","attachments","contacts"],a="recruit"===zmail.fromService;zmail.fromOtherService&&"wp"!==zmail.fromService?a&&t.push("calendar"):t.push("calendar","notes","task","bookmarks"),(t=t.map(function(e){return"".concat(e,"Search")})).unshift("search"),zmail.fromOtherService&&"wp"!==zmail.fromService||t.push("quickAccess"),_.push.apply(_,babelHelpers.toConsumableArray(K(e,t,"search",!0)))}(e),function(e){F="mail",H=L;E.push.apply(E,babelHelpers.toConsumableArray(K(e,["gotoInbox","gotoUnreadView","gotoSentbox","gotoDraft","gotoFlagView","gotoAllView","gotoLabelView","expandFolder","collapseFolder"],"mailLeft"))),E.push(j("mailListing","selectMail","",!0),j("mailListing","selectAllMail","",!0),j("mailListing","deSelectAllMail","",!0),j("mailListing","previousMail","",!0),j("mailListing","nextMail","",!0),j("mailSelection","reply","",!0),j("mailSelection","replyAll","",!0),j("mailSelection","forward","",!0),j("mailSelection","editAsNew","",!0),j("mailSelection","viewMenu","",!0),j("mailSelection","labelMenu","",!0),j("mailSelection","moveToMenu","",!0),j("mailSelection","clearLabel"),j("mailSelection","openMailInTab"),j("mailSelection","openMailInWin"),j("mailSelection","showOriginalMail"),j("mailSelection","reportSpam"),j("mailSelection","printMail"),j("mailSelection","markAsUnread"),j("mailSelection","markAsRead"),j("mailSelection","deleteMail","",!0),j("mailSelection","archiveMail"),j("mailSelection","reportNotSpam"),j("mailSelection","openReader"))}(e),F="compose",H=O,P.push(j(null,"sendMail","",!0),j(null,"sendMailNow","",!0),j(null,"saveDraft","",!0),j(null,"previousTab","",!0,x,!1),j(null,"nextTab","",!0,x,!1),j(null,"closeTab","",!0,x,!1),j(null,"clearMenu","",!0,x,!1),j(null,"saveTemplate","",!0)),F="streams",H="",B.push(j("default","AddPost","ctrl+enter",!0),j("default","AddComment","ctrl+enter",!0)),F="task",H=i,R.push(j("taskListing","previousTask","upArrow"),j("taskListing","nextTask","downArrow")),F="note",H=l,D.push(j("noteListing","previousNote","upArrow",!0),j("noteListing","nextNote","downArrow",!0)),[_,P,E,B,R,D]):(_.push(j(null,"clearMenu","ESC")),[_])},V=zmText.get("zm-settings-app-keyboardshortcuts-custom-model","editor"),q=[{displayName:V.bold,keyStr:"ctrl+b"},{displayName:V.italic,keyStr:"ctrl+i"},{displayName:V.underline,keyStr:"ctrl+u"},{displayName:V.strikethrough,keyStr:"ctrl+shift+x"},{displayName:V.incfont,keyStr:"ctrl+shift+>"},{displayName:V.decfont,keyStr:"ctrl+shift+<"},{displayName:V.alignright,keyStr:"ctrl+shift+r"},{displayName:V.alignleft,keyStr:"ctrl+shift+l"},{displayName:V.aligncenter,keyStr:"ctrl+shift+e"},{displayName:V.alignjustify,keyStr:"ctrl+shift+j"},{displayName:V.bullet,keyStr:"ctrl+."},{displayName:V.number,keyStr:"ctrl+forwardSlash"},{displayName:V.incindent,keyStr:"ctrl+shift+m"},{displayName:V.decindent,keyStr:"ctrl+m"},{displayName:V.rtl,keyStr:"ctrl+shift+i"},{displayName:V.ltr,keyStr:"ctrl+shift+a"},{displayName:V.sprscript,keyStr:"ctrl+shift+="},{displayName:V.subscript,keyStr:"ctrl+="},{displayName:V.hyperlink,keyStr:"ctrl+k"},{displayName:V.quttxt,keyStr:"ctrl+'"},{displayName:V.nextfont,keyStr:"ctrl+shift+f"},{displayName:V.prevfont,keyStr:"ctrl+shift+d"},{displayName:V.spellcheck,keyStr:"f7"}];q.forEach(function(e){e.allowEdit=!1,e.showInSettings=!0,e.group="default"});var Q=zmail.Core.Namespaces,W=Q.get("zmail.DataLayer"),Z=W.DSModel,J=W.DSCollection,X=W.Adapter,Y=W.Core,ee={},te=X.HTTPAdapter,ae=X.IndexedDBAdapter,ie={},re=new Y.Events,le=function(e,t,a){return e.split(a).join(t)},se=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){return{enable:!0,description:""}}},{key:"getIdAttribute",value:function(){return"uid"}},{key:"parse",value:function(e){return $.extend(!0,{},e)}}]),t}(Z),ne=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getBaseModelClass",value:function(){return se}},{key:"parse",value:function(e){return e}},{key:"fetchList",value:function(){var t=this;return this.fetchPromise||(this.fetchPromise=this.triggerAction("fetchList"),!ZMStore.isOffline()&&_zm.isOfflineLockAvailable()&&this.fetchPromise.then(function(e){t.triggerAction("update",{attrs:e.resp,adapterId:"indexDB"})})),this.fetchPromise}},{key:"resetList",value:function(){return this.triggerAction("resetList")}},{key:"changeKeys",value:function(e){var t=this,a=this.triggerAction("change",e);return a.then(function(){!ZMStore.isOffline()&&_zm.isOfflineLockAvailable()&&t.triggerAction("updateAttrs",{adapterId:"indexDB",key:e.key,value:e.value})}),a}}]),t}(J),oe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getUrl",value:function(){return"".concat(zmail.conPath,"/zmShortcuts.do")}},{key:"serialize",value:function(e,t,a){var i,r=a.key,l=a.value;return"fetchList"===e?i={mode:"getShortCuts"}:"resetList"===e?i={mode:"reset"}:"change"===e&&(l=le(l,"fwdSlash","forwardSlash"),l=le(l,"clsBracket","closeBracket"),l=le(l,"opnBracket","openBracket"),l=le(l,"singleQut","singleQuote"),i={mode:"change",value:JSON.stringify(babelHelpers.defineProperty({},r,l))}),i}},{key:"normalize",value:function(e,t,a){return t}}]),t}(te),ce=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onUpgradeNeeded",value:function(e){0===e.oldVersion&&e.createObjectStore("shortcuts")}},{key:"getDatabaseName",value:function(){return zmail.zuid+"_settings"}},{key:"getDBVersion",value:function(){return"1"}},{key:"getMethodMap",value:function(){return{fetchList:"findRecord",updateAttrs:"updateAttrs"}}},{key:"serialize",value:function(e,t,a){var i,r=null,l=i="shortcuts";if("read"===e)r={key:i,objStoreName:l};else if("update"===e)r={key:i,val:a.attrs,objStoreName:l};else if("updateAttrs"===e){var s=a.value;s=le(s,"fwdSlash","forwardSlash"),s=le(s,"clsBracket","closeBracket"),s=le(s,"opnBracket","openBracket"),s=le(s,"singleQut","singleQuote"),r={key:i,attributes:babelHelpers.defineProperty({},a.key,s),objStoreName:l}}return r}},{key:"normalize",value:function(e,t,a){return t}}]),t}(ae),me={adapters:[{id:"http-adapter",type:"default",classObj:oe}],default:"http-adapter"};_zm.isOfflineLockAvailable()&&me.adapters.push({id:"indexDB",type:"offline",classObj:ce});var de=ZMStore.createInstance("KSCollection",ne,{adapterConfig:me,offlineEnabled:_zm.isOfflineLockAvailable()});de.fetchList().then(function(e){var t,a,i=e.resp;!function(e,t){var a,i,r,l,s,n,o,c,m=Object.keys(t).length;for(o=1;o<=m;o++){i="",4<(a=(a=(a=(a=t[o]).replace(/&#34;/g,'"')).replace(/&#39;/g,"'")).replace(/&#92;/g,"\\")).length&&a.includes("ctrl")&&(i+="ctrl+",a=a.replace("ctrl","")),5<a.length&&a.includes("shift")&&(i+="shift+",a=a.replace("shift","")),3<a.length&&a.includes("alt")&&(i+="alt+",a=a.replace("alt","")),7<a.length&&a.includes("metaKey")&&(i+="metaKey+",a=a.replace("metaKey","")),4<a.length&&a.includes("enter")&&(i+="enter",(a=a.replace("enter",""))&&(i+="+")),2<a.length&&a.includes("ESC")&&(i+="esc",(a=a.replace("ESC",""))&&(i+="+")),2<a.length&&a.includes("Delete")&&(i+="delete",(a=a.replace("Delete",""))&&(i+="+")),a=f(a,"fwdSlash","forwardSlash"),a=f(a,"clsBracket","closeBracket"),a=f(a,"opnBracket","openBracket"),a=f(a,"singleQut","singleQuote");var d=b(a,i);for(a=d.encodedKey,i=d.decodedKey,l=(r=a.length)-1,c=0;c<r;c++)s=a.charCodeAt(c),n=a.charAt(c),i+=65<=s&&s<=90?"shift+".concat(n.toLowerCase()):n in p?p[n]:n.toLowerCase(),c<l&&(i+="/");e[h[o-1]||o]=i}}(ie,i);var r=G(ie);r.splice(4,0,q);var l=g.BLOCKS;for(a=0;a<l.length&&r[a];a++)(t=ee[l[a]]=ZMStore.createInstance("KSCollection".concat(l[a]),ne,{adapterConfig:me})).set(r[a],{parse:!0}),t.collectionName=l[a];var s=Q.create("zmshCut");s.Events=re,s.getKeyString=u,s.getReadableText=d,s.shortcutNames=h,s.decodedShortcut=ie,s.default=r[0],s.compose=r[1]||[],s.mail=r[2]||[],s.streams=r[3]||[],s.task=r[5]||[],s.note=r[6]||[],s.currentLeftId="",s.collection=ne,zmComponent.keybindings.registerAll({scope:"default",shortcuts:s.default});var n=function(e){setTimeout(function(){return $.publish("mailsuite/updatePlaceholder")},0)},o=ee&&ee.default,c=o&&o.get("quickAccess");c&&(c.off("change:keyStr",n),c.on("change:keyStr",n));var m=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};$.publish("settings/keyboard-shortcuts/change",t)};s.Events.off("change",m),s.Events.on("change",m),zmail.keyboardShortcutsLoadDeferred.resolve()}),ZMStore.registerCleanUpAction("KSCollection",function(){var a=zmail.zuid+"_settings";return new Promise(function(e,t){idb.delete(a).then(function(){e("success")},function(){t("error")})})});var ue=window.zmshCut=window.zmshCut||{};ue.getKeyString=u,ue.getReadableText=d,ue.shortcutNames=h,ue.currentLeftId="",ue.collection=de,ue.collectionInstance=de,ue.collections=ee}(),window.__rollupModule=void 0;