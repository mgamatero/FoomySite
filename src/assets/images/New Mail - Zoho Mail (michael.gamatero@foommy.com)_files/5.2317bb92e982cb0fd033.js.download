(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{p2EH:function(t,n,e){"use strict";e.d(n,"q",function(){return j}),e.d(n,"f",function(){return D}),e.d(n,"x",function(){return F}),e.d(n,"j",function(){return O}),e.d(n,"i",function(){return E}),e.d(n,"g",function(){return x}),e.d(n,"r",function(){return A}),e.d(n,"p",function(){return U}),e.d(n,"b",function(){return _}),e.d(n,"d",function(){return q}),e.d(n,"c",function(){return L}),e.d(n,"e",function(){return H}),e.d(n,"z",function(){return y}),e.d(n,"o",function(){return k}),e.d(n,"y",function(){return B}),e.d(n,"m",function(){return R}),e.d(n,"k",function(){return J}),e.d(n,"n",function(){return G}),e.d(n,"l",function(){return K}),e.d(n,"v",function(){return z}),e.d(n,"t",function(){return w}),e.d(n,"s",function(){return M}),e.d(n,"h",function(){return N}),e.d(n,"A",function(){return T}),e.d(n,"a",function(){return P}),e.d(n,"E",function(){return C}),e.d(n,"F",function(){return V}),e.d(n,"C",function(){return Q}),e.d(n,"B",function(){return Z}),e.d(n,"w",function(){return v}),e.d(n,"u",function(){return I}),e.d(n,"D",function(){return X});var a=e("EVdn"),i=e.n(a),o=e("jQ7T"),c=e("7sa5"),d=e("zijm"),r=e("hSUr"),s=e("qfKh"),l=e("seBN"),u=e("V61T"),m=e("m8qQ"),f=e("bLvj"),p=e("YV/N"),h=c.d.zmFetch,g=s.b.require,b=!1,w=function(){return zmail.isNettyDownloadEnabled&&!zmail.isNettyBlackList},z=function(){return zmail.isNettyUploadEnabled&&!zmail.isNettyBlackList},v=function(){return zmail.isNettyViewEnabled},I=function(){return zmail.isNettyThumbNailEnabled},y=function(t){r.f.load("attachmentUtility").then(function(){Object(u.ab)(t)})},O=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",e=arguments.length>1?arguments[1]:void 0,a="",i="",o=n,c=[],d=n.length,r=n.lastIndexOf(".");if(-1!==r){a=n.substring(r+1,d).toLowerCase(),d>20&&16!==r&&(t=n.substring(r-1,r),o="".concat(n.substring(0,16),"...").concat(t,".").concat(a));i={doc:!0,docx:!0,sxw:!0,odt:!0,rtf:!0,txt:!0,js:!0,java:!0,css:!0,jsp:!0,jspf:!0,c:!0,cpp:!0,xml:!0,go:!0,sh:!0,log:!0}[a]?"msi-attdoc":{pps:!0,ppt:!0,pptx:!0,odp:!0,sxi:!0}[a]?"msi-attppt":{xls:!0,xlsx:!0,sxc:!0,ods:!0,csv:!0,tsv:!0}[a]?"msi-attsheet":{mp3:!0,mpa:!0,wma:!0,wav:!0,ra:!0,m3u:!0,m4a:!0}[a]?"msi-attaudio":{avi:!0,flv:!0,mp4:!0,mpg:!0,wmv:!0,vob:!0,swf:!0,mov:!0,webm:!0,"3gp":!0,rm:!0}[a]?"msi-attvideo":"pdf"===a?"msi-attpdf":"zip"===a||"rar"===a?"msi-attzip":{jpg:!0,jpeg:!0,gif:!0,png:!0,bmp:!0,heic:!0}[a]?"msi-attimg":{eml:!0,msg:!0}[a]?"msi-atteml":{ics:!0}[a]?"msi-attics zmDoubleIcon":{html:!0,htm:!0}[a]?"msi-atthtml":"msi-attothers",4===e&&(i+=" zmHugeFile")}else i="msi-attothers",4===e&&(i+=" zmHugeFile");return c.push(o),c.push(i),c.push(a),c},j=function(t,n){r.f.load("attachmentUtility").then(function(){var e=g("zmAttachUtility");n?n(e.initAttachListing(t)):e.initAttachListing(t)})},D=function(t,n){r.f.load("attachmentUtility").then(function(){var e=g("zmAttachUtility");n?n(e.listingComp.init(t)):e.listingComp.init(t)})},A=function(){return!zmail.isRebranded||"false"!==zmail.isCloudServiceEnabled&&!zmail.isBaihui},S=function(){var t=i.a.Deferred();return r.f.load("securedownload").then(function(){g("zmComponent").securedownload().then(function(n){t.resolve(n)},function(){t.reject()})}),t.promise()},E=function(t){if(w())r.f.load("download").then(function(){zmDownload.downloadApp({mode:"tempDownload"},t)});else{var n={entityType:1,accId:t.accId||zmail.accId,fpath:t.fP,fstorename:t.sN};t.name&&(n.fN=encodeURIComponent(t.name));var e="".concat(zmail.conPath,"/FileDownload?mode=tmpdwn");zmAjq.formSubmit(n,e)}},x=function(t){if(w())r.f.load("download").then(function(){zmDownload.downloadApp({mode:"download"},t)});else{var n=t.e,e="",a={},i=t.n||t.fn;a={attachId:t.Id,entityType:t.et,entityId:t.e},t.sid?(a.groupId=t.sid,a.streamsView=!0,t.gId===zmail.zuid?a.actionType="viewSelfData":a.actionType="viewGroupEntity"):t.type?(2===t.et?a.streamsView="Notes":a.streamsView=!0,a.actionType=t.type,a.groupId=t.gId):(a.groupId=zmail.zuid,1===t.et&&(a.accId=zmail.accId,a.partId=t.p));var o=Object(f.E)(n);if(o&&Object(u.K)(o.FD)){var c=Object(u.t)(o.FD);a.shId=c,delete a.groupId}var d=i.lastIndexOf(".");i=i.replace(/;/gi,""),-1!==d?(i=i.substring(0,d),i=Object(u.o)("".concat(i,".").concat(O(t.fn)[2]))):i=Object(u.o)(i),e+="".concat(zmail.conPath,"/FileDownload?mode=dwn"),_zm.isSecureDownloadEnabled()?S().done(function(t){t.adHocValue&&(a.pswd=t.password),zmAjq.formSubmit(a,e,"")}):zmAjq.formSubmit(a,e,"")}},N=function(t,n){if(w())r.f.load("download").then(function(){zmDownload.downloadApp({mode:"selDwn"},t,n)});else{n=n||{};for(var e,a,i,o=[],c=0,d=(t=t||[]).length;c<d;c++){i=(a=t[c]).e,e={n:t[c].fn,et:a.et,ft:t[c].ft,e:i,Id:a.Id},a.sid?(e.groupId=a.sid,e.streamsView=!0):a.type?(2===a.et?e.streamsView="Notes":e.streamsView=!0,e.groupId=a.gId):e.groupId=zmail.zuid;var s=Object(f.E)(i);s&&Object(u.K)(s.FD)&&(e.shId=Object(u.t)(s.FD),delete e.groupId),o.push(e)}var l,m="".concat(zmail.conPath,"/FileDownload?mode=seldwn"),p={attEntObj:JSON.stringify(o)};Object(u.Q)(zmail.accId)||(p.accId=zmail.accId),n.fName&&(p.fName=n.fName),zmail.isDownloadZipOfflineEnabled&&(l={t:"POST",u:m,p:p,setSessionId:!0}),_zm.isSecureDownloadEnabled()?S().done(function(t){t.adHocValue&&(p.pswd=t.password),zmail.isDownloadZipOfflineEnabled?(l.p=p,zmAjq.XHR(l)):zmAjq.formSubmit(p,m)}):zmail.isDownloadZipOfflineEnabled?zmAjq.XHR(l):zmAjq.formSubmit(p,m)}},C=function(t,n){var e=new d.b;return e.init(t[0],{onDragStart:function(t){var e,a,c,d=!1,r=n.getAttachments();if(i.a.e(t).hasClass("SC_check"))i.a.e(t).find(".SC_check").addClass("zm_drag"),d=!0,e=r.selectedAttachment,a=r.selectedAttachment.length;else{var s=i.a.e(t).data("atid");i.a.e(t).addClass("zm_drag"),s&&(d=!0,e=[r.attDet[s]],a=1)}c=1===a?Object(p.b)("fd98f383054c932ca3221cc21327982f"):Object(p.b)("e688651425edf0638c83e060b6bc7479");var l=Object(o.b)("div",{className:"zm_dragger"},Object(o.b)("div",{className:"zm_dragCount dragtheme"},a),Object(o.b)("div",{className:"zm_dragTxt"},c)),u={allowDrag:d,serviceName:"zmail_attachment",type:{attObj:e,accId:zmail.accId},dom:l,id:"attachView",element:t,cursorPosition:"left"};return i.a.publish("mail/draggingStarted",{text:Object(p.b)("d64f4239b084b3d314f054a5ba180f17"),type:"attachment"}),u},setDragInstance:function(t){var n=!1,e=i.a.e(t.target).parents(".zmL.zmAch");return e.length&&(n=!0),{setDrag:n,element:e[0]}},onDragEnd:function(){i.a.e(t).find(".zm_drag").removeClass("zm_drag"),i.a.publish("mail/draggingEnded",{})},callback:function(){n.onDragEnd&&n.onDragEnd()}}),e},F=function(t){var n,e=O(t),a={txt:!0,js:!0,java:!0,css:!0,jsp:!0,jspf:!0,c:!0,cpp:!0,html:!0,htm:!0,xml:!0,go:!0,eml:!0,sh:!0,log:!0},i=!1;return"msi-attimg"===e[1]||{mp3:!0,mp4:!0,py:!0,python:!0,properties:!0,conf:!0,text:!0,webm:!0}[e[2]]?(i=!0,n="FileDownload"):"msi-attdoc"!==e[1]&&"msi-attppt"!==e[1]&&"msi-attsheet"!==e[1]||a[e[2]]?("msi-attpdf"===e[1]||"msi-attdoc"===e[1]&&a[e[2]]||"msi-atthtml"===e[1]&&a[e[2]]||"msi-attothers"===e[1]&&a[e[2]])&&(i=!0,n="FileDownload",(window.ActiveXObject||"ActiveXObject"in window)&&{xml:!0,js:!0,css:!0}[e[2]]&&(i=!1)):(i=!0,n="OpenDocument"),{isPrev:i,apiName:n}},T=function(){r.f.load("hugeAttachment")},P=function(){r.f.load("cloudApps")},V=function(){var t=zmail.IntegrationStatus;return!_zm.isCloudServiceIntegEnabled||!t||(t.gDrive||t.dropBox||t.oneDrive||t.box)},U=function(t,n){!function(t,n){r.f.load("attachComponent").then(function(){n.attachFrom&&n.attachFrom.indexOf("zDocs")>=0&&Object(u.ab)(),t()})}(function(){var e=g("zmAttachComponent");n&&"function"==typeof n?n(e.init(t)):e.init(t)},t)},_=function(t,n){"success"===t.result?_zm.succErrMsg("s",Object(p.b)("88052fd7f39b7647d89df3865faa69d3")):_zm.succErrMsg("e",Object(p.b)("2aa7874b1e85d2492f8c826f3d999f20"))},q=function(t,n,e,a){y(function(){g("zmAttachUtility").cloudUpload(t,n,e,a)})},L=function(){y(function(){g("zmAttachUtility").addToCloudClose()})},H=function(t){y(function(){g("zmAttachUtility").addToCloud(t)})},k=function(t,n,e,a,i){r.f.load("slideshowComp").then(function(){var o=g("zmAttachUtility"),c={};t instanceof Array?(c.startIndex=n||0,c.attObjList=t,c.hideAllOptions=e||_zm.isOfflineSyncActive(),a&&(c.hideIcons=a.hideOptions,c.addIcons=a.extraIcons),c.targetEle=i):(c=t).hideAllOptions=c.hideAllOptions||_zm.isOfflineSyncActive(),o.initSlideshow(c)})},B=function(t){zmail.Search.setContext(zmail.Search.Models.Contexts.attachmentSearchContext,{ignoreUsableFilters:!0}),Object(l.a)(t)},R=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=n.lastIndexOf(".");return e>t?n="".concat(n.substring(0,t-2),"...").concat(O(n)[2]):-1===e&&n.length>t&&(n="".concat(n.substring(0,t-2),"...")),n},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",n=t.substring(0,t.lastIndexOf("."));return n=n.replace(/[`~!@#$%^&*()|+\-=?;:'",.<>{}[\]\\\/]/gi,""),encodeURIComponent("".concat(n,".").concat(O(t)[2]))},G=function(t,n,e){if(r.f.load("download"),"5"===String(n.attType))return"";var a,i,o="";if(void 0===e&&(e="view"),"FileDownload"===t)if(n.isEmlView)o="".concat(zmail.conPath,"/FileDownload?mode=mvAttachView&internalAttachId=").concat(n.IId,"&");else{if(v()&&"view"===e||I()&&"thb"===e)return zmDownload.viewDocument({returnUrl:!0,mode:e},n);o="".concat(zmail.conPath,"/FileDownload?mode=").concat(e,"&")}else if("OpenDocument"===t)if(n.isEmlView)o="".concat(zmail.conPath,"/OpenDocument?internalAttachId=").concat(n.IId,"&");else{if(v())return zmDownload.viewDocument({returnUrl:!0,mode:"view"},n);o="".concat(zmail.conPath,"/OpenDocument?")}o+="attachId=".concat(n.Id,"&entityType=").concat(n.et,"&entityId=").concat(n.e),1!==n.et||void 0!==n.gId&&n.gId!==zmail.zuid||(o+="&partId=".concat(n.p),void 0===n.sid&&(o+="&accId=".concat(zmail.accId))),n.sid?(a=n.sid,i=n.gId===zmail.zuid?"viewSelfData":"viewGroupEntity",o+="&streamsView=true&actionType=".concat(i,"&groupId=").concat(a)):n.type?(a=n.gId,i=n.type,o+="&streamsView=true&actionType=".concat(i,"&groupId=").concat(a)):n.gId&&n.gId!==zmail.zuid&&(a=n.gId,o+="&streamsView=true&actionType=".concat(i="viewGroupData","&groupId=").concat(a));var c=Object(f.E)(n.e);return n.shId?o+="&shId=".concat(n.shId):c&&Object(u.K)(c.FD)&&(o+="&shId=".concat(Object(u.t)(c.FD))),o},K=function(t,n){r.f.load("download");var e,a=F(t.name);if(a.isPrev){if(n=n||zmail.accId,v())return zmDownload.viewDocument({returnUrl:!0,mode:"tmpview"},{fP:t.fP,name:t.name,size:t.size});e="".concat(zmail.conPath,"/").concat(a.apiName),e+="?mode=tmpview&entityType=1&accId=".concat(n,"&fpath=").concat(encodeURIComponent(t.fP),"&fstorename=").concat(t.sN)}return e},X=function(){return new Promise(function(t){b?t():i.a.ajax({url:"".concat(zmail.conPath,"/attach.do"),type:"GET",success:function(n){b=!0,n?(n=JSON.parse(n),zmail.ishugeAttachmentEnabled=n.HugeAttFeatureAllowed):zmail.ishugeAttachmentEnabled=!1,t()},data:{mode:"getHugeAttPermission"},error:function(){zmail.ishugeAttachmentEnabled=!1,t()}})})};X();var M=function(){return zmail.ishugeAttachmentEnabled},Q=function(t,n){Object(m.a)(t,n);var e,a=[],i=t&&t.dragObj?t.dragObj:[];i=i&&!i.length?t:[],"draggingAtt"===t.dragObj.id?e=i.type.attList:"attachView"===t.dragObj.id&&(e=i.type.attObj);for(var o,c=0;c<e.length;c++)o=e[c],a.push({groupId:o.gId,entityId:o.e,entityType:o.et,attachId:o.Id,fileName:o.fn});a=JSON.stringify(a),h("/integPlatform/cliqAction.do",{method:"POST",body:{attachment:a,cid:n}}).then(function(t){window.console.log(t)}).catch(function(t){window.console.log(t)})},Z=function(){!_zm.isOfflineEnabled()&&Object(f.L)()||r.f.load("attachmentOffline")}},seBN:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var a=function(t){"sender"===t.type||"s"===t.type?zmail.Search.newSearch([{className:"AttachmentSenderFilter",value:t.srchStr}]):"filetype"===t.type&&zmail.Search.newSearch([{className:"AttachmentTypeFilter",value:t.srchStr}])}}}]);