"use strict";!function(){var e=zmNCenter.Common.Utils.UtilMethods;_.noop=_.noop||function(){};var n,t,o,i,u=zmText.get("notificationCenter-counter"),c="default",a="notificationOpen",r=function(){n.attr("data-tooltip",([u.common.title,(!t&&zmUtil.ShortcutUtils&&zmUtil.ShortcutUtils.getShortcutPlaceholderText&&(t=zmUtil.ShortcutUtils.getShortcutPlaceholderText(c,a)),t)].join(" ")||"").trim()),n.removeClass("newNoti")},l=function(t){zmTopBar.updateNotificationCount(t)},s=function(t){var e;n=n||$.q(".zmNotiIW"),0<t?(e=t,n.attr("data-tooltip",[u.common.title," (",e,")"].join("")),n.removeClass("newNoti").addClass("newNoti"),setTimeout(function(){return n.removeClass("newNoti")},2e3)):r()},m=0,f=0,C=zmNCenter.Common.Utils.UtilMethods,d=(o=function(t,e){t-=f,(f=0)<t?C.ajaxRequest({param:{mode:"reset",count:t},callback:{fn:e}}):e()},i=_.debounce(o,300),function(t,e,n){n?i(m,e):o(m,e)}),v=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"getCount",value:function(){return m}},{key:"increment",value:function(t){m+=void 0===t?t:Number(t),l(m=m<0?0:m),s(m)}},{key:"decrement",value:function(t){0<m&&n.increment(t||-1)}},{key:"setCount",value:function(t){"number"==typeof t&&0<=t&&(l(m=t),s(m))}},{key:"init",value:function(){!function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_.noop;e.ajaxRequest({param:{mode:"count"},callback:{fn:t}})}(function(t){m=t.count,n.setCount(m),$.subscribe("zmncenter/counter/increment",function(t,e){n.increment(e.count)})})}},{key:"resetBadgeCount",value:function(t,e,n){d(t,e,n)}},{key:"reset",value:function(t){var e=function(t){n.setCount(m=0)};t?e():0<m&&d(m,e,!0)}}]),n}(),p=zmail.Core.Namespaces.create("zmNCenter");p.counter=v,p.counter.count=v.getCount}(),window.__rollupModule=void 0;