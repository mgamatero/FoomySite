(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"6Bkx":function(e,t,a){"use strict";a.d(t,"a",function(){return g}),a.d(t,"b",function(){return y});var n=a("q1tI"),s=a.n(n),i=a("BL+O"),l=a("uwyq"),r=a("c8D3"),o=a("92Lq"),c=a("HzOS"),p=a("DoNX"),d=a("pucZ"),b=a("V61T"),m=a("8lxu"),u=a("YC+u"),h=a("YV/N"),f=a("vr4s"),v=function(e){return s.a.createElement("span",{"data-placeholder":Object(h.b)("363b819548608faed67e73d592c05976")},Object(c.d)(e.note.get("title").trim()||u.a.defaultTitle))},g=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"setNoteRef",function(e){a.noteElm=$.e(e),a.props.setNoteView(a.props.note.get("id"),e)}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleViewNote",function(){if(a.noteElm.hasClass("zmNLSlct"))return a.props.closePreview();var e=a.props.note,t={namespaceId:e.get("namespaceId"),id:e.get("id")};a.props.openNoteInPreviewCard(t,a.noteElm)}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.note;t.on("change",function(){e.forceUpdate()}),t.get("newNote")&&(t.set("newNote",void 0),this.noteElm.addClass("highlightClass"),setTimeout(function(){e.noteElm.removeClass("highlightClass")},3e3))}},{key:"componentWillUnmount",value:function(){this.props.note.stopSubscriptions(),Object(f.hideMenu)();var e=this.props.note,t={id:e.get("id"),namespaceId:e.get("namespaceId")};this.props.checkAndClosePreview&&this.props.checkAndClosePreview([t])}},{key:"render",value:function(){var e=this.props,t=e.note,a=e.extraOptions,n="zmNLAvatar ".concat(r.a.COLORCODE[t.get("color")]),l=t.get("summary"),p=t.get("title"),d=l&&l.length?l.trim().slice(0,1):"",b=p&&p.length?p.slice(0,1):d,m=["zmNList"].concat(babelHelpers.toConsumableArray(t.get("selected")?["zmNLCheck"]:[]),babelHelpers.toConsumableArray(o.c.isGroupDisabled(t.get("namespaceId"))?[]:["zmNLEditable"])).join(" ");return s.a.createElement("div",{className:m,ref:this.setNoteRef,onClick:this.handleViewNote},s.a.createElement("div",{className:"zmNLMIco"},s.a.createElement(i.d,{note:t}),s.a.createElement(i.f,{note:t}),s.a.createElement(i.b,{note:t})),s.a.createElement("div",{className:n},s.a.createElement("span",null,b)),s.a.createElement("div",{className:"zmNLCont"},s.a.createElement("div",{className:"zmNLContRow"},s.a.createElement("div",{className:"zmNLTitle"},s.a.createElement(v,{note:t}),s.a.createElement(i.e,{note:t}))),s.a.createElement("div",{className:"zmNLContRow"},s.a.createElement("div",{className:"zmNLDesc"},s.a.createElement("span",null,s.a.createElement(i.c,{note:t}),Object(c.d)(l||""))),s.a.createElement("div",{className:"zmNLblCont"},s.a.createElement(H,{tags:t.get("tagId")||[],note:t})))),s.a.createElement("div",{className:"zmNLData"},s.a.createElement(C,{extraOptions:a,note:t}),s.a.createElement("div",{className:"zmNLDataRow"},s.a.createElement(N,{extraOptions:a,note:t}))),s.a.createElement("div",{className:"zmNLAction"},s.a.createElement("div",{className:"zmNLDate"},s.a.createElement("span",{className:""},t.get("disptime"))),s.a.createElement("div",{className:"zmNLActIco"},s.a.createElement(i.a,{note:t}))))}}]),t}(s.a.Component),N=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"setGroupRef",function(e){a.groupElm=e}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"setBookRef",function(e){a.bookElm=e}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleChangeGroup",function(e){var t=a.props,n=t.extraOptions,s=t.note;n&&"stickyNote"===n.mode||s.isOwnerOrGrpAdmin()&&(e.stopPropagation(),Object(p.b)({ignoreGroupId:s.get("namespaceId"),parent:a.groupElm,onSelect:function(e){s.changeGroup({namespaceId:e})}}))}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleChangeBook",function(e){var t=a.props,n=t.extraOptions,s=t.note;if(!n||"stickyNote"!==n.mode){var i=s.get("namespaceId");if(s.isOwnerOrGrpAdmin()){e.stopPropagation();var l={id:i,catId:s.get("cat"),parent:a.bookElm,onSelect:function(e){s.changeBook(e)},onCreate:function(e){s.changeBook(e)}};l.onCreate=function(e){s.changeBook(e)},Object(p.a)(l)}}}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,t=e.note,a=e.extraOptions,n=o.c.getGroupName(t.get("namespaceId")),i=Object(d.h)(t.get("cat"),t.get("namespaceId")),l=Boolean(_zm.isStreamsEnabled());if(""===n)return null;var r=a&&"stickyNote"===a.mode,c=t.isOwnerOrGrpAdmin();return s.a.createElement("div",{className:"zmNLGroup"},l&&s.a.createElement("span",{ref:this.setGroupRef,onClick:this.handleChangeGroup,"data-tooltip":c&&!r?Object(h.b)("68adc414d6126241892438f8ebc2589d"):""},n),l&&s.a.createElement("i",{className:"msi-rarrow"}),s.a.createElement("span",{ref:this.setBookRef,"data-tooltip":c&&!r?Object(h.b)("2cbc774c43fbab4c03068b27cd134627"):"",onClick:this.handleChangeBook},i))}}]),t}(s.a.Component),C=function(e){function t(e){var a;return babelHelpers.classCallCheck(this,t),(a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))).state={},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this;zmail.ContactBook.get({zuid:this.props.note.get("ownerZUID"),type:"org"}).then(function(t){var a=t[0];a&&a.attrs&&a.attrs.fn&&e.setState({contactName:a.attrs.fn})})}},{key:"render",value:function(){var e=this.state.contactName,t=this.props.extraOptions;return"c"===t.mode&&t.groupId===zmail.zuid?s.a.createElement("div",{className:"zmNLUser"}):s.a.createElement("div",{className:"zmNLDataRow"},s.a.createElement("div",{className:"zmNLUser "},Boolean(e)&&s.a.createElement("span",{className:"zmThmClr","data-tooltip":e},e)))}}]),t}(s.a.Component),H=function(e){function t(e,a){var n;return babelHelpers.classCallCheck(this,t),n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleTagClick",function(e){var t=n.props.note;e.stopPropagation(),n.tagElm.hasClass("zmNLbl")&&n.tagElm.addClass("zmNLblSel"),n.dropOpen=!0,Object(p.c)({parent:n.tagElm[0],labelState:{labelList:t.get("tagId")},note:t,onHide:function(){n.dropOpen=!1,n.tagElm.hasClass("zmNLbl")&&n.tagElm.removeClass("zmNLblSel")}})}),n.dropOpen=!1,n.setTagRef=function(e){n.tagElm=$.e(e)},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getTagIcon",value:function(){return s.a.createElement("div",{className:"zmNLbl".concat(this.dropOpen?" zmNLblSel":""),key:"tagIcon",ref:this.setTagRef,onClick:this.handleTagClick},s.a.createElement("div",{className:"zmAMB"},s.a.createElement(l.b,null,s.a.createElement(l.a,{small:!0,iconClass:"msi-label",tooltip:Object(h.b)("2efd89b3ccc76b0b03a34196fc6d1c8b")}))))}},{key:"getTags",value:function(){var e,t=this.props.tags;return s.a.createElement("div",{className:"zmLblGrp zmViewLblName",ref:this.setTagRef,onClick:this.handleTagClick,key:"tags"},t.map(function(a,n){if(e=Object(b.v)("default")[a]){if(n<=2)return s.a.createElement("div",{className:"zmLbl",title:e.label},s.a.createElement("span",{style:{backgroundColor:e.color}}),s.a.createElement("font",null,e.label));if(n===t.length-1&&n>2)return s.a.createElement("div",{className:"zmLbl"},s.a.createElement("font",{className:"moreLbl"},"+",t.length-3))}return!1}))}},{key:"render",value:function(){return this.props.tags.length?this.getTags():this.getTagIcon()}}]),t}(s.a.Component),y=function(e){function t(e,n){var s;return babelHelpers.classCallCheck(this,t),s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,n)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(s),"handleViewNote",function(){var e=s.props.note,t={namespaceId:e.get("namespaceId"),id:e.get("id")};"stickyNote"===e._collection.listInfo.mode?m.a.trigger("openStickyNote",t):Promise.all([a.e(0),a.e(6),a.e(7),a.e(11),a.e(19)]).then(a.bind(null,"jenI")).then(function(e){(0,e.openNoteInPopup)(t,{})})}),s.setLIRef=function(e){s.noteElm=$.e(e),s.props.setNoteView(s.props.note.get("id"),e)},s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.note.on("change",function(){e.forceUpdate()}),this.props.note.get("newNote")&&(this.props.note.set("newNote",void 0),this.noteElm.addClass("highlightClass"),setTimeout(function(){e.noteElm.removeClass("highlightClass")},3e3))}},{key:"componentWillUnmount",value:function(){this.props.note.stopSubscriptions()}},{key:"render",value:function(){var e=this.props,t=e.note,a=e.extraOptions,n="zmNLAvatar ".concat(r.a.COLORCODE[t.get("color")]),i=t.get("summary"),l=t.get("title").trim(),o=i?i.trim().slice(0,1):"",p=l&&l.length?l.slice(0,1):o;return s.a.createElement("div",{className:"zmNList",ref:this.setLIRef,onClick:this.handleViewNote},s.a.createElement("div",{className:n},s.a.createElement("span",null,p)),s.a.createElement("div",{className:"zmNLCont"},s.a.createElement("div",{className:"zmNLContRow"},s.a.createElement("div",{className:"zmNLTitle"},s.a.createElement(v,{note:t}),s.a.createElement("div",{className:"zmNLDesc zmGreyClr"}," - ",s.a.createElement("span",null,Object(c.d)(i||""))))),s.a.createElement("div",{className:"zmNLContRow"},s.a.createElement(N,{extraOptions:a,note:t}),s.a.createElement("div",{className:"zmNLDate"},s.a.createElement("span",{className:""},t.get("disptime"))))))}}]),t}(s.a.Component)},"BL+O":function(e,t,a){"use strict";a.d(t,"d",function(){return u}),a.d(t,"f",function(){return h}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return N}),a.d(t,"c",function(){return g}),a.d(t,"e",function(){return v});var n=a("q1tI"),s=a.n(n),i=a("Kz78"),l=a("uwyq"),r=a("vr4s"),o=a("c8D3"),c=a("DoNX"),p=a("92Lq"),d=a("83P7"),b=a("YV/N"),m=a("UK2x"),u=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleSetCheck",function(e){var t=a.props.note;e.stopPropagation(),t._collection.handleSelect(e,t)}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.note,t=e._collection.listInfo;return t&&"c"!==t.mode||!e.isOwnerOrGrpAdmin()?null:s.a.createElement("div",{className:"zmNLChk"},s.a.createElement("i",{className:"msi-uncheck",onClick:this.handleSetCheck}))}}]),t}(s.a.Component),h=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleSetFavourite",function(e){e.stopPropagation(),a.props.note.saveFavourite()}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.note.get("starred")?"msi-fav zmFav":"msi-fav";return s.a.createElement("div",{className:"zmNLFav","data-tooltip":Object(b.b)("0d08e894cf9e80f17662fecb7cf5ab4e")},s.a.createElement("i",{className:e,onClick:this.handleSetFavourite}))}}]),t}(s.a.Component),f=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleViewAssociatedMail",function(e){var t=a.props.note,n={};e.stopPropagation();var s=t.get("email");s.accid!==zmail.accId&&(n={actionType:"viewGroupMailEntity",entityId:s.msgid,entityType:"1",streamsView:"true",groupId:t.get("namespaceId"),accId:s.accid}),zmList.getMailData({msgId:s.msgid,opentype:2,type:"lt",src:"external",eprm:n})}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.note;return!e.get("email")||$.isEmptyObject(e.get("email"))?null:s.a.createElement("div",{className:"zmNLMail"},s.a.createElement("i",{className:"msi-mailopen",onClick:this.handleViewAssociatedMail,"data-tooltip":Object(b.b)("297ca353fb245b04993e02cab8a98dfb")}))}}]),t}(s.a.Component),v=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.note;return Boolean(_zm.isStreamsEnabled())&&e.get("commentCount")&&0!==e.get("commentCount")?s.a.createElement("div",{className:"zmNLCmnt zmThmClr",title:Object(b.b)("0dfe5d30e3cc745f0918409bc79ab602")},s.a.createElement("span",null,e.get("commentCount")),s.a.createElement("i",{className:"msi-lcmnt"})):null}}]),t}(s.a.Component),g=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"setIconRef",function(e){a.iconElm=e}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleShowAttachments",function(e){var t=a.props.note;e.stopPropagation();var n=t.get("attachments").map(function(e){var a=e[Object.keys(e)[0]];return a.e=t.get("id"),a.et=o.a.entityType,a.gId=t.get("namespaceId"),a}),s={entityInfo:{groupId:t.get("namespaceId"),e:t.get("id"),et:o.a.entityType},app:"notes",attList:n,supportDrag:!0,zipType:"downloadall",showMOpt:!0},l=$.e(Object(i.d)()),c=Object(i.l)(),p=$.e(Object(i.a)()),d=$.e(c);d.appendDOM(zmAttach.build(s)),p.appendDOM(d),p.appendDOM(l);var b={par:a.iconElm,showArrow:!0,liDom:p,liHover:!1,spanClass:"zm_attPop minwid zmAtt_mulMail",clk:function(){}};zmsuite.showMenu(b),l.click(function(){Object(r.hideMenu)()})}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.note.get("attachments");return e&&e.length?s.a.createElement("i",{className:"msi-attachicon",ref:this.setIconRef,onClick:this.handleShowAttachments}):null}}]),t}(s.a.Component),N=function(e){function t(){var e,a;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleArchive",function(e){var t=a.props.note;e.stopPropagation();var n=!t.get("archived");t.archiveOrUnarchiveNote({archived:n})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleDeleteNote",function(e){var t=a.props.note;e.stopPropagation(),Dialog.confirm(Object(b.b)("07248fd5b0b0bf2777c1ac728ec9a789"),function(){t.deleteNote(t.get("id"))})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleMakeSticky",function(e){e.stopPropagation(),Object(d.a)(a.props.note.toJSON())}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleSetColor",function(e){if(e.stopPropagation(),a.colorPaletteObj&&a.colorPaletteObj.menuObj)return Object(r.hideMenu)();var t=e.target.closest("li"),n=e.target.closest(".zmNList"),s=a.props.note;a.colorPaletteObj=Object(c.d)({color:o.a.COLORCODE[s.get("color")],par:t,onClick:function(e){s.saveColor(o.a.COLOR[e])},onHide:function(){a.colorPaletteObj=void 0,n.classList.remove("zmNLSel")}}),n.classList.add("zmNLSel")}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"handleShowMore",function(e){if(e.stopPropagation(),a.menuObj)return Object(r.hideMenu)();var t=a.props.note,n=t.get("namespaceId"),s=Boolean(_zm.isStreamsEnabled()),i=s&&t.isOwnerOrGrpAdmin(),l=s&&p.c.isGroupAvailable(n),o=[{txt:Object(b.b)("a1f51c8be58267e666d74a427aae870e"),data:{action:"sendMail"}},{txt:Object(b.b)("13dba24862cf9128167a59100e154c8d"),data:{action:"print"}},{txt:Object(b.b)("d7c14092c2a6b6305118ee18148f52d2"),data:{action:"openintab"}}].concat(babelHelpers.toConsumableArray(l?[{txt:Object(b.b)("93febe185b7ade3aa5c8ba1957e15328"),data:{action:"moveNote"}}]:[]),babelHelpers.toConsumableArray(i?[{txt:Object(b.b)("b6dc54fec959471d9498275172a5f833"),data:{action:"copyNote"}}]:[])),c=e.target.closest(".zmNList"),d={par:e.target.closest("li"),showArrow:!0,list:o,direction:"bottom",clk:function(e){a.handlePopupClick(e)},onHide:function(){a.menuObj=void 0,c.classList.remove("zmNLSel")}};a.menuObj=zmsuite.showMenu(d),c.classList.add("zmNLSel")}),a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handlePopupClick",value:function(e){var t=e.action;Object(r.hideMenu)();var n=this.props.note,s=n.get("id"),i=n.get("namespaceId");switch(t){case"sendMail":n.sendAsMail();break;case"print":Promise.all([a.e(0),a.e(6),a.e(7),a.e(11),a.e(19)]).then(a.bind(null,"jenI")).then(function(e){(0,e.printNote)({id:s,namespaceId:i})});break;case"openintab":Promise.all([a.e(0),a.e(6),a.e(7),a.e(11),a.e(19)]).then(a.bind(null,"jenI")).then(function(e){(0,e.openNoteInTab)({id:s,namespaceId:i})});break;case"copyNote":Object(m.b)({title:n.get("title"),catId:n.get("cat"),namespaceId:i,comments:!0},n.postAsNew.bind(n),{type:"copyNote"});break;case"moveNote":Object(m.b)({title:n.get("title"),catId:n.get("cat"),namespaceId:i,comments:!0},n.changeGroup.bind(n),{type:"moveNote"})}}},{key:"render",value:function(){var e=this.props.note,t=e.isOwnerOrGrpAdmin(),a=e.get("archived")?Object(b.b)("9fd02d2eb5ce348a74372eea202a0aec"):Object(b.b)("e727b00944f81e1d0a95c12886ac4641"),n=e.get("archived")?"msi-unarchive":"msi-archive",i=!Object(m.j)();return s.a.createElement("div",{className:"zmAMB"},s.a.createElement(l.b,null,t&&s.a.createElement(l.a,{small:!0,iconClass:"msi-nclr",tooltip:Object(b.b)("dfdf0ea751f54f1ae7031674690e618d"),onClickHandler:this.handleSetColor}),i&&s.a.createElement(l.a,{small:!0,iconClass:"msi-stiNotes",tooltip:Object(b.b)("e0db3f844569a56900f21c13dac3f4c8"),onClickHandler:this.handleMakeSticky}),t&&s.a.createElement(l.a,{small:!0,iconClass:n,tooltip:a,onClickHandler:this.handleArchive}),s.a.createElement(l.a,{small:!0,iconClass:"msi-nmore",tooltip:Object(b.b)("284716247b12b363fd6b6a71bff0918e"),onClickHandler:this.handleShowMore})),s.a.createElement(l.b,null,t&&s.a.createElement(l.a,{small:!0,iconClass:"msi-trash",tooltip:Object(b.b)("776d6d348a916bb4e7e89f9349d68b7c"),onClickHandler:this.handleDeleteNote})))}}]),t}(s.a.Component)},NHRd:function(e,t,a){"use strict";a.d(t,"a",function(){return v}),a.d(t,"b",function(){return g});var n=a("EVdn"),s=a.n(n),i=a("q1tI"),l=a.n(i),r=a("i8i4"),o=a.n(r),c=a("D0BC"),p=a.n(c),d=a("8lxu"),b=a("92Lq"),m=a("/Qv1"),u=a("6Bkx"),h=a("YV/N"),f=".noteHeader",v=function(e){function t(){var e,n;babelHelpers.classCallCheck(this,t);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(l))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"noteViewList",{}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"reRender",function(){n.forceUpdate()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"checkAndClosePreview",function(e){e&&e[0]&&n.openPreviewNoteData&&n.openPreviewNoteData.id===e[0].id&&n.openPreviewNoteData.namespaceId===e[0].namespaceId&&n.closePreview()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"closePreview",function(){var e=n.props.appId,t=zmsuite.getCenter(e),a=t[0].getNodes(),i=t[1].getNodes();i[1].$el.find(".postMsg").length&&o.a.unmountComponentAtNode(i[1].$el.find(".postMsg")[0]),i[0].$el.find(f).length&&o.a.unmountComponentAtNode(i[0].$el.find(f)[0]),s.a.publish(zmStreamsApp.constants.removeNotificationPreview,t[1].$el),a[2].$el.find(".zmNLSlct").removeClass("zmNLSlct"),zmsuite.getCenter(e)[1].close(),zmStreamsApp.util.closePreview(e),n.openPreviewNoteData={}}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"noteOnDelete",function(e,t,a){n.openPreviewNoteData&&n.openPreviewNoteData.id===t&&n.openPreviewNoteData.namespaceId===a&&n.closePreview()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"noteView",function(e,t){n.noteViewList[e]=t}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleOpenNoteInPreviewcard",function(e,t){Promise.all([a.e(0),a.e(6),a.e(7),a.e(11),a.e(19)]).then(a.bind(null,"jenI")).then(function(a){var s,i=a.openNoteInPreview,l=n.props.appId;n.openPreviewNoteData=e;var r=n.props.noteList,o=zmsuite.getCenter(l)[0].getNodes();o[2].$el.find(".zmNLSlct").removeClass("zmNLSlct");var c=r.where({id:e.id,namespaceId:e.namespaceId})[0],p=r.indexOf(c);i(e,{appname:l,fromApp:"notes",next:function(){s=r.at(p+1);var e=n.noteViewList[s.get("id")];e.click(),e.scrollIntoView(!1)},prev:function(){s=r.at(p-1);var e=n.noteViewList[s.get("id")];e.click(),e.scrollIntoView(!1)},onClose:function(){o[2].$el.find(".zmNLSlct").removeClass("zmNLSlct"),n.closePreview()}}),t.addClass("zmNLSlct")})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleCreate",function(){Promise.all([a.e(0),a.e(6),a.e(20),a.e(22),a.e(24),a.e(29),a.e(108)]).then(a.bind(null,"CHNO")).then(function(e){(0,e.createInlineNotes)()})}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.noteList.on("add remove change:renamenotecat",this.reRender),d.a.on("removeMask",this.checkAndClosePreview,this),s.a.subscribe("/note/delete",this.noteOnDelete)}},{key:"componentWillUnmount",value:function(){d.a.off("removeMask",this.checkAndClosePreview,this),this.closePreview(),s.a.unsubscribe("/note/delete",this.noteOnDelete),this.props.noteList.stopSubscriptions()}},{key:"navigateListing",value:function(e){var t,a,n,s=this.props.noteList,i=this.openPreviewNoteData;i?(t=s.where({id:i.id,namespaceId:i.namespaceId})[0],a=s.indexOf(t),n="nextNote"===e?s.at(a+1):s.at(a-1)):s.length&&(n=s.at(0)),n&&(this.noteViewList[n.get("id")].click(),this.noteViewList[n.get("id")].scrollIntoView(!1),this.openPreviewNoteData={id:n.get("id"),namespaceId:n.get("namespaceId")})}},{key:"render",value:function(){var e,t=this,a=this.props.noteList,n=a.listInfo,s={id:n.id,groupId:n.groupId,mode:n.mode},i=function(e){return function(a){t.noteView(a,e)}};return this.color=p()(0,3),a.length?l.a.createElement("div",{id:"wrapperNoteDiv",ref:"wrapDiv"},a.map(function(e){return l.a.createElement(u.a,{ref:i(e),openNoteInPreviewCard:t.handleOpenNoteInPreviewcard,extraOptions:s,closePreview:t.closePreview,checkAndClosePreview:t.checkAndClosePreview,note:e,setNoteView:t.noteView,key:e.get("id")})})):(e=["byuser","sharedtome","archive","createdbyme"].includes(s.mode)||"mailassociated"===s.id||b.c.isGroupDisabled(n.groupId)?Object(h.b)("bd3581ce55a6d98ee256744762f66c16"):"search"===s.mode?Object(h.b)("7279bbdc0846ecf593f05273c1c916f0"):Object(h.a)(Object(h.b)("3d6590bcdd6aed78fc8b2f11e55c658d"),{create:l.a.createElement("span",{className:"zmLink",onClick:this.handleCreate}," ",Object(h.b)("309ae27723377cfbd66856ec10e482fa")," ")}),l.a.createElement("div",{id:"wrapperNoteDiv",ref:"wrapDiv"},l.a.createElement("div",{id:"nonotes",className:"zmInfoWarnMsg"},e)))}}]),t}(l.a.Component),g=function(e){function t(){var e,n;babelHelpers.classCallCheck(this,t);for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i))),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"selectedSticky",{}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"noteViewList",{}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"reRender",function(){n.forceUpdate()}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleAddNote",function(){var e=n.props.noteList.listInfo;Promise.all([a.e(6),a.e(7),a.e(22),a.e(101)]).then(a.bind(null,"BKcq")).then(function(t){(0,t.loadAddNote)({addparams:{msgid:e.msgid,senderid:e.senderid,accid:e.accid}})})}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"noteView",function(e,t){n.noteViewList[e]=t}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.noteList.on("add remove",this.reRender);var e=this.props.noteList;"mailassociated"===e.listInfo.id&&(e.count?e.count++:e.count=1)}},{key:"componentWillUnmount",value:function(){this.props.noteList.stopSubscriptions();var e=this.props.noteList;"mailassociated"===e.listInfo.id&&(e.count--,0===e.count&&setTimeout(function(){var t=e._storeKey;e.reset(),m.f.deleteInstance(t)},0))}},{key:"handleStickyListSelection",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id,a=void 0===this.selectedSticky.index?-1:this.selectedSticky.index,n=this.props.noteList;"downArrow"===e?(a=a===n.length-1?0:a+1,this.selectedSticky={index:a,model:n.at(a)},this.noteViewList[n.at(a).get("id")].classList.add("zmNLSlct")):"upArrow"===e?(a=0===a?0:a-1,this.selectedSticky={index:a,model:n.at(a)},this.noteViewList[n.at(a).get("id")].classList.add("zmNLSlct")):"enter"===e?this.noteViewList[n.at(a).get("id")].click():"initial"===e?(this.selectedSticky={index:a+1,model:n.at(a+1)},this.noteViewList[n.at(a+1).get("id")].classList.add("zmNLSlct")):"click"===e&&(n.forEach(function(e,n){e.id===t&&(a=n)}),this.selectedSticky={index:a,model:n.get(t)},this.noteViewList[t].classList.add("zmNLSlct"))}},{key:"getListItems",value:function(e){var t=this,a=this.props.noteList;if(a.length)return a.map(function(a){return l.a.createElement(u.b,{extraOptions:e,note:a,key:a.get("id"),setNoteView:t.noteView})});var n=Object(h.b)("bd3581ce55a6d98ee256744762f66c16");return l.a.createElement("div",{id:"wrapperNoteDiv",ref:"wrapDiv"},l.a.createElement("div",{id:"nonotes",className:"SC_nmsg"},n))}},{key:"render",value:function(){var e=this.props.noteList.options,t=e&&e.showHeader?"multiAppHead":"multiAppHead zmHideD",a=this.props.noteList.listInfo,n={id:a.id,groupId:a.groupId,mode:a.mode};return"mailassociated"===n.id?l.a.createElement("div",{className:"multiAppData"},l.a.createElement("div",{className:"multiAppInfo SC_notes zmLstvw"},l.a.createElement("div",{className:t},l.a.createElement("span",null,Object(h.b)("f4c6f851b00d5518bf888815de279aba")),l.a.createElement("div",{className:"SCmb SC_frt"},l.a.createElement("ul",null,l.a.createElement("li",{className:"SCtxt"},l.a.createElement("b",null,l.a.createElement("span",{onClick:this.handleAddNote},Object(h.b)("50cd1871f950375eef4e2efce35366c6"))))))),l.a.createElement("div",{className:"zmStickyNotesList"},this.getListItems(n)))):l.a.createElement("div",{className:"zmStickyNotesList"},this.getListItems(n))}}]),t}(l.a.Component)}}]);