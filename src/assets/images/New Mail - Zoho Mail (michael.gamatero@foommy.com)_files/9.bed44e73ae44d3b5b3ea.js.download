(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{P0iI:function(e,t,n){"use strict";n.d(t,"f",function(){return m}),n.d(t,"h",function(){return d}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return f});var o=n("i8i4"),a=n.n(o),i=[{value:"0",dispname:"Blue"},{value:"1",dispname:"Green"},{value:"2",dispname:"Yellow"},{value:"3",dispname:"Red"}],r=function(e){if(i.value[0]===e)return i.dispname},d=function(e,t){if("removeNoteFromView"===e)a.a.unmountComponentAtNode(t.mountingElem);else if("removeNoteFromViewPreviewCard"===e){var n=t.mountingElem[0].$el.find(".noteHeader");n.length&&a.a.unmountComponentAtNode(n[0]),t.mountingElem[1].$el.find(".postMsg").length&&a.a.unmountComponentAtNode(t.mountingElem[1].$el.find(".postMsg")[0])}},s=function(e){var t;(t={zuid:e.zuid},zmail.ContactBook.get({zuid:t.zuid,type:"org"})).then(function(t){var n=[{className:"added by",value:t[0]},{className:"in group",value:zmail.ContactBook.getGroups(e.groupId)[0]}];zmail.Search.setContext(zmail.Search.Models.Contexts.noteSearchContext),zmail.Search.newSearch(n)})},c=function(e,t,n){return new Promise(function(o,a){zmModules.notes.getNotesSmartAdd().then(function(a){(0,a.getSmartNote)(e,t,n).then(function(e){o(e)})})})},l=function(e){return zmModules.notes.getNotesUtils().then(function(t){return(0,t.loadAndCategoryArray)(e)})},m=function(e,t,n){if("popup"===e){var o={};return t&&t.richText&&(o.richText=!0,t.richText=void 0),zmModules.notes.getNotesAdd().then(function(e){(0,e.loadAddNote)(t,o)})}if("openNote"===e)zNote.loadAndOpenNote({namespaceId:t.gId,id:t.e},{type:"popup"});else if("openNoteInTab"===e)return zmModules.notes.getNotesPreview().then(function(e){(0,e.openNoteInTab)({namespaceId:t.gId,id:t.e,commentId:t.commentId})});return"openNoteInPreview"===e?zmModules.notes.getNotesPreview().then(function(e){(0,e.openNoteInPreview)(t,t.options)}):"addNote"===e?zmModules.notes.getNotesAdd().then(function(e){(0,e.loadAddNote)(t,{mountingElem:n.ele,doneCallback:n.callback})}):"viewNote"===e?zmModules.notes.getNotesPreview().then(function(e){(0,e.streamListNote)(t,n.ele)}):"commentNote"===e?zmModules.notes.getNotesAdd().then(function(e){(0,e.loadAddNote)(t,{mountingElem:n.ele,commentNote:!0,doneCallback:n.callback})}):"notelist"===e?zmModules.notes.getMailAssociatedNotes().then(function(e){var n=e.getNoteList;(0,e.loadNoteCategories)().then(function(){n(t.data,t.extraparams,t.mountingElem,t.postCallback)})}):"printNote"===e?zmModules.notes.getNotesPreview().then(function(e){(0,e.printNote)(t.data)}):void 0},u=function(e){var t=zmHash.decode(e.href),n=t.key,o=t.params;if("notes"===n)if("preview"===o[0])m("openNote",{gId:o[1],e:o[2]});else if("tab"===o[0])m("openNoteInTab",{gId:o[1],e:o[2]});else{var a={hashParams:o,data:{router:!0}};zmApp.showApp("n",a)}},f=function(){_zm.registerLeftClickHandlers({tagName:"a",attrName:"href",attrVal:".*/zm/#notes/.*",callback:u})}},"Q/Su":function(e,t,n){"use strict";n.d(t,"k",function(){return u}),n.d(t,"j",function(){return f}),n.d(t,"y",function(){return z}),n.d(t,"w",function(){return m}),n.d(t,"o",function(){return v}),n.d(t,"s",function(){return b}),n.d(t,"e",function(){return C}),n.d(t,"u",function(){return U}),n.d(t,"c",function(){return N}),n.d(t,"m",function(){return O}),n.d(t,"h",function(){return h}),n.d(t,"n",function(){return M}),n.d(t,"d",function(){return D}),n.d(t,"i",function(){return T}),n.d(t,"r",function(){return I}),n.d(t,"f",function(){return I}),n.d(t,"p",function(){return y}),n.d(t,"g",function(){return A}),n.d(t,"v",function(){return E}),n.d(t,"t",function(){return j}),n.d(t,"b",function(){return S}),n.d(t,"q",function(){return w}),n.d(t,"a",function(){return P}),n.d(t,"l",function(){return L}),n.d(t,"x",function(){return x});var o,a=n("EVdn"),i=n.n(a),r=n("hSUr"),d=n("7ni8"),s=n("p2EH"),c=n("V61T"),l=n("m8qQ"),m=function(e){if(zmUtil.isChildWindow()){if("sdraft"===e.action){var t=e.msgId,n=e.draftObj,o=e.draftDataObj;zmPreviewTemplate.postSaveDraftAction(t,n,o)}}else{var a,r,d=e.action,s=e.msgId,c=e.draftId,l=e.mode,m=e.draftObj,u=e.draftDataObj,f=e.schedule,p="";if("undefined"!=typeof zmInit&&(a=zmInit.getListingDetObj())&&a.fId&&(r=a.fId),"sdraft"!==d&&"stemplate"!==d?(r!==zmail.folId.oId||!f&&"outbox"!==l?r!==zmail.folId.oId&&f?(p="",ZMail.utils.updateCount({fId:zmail.folId.oId,mode:"inc"})):r===zmail.folId.dId&&c&&zmUtil.deleteMsg(c):p=zmail.folId.oId,i.a.publish("/mail/sent",{msgId:s,mode:l})):"sdraft"===d?p=zmail.folId.dId:"stemplate"===d&&(p=zmail.folId.teId),"sdraft"===d&&m&&m.TH&&zmPreviewTemplate.postSaveDraftAction(s,m,u),p&&r===p){var z={};if(a.fId)z={fId:r,view:a.view,viewId:a.label||a.flag};else z={fId:"zm_"+a.view};z.retainPreview=!0,s===zmPrev.prevDetails("zm_Container").msgId&&(z.retainPreview=!1),i.a.publish("/mail/listMails",z)}}},u=function(){return"zmcompose"},f=function(){return Object(d.b)("zmcomposeI18N")},p=function(){var e=i.a.Deferred(),t=[],n=r.f.load(u());if(t.push(n),_zm.isOfflineLockAvailable()){var o=r.f.load("zmcomposeDataLayer");t.push(o);var a=Object(s.B)();a&&t.push(a)}return Promise.all(t).then(function(){(function(){var e=i.a.Deferred();return ZE_Init.init(),ZE_Init.editorCoreLoaded.then(function(){e.resolve()}),e.promise()})().then(function(){e.resolve()})}),e.promise()},z=function(){if(void 0!==o)return o.promise();var e=i.a.Deferred();return o=e,zmail.isFlexComposeEnabled?function(){var e=[],t=zmModules.getFlexComposeModule();if(e.push(t),_zm.isOfflineLockAvailable()){var n=Object(s.B)();n&&e.push(n)}var o=i.a.Deferred();return Promise.all(e).then(function(){ZE_Init.init(),ZE_Init.editorCoreLoaded.then(function(){o.resolve()})}),o.promise()}().done(function(){e.resolve()}):p().done(function(){e.resolve()}),e.promise()},v=function(){var e={0:"w",1:"t",2:"p"};return zmUtil.isChildWindow()&&1===zmail.mailOpt.compTab&&(e[1]="p"),_zm.isOfflineSyncActive()&&(e={0:"t",1:"t",2:"t"}),e[parseInt(zmail.mailOpt.compTab)]},g={},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zmUtil.cmpClose();var t="compose";e.mode&&(t=e.mode);var n=zmail.conPath+"/comp.do?accId="+zmail.accId;n+="&originalMode="+t;var o,a,i,r=e.msgId,d=e.type;if(e.folderId&&(o=e.folderId),r&&(n+="&msgId="+r),"fwdi"===t&&!r){var s=zmUtil.getFwdArr(r,d);s.mId&&(n+="&msgId="+(r=s.mId[0])),s.folderId&&(o=s.folderId)}if("fwdme"===t){var l=zmUtil.getFwdArr(r,d);l.mId&&(n+="&fwdMsgIds="+l.mId),l.tId&&(n+="&fwdtId="+l.tId),l.folderId&&(o=l.folderId)}if(o||(o=zmUtil.getFolIdByMsg(r)),o&&(n+="&folId="+o),o&&zmUtil.isSharedFolder(o)&&(a=zmUtil.getShareId(o)),a&&(n+="&shareId="+a),e.to&&(n+="&to="+e.to),n+="&app=6",r&&["reply","replyall","fwdi","draft","outbox"].includes(t)){var m=r+t,u=g[m];if(void 0===u||u&&u.closed){i=function(e,t){var n=parseInt(80*screen.width/100),o=parseInt(80*screen.height/100),a=(screen.width-n)/2,i=(screen.height-o)/2;return window.open(e,t,"height="+o+", width="+n+",status=yes,toolbar=no,top="+i+", left="+a+",scrollbars=yes,resizable=yes")}(n,m),g[m]=i;try{i&&i.window&&i[i.addEventListener?"addEventListener":"attachEvent"]((i.attachEvent?"on":"")+"load",function(e){i.window.zmail.zoid=zmail.zoid},!1)}catch(e){}}else u&&u.focus?u.focus():(i=Object(c.bb)(n,80,80))&&i.window&&i.window.addEventListener("load",function(){i.window.zmail.zoid=zmail.zoid})}else(i=Object(c.bb)(n,80,80))&&i.window&&i.window.addEventListener("load",function(){i.window.zmail.zoid=zmail.zoid});return!1},I=function(e){return new Promise(function(t,n){var o=e&&e.type;o||(o=v(),e.type=o);var a=e.loadType||"",r=e.loadApp&&"mail"===e.loadApp&&"p"===o;if("drafted"!==a||r){var s,c;e.elmPrefix=(zmUtil.isChildWindow()?c="W":"zm_Container"===(s=s||zmTab.currentTab)?c="P":s.indexOf("zm_srch")?s.indexOf("zm_tab")||(c="T"):c="S",c);var l=!1,m=!1;e.meta&&e.meta.streams&&(l=!0,e.meta.groupId&&(e.groupId=e.meta.groupId,e.streamsView=e.meta.streams)),e.msgId&&zmUtil.getFolIdByMsg(e.msgId)&&(l=zmUtil.isSharedFolder(zmUtil.getFolIdByMsg(e.msgId))),e.streamsView&&e.groupId&&(l=!0),"w"!==o||l||(m=!0);var u=zmUtil.isChildWindow()&&"eanew"===e.mode,f=zmUtil.isChildWindow()&&"p"===o;(u||f&&!zmComp.previewElementDOM(e))&&(m=!0),_zm.isOfflineSyncActive()&&(m=!1),e.deferredObj={resolve:t,reject:n},m?(h(e),t()):z().done(function(){var t,n,o;(n=(t=e).msgId,o=!1,t.meta&&t.meta.DBFAILED?(zmCompAdapter.getMessageData(n,!0).then(function(e){t.data=e.content,t.dbData=!0,zmComp.cmpReply(t)}),o=!0):_zm.isOfflineSyncActive()&&!t.data?(o=!0,t.meta&&t.meta.OFFLINE&&zmCompAdapter.getMessageData(n,!0).then(function(e){t.data=e.content,t.dbData=!0,zmComp.cmpReply(t)})):_zm.isOfflineSyncActive()&&zmUtil.getMailContent(n).then(function(e){if(i.a.isEmptyObject(e))return _zm.succErrMsg("e",Object(d.b)("zmcompose").errorMsg,{hideAfter:2e3}),!1;zmContentCache.isCached(n)&&(t.data=e,t.dbData=!0,zmComp.cmpReply(t))}),o)||zmComp.cmpReply(e)})}})},b=function(){var e=!1;return"p"===v()&&(e=!0),e},w=function(e){return!!b()&&Boolean(zmUtil.getMailObj(e,"DMID"))},C=function(e,t){z().done(function(){zmComp.cmpDialog(e)}),_zm.stopEvents(t)},k={cId:1,appData:{}},N=function(){k.cId+=1},O=function(){return"Cmp"+k.cId},U=function(e){var t,n;e.appId&&(e.appId=O()),e.appObj.appId&&(e.appObj.appId=O()),t=e.appId,n=e.data,k.appData[t]=n,N()},D=function(){var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){Object(l.a)(e)},!1)},M=function(){var e=i.a.Deferred();return z().done(function(){var t=zmComp.getCmpData();e.resolve(t)}),e.promise()},T=function(e,t,n){return new Promise(function(o,a){if(e=e||{},!_zm.isOfflineSyncActive()&&0===zmail.mailOpt.compTab&&i.a.isEmptyObject(e))h(),o();else{if(zmsuite.isMaxLimitReached())return void a();(t=t||{}).deferredObj={resolve:o,reject:a},z().done(function(){zmComp.compose(e,t)})}_zm.stopEvents(n)})},y=function(e){var t,n=[],o=[],a={};if(e)n=[e];else{var i=zmUtil.getSelectedMails();i[0].length&&(n=i[0]),i[1].length&&(o=i[1])}if(o.length){var r=o.length;if(r>10){var s=f().message_fwdmul;return s=Object(d.a)(s,{NUMBER:r}),Dialog.alert(s),!1}}if(n.length){var c=n.length;if(c>100){var l=f().conversation_fwdmul;return l=Object(d.a)(l,{NUMBER:c}),Dialog.alert(l),!1}}return n.length&&(t=1===n.length?zmUtil.getFolIdByMsg(n[0]):zmUtil.getFolId()),n.length&&(a.mId=n),o.length&&(a.tId=o),t&&(a.folderId=t),a},A=function(e,t){var n;t=t||{},n=e.data.obj?e.data.obj:e.data,t.new&&(U(e),zmsuite.setWorkSpace(e.appObj)),z().done(function(){var t={mode:n.mode,msgId:n.msgId,restore:!0,restoreAppId:e.appId};zmComp.cmpReply(t)})},E=function(e){zmUtil.compose({NEWATT:e})},j=function(e,t){"object"===("undefined"==typeof zmComp?"undefined":babelHelpers.typeof(zmComp))&&"function"==typeof zmComp.modeChange&&zmComp.modeChange(e,t)},_=function(){function e(e,t){var n=e.split(t);return n[0]&&n[1]?n:null}var t=/\?|(?:&amp;)|&/,n={mailto:"TO",to:"TO",cc:"CC",bcc:"BCC",subject:"SUBJECT",body:"CONTENT",content:"CONTENT"};return function(o){var a,i=o.split(t),r={},d=i.length,s=[];if(i.length){for((s=e(i[0],":")).length>1&&(r[n[s[0].toLowerCase()]]=decodeURIComponent(s[1])),a=1;a<d;a++)(s=e(i[a],"=")).length>1&&(r[n[s[0].toLowerCase()]]=decodeURIComponent(s[1]));return r}}}(),S=function(){_zm.registerLeftClickHandlers({tagName:"a",attrName:"href",attrVal:"mailto:(.+)",callback:function(e){var t=e.getAttribute("href");T(_(t))}})},P={loadComments:function(){if(zmail.isOrg&&Object(c.Q)(zmail.accId)){var e=arguments[0]||{},t=i.a.Deferred();return i.a.publish("/draft/openedincompose",{draftID:e.draftID,appendCallback:e.appendCallback,onResize:e.onResize,deferred:t,isSmartCompose:!0,context:e.context}),t.promise()}},notifyUpdate:function(){if(zmail.isOrg&&Object(c.Q)(zmail.accId)){var e=arguments[0]||{},t=i.a.Deferred();return i.a.publish("/draft/sharing/notifyupdates",{draftID:e.draftID,zohoID:e.zuid||zmail.zuid,accountID:e.accId||zmail.accId,deferred:t}),t.promise()}}},x=function(e){var t=e+"_compose";return new Promise(function(e,n){idb.delete(t).then(function(){e("success")},function(){n("error")})})},L=function(e){h(e)}},pgh3:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return u});var o=n("hSUr"),a=n("qfKh"),i=n("YV/N"),r=a.b.require,d=zmail.Utils.DOM,s=function(){zmUtil.taskDeferred=zmUtil.taskDeferred?zmUtil.taskDeferred:zmail.Utils.DeferredCollection.create();var e=zmUtil.taskDeferred.has("taskUtil"),t=zmUtil.taskDeferred.get("taskUtil");return e||o.f.load("taskUtil").done(function(){zmTask.Util.Init().done(function(){t.resolve()})}),t.promise()},c=function(e){var t=e||"task",n=$.Deferred();return s().done(function(){"taskReq"===t?n.resolve(zmTask.Util.Req):"taskUtil"===t?n.resolve(zmTask.Util):"taskSettings"===t?o.f.load(t).done(function(){n.resolve(new zmTask.Settings)}):o.f.load(t).done(function(){n.resolve()})}),n.promise()},l=function(e,t){if("viewSTask"===e.action)c("taskStreams").done(function(){var n=zmTask.Integrations.Streams(e);t(n)});else{var n=function(){if("addSTask"===e.action)zmTask.Create(e,t);else if("addCTask"===e.action||"addPopupTask"===e.action){var n=e.action;e.action="addCTask",zmTask.Create(e,function(e){!function(e,t){var n=d.selector("div.zmNewBtn").offset().top+"px",o=$.q("#zm_centerHolder").offset().left+"px",a=!1,r=e.task.model,s=function(e){a?$(e).text(Object(i.b)("4e11db406c6c9f234fe8579cc9bc5ef6")):$(e).text(Object(i.b)("c9cc8cce247e49bae79f15173ce97354"))},c={title:Object(i.b)("98318f5c39ad7fdaf11399e3ebca696f"),$content:e.$el,defaultCloseIcon:!0,buttons:[{name:Object(i.b)("c9cc8cce247e49bae79f15173ce97354"),callback:function(t){var n=t.$els.$buttonContainer.find(".js-button-selector")[0];a||(a=e.addTask(t.remove.bind(t),!1,function(e){zmUtil.succErrMsg("e",e),a=!1,s(n)}),s(n))}},{isCancel:!0,name:Object(i.b)("ea4788705e6873b424c65e91c2846b19"),callback:function(e){if(e.remove(),r.has("attref")&&r.unset("attref"),r.has("subtask")){var t=r.get("subtask");t&&t.length>0&&_.each(t.models,function(e){e.has("attref")&&e.unset("attref")})}}}],dialogDidMount:function(a){a.$els.$contentWrapper.css("width","2000px"),"addCTask"===t?a.$els.$positionWrapper.css({position:"absolute",top:n,left:o}):zmUtil.isZohoAccount(zmail.accId)||e.$el.find("#zt_ws input").attr("disabled","disabled"),a.$els.$contentWrapper.mousedown(function(e){zmUtil.stopEvents(e,!0),zmUtil.hideMenu(),zmTask.Util.addRemoveMenu("remove"),d.unmount(d.selector(".zcal_cn"),!0),d.unmount(d.selector("#zm_dropDown"),!0),d.unmount(d.selector(".zcal_tilst"),!0),zmAttach.util.removeMAct()}),a.$els.$contentWrapper.on("remove",function(e){if(zmAttach.util.removeMAct(),zmUtil.hideMenu(),r.has("attref")&&r.unset("attref"),r.has("subtask")){var t=r.get("subtask");t&&t.length>0&&_.each(t.models,function(e){e.has("attref")&&e.unset("attref")})}}),e.onMount()}};Dialog.new(c)}(e,n)})}else"addAsTask"===e.action&&(e.action="addCTask",zmTask.Create(e,t))};c("taskCreate").done(function(){n()})}},m=function(e,t){s().done(function(){l(e,t)})},u=function(){_zm.registerLeftClickHandlers({tagName:"a",attrName:"href",attrVal:".*/zm/#task/.*",callback:function(e){zmUtil.requireTaskModule().done(function(){var t=r("zmHash").decode(e.href);if("task"===t.key){var n=t.params;zmTask.restore(n)}})}})}}}]);