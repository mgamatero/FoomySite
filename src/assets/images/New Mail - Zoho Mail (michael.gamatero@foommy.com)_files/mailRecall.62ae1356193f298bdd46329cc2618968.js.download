"use strict";window.zmRecall=function(){var c=zmText.get("mailRecall");return{showRecallBand:function(e,s){var o=$.q("#zm_smsg_discard");o.length&&o.remove();var m=zdom("div",{id:"zm_smsg_discard",className:"SC_msg SC_imsg"},zdom("span",null,zdom("font",{style:{fontWeight:"bold"}},c.msg_sent," "),zdom("font",{id:"zm_recall",style:{fontWeight:"bold",textDecoration:"underline",cursor:"pointer"}},c.msg_recall),zdom("i",{className:"msi-close"})));if(0===zmail.userOptions.composeView){var l=$.q("body").find("#zmComposeWrapper"),a=$.q("body").find(".SC_msg");l.addClass("SC_op3 SC_nopntr"),a.remove()}$.q("body").appendDOM(m),setTimeout(function(){zmRecall.removeMessageBand(),0===zmail.userOptions.composeView&&zmComp.comClose(s)},1e3*zmail.userOptions.undoInterval),$.e(m).find("#zm_recall").off("click").on("click",function(){zmRecall.sendRecallRequest(e,s),zmRecall.removeMessageBand()}),$.e(m).find(".msi-close").off("click").on("click",function(){zmRecall.removeMessageBand()})},sendRecallRequest:function(e,s){var o={mode:"recall",uuid:e},m={uuid:e,obj:s};zmAjq.XHR({u:zmail.conPath+"/recall.do",t:"POST",fn:zmRecall.handleRecallResponse,p:o,ep:m})},handleRecallResponse:function(e,s){zmRecall.removeMessageBand(),e instanceof Object?"success"===e.status?(0===zmail.userOptions.composeView?(zmUtil.composeWindow({mode:"draft",msgId:e.msg,type:"w"}),zmComp.comClose(s.obj)):zmUtil.invokeComposer({msgId:e.msg,mode:"draft"}),_zm.succErrMsg("s",c.msg_success,{hideAfter:6e3})):"failure"===e.status&&_zm.succErrMsg("e",c.msg_failure,{hideAfter:6e3}):_zm.succErrMsg("s",e)},removeMessageBand:function(){$.q("#zm_smsg_discard").remove()}}}();