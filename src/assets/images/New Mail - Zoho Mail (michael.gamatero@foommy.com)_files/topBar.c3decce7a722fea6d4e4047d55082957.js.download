"use strict";!function(){var m,e,i,n,o=function(){return zdom("fragment",null,zdom("div",{className:"secContainer zmDragableTabs "},zdom("ul",{className:"secTabs"}),function(){if(zmail.showFeature)return zdom("div",{className:"zmRestoreTabs zmHideD",id:"jsRestoreTabs"},zdom("i",{className:"msi-reset"}))}()),zdom("ul",{className:"zmAppTab"},zdom("li",null)),zdom("ul",{className:"moreTabContainer zmMoreTab"}))},a=zmTooltip.remove,r="#superAdmin",s={userProfileDom:$.e(zdom("div",{id:"zmUserProfile",className:"zmUserProfile"})),profileTemplate:$.e(zdom("div",{className:"zmUserInfo","data-tooltip":(e="myProfile",zmText.get("topBar",e,i,n))},zdom("img",null)))},t=function(e){var i=s.profileTemplate,n="//"+zmail.urls.contactsURL+"/file?fs=thumb&nocache="+Date.now();i.find("img").attr("src",n),e.appendDOM(i),$.e(i).data({name:"profile"}),$.e(i).off("click").on("click",function(e){e.stopPropagation(),function(){if($.publish("userProfile/show"),a(),!(zmail.isZMOfflineEnabled&&ZMStore.isOffline()&&_zm.isOfflineEnabled()&&_zm.isOfflineLockAvailable())){var l=s.userProfileDom;$.e(l).html(""),$.q(".zmUserProfile").remove(),zmsuite.outerWrapper.appendDOM(l),setTimeout(function(){$.e(l).addClass("shw")},100);var n=zmComponent.loadingBand({container:l[0],type:"pagination"});zmAppLoader.load("userProfileUtil").done(function(){var s={},e=zmail.userProfile.getProfileInfo();s.basicInfo={name:zmail.IAMFullName,emailId:zmail.user.loginName,userId:zmail.zuid,photo:"//"+zmail.urls.contactsURL+"/file?fs=thumb&nocache="+Date.now(),myAccount:zmail.urls.accURL,signOut:zmail.logoutURL};var t=$.e(zdom("div",{className:"zmUPscroll"})),i=zmail.userProfile.init(s,l);zmail.isAusCustomer&&($.e(i.baseInfo).find(r).remove(),$.e(i.baseInfo).find("#zmProfileUserID").remove(),$.e(i.baseInfo).find("#zmProfileMyAccount").remove()),l.appendDOM(i.baseInfo),n(),$.e(l).prependDOM(t),zmComponent.loadingBand({container:t[0],type:"pagination"}),e.done(function(e,i){$.e(t).remove(),s.usage={},s.biz={},i&&i.info&&(zmail.isAdmin=i.info.isAdmin),s.biz.info=i.info;for(var n=i.links.length,o=0;o<n;o++)"UPG"===i.links[o].linkType?s.biz.upgrade=i.links[o]:"SUB"===i.links[o].linkType?s.biz.subscription=i.links[o]:"CP"===i.links[o].linkType?s.biz.controlPanel=i.links[o]:"EMH"===i.links[o].linkType&&(s.biz.mailHosting=i.links[o]);if(s.usage.curUsage=e.curUsage,s.usage.allotedUsage=e.allotedUsage,s.usage.docsUsage=e.docUsage,m=zmail.userProfile.storageInfoCore(s),zmail.isAusCustomer)return!1;zmail.isFuji||!s.biz.info||void 0===s.biz.info.superAdmin?$.e(l).find(r).remove():s.biz.info&&s.biz.info.superAdmin?$.e(l).find("#sText").text(" "+s.biz.info.superAdmin):$.e(l).find(r).remove(),$.e(l).prependDOM(m.userPlan);var a=$.e(l).find(".zmUPscroll");$.e(a).on("scroll",function(){0<a.scrollTop()?$.e(l).addClass("scrolled"):$.e(l).removeClass("scrolled")})})})}}()})};function l(){var e=zmAdHocSettings.getTheme(),i="dark";return"theme1"!==e&&"theme2"!==e&&"theme5"!==e&&"theme7"!==e||(i="light"),i}var c,f=function(e){var i,n,o,a=zdom("div",{id:"zmZHamburger",className:"zmHamburger","data-tooltip":(i="tooltips.allApps",zmText.get("mailsuite",i,n,o))});zmsuite.$el.hamburger=$.e(a),e.appendDOM(a),function(){window.zmwpHMConfig={zIconParent:zmsuite.$el.hamburger[0],zIconTheme:l(),hamburgerMenuParent:zmsuite.$el.zmBody,nightMode:"1"===zmAdHocSettings.getNightMode(),mask:!0,maskType:"black",suite:!0,allApps:!0,arrow:"topRight"};var o=window.location.hostname,e=window.location.protocol+"//"+o+"/biz/getHamburgerMenu.do?version=stable";jQuery.ajax({url:e,type:"GET",error:function(){},success:function(e){var i=e[1];window.zmwpHMConfig=Object.assign(window.zmwpHMConfig,i);var n=o.substring(o.indexOf("."),o.length);window.zmwpHMConfig.zohoHomeDomain="//home"+n,zmail.isRebranded&&(window.zmwpHMConfig.zohoHomeDomain="//"+window.location.hostname+"/zm/home"),zmail.isInternalOrgUser||i.isWorkplaceBundle?(window.zmwpHMConfig.suite=!0,window.zmwpHMConfig.suiteAppList=i.workplaceAppList):!1===i.isWorkplaceBundle&&(window.zmwpHMConfig.suite=!1),window.zmwpHMConfig.isOneZohoBundle=i.isOneZohoBundle,zmail.isInternalOrgUser&&(window.zmwpHMConfig.isOneZohoBundle=!1),window.zmwpHMConfig.zOneConfig={icon:{},csrfName:"zmrcsr",getCsrfValue:function(){return zmAjq.getCookie("zmcsr")}},zmAppLoader.loadFiles("extjs",i.initialJS)}})}()},d=!1,u=function(e){c=$.e(zdom("div",{"data-name":"notification",className:"zmNotiIW"},zdom("i",{className:"msi-bell"}),zdom("i",{className:"msi-clapp"}),zdom("span",{className:"zmBadge bgBadge redBadge"}))),d=!0,$(e).append(c)},z=function(e){var i,n=e.type,o=e.tooltip;zmsuite.$el.offlineSync&&(n&&($.e(zmsuite.$el.offlineSync).children().remove(),$.e(zmsuite.$el.offlineSync).appendDOM("syncInProgress"===(i=n)?zdom("i",{className:"msi-sync zmDoubleIcon syncing"},zdom("i",{className:"path"})):"syncComplete"===i?zdom("i",{className:"msi-sync syncComplete zmDoubleIcon"}):"syncInComplete"===i?zdom("i",{className:"msi-sync zmDoubleIcon syncWarning"}):"offline"===i?zdom("i",{className:"msi-offline"}):void 0),$.e(zmsuite.$el.offlineSync).attr("data-type",n)),o&&$.e(zmsuite.$el.offlineSync).attr("data-tooltip",o))},p=zmail.Utils.FeatureUtil,g=function(){return $.q(".zmTopBar")};window.zmTopBar={initRestoreTabs:function(){$.e(o()).find("#jsRestoreTabs").on("click",function(){zmState.restoreTabs()})},onSearchOpen:function(){zmTab.tabResize({increaseInWidth:!1})},onSearchClose:function(){zmTab.tabResize({increaseInWidth:!0})},customLogo:function(){return $.e(zdom("div",{className:"zmCustomLogo"},zdom("a",{href:"",style:{cursor:"pointer"},"data-homePageLink":!0},zdom("img",{src:"","data-logo":!0}))))},tabDOM:o,updateNotificationCount:function(e){return"string"==typeof e&&"99+"===e&&(e=100),e=parseInt(e),isNaN(parseInt(e))?0:($.publish("zmTopBar/notificationCount",{count:e}),!1===d||(e<=0?c.removeClass("zmNotiOn").removeClass("newNoti"):(c.removeClass("newNoti"),c.hasClass("zmNotiOn")||c.addClass("zmNotiOn"),99<e&&(e="99+"),c.find("span").eq(0).text(e),setTimeout(function(){c.addClass("newNoti")})),void $.publish("/notifications/countChanged",e)))},setHamBurgerTheme:function(){if(window.zmwp)try{window.zmwp.HamburgerMenu.setZIconTheme(l())}catch(e){}},hideUserProfile:function(){m&&m.close()},init:function(){!function(){var e=$.e(o());$.q("#topBar").find(".zmTtab").appendDOM(e);var i=$(".zmTopNav");!1===p.isHidden("notification")&&u(i),!1===p.isHidden("userProfile")&&t(i),zmail.hamburgerDeferred.done(function(){p.isHidden("topbar:apps")||!1!==zmail.fromOtherService||f(i)})}()},toggleSyncIcon:function(e){e.isVisible?$.e(zmsuite.$el.offlineSync).show():$.e(zmsuite.$el.offlineSync).hide()},createAndShowOfflineSyncIcon:function(){if(zmsuite.$el.offlineSync)return 0;zmsuite.$el.offlineSync=zdom("div",{className:"zmSync","data-type":"offline"},zdom("i",{className:"msi-sync zmDoubleIcon syncing"},zdom("i",{className:"path"}))),window.navigator.onLine||z("offline"),zmail.defAccId!==zmail.accId&&$.e(zmsuite.$el.offlineSync).hide(),$.e(zmsuite.$el.offlineSync).on("click",function(){"syncInComplete"===$.e(this).attr("data-type")&&ZMail.IDB.syncer.manualSync()}).on("mouseenter",function(){$.e(zmsuite.$el.offlineSync).hasClass("initialSync")||ZMail.IDB.syncer.loadSyncProgressView(zmsuite.$el.offlineSync)}).on("mouseleave",function(){ZMail.IDB.syncer.removeSyncProgreesiveView(zmsuite.$el.offlineSync)}),$(".zmTopNav").prepend(zmsuite.$el.offlineSync)},updateOfflineSyncIcon:z,topBandElements:function(){var e={},i=g();return e.tab=i.find(".zmTtab")[0],e.profile=i.find(".zmUserInfo"),e.notification=i.find(".zmNotiIW")[0],e.search=i.find(".zmSearch")[0],e},getTopbarElementRef:g}}(),window.__rollupModule=void 0;