"use strict";define([],function(m){var p,u,e=m("zmText"),s=m("zmail.Core.Namespaces"),d=m("zmail.Utils.DOM"),t=s.create("zmSmiley"),h=!1,f=e.get("smiley","smileys.header"),b=function(){return p||(p=e.get("smiley","smileys.tooltips")),u||(u={":smile:":{class:"smile",category:"smiley"},":)":{class:"smile",category:"smiley"},":-)":{class:"smile",category:"smiley"},":happy:":{class:"happy",category:"smiley"},":joy:":{class:"joy",category:"smiley"},":D":{class:"happy",category:"smiley"},":grinning:":{class:"grinning",category:"smiley"},":cool:":{class:"cool",category:"smiley"},"B-)":{class:"cool",category:"smiley"},":love:":{class:"love",category:"smiley"},":xs":{class:"love",category:"smiley"},":curious:":{class:"curious",category:"smiley"},":awe:":{class:"awe",category:"smiley"},":thinking:":{class:"thinking",category:"smiley"},":search:":{class:"search",category:"smiley"},":idea:":{class:"idea",category:"smiley"},"*-:)":{class:"idea",category:"smiley"},":wink:":{class:"wink",category:"smiley"},";-)":{class:"wink",category:"smiley"},";)":{class:"wink",category:"smiley"},":razz:":{class:"razz",category:"smiley"},":P":{class:"razz",category:"smiley"},":p":{class:"razz",category:"smiley"},":relaxed:":{class:"relaxed",category:"smiley"},":angel:":{class:"peace",category:"smiley"},":peace:":{class:"peace",category:"smiley"},"(a)":{class:"peace",category:"smiley"},":blush:":{class:"blush",category:"smiley"},":yummy:":{class:"yummy",category:"smiley"},":yuck:":{class:"yuck",category:"smiley"},":sad:":{class:"sad",category:"smiley"},":(":{class:"sad",category:"smiley"},":-(":{class:"sad",category:"smiley"},":upset:":{class:"upset",category:"smiley"},":anxious:":{class:"anxious",category:"smiley"},"D:":{class:"anxious",category:"smiley"},":worry:":{class:"worry",category:"smiley"},":stressed-out:":{class:"stressed-out",category:"smiley"},":-s":{class:"stressed-out",category:"smiley"},":angry:":{class:"angry",category:"smiley"},"X-(":{class:"angry",category:"smiley"},":tensed:":{class:"tensed",category:"smiley"},":tired:":{class:"tired",category:"smiley"},":bored:":{class:"bored",category:"smiley"},":sleepy:":{class:"sleepy",category:"smiley"},"|-)":{class:"sleepy",category:"smiley"},":jealous:":{class:"jealous",category:"smiley"},":evil:":{class:"evil",category:"smiley"},":facepalm:":{class:"facepalm",category:"smiley"},":doubt:":{class:"doubt",category:"smiley"},":shock:":{class:"shock",category:"smiley"},":o":{class:"shock",category:"smiley"},":O":{class:"shock",category:"smiley"},":faint:":{class:"faint",category:"smiley"},"(6.6)":{class:"faint",category:"smiley"},":headache:":{class:"headache",category:"smiley"},":sick:":{class:"sick",category:"smiley"},"+o(":{class:"sick",category:"smiley"},":injured:":{class:"injured",category:"smiley"},":neutral:":{class:"neutral",category:"smiley"},":smirk:":{class:"smirk",category:"smiley"},":/":{class:"smirk",category:"smiley"},":shutup:":{class:"keep-quiet",category:"smiley"},":keep-quiet:":{class:"keep-quiet",category:"smiley"},":-#":{class:"keep-quiet",category:"smiley"},":feeling-warm:":{class:"feeling-warm",category:"smiley"},":feeling-cold:":{class:"feeling-cold",category:"smiley"},":rofl:":{class:"rofl",category:"smiley"},":tongue-out:":{class:"tongue-out",category:"smiley"},":surprise:":{class:"surprise",category:"smiley"},":nerd:":{class:"nerd",category:"smiley"},":rich:":{class:"rich",category:"smiley"},":shush:":{class:"shush",category:"smiley"},":crying:":{class:"crying",category:"smiley"},":thumbsup:":{class:"thumbsup",category:"smiley"},":thumbsdown:":{class:"thumbsdown",category:"smiley"},":namaste:":{class:"namaste",category:"smiley"},"(y)":{class:"thumbsup",category:"smiley"},"(Y)":{class:"thumbsup",category:"smiley"},":x-":{class:"thumbsup",category:"smiley"},"(n)":{class:"thumbsdown",category:"smiley"},"(N)":{class:"thumbsdown",category:"smiley"},":super:":{class:"super",category:"smiley"},":victory:":{class:"victory",category:"smiley"},":yoyo:":{class:"yoyo",category:"smiley"},":raising-hand:":{class:"raising-hand",category:"smiley"},":clap:":{class:"clap",category:"smiley"},":bye-bye:":{class:"bye-bye",category:"smiley"},":thug:":{class:"fist",category:"smiley"},":fist:":{class:"fist",category:"smiley"},":flexed-biceps:":{class:"biceps",category:"smiley"},":biceps:":{class:"biceps",category:"smiley"},":birthday:":{class:"birthday",category:"celebration"},":champagne:":{class:"champagne",category:"celebration"},":chicken:":{class:"chicken",category:"celebration"},":christmas-tree:":{class:"christmas-tree",category:"celebration"},":eid-mubarak:":{class:"eid-mubarak",category:"celebration"},":fireworks:":{class:"fireworks",category:"celebration"},":gift-box:":{class:"gift-box",category:"celebration"},":kaaba:":{class:"kaaba",category:"celebration"},":new-year:":{class:"new-year",category:"celebration"},":party:":{class:"party",category:"celebration"},":santa-hat:":{class:"santa-hat",category:"celebration"},":coffee-cup:":{class:"coffee-cup",category:"office"},":food:":{class:"food",category:"office"},":peanuts:":{class:"peanuts",category:"office"},":fire:":{class:"fire",category:"office"},":fire-extinguisher:":{class:"fire-extinguisher",category:"office"},":first-aid-box:":{class:"first-aid-box",category:"office"},":medicine:":{class:"medicine",category:"office"},":poop:":{class:"poop",category:"office"},":target:":{class:"target",category:"office"},":task:":{class:"task",category:"office"},":calendar:":{class:"calendar",category:"office"},":report:":{class:"report",category:"office"},":bug:":{class:"bug",category:"office"},":milestone:":{class:"milestone",category:"office"},":security:":{class:"security",category:"office"},":processor:":{class:"processor",category:"office"},":laptop:":{class:"laptop",category:"office"},":server:":{class:"server",category:"office"},":break-boy:":{class:"break-boy",category:"sports"},":break-girl:":{class:"break-girl",category:"sports"},":singing:":{class:"singing",category:"sports"},":man-dancing:":{class:"man-dancing",category:"sports"},":woman-dancing:":{class:"woman-dancing",category:"sports"},":male-cyclist:":{class:"man-cycling",category:"sports"},":man-cycling":{class:"man-cycling",category:"sports"},":male-runner:":{class:"man-running",category:"sports"},":man-running:":{class:"man-running",category:"sports"},":male-swimmer:":{class:"man-swimming",category:"sports"},":man-swimming:":{class:"man-swimming",category:"sports"},":female-cyclist:":{class:"woman-cycling",category:"sports"},":woman-cycling:":{class:"woman-cycling",category:"sports"},":female-runner:":{class:"woman-running",category:"sports"},":woman-running:":{class:"woman-running",category:"sports"},":female-swimmer:":{class:"woman-swimming",category:"sports"},":woman-swimming:":{class:"woman-swimming",category:"sports"},":yoga:":{class:"yoga",category:"sports"},":badminton:":{class:"badminton",category:"sports"},":baseball:":{class:"baseball",category:"sports"},":basketball:":{class:"basketball",category:"sports"},":chess:":{class:"chess",category:"sports"},":cricket:":{class:"cricket",category:"sports"},":flag:":{class:"flag",category:"sports"},":foosball:":{class:"foosball",category:"sports"},":football:":{class:"football",category:"sports"},":golf:":{class:"golf",category:"sports"},":hockey:":{class:"hockey",category:"sports"},":snooker:":{class:"snooker",category:"sports"},":table-tennis:":{class:"table-tennis",category:"sports"},":tennis:":{class:"tennis",category:"sports"},":volleyball:":{class:"volleyball",category:"sports"},":gold-medal:":{class:"gold-medal",category:"sports"},":silver-medal:":{class:"silver-medal",category:"sports"},":bronze-medal:":{class:"bronze-medal",category:"sports"},":archery:":{class:"archery",category:"sports"},":boxing:":{class:"boxing",category:"sports"},":badminton-player:":{class:"badminton-player",category:"sports"},":basketball-player:":{class:"basketball-player",category:"sports"},":batsman:":{class:"batsman",category:"sports"},":batter:":{class:"batter",category:"sports"},":bowler:":{class:"bowler",category:"sports"},":canoeing:":{class:"canoeing",category:"sports"},":chess-player:":{class:"chess-player",category:"sports"},":discus-throw:":{class:"discus-throw",category:"sports"},":diving:":{class:"diving",category:"sports"},":equestrian:":{class:"equestrian",category:"sports"},":fencing:":{class:"fencing",category:"sports"},":football-player:":{class:"football-player",category:"sports"},":female-tennis-player:":{class:"female-tennis-player",category:"sports"},":female-TT-player:":{class:"female-tabletennis-player",category:"sports"},":female-tabletennis-player:":{class:"female-tabletennis-player",category:"sports"},":female-volleyball-player:":{class:"female-volleyball-player",category:"sports"},":golfer:":{class:"golfer",category:"sports"},":gymnast:":{class:"gymnast",category:"sports"},":hockey-player:":{class:"hockey-player",category:"sports"},":hammer-throw:":{class:"hammer-throw",category:"sports"},":hurdles:":{class:"hurdles",category:"sports"},":javelin-throw:":{class:"javelin-throw",category:"sports"},":judo:":{class:"judo",category:"sports"},":long-jump:":{class:"long-jump",category:"sports"},":pole-vault:":{class:"pole-vault",category:"sports"},":running:":{class:"running",category:"sports"},":rhythmic-gymnastics:":{class:"rhythmic-gymnastics",category:"sports"},":shooting:":{class:"shooting",category:"sports"},":shotput-throw:":{class:"shotput-throw",category:"sports"},":high-jump:":{class:"high-jump",category:"sports"},":karate:":{class:"karate",category:"sports"},":male-TT-player:":{class:"male-tabletennis-player",category:"sports"},":male-tabletennis-player:":{class:"male-tabletennis-player",category:"sports"},":male-volleyball-player:":{class:"male-volleyball-player",category:"sports"},":male-tennis-player:":{class:"male-tennis-player",category:"sports"},":pitcher:":{class:"pitcher",category:"sports"},":snooker-player:":{class:"snooker-player",category:"sports"},":weightlifting:":{class:"weightlifting",category:"sports"},":wrestling:":{class:"wrestling",category:"sports"},":bicycle:":{class:"bicycle",category:"travel"},":sports-bike":{class:"sports-bike",category:"travel"},":cruiser-bike:":{class:"cruiser-bike",category:"travel"},":motor-scooter:":{class:"motor-scooter",category:"travel"},":car:":{class:"car",category:"travel"},":taxi:":{class:"taxi",category:"travel"},":bus:":{class:"bus",category:"travel"},":train:":{class:"train",category:"travel"},":police-car:":{class:"police-car",category:"travel"},":ambulance:":{class:"ambulance",category:"travel"},":fire-engine:":{class:"fire-engine",category:"travel"},":aeroplane:":{class:"aeroplane",category:"travel"},":passenger-ship:":{class:"passenger-ship",category:"travel"},":parking:":{class:"parking",category:"travel"},":cafeteria:":{class:"cafeteria",category:"travel"},":garden:":{class:"garden",category:"travel"},":playground:":{class:"playground",category:"travel"},":home:":{class:"home",category:"travel"},":office:":{class:"office",category:"travel"},":library:":{class:"library",category:"travel"},":auditorium:":{class:"auditorium",category:"travel"},":store:":{class:"store",category:"travel"},":mail-room:":{class:"mail-room",category:"travel"},":pharmacy:":{class:"pharmacy",category:"travel"},":gym:":{class:"gym",category:"travel"},":americas:":{class:"americas",category:"travel"},":europe-africa:":{class:"europe-africa",category:"travel"},":asia-pacific:":{class:"asia-pacific",category:"travel"}}),h=!0,u},i=function(e){var s=e.getElementsByClassName("smileyCateg")[0].getBoundingClientRect().height,t=d.selector("#zm_dropDown").children("ul")[0].getBoundingClientRect().height-s;e.getElementsByClassName("smileydivmn")[0].style.height=t+"px",e.style.paddingBottom=s+5+"px"},c=function(l,o,r,i){var c,e=function(){var e;h||b(),e=u;var s,t=[],a="",l="",o=zdom("li",{style:{paddingTop:"5px"}},zdom("div",{className:"smileydivmn"},zdom("div",{className:"smileydiv zmsc_smiley"},zdom("h5",null,f.smiley)),zdom("div",{className:"smileydiv zmsc_celebration"},zdom("h5",null,f.celebration)),zdom("div",{className:"smileydiv zmsc_office"},zdom("h5",null,f.office)),zdom("div",{className:"smileydiv zmsc_sports"},zdom("h5",null,f.sports)),zdom("div",{className:"smileydiv zmsc_travel"},zdom("h5",null,f.travel))),zdom("ul",{className:"smileyCateg"},zdom("li",{className:"sel","data-category":"smiley"},zdom("em",{className:"zcslymsg-smile"})),zdom("li",{"data-category":"celebration"},zdom("em",{className:"zcslymsg-birthday"})),zdom("li",{"data-category":"office"},zdom("em",{className:"zcslymsg-coffee-cup"})),zdom("li",{"data-category":"sports"},zdom("em",{className:"zcslymsg-football"})),zdom("li",{"data-category":"travel"},zdom("em",{className:"zcslymsg-bus"})))),r={smiley:o.getElementsByClassName("zmsc_smiley")[0],celebration:o.getElementsByClassName("zmsc_celebration")[0],office:o.getElementsByClassName("zmsc_office")[0],sports:o.getElementsByClassName("zmsc_sports")[0],travel:o.getElementsByClassName("zmsc_travel")[0]};for(s in e)a=e[s].class,l=e[s].category,-1===t.indexOf(a)&&(t.push(a),r[l].appendChild(zdom("div",{"data-text":s,title:p[a],className:"smlynone"},zdom("div",{className:"zcsly-"+a}))));return o}(),s=$.e(e).find(".smileyCateg li"),y=!1,n=$.e(e).find(".smileydivmn")[0];d.element(s).each(function(){d.element(this).on("click",function(){if(!d.hasClass(this,"sel")){d.element(this).siblings(".sel").removeClass("sel"),d.addClass(this,"sel"),c=d.getData(this,"category"),y=!0;var e=$.e(n).find(".zmsc_"+c),s=0,t=d.element(e).prevAll();if(t.length)for(var a=0,l=t.length;a<l;a++)s+=t[a].offsetHeight;d.element(n).animate({scrollTop:s},function(){y=!1})}})});var t=$.e(e).find(".smlynone");d.element(t).each(function(){d.element(this).on("click",function(e){if(l&&"function"==typeof l){var s="",t="";if(this&&d.getData(this,"text")){var a=d.getData(this,"text");t=u[a].class,s=zmResource.get("image","smileys-2x/"+t+".png")}l(s,p[t])}else o&&function(e,s,t){var a=" "+d.getData(s,"text")+" ";t?t.insertTextAtCursorPosition(a,t.getCursorPosition()):(m("zmMention").insertAtCursor(e,a),d.focus(e));d.unmount(d.selector("#zm_dropDown"),!0)}(r,this,i)})});var g=0;return d.element(n).scroll(function(e){if(!y){var s,t=d.element(this),a=d.element(t).siblings(".smileyCateg").find(".sel"),l=d.element(this).scrollTop(),o=g<l;if((s=o?d.element(a).next():d.element(a).prev()).length){var r,i,c,n=t[0].getBoundingClientRect(),m=n.height-20;c=o?d.getData(s,"category"):d.getData(a,"category"),r=d.selector(".zmsc_"+c,d.element(t))[0].getBoundingClientRect(),i=o?n.bottom-r.top>=m:n.bottom-r.top<m,n.bottom>r.top&&i?(d.removeClass(a,"sel"),d.addClass(s,"sel")):o&&"travel"===c&&Math.abs(r.bottom-n.bottom)<=10&&(d.removeClass(a,"sel"),d.addClass(s,"sel"))}g=l}}),e};return t.showList=function(e,s,t,a){var l=m("zmUtil"),o=c("",!0,e,a);o.getElementsByClassName("smileydivmn")[0].style.height="300px";var r={par:s,showArrow:!0,liDom:[o],id:"zmsmiley",defaultclass:!1,ulClass:"noclass",direction:"right",spanClass:"noPad"};l.showMenu(r),l.stopEvents(t),i(o)},t.replaceText=function(e){h||b();var s,t,a,l="";for(s in u)""!==l?l+="|"+s:l=s;l="("+(l=(l=l.replace(/\|-\)/g,"\\|-)")).replace(/[[\]()*+.?^]/g,function(e){return"\\"+e}))+")";for(var o,r=new RegExp("(\\n|\\s|^)("+l+")+(?=[\\s<\\n]|$)","g"),i=[];null!==(o=r.exec(e));){if((t=$.trim(o[0]))&&(a=u[t])){var c="zcslymsg-"+(a=a.class);i.push({from:o.index,to:r.lastIndex,type:"SMILEY",text:c,title:p[a],class:a})}o.index===r.lastIndex&&r.lastIndex++}return i},t.getSmiley=c,t.setHeight=i,t.init=b,t}),define([],function(e){var s=e("zmail.Core.Namespaces"),t=e("zmail.Components.AutoComplete.System.AbstractTrigger"),a=s.create("zmSmiley"),l=/(?:^[:]{1}([^\d]*))/i,o=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"textChangeAction",value:function(){var e=this._input.getCurrentTypingWord();if(/\s$/.test(e))this.publishNegativeTriggerEvent();else if(l.lastIndex=0,l.exec(e)){var s=e||"";this.publishTriggerEvent({searchToken:s})}else this.publishNegativeTriggerEvent()}}]),s}(t);return a.SmileyTrigger=o,a}),define([],function(e){var s=e("zmail.Core.Namespaces"),t=e("zmail.Components.AutoComplete.System.AbstractListItemModel"),a=s.create("zmSmiley"),l=t.extend({defaults:{text:"",id:"",class:"",selected:!1}});return a.SmileyListItemModel=l,a}),define([],function(e){var s=e("zmail.Core.Namespaces"),c=e("_zm"),t=e("zmail.Components.AutoComplete.System.AbstractListModel"),a=s.create("zmSmiley"),l=t.extend({selectDownItem:function(e){var s=this.getListItems();if(s.length){for(var t=e.offsetWidth,a=c(".","zcsimleys",e)[0].offsetWidth,l=Math.floor(t/a),o=0,r=0,i=s.length;r<i;r++)if(s[r].attributes.selected){o=r+l;break}o>=s.length&&(o=s.length-1),this.selectItem(s[o].attributes.id)}},selectUpItem:function(e){var s=this.getListItems();if(s.length){for(var t=e.offsetWidth,a=c(".","zcsimleys",e)[0].offsetWidth,l=Math.floor(t/a),o=0,r=0,i=s.length;r<i;r++)if(s[r].attributes.selected){o=r-l;break}o<0&&(o=0),this.selectItem(s[o].attributes.id)}}});return a.SmileyListModel=l,a}),define([],function(e){var s=e("zmText"),t=e("zmail.Core.Namespaces"),a=e("zmail.Components.AutoComplete.System.AbstractDataProvider"),m=e("zmSmiley.SmileyListItemModel"),y=t.create("zmSmiley"),g=s.get("smiley","smileys.tooltips"),l=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"searchData",value:function(e){var s=e.searchToken||"",t=y.init(),a=null,l=null;if(a=(e=e||{}).collection,l=e.deferred,s){s=s.toLowerCase();var o,r=Object.keys(t),i=[];if(r&&r.length)for(var c in t)if(o=t[c].class,0===c.toLowerCase().indexOf(s)&&-1===i.indexOf(o)){i.push(o);var n=new m({class:o,id:c,text:g[o]});a.add(n)}l.resolve()}else l.reject()}}]),s}(a);return y.SmileyDataProvider=l,y}),define([],function(e,s){var t=e("zmail.Core.Namespaces"),a=e("zmail.Components.AutoComplete.System.AbstractDataAccumulator"),l=t.create("zmSmiley"),o=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"accumulateData",value:function(e){var s=this;e.collectionList.forEach(function(e){s.dataCollection.add(e.models)}),s.triggerAccumulationComplete()}}]),s}(a);return l.SmileyDataAccumulator=o,l}),define([],function(e,s){var c=e("zmail.Utils.DOM"),t=e("zmail.Core.Namespaces"),a=e("zmail.Components.AutoComplete.System.AbstractListItemComponent"),l=t.create("zmSmiley"),o=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"getTemplate",value:function(){return zdom("div",{ref:"wrapper",className:"zcsimleys",elemtype:"smiley"},zdom("div",{ref:"code",className:"smlglst",purpose:"search"},zdom("em",{ref:"icon"}),zdom("span",{ref:"text"})))}},{key:"render",value:function(e,s){var t=this;s=s||{},t._preRender(e),t.state.searchWord=s.searchWord||t.state.searchWord||"";var a=e.attributes,l="srchbn SC_Psli";t.state.selected?c.addClass(t.refs.code,l):c.removeClass(t.refs.code,l);var o=a.id;c.setAttribute(t.refs.code,{code:o});var r="zcslymsg-"+a.class;c.addClass(t.refs.icon,r);var i=a.text;c.setText(t.refs.text,i),c.setAttribute(t.refs.code,{title:i}),t._postRender()}},{key:"focus",value:function(){var e=this,s=c.element(e.dom).parents(".smilyatdrpdwnmn")[0].getBoundingClientRect(),t=e.dom.getBoundingClientRect(),a=s.top>t.top,l=a||s.bottom<t.bottom;e.focusTimeoutID=setTimeout(function(){e._mounted&&(c.focus(e.refs.wrapper),l&&e.refs.wrapper.scrollIntoView(a))},0)}}]),s}(a);return l.SmileyListItemComponent=o,l}),define([],function(e,s){var t=e("zmail.Core.Namespaces"),a=e("zmail.Components.AutoComplete"),l=e("zmail.Utils.DOM"),o=t.create("zmSmiley"),r=a.System.AbstractListComponent,i=a.Constants.KEYS,c={SELECT_UP:"selectUp",SELECT_DOWN:"selectDown",SELECT_NEXT:"selectNext",SELECT_PREVIOUS:"selectPrevious",ITEM_SELECTION:"itemSelection",ITEM_SELECTION_CURRENT:"itemSelectionCurrent"},n={maxWidth:"780px",overflow:"hidden",bottom:"auto",height:"auto",maxHeight:"auto"},m=function(e){function t(){var e;return babelHelpers.classCallCheck(this,t),e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this)),babelHelpers.assertThisInitialized(e).popUp=!0,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getTemplate",value:function(){return zdom("div",{ref:"wrapper",className:"SC_dd shw smilyatdrpdwnmn",style:n},zdom("div",{ref:"scrollWrapper",className:"smilyatdrpdwn ps-container ps-theme-default ps-active-y"},zdom("div",{ref:"listWrapper",id:"smileys",searchcatagory:"smileys"})))}},{key:"getScrollWrapperDOM",value:function(){return this.refs.scrollWrapper}},{key:"handleListSpaceOverflow",value:function(e){e=e||{};var s=this.getScrollWrapperDOM();l.setStyle(s,{height:e.height+"px"})}},{key:"positionComponent",value:function(e){var s=this.getScrollWrapperDOM();return l.setStyle(s,{height:"auto"}),l.setStyle(this.dom,{height:this.dom.getElementsByClassName("smilyatdrpdwn")[0].offsetHeight+"px"}),babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"positionComponent",this).call(this,e)}},{key:"selectUpListItem",value:function(){l.element(this).triggerHandler(c.SELECT_UP)}},{key:"selectDownListItem",value:function(){l.element(this).triggerHandler(c.SELECT_DOWN)}},{key:"_mouseDownHandler",value:function(e){this.mouseDown=!0,_zm.stopEvents(e)}},{key:"_clickHandler",value:function(e){this.hide()}},{key:"_keyDownHandler",value:function(e,s){var t=this;s=s||{};var a=!0,l=!1;switch(e.which||e.keyCode){case i.LEFT:t.selectPreviousListItem();break;case i.RIGHT:t.selectNextListItem();break;case i.UP:t.selectUpListItem();break;case i.DOWN:t.selectDownListItem();break;case i.ENTER:l=t.choseCurrentSelectedItem(),e.ignoreKeyUp=!0,!l&&s.isProxyEvent&&(a=!1);break;default:a=!1}a&&(e.stopPropagation(),e.preventDefault())}},{key:"show",value:function(){l.addClass(this.dom,"shown"),l.removeClass(this.dom,"hidden"),l.setStyle(this.dom,{visibility:"visible"}),this.visible=!0}},{key:"hide",value:function(){l.addClass(this.dom,"hidden"),l.removeClass(this.dom,"shown"),l.setStyle(this.dom,{visibility:"hidden"}),this.visible=!1}}]),t}(r);return m.EVENTS=c,o.SmileyListComponent=m,o}),define([],function(e){var s=e("zmail.Core.Namespaces"),t=e("zmail.Components.AutoComplete.System.AbstractListItemComponentFactory"),a=e("zmSmiley.SmileyListItemComponent"),l=e("zmSmiley.SmileyListItemModel"),o=s.create("zmSmiley"),r=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"createComponent",value:function(e){if(e instanceof l)return new a}}]),s}(t);return o.SmileyListItemComponentFactory=r,o}),define([],function(d){var e=d("zmail.Core.Namespaces"),h=d("zmail.Components.AutoComplete"),t=d("zmSmiley.SmileyDataProvider"),a=d("zmSmiley.SmileyListComponent"),l=d("zmSmiley.SmileyListItemComponentFactory"),o=d("zmSmiley.SmileyTrigger"),r=d("zmSmiley.SmileyDataAccumulator"),i=d("zmSmiley.SmileyListModel"),f=d("zmail.Utils.DOM"),s=e.create("zmSmiley"),c=h.System.BaseHTMLEditableAutoCompleteSystem,n=h.System.AbstractHTMLTextArea,b={LIST_SHOWN:"listShown",LIST_HIDDEN:"listHidden",CLICK:"click",ITEM_SELECTED:"itemSelected"},m=function(e){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(s).apply(this,arguments))}return babelHelpers.inherits(s,e),babelHelpers.createClass(s,[{key:"initUserInput",value:function(e){var s=e.inputElement;switch(this.inputType){case"1":this.userInput=new n,this.userInput.init(s);break;case"2":this.userInput=s}}},{key:"createDataProviders",value:function(){return[new t]}},{key:"createTrigger",value:function(){return new o}},{key:"createDataAccumulator",value:function(){return new r}},{key:"createListComponent",value:function(){return new a}},{key:"createListItemComponentFactory",value:function(){return new l}},{key:"createListModel",value:function(){return new i}},{key:"invokeDataProviderSearch",value:function(s){var e=this,t=e.dataProviders;e.dataAccumulator.dataCollection.reset(null),e.listModel.resetData(),e.listModel.set({currentSearchKey:s.searchToken},{silent:!0}),e.disable||t.forEach(function(e){e.getData({searchToken:s.searchToken,trigger:s.trigger})})}},{key:"showComponent",value:function(){var e=d("_zm"),s=this,t=s.dataAccumulator.dataCollection,a=t.find(function(e){return e.attributes.selected});a&&a.set({selected:!1});var l=s.listComponent.dom;if(t.length){var o=s.userInput._element.getBoundingClientRect();"2"===s.inputType&&(o=s.userInput.editor.iframe.getBoundingClientRect());var r,i=e(".","zcsimleys",l),c=5<i.length?5:i.length,n=i[0].offsetWidth,m=1===c?10:30,y=Math.floor(o.width/n),g=n*(y=y<c?y:c)+m;g=g>o.width?780:g,f.setStyle(l,{width:g+"px"});var p=s.userInput.getListAnchorBounds();p.top-=s.userInput._element.scrollTop,p.bottom-=s.userInput._element.scrollTop,s.listComponent.positionComponent({anchorBounds:p});var u=l.getBoundingClientRect();Math.abs(p.right-o.right)<u.width&&(r=u.left+(o.right-u.right)+"px"),f.setStyle(l,{left:r}),s.listComponent.listItemComponents[0].model.set("selected",!0),s.listComponent.show(),f.element(s).triggerHandler(b.LIST_SHOWN),h.Utils.autoCompleteListsShown({instance:s})}}},{key:"hideComponent",value:function(){var e=this;e&&e.listComponent&&(e.listComponent.hide(),f.element(e).triggerHandler(b.LIST_HIDDEN),h.Utils.autoCompleteListsShown({instance:e,hide:!0}))}},{key:"listItemSelectAction",value:function(e){var s=this;s.isSelectActionProgress||(s.isSelectActionProgress=!0,f.element(s).triggerHandler(b.ITEM_SELECTED,{item:e.listItemModel}),s.isSelectActionProgress=!1,setTimeout(function(){s.cancelAutoComplete()},0))}},{key:"_componentSelectUpHandler",value:function(){this.listModel.selectUpItem(this.listComponent.dom);var e=this.listModel.getSelectedItem();e&&this.listItemFocusSelectAction({listItemModel:e})}},{key:"_componentSelectDownHandler",value:function(){this.listModel.selectDownItem(this.listComponent.dom);var e=this.listModel.getSelectedItem();e&&this.listItemFocusSelectAction({listItemModel:e})}},{key:"_inputClickHandler",value:function(){this.hideComponent()}},{key:"bindEvents",value:function(){var e=this;e._componentSelectUpHandler=e._componentSelectUpHandler.bind(e),f.element(e.listComponent).on(a.EVENTS.SELECT_UP,e._componentSelectUpHandler),e._componentSelectDownHandler=e._componentSelectDownHandler.bind(e),f.element(e.listComponent).on(a.EVENTS.SELECT_DOWN,e._componentSelectDownHandler),f.element(e.userInput._element).on(b.CLICK,e._inputClickHandler.bind(e)),babelHelpers.get(babelHelpers.getPrototypeOf(s.prototype),"bindEvents",this).call(this)}},{key:"unbindEvents",value:function(){var e=this;f.element(e.listComponent).off(a.EVENTS.SELECT_UP,e._componentSelectUpHandler),f.element(e.listComponent).off(a.EVENTS.SELECT_DOWN,e._componentSelectDownHandler),f.element(e.userInput._element).off(b.CLICK,e._inputClickHandler),babelHelpers.get(babelHelpers.getPrototypeOf(s.prototype),"unbindEvents",this).call(this)}}]),s}(c);return m.EVENTS=b,m.INPUTS={TEXTAREA:"1",EDITOR:"2"},s.SmileyAutoCompleteSystem=m,s}),define([],function(e){var s=e("zmail.Core.Namespaces"),t=e("zmail.Components.AutoComplete"),a=e("zmail.Utils.DOM"),l=s.create("zmSmiley"),o=t.System.AbstractAutoCompleteSystem,r=l.SmileyAutoCompleteSystem;return l.SmileyAutoComplete=function(e){var s=(e=e||{}).input,t=new r;return"TEXTAREA"===a.element(s,!0).nodeName?t.inputType=r.INPUTS.TEXTAREA:s.editor&&(t.inputType=r.INPUTS.EDITOR),t.disable=e.disable||!1,t.inputInstance=e.inputInstance,t.init({inputElement:s,parentDOM:document.body}),a.element(t).on(o.EVENTS.ITEM_SELECTED,e.onSelect),a.element(t).on(r.EVENTS.LIST_SHOWN,e.listShown),a.element(t).on(r.EVENTS.LIST_HIDDEN,e.listHidden),t},l});